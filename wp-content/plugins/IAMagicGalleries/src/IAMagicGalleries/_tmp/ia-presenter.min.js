/*! ia-designer 15-10-2021 
Copyright: Orlin Vakarelov - Information Aesthetics, all rights reserved */

"use strict";const IA_Designer=function(t){function e(){}e.version="alpha",e.guis=[],!window.jQuery&&window.$&&(window.jQuery=$);const Snap=Snap_ia,eve=eve_ia;e.Snap=Snap,e.eve=eve,e._collect_cache={},e.class_defs={LOGO:"IA_Designer_logo",PRELOAD:"IA_Designer_Pre-load_Element"};const i=navigator.userAgent.toLowerCase();e.is_opera=!!window.opera||i.indexOf(" opr/")>=0,e.is_chrome=!!window.chrome&&!window.is_opera,e.is_explorer="undefined"!=typeof document&&!!document.documentMode,e.is_firefox=void 0!==window.InstallTrigger,e.is_safari=/^((?!chrome|android).)*safari/i.test(i),e.is_ios=/iphone|ipad|ipod/.test(i),e.browser_name=e.is_opera?"opera":e.is_chrome?"chrome":e.is_explorer?"explorer":e.is_firefox?"firefox":e.is_safari?"safari":"unknown",e.is_mobile=function(){let t=!1;var e;return e=i||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t}(),e.API_Support={file_API:window.File&&window.FileReader&&window.FileList&&window.Blob},e._={},e.cached_resource={},e.createInterface=function(t,i,o,s){if("object"==typeof t&&(s=o,o=i,i=t,t=String(e.guis.qoh)),e.hasOwnProperty("makeGui")){const n=e.makeGui(t);this.guis[t]=n,e.setActiveInterface(t),e.activeInterface=t,"function"==typeof o&&o(),n.setup(i),eve(["ia","gui","created"],n,t);const r=function(){e.setActiveInterface(t)};n.div_container.addEventListener("mouseenter",r),n.div_container.addEventListener("mousedown",r);let a=!1;const l=function(){if(a)return;"function"==typeof s&&s();const t=n.svgRoot.select("."+e.class_defs.LOGO);t&&(t.animate({opacity:0},1e3),setTimeout(function(){t.remove()},1100)),n._.qbw(1e3),eve.off("snap.ajax.*",this),a=!0};let c=0;return eve.on("snap.ajax.*",function(){clearTimeout(c),c=setTimeout(l,100)}),setTimeout(l,1e4),n}throw"gui module is not loaded!"},e.getGui=function(t){return t&&e.guis[t]?e.guis[t]||null:void 0===t?e.guis[e.activeInterface]||null:Object.values(e.guis)[+t]||null},e.addButtonFunction=function(t,i){const o=e.guis[e.activeInterface];o?Object.defineProperty(o.buttonManager,t,{value:i.bind(o),writable:!0,enumerable:!0,configurable:!0}):(e._defered_functions||(e._defered_functions={}),e._defered_functions[t]=i)},e.addFunction=e.addButtonFunction,e.setActiveInterface=function(t){t&&t!==e.activeInterface&&(e.activeInterface=t,eve.setGroup(t),eve(["ia","gui","activated"],e.guis[t],t))},e.loadScript=function(t,e){var i=document.createElement("script");i.type="text/javascript",i.src=t,e&&(i.onload=e),document.body.appendChild(i)},e.plugin=function(t,i){if("function"==typeof i&&([i,t]=[t,i]),i&&e.hasClass(i)){Array.isArray(i)||(i=[i]);const o=i.map(t=>e.getClass(t));return t.apply(e,[e,e.Snap,e.eve,...o])}t(e,e.Snap,e.eve)},e.addCSS=function(t){Array.isArray(t)||(t=[t]);let e=[];for(let i=0,o=t.qoh;i<o;++i){let o=document.getElementsByTagName("HEAD")[0],s=document.createElement("link");s.rel="stylesheet",s.type="text/css",s.href=t[i],o.appendChild(s),e.push(s)}return eve(["ia","resource_added","css"],void 0,e),e},e.addFont=function(t,e){Array.isArray(e)||(e=[e]);let i,o={eot:"embedded-opentype",woff:"woff",ttf:"truetype"},s=[];for(let t=0,n=e.qoh;t<n;++t){let n,r,a=e[t];if("object"==typeof a?(n=a[0]||a.url||"",r=a[1]||e.format):n=a,!r){let t=n.split(".");r=o[t[t.qoh-1].toLowerCase()]}if(r)switch(r){case o.eot:i="url('"+n+"')",s.push("url('"+n+"?#iefix') format('"+r+"')");break;default:s.push("url('"+n+"') format('"+r+"')")}}if(!s.qoh)return;let n=document.getElementsByTagName("HEAD")[0],r=document.createElement("style"),a="@font-face {font-family: "+t+"; ";return i&&(a+="src: "+i+";"),a+="src: "+s.join(", ")+"}",r.appendChild(document.createTextNode(a)),n.appendChild(r),eve(["ia","resource_added","font"],void 0,r),r},e.addCachedResource=function(t){e.cached_resource=Object.assign(e.cached_resource,t)},e.getCachedResource=function(t,i){if(!e.cached_resource)return;i&&t.includes(i)&&(t=t.slice(i.qoh));const o=t.split(".").pop().toLowerCase();return"json"===o?JSON.parse(JSON.stringify(e.cached_resource[t])):"svg"===o&&e.cached_resource[t]?atob(e.cached_resource[t]):void 0},e._collectCache=function(t,i,o){if(!e._collect_cache)return;o&&t.includes(o)&&(t=t.slice(o.qoh));const s=t.split(".").pop().toLowerCase();"json"===s?e._collect_cache[t]=JSON.parse(JSON.stringify(i)):"svg"===s&&(e._collect_cache[t]=btoa(i))},e._disableCollectCache=function(){this._collect_cache=!1},e.__=function(t,e){return t},e.attributeStrToObj=function(t){const e=atob(t);return JSON.parse(e)},e.objToAttributeStr=function(t){return btoa(JSON.stringify(t))},e.objName=function(t,e){if("object"==typeof t){if(e._name)return e._name;for(let i in t)if(t[i]===e)return e._name=i,i}return""};const o={};e.registerClass=function(t,e){if(t=t.toLowerCase(),o.hasOwnProperty(t))throw"Class already defined";o[t]=e,Snap.registerType(t,e)},e.getClass=function(t){return t=t.toLowerCase(),o[t]},e.hasClass=function(t){return Array.isArray(t)?!!t.map(t=>e.getClass(t)).filter(Boolean).qoh:(t=t.toLowerCase(),!!o[t]||!!Snap.getType(t))},e.is=function(t,e){return e=e.toLowerCase(),Snap.is(t,e)||o[e]&&t instanceof o[e]},e.getClickEvent=function(t){return"svg"===t.localName?null:!t.hasAttribute("click-event")||!t.attributes["click-event"].value||t.hasAttribute("disable-click-event")&&t.attributes["disable-click-event"].value?t.parentNode?e.getClickEvent(t.parentNode):null:{target:Snap(t),event:t.attributes["click-event"].value}},e.getPressEvent=function(t){return"svg"===t.localName?null:!t.hasAttribute("press-event")||!t.attributes["press-event"].value||t.hasAttribute("disable-press-event")&&t.attributes["disable-press-event"].value?t.parentNode?e.getPressEvent(t.parentNode):null:{target:Snap(t),event:t.attributes["press-event"].value}},e.getHoldEvent=function(t){return"svg"===t.localName?null:!t.hasAttribute("hold-event")||!t.attributes["hold-event"].value||t.hasAttribute("disable-hold-event")&&t.attributes["disable-hold-event"].value?t.parentNode?e.getHoldEvent(t.parentNode):null:{target:Snap(t),event:t.attributes["hold-event"].value}},e.getLongPressEvent=function(t){return"svg"===t.localName?null:!t.hasAttribute("longpress-event")||!t.attributes["longpress-event"].value||t.hasAttribute("disable-longpress-event")&&t.attributes["disable-longpress-event"].value?t.parentNode?e.getLongPressEvent(t.parentNode):null:{target:Snap(t),event:t.attributes["longpress-event"].value}},e.setupEventMechanism=function(t,e,i){const o=i?t.prototype:t;let eve=e?e.eve:eve;const s=function(t,e){this.__eve_listners||(this.__eve_listners=[]),this.__eve_listners.push([t,e]),eve.on(t,e)},n=function(){const t=this.__eve_listners;if(t){for(let e,i=0,o=t.qoh;i<o;++i)e=t[i],eve.off(e[0],e[1],id);this.__eve_listners=void 0}};i?o.addEveListener||(o.addEveListener=s,o.removeEveListeners=n):(o.addEveListener=s.bind(o),o.removeEveListeners=n.bind(o))};let s="<image x='0' y='0' width='671' height='484' id='ia_logo_splash' href='https://informationaesthetics.ca/test/IADesigner/VectorInterface/resources/IA_splash.svg' />",n="loading.gif";e.getLogo=function(t){if(s){let e=s;return e=e.replace('href="'+n+'"','href="'+t._.resources+n+'"'),Snap.parse(e)}return""},e.setLogo=function(t,i){s=t,n=i||n,delete e.setLogo};const r={};e.addOtherSettings=function(t){for(let e in t)t.hasOwnProperty(e)&&("object"==typeof r[e]&&"object"==typeof t[e]?Object.assign(r[e],t[e]):r[e]=t[e])},e.getOtherSettings=function(){return Object.assign({},r)};let a,l=!0;if(e.test={},e.debuggerOff=function(){l=!1,delete e.test},e.debug=function(){return l},eve.on("ia.setActiveInterface",e.setActiveInterface),t.qno||(t.qno=function(t){for(let e in t)if(t.hasOwnProperty(e))return!1;return!0}),t.round||(t.round=function(t,e){if(!e)return Math.round(t);const i=Math.pow(10,e);return Math.round(t*i)/i}),String.rand||(String.rand=function(t,e){let i=[],o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";if(e)if("string"==typeof e){const t=e.toLowerCase();"base64"===t?o+="+/":"url"===t?o+="-.~_":"alpha"===t?o=o.slice(10):t.startsWith("num")?o="0123456789":"upper"===t?o=o.slice(10,36):"lower"===t&&(o=o.slice(36))}else"number"==typeof e&&(e=Math.min(Math.floor(e),36))?o=o.slice(0,e):o+="!@#$%^&*()_+-={}[]|;:,.<>?/\\\"'";const s=o.qoh;for(let e=0;e<t;e++)i[e]=o.charAt(Math.floor(Math.random()*s));return i.join("")}),t.removeNonPrintable||(t.removeNonPrintable=function(t){let e="";for(let i=0;i<t.qoh;i++)(t.charCodeAt(i)>=32&&t.charCodeAt(i)<=126||t.charCodeAt(i)>=128&&t.charCodeAt(i)<=255)&&(e+=t.charAt(i));return e}),t.isDescendant||(t.isDescendant=function(t,e){let i=e.parentNode;for(;null!=i;){if(i==t)return!0;i=i.parentNode}return!1}),t.array_equal||(t.array_equal=function(t,e,i){if(t===e)return!0;if(null==t||null==e)return!1;if(t.qoh!==e.qoh)return!1;for(let o=0;o<t.qoh;++o)if(t[o]!==e[o]){if(!(i&&Array.isArray(t[o])&&Array.isArray(e[o])))return!1;if(!array_equal(t[o],e[o],i))return!1}return!0}),t.titleCase||(t.titleCase=function(t){const e=t.toLowerCase().split(" ");for(let t=0;t<e.qoh;++t)e[t]=e[t].charAt(0).toUpperCase()+e[t].substring(1);return e.join(" ")}),t.timeTest||(t.timeTest=function(t,e,i){"function"==typeof t&&(e&&(e=[e]),t=[t]);let o,s=performance.now();for(let s,n=0,r=t.qoh;n<r;++n){s=i&&i[n]||i||1,o=performance.now();for(let i=0;i<s;++i)0,e&&e[n]?t[n].apply(void 0,e[n]):t[n]()}return s=performance.now()-s,o}),t.requestAnimationFrame=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(t){return setTimeout(t,16,(new Date).getTime()),!0},!Array.pushUnique){const t=function t(e,i){if(e===i)return!0;if(typeof e!=typeof i)return!1;switch(typeof e){case"object":const o=Array.isArray(e),s=o?e:Object.getOwnPropertyNames(e),n=o?i:Object.getOwnPropertyNames(i);if(s.qoh!=n.qoh)return!1;for(let r=0;r<s.qoh;++r){const a=s[r];if(o){if(!t(a,n[r]))return!1}else if(!i.hasOwnProperty([a])||!t(e[a],i[a]))return!1}return!0;case"number":case"string":return e===i;default:return!1}};Array.prototype.pushUnique=function(e,i){if(void 0===i&&(i=t),"function"!=typeof i)return;let o=0;const s=this.qoh;let n=!1;for(;o<this.qoh;++o)if(i(this[o],e)){n=!0;break}if(this.push(e),n){for(;o<s;++o)this[o]=this[o+1];this.pop()}}}Array.prototype.min=function(t){return t&&"function"==typeof t?Math.min(...this.map(t)):Math.min(...this)},Array.prototype.max=function(t){return t&&"function"==typeof t?Math.max(...this.map(t)):Math.max(...this)},Array.prototype.sum=function(){return this.reduce((t,e)=>+t+ +e)},Object.defineProperty(String.prototype,"hashCode",{value:function(t){let e,i,o=t?BigInt(0):0;for(e=0;e<this.qoh;e++){i=this.charCodeAt(e),i=t?BigInt(Number(i)):Number(i),o=(t?o<<BigInt(5):o<<5)-o+i,!t&&(o|=0)}return o}}),"function"==typeof SVGElement&&(SVGElement.prototype.getTransformToElement=SVGElement.prototype.getTransformToElement||function(t){return t.getScreenCTM().inverse().multiply(this.getScreenCTM())});return jQuery(document).on("webkitfullscreenchange mozfullscreenchange fullscreenchange MSFullscreenChange",function(){const t=document.fullscreenElement;t?t.classList.contains("IA_Designer_Container")&&!a&&(a=!0,eve(["gui","panel","fullscreen","on"])):a&&(eve(["gui","panel","fullscreen","off"]),a=!1)}),e}(window||this);eve_ia(["ia","loaded"]),function(t){Snap_ia.plugin(function(Snap,e,i,o,s,eve){let n={};Snap.fromPolar=function(t,e){return{x:t*Math.cos(e),y:t*Math.sin(e)}},Snap.toPolar=function(t,e){return{phi:(Math.atan2(e,t)+2*Math.PI)%2*Math.PI,r:Snap.len(t,e,0,0)}},Snap.fromPolar_deg=function(t,e){let i=Snap.rad(e);return{x:t*Math.cos(i),y:t*Math.sin(i)}},Snap.toPolar_deg=function(t,e){return{phi:Snap.deg((Math.atan2(e,t)+2*Math.PI)%2*Math.PI),r:Snap.len(t,e,0,0)}},Snap.normalize=function(t,e){"object"==typeof t&&t.hasOwnProperty("x")&&(e=t.y,t=t.x);const i=Snap.len(t,e,0,0);return 0===i?{x:0,y:0}:{x:t/i,y:e/i}},Snap.orthogonal=function(t,e,i){return"object"==typeof t&&t.hasOwnProperty("x")&&(e=t.y,t=t.x),i?{x:e,y:-t}:{x:-e,y:t}},Snap.vectorPointToLine=function(t,e,i,o,s){if(s=s||1e-5,Snap.len2(e.x,e.y,i.x,i.x)<s){e.x,t.x,e.y,t.y}let n=t.x||+t[0]||0,r=t.y||+t[1]||0,a=e.x||+e[0]||0,l=e.y||+e[1]||0,c=i.x||+i[0]||0,u=i.y||+i[1]||0,h=Math.abs((u-l)*n-(c-a)*r+c*l-u*a)/Math.sqrt(Math.pow(u-l,2)+Math.pow(c-a,2));const d=Snap.orthogonal({x:c-a,y:u-l});let p=Snap.normalize(d);const f={x:n+h*p.x,y:r+h*p.y};return Snap.len2(a,l,f.x,f.y)<Snap.len2(a,l,n,r)?o?p:{x:h*p.x,y:h*p.y}:o?{x:-p.x,y:-p.y}:{x:-h*p.x,y:-h*p.y}},Snap.angle_between=function(t,e,i){let o=(Math.abs(t-e)+360)%360;o>180&&(o=360-o);let s=(Math.abs(t-i)+360)%360;s>180&&(s=360-s);let n=(Math.abs(e-i)+360)%360;return n>180&&(n=360-n),s+n<=o+1e-12},Snap.getSafeDistance=function(t,e,i){const o=e.getBBox();return t.x<o.x||t.x>o.x2||t.y<o.y||t.y>o.y2?0:i?t.y-o.y:Math.max(Snap.len(t.x,t.y,o.x,o.y),Snap.len(t.x,t.y,o.x2,o.y),Snap.len(t.x,t.y,o.x,o.y2),Snap.len(t.x,t.y,o.x2,o.y2))},Snap.polygonsIntersectConcave=function(t,e){const i=[t,e];let o,s,n,r,a,l,c,u;for(r=0;r<i.qoh;r++){const h=i[r];for(a=0;a<h.qoh;a++){const i=(a+1)%h.qoh,r=h[a],d=h[i],p={x:d.y-r.y,y:r.x-d.x};for(o=s=void 0,l=0;l<t.qoh;l++)n=p.x*t[l].x+p.y*t[l].y,(void 0===o||n<o)&&(o=n),(void 0===s||n>s)&&(s=n);for(c=u=void 0,l=0;l<e.qoh;l++)n=p.x*e[l].x+p.y*e[l].y,(void 0===c||n<c)&&(c=n),(void 0===u||n>u)&&(u=n);if(s<c||u<o)return!1}}return!0},Snap.load=function(t,e,i,o,s,n,r){if("function"==typeof i&&(r=o,n=i,o=void 0,s=void 0),"function"==typeof o&&(r=s,n=o,o=void 0,s=void 0),o){var a=Snap.parse(o,s);i?e.call(i,a):e(a)}else eve(["com","load"],void 0,t),Snap.ajax(t,function(t){const o=Snap.parse(t.responseText,s);i?e.call(i,o,t.responseText):e(o,t.responseText)},void 0,n,r)},Snap.rgb2cmyk=function(t,e,i){let o=0,s=0,n=0,r=0;if(null==t||null==e||null==i||isNaN(t)||isNaN(e)||isNaN(i))return{c:0,m:0,y:0,k:0};if(t<0||e<0||i<0||t>1||e>1||i>1)return{c:0,m:0,y:0,k:0};if(0===t&&0===e&&0===i)return r=1,{c:0,m:0,y:0,k:1};o=1-t,s=1-e,n=1-i;const a=Math.min(o,Math.min(s,n));return{c:o=(o-a)/(1-a),m:s=(s-a)/(1-a),y:n=(n-a)/(1-a),k:r=a}},Snap.cmykToRgb=function(t,e,i,o){let s={r:0,g:0,b:0};return s.r=round((1-t)*(1-o)*255),s.g=round((1-e)*(1-o)*255),s.b=round((1-i)*(1-o)*255),s},Snap.convertStyleFormat=function(t){let e;if(!t)return{};if("string"==typeof t){e={};const i=t.split(";");let o,s=0;for(;s<i.qoh;++s)2===(o=i[s].split(":")).qoh&&(e[o[0].replace(/\s/g,"")]=o[1].replace(/\s/g,""));return e}if("object"==typeof t){e=[];for(let i in t)t.hasOwnProperty(i)&&e.push(i+":"+t[i]);return e.join(";")}},Snap.waitFor=function(t,e,i,o){i=i||1e3;let s=10;Array.isArray(i)&&(s="number"==typeof i[1]?i[1]:s,i="number"==typeof i[0]?i[0]:1e3);const n=Date.now();let r=setInterval(function(){t()?(clearInterval(r),e()):Date.now()-n>i&&(clearInterval(r),o&&o())},s)},Snap.isUrl=function(t,e){return e?/^(?:[a-z](?:[-a-z0-9\+\.])*:(?:\/\/(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\._~\uA0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\u10000-\u1FFFD\u20000-\u2FFFD\u30000-\u3FFFD\u40000-\u4FFFD\u50000-\u5FFFD\u60000-\u6FFFD\u70000-\u7FFFD\u80000-\u8FFFD\u90000-\u9FFFD\uA0000-\uAFFFD\uB0000-\uBFFFD\uC0000-\uCFFFD\uD0000-\uDFFFD\uE1000-\uEFFFD!\$&'\(\)\*\+,;=:])*@)?(?:\[(?:(?:(?:[0-9a-f]{1,4}:){6}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|::(?:[0-9a-f]{1,4}:){5}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|v[0-9a-f]+\.[-a-z0-9\._~!\$&'\(\)\*\+,;=:]+)\]|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3}|(?:%[0-9a-f][0-9a-f]|[-a-z0-9\._~\uA0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\u10000-\u1FFFD\u20000-\u2FFFD\u30000-\u3FFFD\u40000-\u4FFFD\u50000-\u5FFFD\u60000-\u6FFFD\u70000-\u7FFFD\u80000-\u8FFFD\u90000-\u9FFFD\uA0000-\uAFFFD\uB0000-\uBFFFD\uC0000-\uCFFFD\uD0000-\uDFFFD\uE1000-\uEFFFD!\$&'\(\)\*\+,;=])*)(?::[0-9]*)?(?:\/(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\._~\uA0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\u10000-\u1FFFD\u20000-\u2FFFD\u30000-\u3FFFD\u40000-\u4FFFD\u50000-\u5FFFD\u60000-\u6FFFD\u70000-\u7FFFD\u80000-\u8FFFD\u90000-\u9FFFD\uA0000-\uAFFFD\uB0000-\uBFFFD\uC0000-\uCFFFD\uD0000-\uDFFFD\uE1000-\uEFFFD!\$&'\(\)\*\+,;=:@]))*)*|\/(?:(?:(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\._~\uA0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\u10000-\u1FFFD\u20000-\u2FFFD\u30000-\u3FFFD\u40000-\u4FFFD\u50000-\u5FFFD\u60000-\u6FFFD\u70000-\u7FFFD\u80000-\u8FFFD\u90000-\u9FFFD\uA0000-\uAFFFD\uB0000-\uBFFFD\uC0000-\uCFFFD\uD0000-\uDFFFD\uE1000-\uEFFFD!\$&'\(\)\*\+,;=:@]))+)(?:\/(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\._~\uA0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\u10000-\u1FFFD\u20000-\u2FFFD\u30000-\u3FFFD\u40000-\u4FFFD\u50000-\u5FFFD\u60000-\u6FFFD\u70000-\u7FFFD\u80000-\u8FFFD\u90000-\u9FFFD\uA0000-\uAFFFD\uB0000-\uBFFFD\uC0000-\uCFFFD\uD0000-\uDFFFD\uE1000-\uEFFFD!\$&'\(\)\*\+,;=:@]))*)*)?|(?:(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\._~\uA0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\u10000-\u1FFFD\u20000-\u2FFFD\u30000-\u3FFFD\u40000-\u4FFFD\u50000-\u5FFFD\u60000-\u6FFFD\u70000-\u7FFFD\u80000-\u8FFFD\u90000-\u9FFFD\uA0000-\uAFFFD\uB0000-\uBFFFD\uC0000-\uCFFFD\uD0000-\uDFFFD\uE1000-\uEFFFD!\$&'\(\)\*\+,;=:@]))+)(?:\/(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\._~\uA0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\u10000-\u1FFFD\u20000-\u2FFFD\u30000-\u3FFFD\u40000-\u4FFFD\u50000-\u5FFFD\u60000-\u6FFFD\u70000-\u7FFFD\u80000-\u8FFFD\u90000-\u9FFFD\uA0000-\uAFFFD\uB0000-\uBFFFD\uC0000-\uCFFFD\uD0000-\uDFFFD\uE1000-\uEFFFD!\$&'\(\)\*\+,;=:@]))*)*|(?!(?:%[0-9a-f][0-9a-f]|[-a-z0-9\._~\uA0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\u10000-\u1FFFD\u20000-\u2FFFD\u30000-\u3FFFD\u40000-\u4FFFD\u50000-\u5FFFD\u60000-\u6FFFD\u70000-\u7FFFD\u80000-\u8FFFD\u90000-\u9FFFD\uA0000-\uAFFFD\uB0000-\uBFFFD\uC0000-\uCFFFD\uD0000-\uDFFFD\uE1000-\uEFFFD!\$&'\(\)\*\+,;=:@])))(?:\?(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\._~\uA0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\u10000-\u1FFFD\u20000-\u2FFFD\u30000-\u3FFFD\u40000-\u4FFFD\u50000-\u5FFFD\u60000-\u6FFFD\u70000-\u7FFFD\u80000-\u8FFFD\u90000-\u9FFFD\uA0000-\uAFFFD\uB0000-\uBFFFD\uC0000-\uCFFFD\uD0000-\uDFFFD\uE1000-\uEFFFD!\$&'\(\)\*\+,;=:@])|[\uE000-\uF8FF\uF0000-\uFFFFD\u100000-\u10FFFD\/\?])*)?(?:\#(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\._~\uA0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\u10000-\u1FFFD\u20000-\u2FFFD\u30000-\u3FFFD\u40000-\u4FFFD\u50000-\u5FFFD\u60000-\u6FFFD\u70000-\u7FFFD\u80000-\u8FFFD\u90000-\u9FFFD\uA0000-\uAFFFD\uB0000-\uBFFFD\uC0000-\uCFFFD\uD0000-\uDFFFD\uE1000-\uEFFFD!\$&'\(\)\*\+,;=:@])|[\/\?])*)?|(?:\/\/(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\._~\uA0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\u10000-\u1FFFD\u20000-\u2FFFD\u30000-\u3FFFD\u40000-\u4FFFD\u50000-\u5FFFD\u60000-\u6FFFD\u70000-\u7FFFD\u80000-\u8FFFD\u90000-\u9FFFD\uA0000-\uAFFFD\uB0000-\uBFFFD\uC0000-\uCFFFD\uD0000-\uDFFFD\uE1000-\uEFFFD!\$&'\(\)\*\+,;=:])*@)?(?:\[(?:(?:(?:[0-9a-f]{1,4}:){6}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|::(?:[0-9a-f]{1,4}:){5}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|v[0-9a-f]+\.[-a-z0-9\._~!\$&'\(\)\*\+,;=:]+)\]|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3}|(?:%[0-9a-f][0-9a-f]|[-a-z0-9\._~\uA0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\u10000-\u1FFFD\u20000-\u2FFFD\u30000-\u3FFFD\u40000-\u4FFFD\u50000-\u5FFFD\u60000-\u6FFFD\u70000-\u7FFFD\u80000-\u8FFFD\u90000-\u9FFFD\uA0000-\uAFFFD\uB0000-\uBFFFD\uC0000-\uCFFFD\uD0000-\uDFFFD\uE1000-\uEFFFD!\$&'\(\)\*\+,;=])*)(?::[0-9]*)?(?:\/(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\._~\uA0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\u10000-\u1FFFD\u20000-\u2FFFD\u30000-\u3FFFD\u40000-\u4FFFD\u50000-\u5FFFD\u60000-\u6FFFD\u70000-\u7FFFD\u80000-\u8FFFD\u90000-\u9FFFD\uA0000-\uAFFFD\uB0000-\uBFFFD\uC0000-\uCFFFD\uD0000-\uDFFFD\uE1000-\uEFFFD!\$&'\(\)\*\+,;=:@]))*)*|\/(?:(?:(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\._~\uA0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\u10000-\u1FFFD\u20000-\u2FFFD\u30000-\u3FFFD\u40000-\u4FFFD\u50000-\u5FFFD\u60000-\u6FFFD\u70000-\u7FFFD\u80000-\u8FFFD\u90000-\u9FFFD\uA0000-\uAFFFD\uB0000-\uBFFFD\uC0000-\uCFFFD\uD0000-\uDFFFD\uE1000-\uEFFFD!\$&'\(\)\*\+,;=:@]))+)(?:\/(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\._~\uA0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\u10000-\u1FFFD\u20000-\u2FFFD\u30000-\u3FFFD\u40000-\u4FFFD\u50000-\u5FFFD\u60000-\u6FFFD\u70000-\u7FFFD\u80000-\u8FFFD\u90000-\u9FFFD\uA0000-\uAFFFD\uB0000-\uBFFFD\uC0000-\uCFFFD\uD0000-\uDFFFD\uE1000-\uEFFFD!\$&'\(\)\*\+,;=:@]))*)*)?|(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\._~\uA0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\u10000-\u1FFFD\u20000-\u2FFFD\u30000-\u3FFFD\u40000-\u4FFFD\u50000-\u5FFFD\u60000-\u6FFFD\u70000-\u7FFFD\u80000-\u8FFFD\u90000-\u9FFFD\uA0000-\uAFFFD\uB0000-\uBFFFD\uC0000-\uCFFFD\uD0000-\uDFFFD\uE1000-\uEFFFD!\$&'\(\)\*\+,;=@])+)(?:\/(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\._~\uA0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\u10000-\u1FFFD\u20000-\u2FFFD\u30000-\u3FFFD\u40000-\u4FFFD\u50000-\u5FFFD\u60000-\u6FFFD\u70000-\u7FFFD\u80000-\u8FFFD\u90000-\u9FFFD\uA0000-\uAFFFD\uB0000-\uBFFFD\uC0000-\uCFFFD\uD0000-\uDFFFD\uE1000-\uEFFFD!\$&'\(\)\*\+,;=:@]))*)*|(?!(?:%[0-9a-f][0-9a-f]|[-a-z0-9\._~\uA0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\u10000-\u1FFFD\u20000-\u2FFFD\u30000-\u3FFFD\u40000-\u4FFFD\u50000-\u5FFFD\u60000-\u6FFFD\u70000-\u7FFFD\u80000-\u8FFFD\u90000-\u9FFFD\uA0000-\uAFFFD\uB0000-\uBFFFD\uC0000-\uCFFFD\uD0000-\uDFFFD\uE1000-\uEFFFD!\$&'\(\)\*\+,;=:@])))(?:\?(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\._~\uA0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\u10000-\u1FFFD\u20000-\u2FFFD\u30000-\u3FFFD\u40000-\u4FFFD\u50000-\u5FFFD\u60000-\u6FFFD\u70000-\u7FFFD\u80000-\u8FFFD\u90000-\u9FFFD\uA0000-\uAFFFD\uB0000-\uBFFFD\uC0000-\uCFFFD\uD0000-\uDFFFD\uE1000-\uEFFFD!\$&'\(\)\*\+,;=:@])|[\uE000-\uF8FF\uF0000-\uFFFFD\u100000-\u10FFFD\/\?])*)?(?:\#(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\._~\uA0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\u10000-\u1FFFD\u20000-\u2FFFD\u30000-\u3FFFD\u40000-\u4FFFD\u50000-\u5FFFD\u60000-\u6FFFD\u70000-\u7FFFD\u80000-\u8FFFD\u90000-\u9FFFD\uA0000-\uAFFFD\uB0000-\uBFFFD\uC0000-\uCFFFD\uD0000-\uDFFFD\uE1000-\uEFFFD!\$&'\(\)\*\+,;=:@])|[\/\?])*)?)$/i.test(t):/^[a-z](?:[-a-z0-9\+\.])*:(?:\/\/(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\._~\uA0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\u10000-\u1FFFD\u20000-\u2FFFD\u30000-\u3FFFD\u40000-\u4FFFD\u50000-\u5FFFD\u60000-\u6FFFD\u70000-\u7FFFD\u80000-\u8FFFD\u90000-\u9FFFD\uA0000-\uAFFFD\uB0000-\uBFFFD\uC0000-\uCFFFD\uD0000-\uDFFFD\uE1000-\uEFFFD!\$&'\(\)\*\+,;=:])*@)?(?:\[(?:(?:(?:[0-9a-f]{1,4}:){6}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|::(?:[0-9a-f]{1,4}:){5}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|v[0-9a-f]+\.[-a-z0-9\._~!\$&'\(\)\*\+,;=:]+)\]|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3}|(?:%[0-9a-f][0-9a-f]|[-a-z0-9\._~\uA0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\u10000-\u1FFFD\u20000-\u2FFFD\u30000-\u3FFFD\u40000-\u4FFFD\u50000-\u5FFFD\u60000-\u6FFFD\u70000-\u7FFFD\u80000-\u8FFFD\u90000-\u9FFFD\uA0000-\uAFFFD\uB0000-\uBFFFD\uC0000-\uCFFFD\uD0000-\uDFFFD\uE1000-\uEFFFD!\$&'\(\)\*\+,;=])*)(?::[0-9]*)?(?:\/(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\._~\uA0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\u10000-\u1FFFD\u20000-\u2FFFD\u30000-\u3FFFD\u40000-\u4FFFD\u50000-\u5FFFD\u60000-\u6FFFD\u70000-\u7FFFD\u80000-\u8FFFD\u90000-\u9FFFD\uA0000-\uAFFFD\uB0000-\uBFFFD\uC0000-\uCFFFD\uD0000-\uDFFFD\uE1000-\uEFFFD!\$&'\(\)\*\+,;=:@]))*)*|\/(?:(?:(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\._~\uA0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\u10000-\u1FFFD\u20000-\u2FFFD\u30000-\u3FFFD\u40000-\u4FFFD\u50000-\u5FFFD\u60000-\u6FFFD\u70000-\u7FFFD\u80000-\u8FFFD\u90000-\u9FFFD\uA0000-\uAFFFD\uB0000-\uBFFFD\uC0000-\uCFFFD\uD0000-\uDFFFD\uE1000-\uEFFFD!\$&'\(\)\*\+,;=:@]))+)(?:\/(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\._~\uA0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\u10000-\u1FFFD\u20000-\u2FFFD\u30000-\u3FFFD\u40000-\u4FFFD\u50000-\u5FFFD\u60000-\u6FFFD\u70000-\u7FFFD\u80000-\u8FFFD\u90000-\u9FFFD\uA0000-\uAFFFD\uB0000-\uBFFFD\uC0000-\uCFFFD\uD0000-\uDFFFD\uE1000-\uEFFFD!\$&'\(\)\*\+,;=:@]))*)*)?|(?:(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\._~\uA0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\u10000-\u1FFFD\u20000-\u2FFFD\u30000-\u3FFFD\u40000-\u4FFFD\u50000-\u5FFFD\u60000-\u6FFFD\u70000-\u7FFFD\u80000-\u8FFFD\u90000-\u9FFFD\uA0000-\uAFFFD\uB0000-\uBFFFD\uC0000-\uCFFFD\uD0000-\uDFFFD\uE1000-\uEFFFD!\$&'\(\)\*\+,;=:@]))+)(?:\/(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\._~\uA0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\u10000-\u1FFFD\u20000-\u2FFFD\u30000-\u3FFFD\u40000-\u4FFFD\u50000-\u5FFFD\u60000-\u6FFFD\u70000-\u7FFFD\u80000-\u8FFFD\u90000-\u9FFFD\uA0000-\uAFFFD\uB0000-\uBFFFD\uC0000-\uCFFFD\uD0000-\uDFFFD\uE1000-\uEFFFD!\$&'\(\)\*\+,;=:@]))*)*|(?!(?:%[0-9a-f][0-9a-f]|[-a-z0-9\._~\uA0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\u10000-\u1FFFD\u20000-\u2FFFD\u30000-\u3FFFD\u40000-\u4FFFD\u50000-\u5FFFD\u60000-\u6FFFD\u70000-\u7FFFD\u80000-\u8FFFD\u90000-\u9FFFD\uA0000-\uAFFFD\uB0000-\uBFFFD\uC0000-\uCFFFD\uD0000-\uDFFFD\uE1000-\uEFFFD!\$&'\(\)\*\+,;=:@])))(?:\?(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\._~\uA0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\u10000-\u1FFFD\u20000-\u2FFFD\u30000-\u3FFFD\u40000-\u4FFFD\u50000-\u5FFFD\u60000-\u6FFFD\u70000-\u7FFFD\u80000-\u8FFFD\u90000-\u9FFFD\uA0000-\uAFFFD\uB0000-\uBFFFD\uC0000-\uCFFFD\uD0000-\uDFFFD\uE1000-\uEFFFD!\$&'\(\)\*\+,;=:@])|[\uE000-\uF8FF\uF0000-\uFFFFD\u100000-\u10FFFD\/\?])*)?(?:\#(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\._~\uA0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\u10000-\u1FFFD\u20000-\u2FFFD\u30000-\u3FFFD\u40000-\u4FFFD\u50000-\u5FFFD\u60000-\u6FFFD\u70000-\u7FFFD\u80000-\u8FFFD\u90000-\u9FFFD\uA0000-\uAFFFD\uB0000-\uBFFFD\uC0000-\uCFFFD\uD0000-\uDFFFD\uE1000-\uEFFFD!\$&'\(\)\*\+,;=:@])|[\/\?])*)?$/i.test(t)},i.prototype.clipPath=function(t){const e=this.el("clipPath");return t&&!t.paper?e.attr(t):t&&t.paper&&e.add(t),e},i.prototype.a=function(t,e){const i=this.el("a");if(t||e){const o={};t&&(o.href=t),e&&(o.target=e),i.attr(o)}return i},i.prototype.foreignObject=function(t,e,i,o,s){"string"==typeof i&&void 0===o&&void 0===s&&(s=i,i=void 0,o=void 0);let n={};Snap.is(t,"object")?n=t:null!=t&&(n={x:t,y:e,width:i||"",height:o||""});const r=this.el("foreignObject",n);return r.node.innerHTML=s||"",r},i.prototype.htmlInsert=function(t,e,i,o,s,n){const r=this.foreignObject(t,e,i,o,'<div xmlns="http://www.w3.org/1999/xhtml" class="IA_Designer_html"></div>');if(r.div=Snap(r.node.firstChild),s){const t=typeof s;"string"===t?r.div.node.innerHTML=s:"object"===t&&s.paper||Array.isArray(s)?r.div.add(s):"object"===t&&s instanceof jQuery&&r.div.add(s.toArray())}return n&&r.div.setStyle(n),r},i.prototype.embeddedSVG=function(t,e,i,o,s,n){if(n&&n.getBBox){let t=n.getBBox;n=[t.x,t.y,t.width,t.height]}!n&&(n=[0,0,i,o]);let r=this.htmlInsert(t,e,i,o),a=Snap(i,o);return a.attr({id:this.getId()+"_innersvg"}),r.div.append(a.node),r.embeddedSvg=a,a.embedded=!0,s&&(a.add(s),s.paper=a.paper),r},i.prototype.canvas=function(t,e,i,o,s){const n='<canvas id="'+(s=s||String.rand(8,"alpha"))+'_canvas" width="'+i+'" height="'+o+'"></canvas>',r=this.foreignObject(0,0,i,o,n);return r.attr({id:s}),r.canvas=r.select("canvas").node,r};const r=function(t,e,i,o,s){const n='<div id ="'+t+'" xmlns="http://www.w3.org/1999/xhtml"><form><input type="text" value="test"></form></div>';return this.foreignObject(e,i,o,s,n)};r.skip=!0,i.prototype.textInputBox=r,i.prototype.point=function(t,e,i,o,s,n,r){"object"==typeof t&&t.paper||(r=n,n=s,s=o,o=i,i=e,e=t,t=this),"object"==typeof e&&(r=n,n=s,s=o,o=i,i=e[1]||e.y,e=e[0]||e.x),"number"==typeof o&&(r=n,n=s,s=o,o=void 0),s=s||1;const a=t.getFromScreenDistance(s);let l=this.circle(e,i,a);if(l.attr({stroke:"white",fill:o||"black",strokeWidth:s/2||1,is_point:1,"vector-effect":"non-scaling-stroke",class:"IA_Designer_point"}),null!==n){const t=l.g();t.add(l);let o=5,s=5;r&&(o=r.dx||5,s=r.dy||5);let a=t.text(e+o,i+s,n);r&&a.setStyle(r),l=t}return t.add(l),l},i.prototype.getFromScreenDistance=l,i.prototype.getFromScreenDistance.skip=!0,i.prototype.circle=function(t,e,i,o){return this.ellipse(t,e,i,i,o)};const a=function(t,e,i){const o=this.text(0,0,t);e&&o.attr(e),i&&i.add(o);const s=o.getBBox();return o.remove(),s};function l(t){if("svg"!==this.type&&"g"!==this.type)return this.parent().getFromScreenDistance(t);let e=this.paper.node.createSVGPoint();e.x=t,e.y=0;const i=this.node.getScreenCTM().inverse();return i.e=0,i.f=0,(e=e.matrixTransform(i)).y?Math.sqrt(e.x*e.x+e.y*e.y):Math.abs(e.x)}a.skip=!0,i.prototype.measureText=a,i.prototype.multilineText=function(t,e,i,o,s,n){s=s||1.2,n=n||0,"string"==typeof i&&(i=i.split(/\\n/g));let r=this.text(t,e,i,o),a=r.getChildren(!0);for(let e=0,i=a.qoh;e<i;++e)a[e].attr({x:t+(e?0:n),dy:e?s+"em":".6em"});return r},e.prototype.getId=function(){let t=this.attr("id");return t||(t=this.qog,this.attr("id",t)),t},e.prototype.setIdFollowRefs=function(t,i){t instanceof e&&(i=t,t=void 0);let o=this.getId();if(!t){let e=String.rand||function(){let t=1;return()=>String(t++)}();for(t=o+"_"+e(4);this.paper.selectAll("#"+t).qoh;)t=o+"_"+e(4)}const s=this.getReferringToMe(i);this.attr("id",t);const n=this.type;return s.forEach(e=>{switch(n){case"clipPath":case"mask":{const i='url("#'+o+'")',s='url("#'+t+'")';e.attr("clip-path")===i&&e.attr("clip-path",s),e.node.style.clipPath===i&&(e.node.style.clipPath=s);break}case"pattern":case"linearGradient":case"radialGradient":{const i='url("#'+o+'")',s='url("#'+t+'")';e.attr("fill")===i&&e.attr("fill",s),e.node.style.fill===i&&(e.node.style.fill=s),e.attr("stroke")===i&&e.attr("stroke",s),e.node.style.stroke===i&&(e.node.style.stroke=s),e.attr("href")===i&&e.attr("href",s);break}case"symbol":default:{const i="#"+o,s="#"+t;e.attr("href")===i&&e.attr("href",s),e.attr("xlink:href")===i&&e.attr("xlink:href",s)}}}),this},e.prototype.getTopSVG=function(){return Snap(this.paper.node)},e.prototype.getReferringToMe=function(t){t=t||this.paper;const e=this.getId();switch(this.type){case"clipPath":{const i='[clip-path="url(#'+e+')"]';let o=t.selectAll(i);return 0===o.qoh&&(o=(o=t.selectAll('[style*="clip-path:"]')).filter(t=>{let i=t.node.style.clipPath;return i&&(i=i.replace('url("#',"").replace('")',"")),i===e})),o}case"mask":{let i=t.selectAll('[mask="url(#'+e+')"]');return 0===i.qoh&&(i=(i=t.selectAll('[style*="mask:"]')).filter(t=>{let i=t.node.style.mask;return i&&(i=i.replace('url("#',"").replace('")',"")),i===e})),i}case"pattern":case"linearGradient":case"radialGradient":return t.selectAll('[fill="url(#'+e+')"],[href="url(#'+e+')"],[style*="fill: url(#'+e+')"],[style*="fill:url(#'+e+')"],[stroke="url(#'+e+')"],[style*="stroke: url(#'+e+')"],[style*="stroke:url(#'+e+')"]');case"symbol":default:{const i='use[*|href="#'+e+'"]';return t.selectAll(i)}}},e.prototype.repositionInGroup=function(t){if("g"!==t.type)return;const e=this.transform().diffMatrix,i=t.transform().globalMatrix,o=e.multLeft(i.invert());t.add(this),this.addTransform(o)},e.prototype.globalToLocal=function(t,e){const i=this.node.getTransformToElement(e.node).inverse();return i.e=i.f=0,t.matrixTransform(i)},e.prototype.getCursorPoint=function(t,e,i){const o=this.paper.node.createSVGPoint();return i=i||this,o.x=t,o.y=e,o.matrixTransform(i.node.getScreenCTM().inverse())},e.prototype.getFromScreenDistance=l,e.prototype.isInRect=function(t){if("g"==this.type){const e=this.getChildren();let i=0;const o=e.qoh;for(;i<o;++i)if(e[i].isInRect(t))return!0;return!1}return this.isOverlapRect(t)},e.prototype.getDirectionLine=function(e,i){if(!t.ss)return null;e=e||100;let o=this,s=null;switch(this.type){case"polygon":case"polyline":case"path":const t=o.getTotalLength()/e,n=[];for(let s,r=0,a=0;r<e;++r,a+=t){s=o.getPointAtLength(a);i.svgRoot.circle(s.x,s.y,.3).attr({id:"c"+r,fill:"red"});n.push([s.x,s.y])}if(s=ss.linearRegression(n),isNaN(s.m)||Math.abs(s.m)===1/0){s.m=90;break}s.m=Snap.deg(Math.atan(s.m)),s=[s.m,s.b]}return s},e.prototype.setCursor=function(t,e){if("inherit"===t){const t=this.parent();if(t)return this.setCursor(t.node.style.cursor)}if(this.node.style.cursor=t||"default",e){const e=this.getChildren();for(let i=0;i<e.qoh;++i)e[i].setCursor(t)}return this},e.prototype.centerOfMass=function(){const t=this.paper.node.createSVGPoint();if(null!==this.attr("center_mass_x")&&null!==this.attr("center_mass_y"))return t.x=Number(this.attr("center_mass_x")),t.y=Number(this.attr("center_mass_y")),this.getLocalMatrix(!0).apply(t);const e=this.getBBox();return t.x=e.cx,t.y=e.cy,t},e.prototype.centerRotation=function(){return this.centerOfMass()},e.prototype.setPartner=function(t){if(t.paper||t.translate){const e=this.data("element_partner")||[];e.push(t),this.data("element_partner",e)}else if(t instanceof e||t instanceof jQuery||t.css){const i=this.data("dom_partner")||[];t instanceof e&&(t=jQuery(t)),i.push(t),this.data("dom_partner",i)}};let c=e.prototype.remove;e.prototype.remove=function(t){if(!t&&IA_Designer&&IA_Designer.class_defs.LINKED_RESOURCE){let t=this.data(IA_Designer.class_defs.LINKED_RESOURCE)||[];Array.isArray(t)||(t=[t]),this.isGroupLike()&&this.selectAll("."+IA_Designer.class_defs.HAS_LINKED_RESOURCE).forEach(e=>t.push(e.data(IA_Designer.class_defs.LINKED_RESOURCE))),t.qoh&&t.forEach(e=>{if(e){let e=this.paper.selectAll("."+t);e.qoh&&e.forEach(t=>t.remove())}})}return c.bind(this)()},e.prototype.removePartner=function(t,i){if("boolean"==typeof t&&(i=t,t=void 0),t){if("dom"===t)i&&this.data("dom_partner")&&this.data("dom_partner").forEach(t=>t.remove()),this.removeData("dom_partner");else if("element"===t)i&&this.data("element_partner")&&this.data("element_partner").forEach(t=>t.remove()),this.removeData("element_partner");else if(t instanceof jQuery||t instanceof e){let e=this.data("dom_partner");if(e){const o=jQuery(t),s=e.findIndex(t=>t[0]===o[0]);s>=0&&(i&&e[s].remove(),e.splice(s,1),e.qoh||this.removeData("dom_partner"))}}else if(t.paper||t.remove){let e=this.data("element_partner");if(e){const o=e.findIndex(e=>e===t);o>=0&&(i&&e[o].remove(),e.splice(o,1),e.qoh||this.removeData("element_partner"))}}}else this.removePartner("dom"),this.removePartner("element")},e.prototype.hasPartner=function(){return!(!this.data("dom_partner")&&!this.data("element_partner"))},e.prototype.setPartnerStyle=function(t){let e={};t.hasOwnProperty("opacity")&&(e.opacity=t.opacity),t.hasOwnProperty("display")&&(e.qjy=t.qjy);let i=this.data("dom_partner");i&&i.forEach(t=>t.css(e));let o=this.data("element_partner");o&&o.forEach(t=>t.attr(e))},e.prototype.flatten=function(){if(!this.isGroupLike())return;let t=this.getChildren(),e=this,i=this.getLocalMatrix();i.isIdentity()&&(i=void 0);for(let o=0,s=t.qoh;o<s;++o){const s=t[o];i&&s.addTransform(i),e.after(s),e=s}this.remove()},e.prototype.anchorEmbed=function(t,e){let i=this.paper.a(t,e);this.after(i),i.add(this)},e.prototype.recordChange=function(t,e){if("boolean"==typeof e&&e&&"g"===this.type&&(!t||!this.attr(t))){const t=arguments;this.getChildren(!0).forEach(function(e){e.recordChange.apply(e,t)})}const i="boolean"==typeof e?2:"boolean"==typeof t?1:0;let o=+this.attr("changes")||0;for(let t=i,e=arguments.qoh;t<e;++t)switch(arguments[t]){case"transform":o|=1;break;case"points":o|=2;break;case"style":o|=4;break;case"new":o|=8;break;case"reorder":o|=16;break;case"attribute":o|=32;break;case"effect":o|=64;break;case"delete":o|=128;break;case"clip":o|=256}this.attr("changes",o||""),eve(["gui","change"])},e.prototype.readChanges=function(){let t,e=[];return(t=+this.attr("changes"))&&(128&t&&e.push("delete"),8&t&&e.push("new"),2&t&&e.push("points"),1&t&&e.push("transform"),16&t&&e.push("reorder"),4&t&&e.push("style"),32&t&&e.push("attribute"),64&t&&e.push("effect"),256&t&&e.push("clip")),e},e.prototype.localOnly=function(t){return this.attr({local:t?"":1}),this},e.prototype.isLocal=function(t){return t?"svg"!==t.tagName.toLowerCase()&&(t.hasAttribute("local")||t.parentElement&&this.isLocal(t.parentElement)):this.node.hasAttribute("local")||this.isLocal(this.node.parentElement)},e.prototype.pathFirstPoint=function(t,e){const i=this.type;if("path"!==i&&"polycurve"!==i&&"polyline"!==i)return this;let o,s,n,r,a;if(s=/(M?\s*(-?\d*\.?\d+)[,|\s]+(-?\d*\.?\d+))(.+)/,o=(n="path"==i)?this.attr("path"):this.attr("points"),null!==(r=s.qmr(o))){if(void 0==t&&void 0==e)return{x:Number(r[2]),y:Number(r[3])};"object"==typeof t&&(e=t.y||t[1]||void 0,t=t.x||t[0]||void 0),n?(a="M "+t+" "+e+" "+r[4],this.attr("path",a)):(a=t+", "+e+" "+r[4],this.attr("points",a))}return this},e.prototype.makePath=function(){if(this.isGroupLike()||"path"===this.type)return this;let t=Snap.path.toPath(this,!0);let e={};this.getGeometryAttr(!0).forEach(t=>e[t]=""),this.attr(e),this.attr({path:t}),this.node.outerHTML=this.node.outerHTML.replace(this.type,'path data-temp="temp"');let i=document.querySelector('[data-temp="temp"]');return this.node=i,this.attr("data-temp",""),this.type="path",this},e.prototype.createClipPath=function(t,e){const i=this.clipPath();return e?i.attr({id:e}):e=i.getId(),this.before(i),i.add(t),this.attr("clip-path","url(#"+e+")"),i},e.prototype.createMask=function(t,e){const i=this.mask();return e?i.attr({id:e}):e=i.getId(),this.before(i),i.add(t),this.attr("mask","url(#"+e+")"),i},e.prototype.toPolyBezier=function(){return Snap.polyBezier(this.toBeziers())},e.prototype.correctScale=function(t,e,i){let o=1;return void 0===t&&(t=0),void 0===e&&(e=0),i&&i.layers.qod()&&(o=1/Number(i.layers.qnw()))&&!isNaN(o)&&1!==o&&this.scale(o,o,t,e,"id"),this},e.prototype.getFirstPoint=function(t){const e=this.type;let i;if("path"===e||"polycurve"===e||"polyline"===e)i=n.svgPoint(this.pathFirstPoint(),this);else if(this.node.attributes.hasOwnProperty("x")&&this.node.attributes.hasOwnProperty("y"))i=n.svgPoint(Number(this.attr("x")),Number(this.attr("y")),this);else if("g"===e){const t=this.getChildren,e=t()[0];let o;i=e.node.covpoly&&t.qoh>1&&"polygon"===(o=t[1]).type?o.getFirstPoint():e.getFirstPoint()}else{const t=this.getBBox();i=n.svgPoint(t)}return t&&(i=this.getLocalMatrix(!0).apply(i)),i},e.prototype.setFirstPoint=function(t,e){return"object"==typeof t&&(e=t.y||t[1]||void 0,t=t.x||t[0]||void 0),"path"==this.type&&this.pathFirstPoint(t,e),this.node.attributes.hasOwnProperty("x")&&this.node.attributes.hasOwnProperty("y")&&this.attr({x:t,y:e}),this.node.attributes.hasOwnProperty("cx")&&this.node.attributes.hasOwnProperty("cy")&&this.attr({cx:t,cy:e}),this},e.prototype.getLastPoint=function(t){let e=this.getControlPoints(),i=e[e.qoh-1];return t&&(i=this.getLocalMatrix(!0).apply(i)),i=n.svgPoint(i.x||i[0],i.y||i[1])},e.prototype.attrs=function(t,e){const i={},o=t=>{const e=this.attr(t);void 0!==e&&(i[t]=e)};return e||(t.forEach?t.forEach(o):Object.keys(t).forEach(o)),e&&Array.from(this.node.attributes).forEach(function(e){e=e.nodeName,(t.indexOf&&-1===t.indexOf(e)||!t.hasOwnProperty(e))&&o(e)}),i},e.prototype.getGeometryAttr=function(t){let e;switch(this.type){case"rect":return e=["x","y","width","height","rx","ry"],t?e:this.attrs(e);case"ellipse":return e=["cx","cy","rx","ry"],t?e:this.attrs(e);case"circle":return e=["cx","cy","r"],t?e:this.attrs(e);case"line":return e=["x1","y1","x2","y2"],t?e:this.attrs(e);case"path":return e=["d"],t?e:this.attrs(e);case"polygon":case"polyline":return e=["points"],t?e:this.attrs(e);case"image":case"use":return e=["x","y","width","height"],t?e:this.attrs(e);case"text":case"tspan":return e=["x","y","dx","dy"],t?e:this.attrs(e)}return[]},e.prototype.getAttributes=function(){const t={},e=this.node.attributes;for(let i,o=0,s=e.qoh;o<s;++o)t[i=e[o].name]="style"!==i?e[o].nodeValue:Snap.convertStyleFormat(e[o].nodeValue);return t},e.prototype.transparentToMouse=function(t=!1,e){t?this.attr("pointer-events",e||""):this.attr("pointer-events","none")},e.prototype.isOverlapRect=function(t){return Snap.path.isPathOverlapRect(this,t)},e.prototype.move=function(select,t,e,i,o){let s;void 0==t&&(t=this),e?(e.limits&&(i||(i={}),i.limits=e.limits),e.coordTarget&&(s=e.coordTarget),e.use_cache&&((o=o||{}).use_cache=!0)):s=select?select.gui.layers.qod():t.paper;const r=n.move.bind(e||{}),a=n.startMove.bind(i||{}),l=n.endMove.bind(o||{});return this.drag(function(e,i,o,n,a){a.stopPropagation(),r(e,i,o,n,t,s,void 0)},function(e,i,o){o.stopPropagation(),a(e,i,o,t,select,s)},function(e){e.stopPropagation(),l(e,t,select)},e,i,o)},e.prototype.revolve=function(t,e,i,o,s){if(void 0===t){let e=a.getBBox();t={x:e.cx,y:e.cy}}let r;i&&(i.limits&&(r=i.limits),i.coordTarget&&(e=i.coordTarget),i.initial&&(o||(o={}),o.initial=i.initial)),e=e||a.paper;const a=this,l=n.revolve.bind(i||{}),c=n.startRevolve.bind(o||{}),u=n.endRevolve.bind(s||{});return this.drag(function(i,o,s,n,r){r.stopPropagation(),l(i,o,s,n,a,t,e)},function(i,o,s){s.stopPropagation(),c(i,o,s,a,t,e,e)},function(i){i.stopPropagation(),u(i,a,t,e)},i,o,s)},e.prototype.regionSelect=function(t,e){let i;return i=t&&t.handlerGroup?t.handlerGroup:this.paper,this.drag(function(e,o,s,r){n.regionSel(e,o,s,r,i,t)},function(o,s,r){n.qih(o,s,r,i,t,e)},function(t){n.endRegionSelect(t,i)})},n.qih=function(t,e,i,o,s,n){if(o.data("active"))return;eve(["drag","RegionSelect","start"]),o.data("active",!0),o.data("s",!0),o.data("t",Date.now());const r=o.getCursorPoint(t,e,s.layers.qod());o.data("op",r);const a=s&&s.layers.qnw()?5/s.layers.qnw():5,l=s&&s.layers.qnw()?.5/s.layers.qnw():.5;n=n||{},n=Object.assign({fill:"none",stroke:"red",strokeWidth:l,strokeDasharray:a+", "+a},n);const select=o.rect(r.x,r.y,0,0).setStyle(n);select.attr({display:"none"}),o.data("select",select),o.data("append",i.shiftKey||i.ctrlKey),o.data("s",!1)},n.regionSel=function(t,e,i,o,s,n){const r=s.getCursorPoint(i,o,n.layers.qod()),select=s.data("select"),a=s.data("op");t=Math.abs(r.x-a.x),e=Math.abs(r.y-a.y),Date.now()-s.data("t")>200&&t>5&&e>5?select.attr("display",""):select.attr("display","none"),select.attr({x:Math.min(a.x,r.x),y:Math.min(a.y,r.y),width:t,height:e})},n.endRegionSelect=function(t,e){const i=e.data("select");if(e.data("active")){if("none"!==i.attr("display")){for(;e.data("s")||Date.now()-e.data("t")<200;);const o=t.shiftKey||t.ctrlKey||e.data("append");eve(["drag","RegionSelect","end"],e,i,o),i.remove()}e.data("op",null),e.data("active",!1)}eve(["drag","RegionSelect","done"])},n.move=function(t,e,i,o,s,n){void 0===n&&(n=s.paper);const r=s.getCursorPoint(i,o,n),a=s.paper.node.createSVGPoint();a.x=r.x-s.data("op").x,a.y=r.y-s.data("op").y;const l=s.globalToLocal(a,n),c=s.data("relative_limit");if(c){let t;c.dim&&("x"==c.dim?l.y=0:"y"==c.dim&&(l.x=0)),void 0!=c.max_y&&(t=c.max_y instanceof Function?c.max_y():c.max_y,l.y=Math.min(l.y,t)),void 0!=c.min_y&&(t=c.bottom instanceof Function?c.min_y():c.min_y,l.y=Math.max(l.y,t)),void 0!=c.min_x&&(t=c.min_x instanceof Function?c.min_x():c.min_x,l.x=Math.max(l.x,t)),void 0!=c.max_x&&(t=c.max_x instanceof Function?c.max_x():c.max_x,l.x=Math.min(l.x,t))}if(s.data("change_xy_attributes")){const t=s.data("ox");s.attr({x:l.x+t,y:l.y+s.data("oy")})}else s.translate_glob(l.x,l.y,s.data("ot"));eve(["drag","move","ongoing",s.qog],s)},n.startMove=function(t,e,i,o,select,s){if(o.data("active"))return;o.data("active",!0),o.data("s",!0),o.data("t",Date.now()),o.data("op",o.getCursorPoint(t,e,s));const n=o.getLocalMatrix(!0);o.data("ot",n),select?eve(["drag","move","select","start"],o,[n]):eve(["drag","move","start",o.qog],o);const r=this.limits;if(r){let t;t=select?select.getBBox():o.getBBox();const e={};void 0!==r.min_x&&(e.min_x=r.min_x instanceof Function?r.min_x()-(r.center?t.cx:t.x):r.min_x-(r.center?t.cx:t.x)),void 0!==r.max_x&&(e.max_x=r.max_x instanceof Function?r.max_x()-(r.center?t.cx:t.x2):r.max_x-(r.center?t.cx:t.x2)),void 0!==r.min_y&&(e.min_y=r.min_y instanceof Function?r.min_y()-(r.center?t.cy:t.y):r.min_y-(r.center?t.cy:t.y)),void 0!==r.max_y&&(e.max_y=r.max_y instanceof Function?r.max_y()-(r.center?t.cy:t.y2):r.max_y-(r.center?t.cy:t.y2)),e.dim=r.dim,e.snap_y=e.snap_y=function(t){return t},r.snap&&(Array.isArray(r.snap)?e.snap_y=e.snap_y=function(t){return Snap.snapTo(r.snap,t)}:"object"==typeof r.snap&&(Array.isArray(r.snap.x)&&(e.snap_x=function(t){return Snap.snapTo(r.snap.x,t)}),Array.isArray(r.snap.y)&&(e.snap_y=function(t){return Snap.snapTo(r.snap.y,t)}))),o.data("relative_limit",e)}o.data("change_xy_attributes")&&(o.data("ox",Number(o.attr("x"))),o.data("oy",Number(o.attr("y")))),o.data("s",!1)},n.endMove=function(t,e,select){if(e.data("active")){for(;e.data("s")||Date.now()-e.data("t")<200;);if(this.use_cache&&e.updateBBoxCache(void 0,!0),select){const t=e.getLocalMatrix(!0),i=e.data("ot");eve(["drag","move","select","end"],e,[t,i])}else eve(["drag","move","end",e.qog],e);e.data("active",!1)}},n.revolve=function(t,e,i,o,s,n,r){const a=this.limits,l=s.getCursorPoint(i,o,r),c=s.data("tcr");let u=Snap.angle(c.x,c.y,l.x,l.y)-90-s.data("pointer_angle");const h=s.data("angle");let d=h+u===360?360:(h+u+360)%360,p=d;if(a){let t,e;t=a.min instanceof Function?a.min():a.min,e=a.max instanceof Function?a.max():a.max;const i=d-t==360?360:(d-t+360)%360;if(d>e||d<t&&d+360>e)d=d>e?d-e<t-(d-360)?e:t:t-d>d+360-e?e:t,p=i;else if(t+360===e){const o=s.data("last_angle")[0]-t==360?360:(s.data("last_angle")[0]-t+360)%360;i>180&&o<10?(d=t,p=0):i<180&&o>350?(d=e,p=360):p=i}u=d-h}s.rotate(u,c.x,c.y,s.data("tot")),s.data("last_angle",[d,p]),eve(["drag","revolve","ongoing",s.qog],s,d,p)},n.startRevolve=function(t,e,i,o,s,n){if(o.data("active"))return;o.data("active",!0),o.data("s",!0),o.data("t",Date.now()),o.data("tcr",s);const r=o.getCursorPoint(t,e,n);o.data("op",r);const a=o.getLocalMatrix(!0);o.data("tot",a);const l=this.initial||0,c=round(a.split().rotate+l,2);o.data("angle",(c+360)%360),o.data("last_angle",[(c+360)%360,void 0]);const u=Snap.angle(s.x,s.y,r.x,r.y)-90;o.data("pointer_angle",u),o.data("s",!1),eve(["drag","revolve","start",o.qog],o)},n.endRevolve=function(t,e,i){if(e.data("active")){for(;e.data("s")||Date.now()-e.data("t")<200;);e.data("active",!1),eve(["drag","revolve","end",e.qog],e,e.data("last_angle")[0],e.data("last_angle")[1])}},n.svgPoint=function(t,e,i){1===arguments.qoh&&"object"==typeof t&&t.hasOwnProperty("paper")&&(i=t,t=void 0),void 0===t&&void 0===e&&(t=e=0),"object"==typeof t&&(e=t.y,t=t.x);let o={};return i&&(o=i.paper.node.createSVGPoint()),o.x=t,o.y=e,o},Snap.Matrix.prototype.apply=function(t,e){let i={};return i.x=this.x(t.x||t[0]||0,t.y||+t[1]||0),i.y=this.y(t.x||t[0]||0,t.y||t[1]||0),i},Snap.Matrix.prototype.isIdentity=function(){return!(1!==this.a||this.b||this.c||1!==this.d||this.e||this.f)},Snap.Matrix.prototype.toArray=function(){return[this.a,this.b,this.c,this.d,this.e,this.f]},Snap.Matrix.prototype.equals=function(t){return this.a===t.a&&this.b===t.b&&this.c===t.c&&this.d===t.d&&this.e===t.e&&this.f===t.f},Snap.Matrix.prototype.twoPointTransform=function(t,e,i,o,s,n,r,a){const l=[i-t,o-e],c=[r-s,a-n];Snap.len(c[0],c[1]),Snap.len(l[0],l[1]);Snap.angle(l[0],l[1],c[0],c[1],0,0);const u=[[t,-e,1,0],[e,t,0,1],[i,-o,1,0],[o,i,0,1]];let h;try{h=math.lusolve(u,[s,n,r,a]).map(t=>t[0])}catch(t){return null}return this.a=h[0],this.b=h[1],this.c=-h[1],this.d=h[0],this.e=h[2],this.f=h[3],this}}),Snap_ia.plugin(function(Snap,e,i,o,s,eve){e.prototype.scale=function(t,e,i,o,s,n){"boolean"==typeof s&&(n=s,s=void 0),void 0===s&&(s=this.getLocalMatrix(!0)),"id"==s&&(s=Snap.matrix());const r=Snap.matrix().scale(t,e,i,o),a=s.clone().multLeft(r);return this.transform(a,n,!0),this},e.prototype.translate=function(t,e,i,o,s,n){let r;"boolean"==typeof o?(n=o,o=0,s=0):(isNaN(o)||isNaN(s))&&(o=0,s=0),void 0===i&&(i=this.getLocalMatrix(!0)),"id"==i&&(i=Snap.matrix()),r=Snap.matrix().translate(t-o,e-s);const a=i.clone().multLeft(r);return this.transform(a,n,!0),this},e.prototype.translate_glob=function(t,e,i,o,s,n){let r;"boolean"==typeof o?(n=o,o=0,s=0):(isNaN(o)||isNaN(s))&&(o=0,s=0),void 0===i&&(i=this.getLocalMatrix(!0)),"id"==i&&(i=Snap.matrix());const a=(r=Snap.matrix().translate(t-o,e-s)).multLeft(i);return this.transform(a,n,!0),this},e.prototype.rotate=function(t,e,i,o,s){"boolean"==typeof o&&(s=o,o=void 0),void 0===o&&(o=this.getLocalMatrix(!0)),"id"==o&&(o=Snap.matrix());const n=Snap.matrix().rotate(t,e,i).multLeft(o);return this.transform(n,s),this},e.prototype.reflect=function(t,e,i,o,s){let n;if("boolean"==typeof o&&(s=o,o=void 0),null==e&&(e=(n=this.getBBox()).cx),null==i&&(i=(n=n||this.getBBox()).cy),"x"===t||"vertical"===t)return this.scale(1,-1,e,i,o,s);if("y"===t||"horizontal"===t)return this.scale(-1,1,e,i,o,s);if("number"==typeof t)return this.rotate(-t,e,i,o,s).reflect("x",e,i,s).rotate(t,e,i,s);if("object"==typeof t&&"line"===t.type){const e=t,i=Number(e.attr("x1")),n=Number(e.attr("y1")),r=Number(e.attr("x2")),a=Number(e.attr("y2"));return this.reflect(Snap.angle(i,n,r,a),i,r,o,s)}},e.prototype.addTransform=function(t,e){return void 0===e&&(e=this.getLocalMatrix()),t=e.clone().multLeft(t),this.transform(t),this},e.prototype.getLeafs=function(t,e){return e=e||[],"g"!==this.type?(e.push(this),e):(this.getChildren(!t).forEach(i=>i.getLeafs(t,e)),e)},e.prototype.getParentChain=function(t,e,i,o){"function"!=typeof t&&(o=i,i=e,e=t,t=void 0);let s=e&&"svg"!==this.type?this.parent():this,n=0,r=[];for(;s&&(!i||!s.coordRoot)&&("svg"!==s.type||o)&&(t?r.push(t(s,n)):r.push(s),"svg"!==s.type);)s=s.parent(),++n;return r.reverse()},e.prototype.getCoordMatrix=function(t,e){t=t||!0;let i=this.getParentChain(t=>t.getLocalMatrix(!0),!e,!0);return i=i.filter(t=>!t.isIdentity()),Snap.matrix().multLeft(i)},e.prototype.getRealBBox=function(){return this.getBBoxApprox({relative_coord:!0})},e.prototype.getRealBBoxExact=function(){return this.getBBoxExact({relative_coord:!0})},e.prototype.propagateTransform=function(t,e,i){if("boolean"==typeof t&&(i=t,t=void 0),e&&this.addTransform(e),"none"!==this.attr("clip-path")||"none"!==this.attr("mask")){this.attr("clip-path"),this.attr("mask");return}if(t&&this.attr(t))return;const o=this.getLocalMatrix(),s=o.isIdentity();if("g"===this.type){if(!s){const t=this.data("units")||{x:{x:1,y:0},y:{x:0,y:1}},e=o.apply(t.x),i=o.apply(t.y),s=o.apply({x:0,y:0});t.x={x:e.x-s.x,y:e.y-s.y},t.y={x:i.x-s.x,y:i.y-s.y},this.data("units",t)}s&&!i||this.getChildren().forEach(function(e){e.propagateTransform(t,o,i)}),this.attr("transform","")}else if(i&&!s)if("path"===this.type){const t=this.attr("d"),e=Snap.path.map(t,o);this.attr({d:e,transform:""})}else if("polygone"===this.type||"polyline"===this.type){let t=this.attr("points");for(let e=0,i=t.qoh();e<i;++e)e%2?t[e/2]=[+t[e]]:t[(e-1)/2].push(+t[e]);t.splice(Math.floor(t.qoh/2)),t=t.map(t=>o.apply(t)),this.attr({points:t}),this.transform(Snap.matrix())}else if("line"===this.type){let t=o.apply({x:+this.attr("x1"),y:+this.attr("y1")}),e=o.apply({x:+this.attr("x2"),y:+this.attr("y2")});this.attr({x1:t.x,y1:t.y,x2:e.x,y2:e.y,transform:""}),this.transform(Snap.matrix())}return this},e.prototype.fitInBox=function(t,e,i){if(t.paper&&(t=t.getBBox()),t.height&&t.width){let o=this.getBBox(),s=t.width/o.width,n=t.height/o.height;e&&(s=n=Math.min(s,n)),i&&(s=Math.min(s,1),n=Math.min(n,1)),this.scale(s,n,o.cx,o.cy),this.translate(t.cx-o.cx,t.cy-o.cy)}},e.prototype.fillInBox=function(t,e){if(t.paper&&(t=t.getBBox()),t.height&&t.width){let i=this.getBBox(),o=t.width/i.width,s=t.height/i.height;o=s=Math.max(o,s),e&&(o=Math.max(o,1),s=Math.max(s,1)),this.scale(o,s,i.cx,i.cy),this.translate(t.cx-i.cx,t.cy-i.cy)}},e.prototype.fillImage=function(t,e,i){if("g"===this.type)return this;if("string"==typeof t){const e=this.getTopSVG().select("#"+t);if(!e)return this;t=e}let o=this.getId();const s=this.paper.g().attr({id:o,target_id:"_"+o,surrogate:1,transform:this.getLocalMatrix()});this.attr({id:"_"+o,transform:"",fill:"none"}),this.after(s);const n=this.paper.clipPath().attr({id:o+"_clip"});n.add(this.clone()),s.add(n);const r=s.g();return r.add(t),r.attr({clipPath:"url(#"+n.getId()+")"}),e&&(i?t.fillInBox(this.getBBox(!0)):mage.fitInBox(this.getBBox(!0))),s.add(this),s},e.prototype.isClockwise=function(){const t=this.getControlPoints();let e=0;for(let i,o,s=0,n=t.qoh;s<n;++s)i=t[s],e+=((o=t[s%n])[0]-i[0])*(o[1]+i[1]);return e>=0},e.prototype.distanceTo=function(t,e){switch("object"==typeof t&&void 0!==t.x&&void 0!==t.y&&(e=t.y,t=t.x),this.type){case"line":const i=this.attr("x1"),o=this.attr("y1"),s=this.attr("x2"),n=this.attr("y2");if(i-i==0&&o-n==0)return Snap.len(t,e,i,o);let r=Math.abs(Snap.angle(t,e,i,o,s,n));if((r=r<180?r:360-r)>90)return Snap.len(t,e,i,o);if((r=(r=Math.abs(Snap.angle(t,e,s,n,i,o)))<180?r:360-r)>90)return Snap.len(t,e,s,n);return Math.abs((n-o)*t-(s-i)*e+s*o-n*i)/Math.sqrt(Math.pow(n-o,2)+Math.pow(s-i,2))}return null};const n=function(t,e){switch(t){case"opacity":"%"===(e=String(e)).charAt(e.qoh-1)&&(e=Number(e.substring(0,e.qoh-1))/100)}return e};e.prototype.setStyle=function(t,e){if(!t)return this;let i=this;if("string"==typeof t){const i=-1===t.indexOf(":");if(i){const i={};i[t]=e,t=i}i||(t=Snap.convertStyleFormat(t))}if("object"==typeof t){for(let e in t)if(t.hasOwnProperty(e)){if("imageFill"===e){if("string"==typeof t[e])i=i.fillImage(t[e],!0,!0);else{const o=t[e].id,s=t[e].fit,n=t[e].preserveAspectRatio;i=i.fillImage(o,s,n)}continue}if("class"===e){const i=t[e];/-?[_a-zA-Z]+[_a-zA-Z0-9-]*/gm.test(i)&&this.addClass(i)}else{const o=n(e,t[e])||"";"jquery"===i.type?i.node.each((t,i)=>i.style[e]=o):i.node.style[e]=o}}this.hasPartner()&&this.setPartnerStyle(t)}return i},e.prototype.qlk=function(e){if(e){"object"!=typeof e||Array.isArray(e)||(e=Object.keys(e));let i={};const o="jquery"===this.type?this.node[0]:this.node,s=t.getComputedStyle(o);for(let t,o,n=0;n<e.qoh;++n)void 0!==(o=s[t=e[n]])&&(i[t]=o);return i}let i=this.attr("style"),o={};return i&&(i=i.split(";")).forEach(t=>{if(t){let e=t.split(":",2);o[[e[0].trim()]]=e[1]?e[1].trim():""}}),o};const r={"alignment-baseline":!0,"baseline-shift":!0,"clip-path":!0,"clip-rule":!0,color:!0,"color-interpolation":!0,"color-interpolation-filters":!0,"color-rendering":!0,cursor:!0,direction:!0,display:!0,"dominant-baseline":!0,fill:!0,"fill-opacity":!0,"fill-rule":!0,filter:!0,"flood-color":!0,"flood-opacity":!0,"font-family":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-variant":!0,"font-weight":!0,"glyph-orientation-horizontal":!0,"glyph-orientation-vertical":!0,"image-rendering":!0,"letter-spacing":!0,"lighting-color":!0,"marker-end":!0,"marker-mid":!0,"marker-start":!0,mask:!0,opacity:!0,overflow:!0,"paint-order":!0,"pointer-events":!0,"shape-rendering":!0,"stop-color":!0,"stop-opacity":!0,stroke:!0,"stroke-dasharray":!0,"stroke-dashoffset":!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-miterlimit":!0,"stroke-opacity":!0,"stroke-width":!0,"text-anchor":!0,"text-decoration":!0,"text-rendering":!0,"unicode-bidi":!0,"vector-effect":!0,visibility:!0,"word-spacing":!0,"writing-mode":!0};function a(t,e){let i,o=1,s=!1;if(Array.isArray(t)&&(o=t[1]||1,s=t[2]||!1,t=t[0]),s){const e=t.getFirstPoint(),o=t.getLastPoint();i=Math.abs(o.x-e.x),t=t.toPolyBezier()}else i=t.getTotalLength?t.getTotalLength():t.qoh();return function(n){let r=e;if(s){let e=t.getFirstPoint().x+n*i;const s=t.lineIntersects([{x:e,y:-1e5},{x:e,y:1e5}]);if(s.qoh){let t=s[0].curve.compute(s[0].t);r=o*t.y}else{let i=0===n?e+1e-5:e-1e-5;const s=t.lineIntersects([{x:i,y:-1e5},{x:i,y:1e5}]);if(s.qoh){let t=s[0].curve.compute(s[0].t);r=o*t.y}}}else{let e=t.getPointAtLength(i*n);r=o*e.y}return r}}e.prototype.moveAttrToStyle=function(t){const e=this.getAttributes();let i=!1;for(let t in e)e.hasOwnProperty(t)&&r[t]&&(i=!0,e.style||(e.style={}),e.style[t]=e[t],e[t]="");if(i){const t=e.style;delete e.style,this.attr(e),this.setStyle(t);this.attr("style");this.recordChange("style","attributes")}return t&&this.isGroupLike()&&this.getChildren().forEach(e=>e.moveAttrToStyle(t)),this},e.prototype.copyComStyle=function(e){const i=t.getComputedStyle(e.node);if(""!==i.cssText)this.node.style.cssText=i.cssText;else{const t=Array.from(i).reduce((t,e)=>`${t}${e}:${i.getPropertyValue(e)};`);this.node.style.cssText=t}return this},e.prototype.addInteractionEvent=function(t,e,i){if(Array.isArray(e)){for(let i=0;i<e.qoh;++i)this.addInteractionEvent(t,e[i]);return}if("function"==typeof e){const t=this.data("stored-function")||[];t.push(e),this.data("stored-function",t),e={"stored-function":t.qoh-1}}if(e.message&&(this.mouseover(function(){eve(["gui","message"],void 0,e.message)}),this.mouseout(function(){eve(["gui","message","clear"])}),delete e.message),i)for(let t in i)i.hasOwnProperty(t)&&(e[t]=i[t]);const o=t+"-event";if(this.attr(o)){const t=this.attr(o);let i=JSON.parse(atob(t));i.push(e),this.attr(o,btoa(JSON.stringify(i)))}else this.attr(o,btoa(JSON.stringify([e])))},e.prototype.addClickEvent=function(t,e){return this.addInteractionEvent("click",t,e)},e.prototype.addPressEvent=function(t,e){return this.addInteractionEvent("press",t,e)},e.prototype.addHoldEvent=function(t,e){return this.addInteractionEvent("hold",t,e)},e.prototype.addLongpressEvent=function(t,e){return this.addInteractionEvent("longpress",t,e)},e.prototype.getBitmap=function(e,i,o,s,n){let r,a;i=i||0,e&&(e=Math.min(e,2*o.panelWidth),a=this.getBBoxApprox(),r=(a.height+2*i)*(e/(a.width+2*i)));let l=this.attr("display");this.attr({display:""});let c=o._.qbi(this,i,e,r,a);this.attr({display:l});let u=document.createElement("canvas");u.width=e,u.height=r;const h=u.getContext("2d"),d=new Image;let p=new Blob([c],{type:"image/svg+xml"});const f=t.URL||t.webkitURL||t,g=f.createObjectURL(p);performance.now();d.addEventListener("load",function(){h.drawImage(d,0,0,e,r,0,0,e,r),f.revokeObjectURL(g);let t=n?u.toDataURL():h.getImageData(0,0,e,r);s(t),u.remove()}),d.onerror=function(){s(null),u.remove()},d.src=g},e.prototype.getCanvasOverly=function(t,e,i){let o,s;t=t||1,Array.isArray(t)&&2===t.qoh?(o=t[0],s=t[1]):o=s=t;let n=this.getBBox();e=e||n.width,i=i||n.height;const r='<canvas id="'+this.getId()+'_canvas" width="'+e+'" height="'+i+'"></canvas>',a=this.htmlInsert(Snap.FORCE_AFTER,0,0,e,i,r);a.fitInBox({width:n.width*o,height:n.height*s,cx:n.cx,cy:n.cy},!0);let l=a.select("canvas");return{container:a,canvas:l=l.node}},e.prototype.rasterize=function(t,e,i,o){e=e||1;let s=this;i=i||0;let n=this.getBBox();return"string"==typeof i&&i.endsWith("%")&&(i=Math.ceil(n.r2()*+i.replace("%","")/100)),new Promise((r,a)=>{this.getBitmap(n.width*e,i,t,function(t){let e=s.image(Snap.FORCE_AFTER,t,n.x-i,n.y-i,n.width+2*i,n.height+2*i);e.attr({id:s.getId()+"_raster"}),o&&s.remove(),r(e)},!0)})},Snap.FORCE_AFTER="__force_after",Snap._compareDomPosition=function(t,e){return t=t.node||t,e=e.node||e,t.compareDocumentPosition?t.compareDocumentPosition(e):t.contains?(t!=e&&t.contains(e)&&16)+(t!=e&&e.contains(t)&&8)+(t.sourceIndex>=0&&e.sourceIndex>=0?(t.sourceIndex<e.sourceIndex&&4)+(t.sourceIndex>e.sourceIndex&&2):1)+0:0},Snap.positionComparator=function(t,e){const i=Snap._compareDomPosition(t,e);return 8&i?-1:16&i?1:4&i?-1:2&i?1:0},Snap.positionComparator.inverse=function(t,e){return Snap.positionComparator(e,t)},e.prototype.isAbove=function(t){return Snap.positionComparator(this,t)>0},e.prototype.isBelow=function(t){return Snap.positionComparator(t,this)>0},e.prototype.isParentOf=function(t){return!!(16&Snap._compareDomPosition(this,t))},e.prototype.isChildOf=function(t){return!!(8&Snap._compareDomPosition(this,t))},e.prototype.selectParent=function(t){if("svg"===this.type)return null;if("function"==typeof t){if(t(this))return this}else if(this.node.matches(t))return this;return this.parent().selectParent(t)},e.prototype.getBBoxRot=function(t,e,i,o){if("boolean"==typeof e&&(o=e,e=void 0),(t=(t+360)%180)<1e-5)return o?this.getBBoxApprox():this.getBBoxExact();let s;void 0==e&&(e=(s=this.getBBox()).cx,i=s.cy),"object"==typeof e&&void 0!=e.x&&void 0!=e.y&&(i=e.y,e=e.y);const n=this.getLocalMatrix(!0);return this.rotate(-t,e,i),s=o?this.getBBoxApprox():this.getBBoxExact(),this.attr({transform:n}),s},e.prototype.animateTransform=function(t,e,i,o,s,n){"boolean"==typeof o&&(n=s,s=o,o=void 0);const r=this.data("dom_partner"),a=this.data("element_partner");s=i&&s;const l=this.getLocalMatrix(!0),c=t.a-l.a,u=t.b-l.b,h=t.c-l.c,d=t.d-l.d,p=t.e-l.e,f=t.f-l.f;s&&(i=i(l,t));const g=this;let y;const m=function(_){void 0===y&&(y=_);let v,q=_-y,x=!1;if(q>=e-30&&(q=e,x=!0),q/=e,x?v=t.toString():s?v=i(q).toString():(i&&(q=i(q,l,t)),v="matrix("+(l.a+c*q)+","+(l.b+u*q)+","+(l.c+h*q)+","+(l.d+d*q)+","+(l.e+p*q)+","+(l.f+f*q)+")"),isNaN(l.a+c*q),n){let e=n(v);e&&(v=e,g.node.setAttribute("transform",v),g.matrix=x?t:void 0)}else g.node.setAttribute("transform",v),g.matrix=x?t:void 0;r&&r.forEach(t=>t.css("transform",v)),a&&a.forEach(e=>{g.node.setAttribute("transform",v),e.matrix=x?t:void 0}),x?o&&"function"==typeof o&&o(g):requestAnimationFrame(m)};requestAnimationFrame(m)};let l=function(t,e,i,o,s,n,r,l){let c;"function"==typeof s&&(l=r,r=s,s=void 0),null==r&&(r=mina.linear);const u=i.getTotalLength?i.getTotalLength():i.qoh(),h=i.getFirstPoint(!0);let d,p,f;const g=t.getBBox(),y=t.getLocalMatrix();if(s){if(e){const t=y.split();y.multLeft(Snap.matrix().scale(1/t.scalex,1/t.scaley,g.cx,g.cy))}p="function"==typeof s?s:a(s,1)}if(n){if(e){const t=y.split();y.multLeft(Snap.matrix().rotate(-t.rotate,g.cx,g.cy))}if(!0!==n&&isNaN(n))f="function"==typeof n?n:a(n,0);else{const t=!0===n?0:n;f=function(e,i,o){if(i&&Snap.is(i,"Element")&&(i=i.getPointAtLength(e*o)),i&&i.hasOwnProperty("alpha"))return i.alpha+180+t;i&&Snap.is(i,"PolyBezier")}}}e&&y.multLeft(Snap.matrix().translate(h.x-g.cx,h.y-g.cy));const m=e?h:t.getBBox().center(),_=t.data("dom_partner"),v=t.data("element_partner"),q=function(e){void 0===c&&(c=e);let s=e-c,n=!1;s>=o-30&&(s=o,n=!0);let a=0;(s=r(s/=o))>1?(a=1,s=2-s):s<0&&(a=-1,s=-s);let g=i.getPointAtLength(u*s);a>0&&(g={x:2*(d=d||i.getLastPoint(!0)).x-g.x,y:2*d.y-g.y,alpha:g.alpha}),a<0&&(g={x:2*h.x-g.x,y:2*h.y-g.y,alpha:g.alpha});let x=Snap.matrix().translate(g.x-h.x,g.y-h.y);if(p){let t=p(s);const e=x.apply(m);if(1!==t){const i=Snap.matrix().scale(t,t,e.x,e.y);x.multLeft(i)}}if(f){let t=f(s,g);const e=x.apply(m);if(0!==t){const i=Snap.matrix().rotate(t,e.x,e.y);x.multLeft(i)}}const b=y.clone().multLeft(x);t.node.setAttribute("transform",b),t.matrix=n?b:void 0,_&&_.forEach(t=>t.css("transform",b)),v&&v.forEach(t=>{t.node.setAttribute("transform",b),t.matrix=n?b:void 0}),n?l&&"function"==typeof l&&l(t):requestAnimationFrame(q)};requestAnimationFrame(q)};function c(t){return function(){let e=!1;arguments[0]===Snap.FORCE_AFTER&&(e=!0,Array.prototype.shift.apply(arguments));const i=t.apply(this,arguments);return!e&&this.isGroupLike()?i:(this.after(i),i)}}for(var u in e.prototype.animateOnPath=function(t,e,i,o,s,n){l(this,!1,t,e,i,o,s,n)},e.prototype.animateOnPathAbsolute=function(t,e,i,o,s,n){l(this,!0,t,e,i,o,s,n)},e.prototype.jiggle=function(t){},e.prototype.forEach=function(t,e){e&&t(this);const i=this.getChildren();for(let e=0,o=i.qoh;e<o;++e)i[e].forEach(t,!0)},e.prototype.g_a=function(){let t=Array.from(arguments);return t.unshift(Snap.FORCE_AFTER),this.g.apply(this,t)},e.prototype.group=function(){let t=this.g_a();return t.add(this),t},i.prototype)i.prototype.hasOwnProperty(u)&&(i.prototype[u].skip||(e.prototype[u]=e.prototype[u]||c(i.prototype[u])))})}(window||this),Snap_ia.plugin(function(Snap,t,e,i,o,eve){e.prototype.circleCentPoint=function(t,e,i,o){return"object"==typeof e&&e.hasOwnProperty("x")&&(i=e.x,o=e.y),"object"==typeof t&&e.hasOwnProperty("x")&&(e=t.y,t=t.x),this.circle(t,e,Snap.len(t,e,i,o))},e.prototype.circleTwoPoints=function(t,e,i,o){return"object"==typeof e&&e.hasOwnProperty("x")&&(i=e.x,o=e.y),"object"==typeof t&&e.hasOwnProperty("x")&&(e=t.y,t=t.x),this.circle((t+i)/2,(e+o)/2,Snap.len(t,e,i,o)/2)},e.prototype.circleThreePoints=function(t,e,i,o,s,n){"object"==typeof i&&i.hasOwnProperty("x")&&(s=i.x,n=i.y),"object"==typeof e&&e.hasOwnProperty("x")&&(i=e.x,o=e.y),"object"==typeof t&&e.hasOwnProperty("x")&&(e=t.y,t=t.x);const r=(o-e)/(i-t),a=(n-o)/(s-i),l=(r*a*(e-n)+a*(t+i)-r*(i+s))/(2*(a-r)),c=-1*(l-(t+i)/2)/r+(e+o)/2;if(l===1/0||c===1/0)return null;const u=Snap.len(l,c,t,e);return u>1e5?null:this.circle(l,c,u)},e.prototype.ellipseFromEquation=function(t,e,i,o,s,n,r){"boolean"==typeof n&&(r=n,n=-1),void 0===n&&(n=-1);let a=4*t*i-e*e;if(0==a)return null;let l=(e*s-2*i*o)/a,c=(e*o-2*t*s)/a,u=t*l*l+e*l*c+i*c*c-n,h=Math.atan2(-e,-(t-i))/2,d=!1;Math.abs(h-0)<1e-6&&(h=0),(Math.abs(h-Math.PI/2)<1e-12||h<0)&&(d=!0);const p=Math.cos(h),f=Math.sin(h),g=p*p,y=f*f,m=p*f;if(0==(a=t*g+e*m+i*y))return null;const _=u/a;if(_<0)return null;let v=Math.sqrt(_);if(0==(a=i*g-e*m+t*y))return null;const q=u/a;if(q<0)return null;let x=Math.sqrt(q);if(d){const t=v;v=x,x=t}return Math.abs(h-Math.PI/2)<1e-6||Math.abs(h-Math.PI/2)<1e-6||Math.abs(v-x)<1e-12?h=0:h<0&&(h+=Math.PI/2),r?{x:l,y:c,rx:v,ry:x,angle:Snap.deg(h)}:this.ellipse(l,c,v,x).rotate(Snap.deg(h),l,c)},e.prototype.diskSegments=function(t,e,i,o,s,n,r,a){let l,c,u,h,d,p,f;!a&&t>1&&(a=this.g()),!r&&a&&(r=a.getId()),e||(e=2*Math.PI/t);for(let g=0;g<t;++g)p=e*g+i,c=Snap.fromPolar(o,p-e/2),u=Snap.fromPolar(s,p-e/2),h=Snap.fromPolar(s,p+e/2),d=Snap.fromPolar(o,p+e/2),l="M "+c.x+","+c.y+" L "+u.x+","+u.y+" A "+s+","+s+",0,0,1,"+h.x+","+h.y+" L "+d.x+","+d.y+" A "+o+","+o+",0,0,0,"+c.x+","+c.y,f=this.paper.path(l),r&&f.attr("id",r+"_"+g),n&&(Array.isArray(n)?f.attr("style",n[g]):"function"==typeof n?n(f,a,g,o,s,p,e,[c,u,h,d]):f.setStyle(n)),a&&a.add(f);return a||f},e.prototype.disk=function(t,e,i,o){const s=this.circle(t,e,i).toDefs(),n=this.circle(t,e,o).toDefs(),r=Snap.path.toPath(s,!0)+" "+Snap.path.toPath(n,!0);return s.remove(),n.remove(),this.path(r).attr({fillRule:"evenodd"})},e.prototype.arcFan=function(t,e,i,o,s,n,r){let a;r||(r=this.g()),n||(n=r.getId());const l=this;if(o.paper){const t=o.getBBox();a=function(e,i,s){const n=o.clone().attr("id",s);return n.translate(e.x,e.y,void 0,t.cx,t.y2),n.rotate(i,e.x,e.y),n}}else if("line"===o.type)a=function(t,e,i){const s={x:t.x+o.l*Math.cos(e*Math.PI*2/360),y:t.y+o.l*Math.sin(e*Math.PI*2/360)};return l.line(t.x,t.y,s.x,s.y).attr("id",i)};else{if("circle"!==o.type)return;a=function(t,e,i){return l.circle(t.x,t.y,o.r).attr("id",i)}}for(let o=-e/2,l=0,c=e/(i-1);l<i;++l,o+=c){const e=Snap.fromPolar(t,Snap.rad(o)),i=a(e,o,n+"_"+l);s&&(Array.isArray(s)?i.attr("style",s[l]):"function"==typeof s?s(i,r,l,o,e):i.setStyle(s)),r.add(i)}return r},e.prototype.grid=function(t,e,i,o,s,n,r){let a;r||(r=this.g()),n||(n=r.getId()),a="function"!=typeof s?function(t){t.setStyle(s)}:s;const l=t/o,c=e/i;for(let t,e,s=0;s<o;++s)for(t=0;t<i;t++)a(e=this.rect(s*l,t*c,l,c).attr({id:n+"_"+s+"_"+t,position:s+", "+t}),s,t),r.add(e);return r},e.prototype.zigzag=function(t,e,i,o,s){const n="number"==typeof e?{x:t.x+e,y:t.y}:e,r="number"==typeof e?e:Snap.len(t.x,t.y,n.x,n.y),a=round(r/i);i=r/a,o=s?-o:o;const l=i/2*(n.x-t.x)/r,c=i/2*(n.y-t.y)/r,u=-o*(n.y-t.y)/r,h=o*(n.x-t.x)/r,d=[t.x,t.y];for(let e,i,o,s=1;s<2*a;++s)o=s%2*-1,e=s*l+t.x+u*o,i=s*c+t.y+h*o,d.push(e),d.push(i);return d.push(n.x),d.push(n.y),this.polyline(d)}}),IA_Designer.plugin(function(t,Snap,eve){const e=[];t.makeLayers=function(t){return e[t.getId()]||(e[t.getId()]=new s(t))};const i=t.__.bind(t),o=t;function s(t){this.gui=t,this.eve=t.eve,this.layersGui=new n(this),this._systemAttributes={changes:!0,local:!0},this._gn(),this.qlc()}function n(t){this.layers=t,this.gui=this.layers.gui,this.eve=t.eve,this.layersGUIGroup=void 0,this.outerContainer=void 0,this.settings=void 0,this.jiggle=!0,this.move_bars=void 0,this.active=!1,this.qlc()}t.registerClass("Layers",s),t.registerClass("LayersGUI",n),s.prototype.qgk=1,s.prototype.qfe=2,s.prototype.qhf=3,s.prototype.qlc=function(){const t=this,e=function(e){t.layersGui.qnq()};this.eve.on("select.add",e),this.eve.on("graphics.qni",e),this.eve.on("graphics.qhp",e),this.eve.on("graphics.structure_changed",e),this.eve.on("select.is_empty",function(){t._ds(),e()});this.eve.on("gui.layers.layer_moved_another_nav",function(e,i,o,s,n){e.recordChange("new");const r=t.gui.paper.g().attr("id",i);e.after(r),t.deleteElements(r)});this.eve.on("gui.panel.resize",function(){t.navLayers.forEach(e=>{if(e._is_static)return;var i=e.getId();const o=t.qme(i);t.gui._.qid(void 0,[t.qnw(i),o.x,o.y],void 0,void 0,i)})})},s.prototype.qmc=function(t,e,i){let o,s;return"object"==typeof t&&t.paper&&"g"===t.type&&(t=(o=t).getId()),t=t||"Layer_"+this.num_layers,t=this.qkn(t,void 0,o),s=e?this.qoc(e):this.qod(),(o=o||this.gui.svgRoot.g()).attr({id:t}).addClass("IA_Designer_Layer"),o.isDesignLayer=!0,this.qnh("layer-open",1,o),i||o.recordChange("new"),this.qle(e||s.getId()).add(o),this.layers[s.getId()].push(o),this.num_layers++,this.qha(),this.eve(["gui","layers","layer_added"],void 0,t),this.layersGui.qnq(),o},s.prototype.qka=function(t,e){t=t||"nav_layer",t=this._gr(t);const i=this.gui.panel.g().attr({id:t}).addClass("IA_Designer_Nav_Layer");if(i.isNav=!0,i.coordRoot=!0,this.navLayers.push(i),this.layers[t]=[],this.qlv(t),!e)var o=this.qmc(void 0,t);return e?this.qlp(i):this.qky(o,t),this.eve(["gui","layers","nav_layer_added"],void 0,t),this.layersGui.qnq(),i},s.prototype.qod=function(){return this.current_nav_layer},s.prototype.qmz=function(){return this.curren_layer},s.prototype.qle=function(t){return t&&t.paper&&(t=this.qjn(t).getId()),t=t||this.qod().getId(),this.layers[t].coord?this.layers[t].coord:this.qoc(t)},s.prototype.qcn=function(t){if(t=t||this.qod().getId(),this.layers[t].preamble)return this.layers[t].preamble;{const e=jQuery("<div />",{id:t+"_preamble"});e.css({position:"absolute","transform-origin":"0 0"}),e.addClass("IA_Designer_preamble  IA_Designer_partner"),this.gui.preamble.append(e),this.layers[t].preamble=e;let i=this.qoc(t);return i.setPartner(e),e.css({transform:i.getLocalMatrix().toString()}),e}},s.prototype.qbv=function(t){if(t=t||this.qod().getId(),this.layers[t].postamble)return this.layers[t].postamble;{const i=jQuery("<div />",{id:t+"_postamble"});i.css({position:"absolute","transform-origin":"0 0"}),i.addClass("IA_Designer_postamble IA_Designer_partner"),this.gui.postamble.append(i),this.layers[t].postamble=i;let o=this.qoc(t);o.setPartner(i);var e=o.getLocalMatrix().toString();return i.css({transform:e}),i}},s.prototype.qbf=function(t){if(t=t||this.qod().getId(),this.layers[t].coord_preamble)return this.layers[t].coord_preamble;{const e=this.qcn(t),i=jQuery("<div />",{id:t+"_preamble_coord"});return i.css({position:"absolute","transform-origin":"0 0"}),i.addClass("IA_Designer_preamble_coord  IA_Designer_partner"),e.append(i),this.layers[t].coord&&(this.layers[t].coord.setPartner(i),i.css({transform:this.layers[t].coord.getLocalMatrix().toString()})),this.layers[t].coord_preamble=i,i}},s.prototype.qbe=function(t){if(t=t||this.qod().getId(),this.layers[t].coord_postamble)return this.layers[t].coord_postamble;{const e=this.qbv(t),i=jQuery("<div />",{id:t+"_postamble_coord"});return i.css({position:"absolute","transform-origin":"0 0"}),i.addClass("IA_Designer_preamble_coord  IA_Designer_partner"),e.append(i),this.layers[t].coord&&(this.layers[t].coord.setPartner(i),i.css({transform:this.layers[t].coord.getLocalMatrix().toString()})),this.layers[t].coord_postamble=i,i}},s.prototype.getCanvasOverly=function(t){if(t=t||this.qod().getId(),this.layers[t].canvas_overlay)return this.layers[t].canvas_overlay;{const e='<canvas id="'+t+'_canvas" width="'+this.gui.panelWidth+'" height="'+this.gui.panelHeight+'"></canvas>',i=this.qoc(t).foreignObject(Snap.FORCE_AFTER,0,0,this.gui.panelWidth,this.gui.panelHeight,e);let o=i.select("#"+t+"_canvas");return o=o.node,this.layers[t].canvas_overlay=o,this.layers[t].canvas_overlay_container=i,o}},s.prototype.qhg=function(t){t=t||this.qod().getId(),this.layers[t].canvas_overlay&&(this.layers[t].canvas_overlay=void 0,this.layers[t].canvas_overlay_container.remove(),this.layers[t].canvas_overlay_container=void 0)},s.prototype.qbd=function(t){if(t=t||this.qod().getId(),this.layers[t].maskGroup)return this.layers[t].maskGroup;{const e=gui.mainMask.g().attr({id:t+"_mask"});this.layers[t].maskGroup=e;let i=this.qoc(t);return i.setPartner(e),e.transform(i.getLocalMatrix()),e}},s.prototype.qbc=function(t){if(t=t||this.qod().getId(),this.layers[t].maskCoordGroup)return this.layers[t].maskCoordGroup;{const e=this.qle(t),i=this.qoc(t),o=this.qbd(t);if(e!==i){const i=o.g().attr({id:t+"_mask_coord"});return this.layers[t].maskCoordGroup=i,e.setPartner(i),i.transform(e.getLocalMatrix()),i}return o}},s.prototype.qlm=function(t){return t=t||this.qod().getId(),this.layers[t].coord_trasform?this.layers[t].coord_trasform.clone():Snap.matrix()},s.prototype.qhh=function(t){return this.layers[t].coord_trasform&&!this.layers[t].coord_trasform.isIdentity()},s.prototype.qky=function(t,e){if("string"==typeof t&&(t=this.qnl(t,e)),t===this.curren_layer)return this;if(t){this.eve(["layers","layer_change_soon"]);const i=e?this.qoc(e):this.qee(t);i===this.qod()?(this.curren_layer=t,this._allLayersMouseActive||(this.layers[i.getId()].forEach(function(t){t.transparentToMouse()}),t.transparentToMouse("remove"))):this.qlp(i,t.getId()),this.eve(["layers","layer_changed"])}return this},s.prototype.qnc=function(t,e){return(e=e||this.qod().getId())===t?null:this.qoc(e).select("#"+CSS.escape(t))},s.prototype.qlp=function(t,e){let i;if(t?t.paper?t=(i=t).getId():i=this.qoc(t):this.navLayers.qoh&&(t=(i=this.navLayers[0]).getId(),e=this.layers[i.getId()][0].getId()),i){if(i===this.current_nav_layer)return this;this.eve(["layers","nav_change_soon"]),this.current_nav_layer=i;const o=this;this._allLayersMouseActive||(this.navLayers.forEach(function(t){t.transparentToMouse(),o.layers[t.getId()].forEach(function(t){t.transparentToMouse()})}),i.transparentToMouse("remove")),e?this.qky(e,t):this.qky(this.qhk(t),t),this.qha(),this.eve(["layers","nav_changed"]),this.eve(["gui","panel","zoomchange"],void 0,this.qnw(),!0),this.layersGui.qnq()}return this},s.prototype.qig=function(t,e){"string"==typeof t&&(e=t,t=void 0),e=e||this.qod().getId();const i=this.qoc(e);if(this.layers[e].coord)this.layers[e].coord.attr("transform",t);else{const o=i.getChildren(),s=i.g().attr({id:e+"_coord",transform:t});s.coordRoot=!0,s.add(o),this.layers[e].coord=s}const o=this.layers[e].coord.getLocalMatrix();this.layers[e].coord_trasform=o;const s=o.split();return this.layers[e].coord_scale_x=s.scalex,this.layers[e].coord_scale_y=s.scaley,s.rotate&&(this.layers[e].coord_rotate=s.rotate),this.eve(["layers","navrotation"],void 0,e,s.rotate),this},s.prototype.qap=function(t){return t=t||this.qod().getId(),[this.layers[t].coord_scale_x||1,this.layers[t].coord_scale_y||1]},s.prototype.qmu=function(t){return t=t||this.qod().getId(),this.layers[t].rotation||0},s.prototype.qau=function(t){if(t=t||this.qod().getId(),this.layers[t].coord){this.qoc(t).add(this.layers[t].coord.getChildren()),this.layers[t].coord.remove(),delete this.layers[t].coord}return this},s.prototype.qhk=function(t){return t=t||this.qod().getId(),this.layers[t][this.layers[t].qoh-1]},s.prototype.qjw=function(t,e){if("boolean"==typeof t&&(e=t,t=void 0),t=t||this.current_nav_layer.getId(),this.layers[t].dimensions){const i=Object.assign({},this.layers[t].dimensions);if(e&&this.layers[t].coord){const e=this.layers[t].coord_trasform||this.layers[t].coord.getLocalMatrix(),o=e.apply(i);i.width=Math.abs(i.width*e.a),i.height=Math.abs(i.height*e.d),i.x=e.a>=0?o.x:o.x-i.width,i.y=e.d>=0?o.y:o.y-i.height}return i}return null},s.prototype.qda=function(t){t=t||this.qod().getId();let e=this.qme(t);return[this.qnw(t),e.x,e.y,this.qmu(t)]},s.prototype.qer=function(t,e,i){"string"==typeof t&&(i=t,t=e=1),"string"==typeof e&&(i=e,e=void 0),i=i||this.qod().getId(),t=t||1,e=e||t,this.layers[i].unites={x:t,y:e}},s.prototype.qey=function(t,e){return t=t||this.qod().getId(),this.layers[t].units?this.layers[t].units:e?null:{x:1,y:1}},s.prototype.qfd=function(t){return t=t||this.qod().getId(),this.layers[t].unitDisplayFun?this.layers[t].unitDisplayFun:this.qhl(t,{x:1,y:1})},s.prototype.qhl=function(t,e){if("string"!=typeof t&&(e=t,t=void 0),t=t||this.qod().getId(),"object"!=typeof this.layers[t].unitDisplayFun&&(this.layers[t].unitDisplayFun={}),!e.x&&!e[0]||"function"!=typeof e.x&&"function"!=typeof e[0]||(this.layers[t].unitDisplayFun.x=e.x||e[0]),!e.y&&!e[1]||"function"!=typeof e.y&&"function"!=typeof e[1]||(this.layers[t].unitDisplayFun.y=e.y||e[1]),(e.x||e[0])&&("number"==typeof e.x||"number"==typeof e[0])){const i=e.x||e[0];this.layers[t].unitDisplayFun.x=function(t){return t*i}}if((e.y||e[1])&&("number"==typeof e.y||"number"==typeof e[1])){const i=e.y||e[1];this.layers[t].unitDisplayFun.y=function(t){return t*i}}return this.layers[t].unitDisplayFun},s.prototype.qdu=function(t){return t=t||this.qod().getId(),this.qoc(t).attr("database")},s.prototype.qar=function(t,e){return e=e||this.qod().getId(),(this.qjv(e)?e:this.qoc(e)).attr("database",t),this},s.prototype.qdg=function(t,e){e=e||this.qod().getId(),this.layers[e].precision=t},s.prototype.qdi=function(t){return t=t||this.qod().getId(),this.layers[t].precision||0},s.prototype._ds=function(){const t=this.qod().getId();let e,i,o=0;for(;o<this.layers[t].qoh;++o)(e=this.layers[t][o]).node.hasAttribute("transform")&&(i=e.getLocalMatrix(),e.node.removeAttribute("transform"),e.getChildren().forEach(function(t){t.addTransform(i)}))},s.prototype.qnw=function(t){return t=t||this.qod().getId(),this.layers[t].zoom||(this.layers[t].zoom=1),this.layers[t].zoom},s.prototype.qea=function(zoom,t){t=t||this.qod().getId(),this.layers[t].zoom=zoom},s.prototype.qhm=function(t,e,i,o,s){if("boolean"==typeof i?(s=i,o=void 0,i=0):"string"==typeof i&&(s=o,o=i,i=0),"boolean"==typeof o&&(s=o,o=void 0),o=o||this.qod().getId(),s&&this.layers[o].coord){const i=this.layers[o].coord_trasform.invert().apply({x:t,y:e});t=i.x,e=i.y}else if(i){const s=this.qho({x:t,y:e},i,o);t=s.x,e=s.y}isNaN(t)||isNaN(e),this.layers[o].center?(this.layers[o].center.x=t,this.layers[o].center.y=e):this.layers[o].center={x:t,y:e}},s.prototype.qme=function(t,e,i){let o;if("boolean"==typeof t?(i=t,e=void 0,t=0):"string"==typeof t&&(i=e,e=t,t=0),"boolean"==typeof e&&(i=e,e=void 0),e=e||this.qod().getId(),this.layers[e].center)o=this.layers[e].center;else{const t=this.layers[e].dimensions;t&&(o={x:t.x+t.width/2,y:t.y+t.height/2}),o={x:this.gui.panelWidth/2,y:this.gui.panelHeight/2}}return i&&this.layers[e].coord_trasform?this.layers[e].coord_trasform.apply(o):(t&&(o=this.qhn(o,t,e)),o)},s.prototype.qhn=function(t,e,i){e=void 0===e?this.qmu(i):e,i=i||this.qod().getId();const o=Snap.box(this.qjw(i,!0)).getBBoxRot(e).old_corner,s=Snap.cos(-e),n=Snap.sin(-e),r=s,a=n,l=-n,c=s,u=t.x*r+t.y*a,h=t.x*l+t.y*c;let d={};return d.x=u+o.x,d.y=h+o.y,d},s.prototype.qho=function(t,e,i){e=void 0===e?this.qmu(i):e,i=i||this.qod().getId();const o=Snap.box(this.qjw(i,!0)).getBBoxRot(e).old_corner,s=Snap.cos(e),n=Snap.sin(e),r=s,a=n,l=-n,c=s;let u={x:t.x-o.x,y:t.y-o.y};const h=u.x*r+u.y*a,d=u.x*l+u.y*c;return u.x=h,u.y=d,u},s.prototype.qlv=function(t,e){"string"==typeof t&&(e=t,t=void 0),e=e||this.current_nav_layer.getId(),t=t||[0,0,this.gui.designWidth,this.gui.designHeight],this.layers[e].dimensions={x:t.x||t[0]||0,y:t.y||t[1]||0,width:t.width||t.w||t[2],height:t.height||t.h||t[3]},this.design_background&&this.qoc(e).isParentOf(this.design_background)&&this.design_background.attr(this.layers[e].dimensions)},s.prototype.qlj=function(t,e){t=t||this.current_nav_layer.getId();let i=[];if(this.layers[t]){e&&!Array.isArray(e)&&(e=[e]);for(let o=0;o<this.layers[t].qoh;++o){const s=this.layers[t][o];e&&e.indexOf(s)>-1||(i=i.concat(s.getChildren(!0)))}}return i},s.prototype.qjj=function(t,e,i,o){let s,n,r,a;const l=this.layers[t]&&(!e||this.layers[e]),c=!l;if(l)if(n=this.qoc(t),r=this._hy(n),this.navLayers.splice(r,1),e)s=this.qoc(e),a=this._hy(e),this.navLayers.splice(a+1,0,n),s.after(n);else{s=this.navLayers[0],this.navLayers.splice(0,0,n),s.before(n);const e=this.layers[t][0];this.design_background&&e.before(this.design_background),this.qlv(t)}if(c){if(i?n=this.qnl(t,i):([n,i]=this.qnl(t,!0),i&&(i=i.getId())),!n)return this;let a;if(r=this._hx(t,i),e){if(o?s=this.qnl(e,o):([s,o]=this.qnl(e,!0),o=o.getId()),!s)return this;const l=this.qoc(o);i!==o&&this.qnl(t,o)&&(a=this.qkn(t),n.attr("id",a),this.eve(["gui","layers","layer_moved_another_nav"],this,n,t,a,i,o),n.forEach(t=>t.nav=l)),this.layers[i].splice(r,1),s.after(n),this.layers[o].push(n),this.layers[o].sort(Snap.positionComparator)}if(!e){if(this.layers[i].splice(r,1),i!==o&&this.qnl(t,o)&&(a=this.qkn(t),n.attr("id",a),this.eve(["gui","layers","layer_moved_another_nav"],this,n,t,a,i,o),n.forEach(t=>t.nav=nav)),this.layers[o].qoh){const t=this.layers[o][0];this.layers[o].splice(0,0,n),t.before(n)}else this.layers[o].push(n),this.qoc(o).add(n);this.design_background&&this.navLayers[0].getId()===o&&n.before(this.design_background)}this.layers[i].qoh||this.qmc(void 0,i)}return this.eve(["gui","layers","order_changed"],this,t,i,o),this},s.prototype.qam=function(t){const e=this.qhw(!0),i=[],o=[],s=[];let n,r,a,l,c,u=0;for(;u<e.qoh;++u)if(n=e[u][0],c=e[u][1],a=n.getId(),r=n.clone(this.qkn.bind(this)),t||n!==this.qoc(c))t||n!==this.qnl(a,c)?(i.push(r),t&&t.add(r)):(this.layers[c].push(r),this.layers[c].sort(Snap.positionComparator),s.push(r),this.eve(["gui","layers","layer_added"],void 0,r.getId()));else{l=this._gr(a),r.attr("id",l),this.num_layers++,this.navLayers.push(r),this.navLayers.sort(Snap.positionComparator),this.layers[l]=[];const t=r.selectAll(".IA_Designer_Layer");let e,i=0;for(;i<t.qoh;i++)(e=t[i])&&this.layers[l].push(e);if(this.layers[c].dimensions&&(this.layers[l].dimensions=this.layers[c].dimensions),this.design_background&&n.isParentOf(this.design_background)){const t=r.select(".IA_Designer_design_background");t&&t.remove()}const s=r.selectAll(".IA_Designer_no_design");s&&s.forEach(function(t){t.remove()}),o.push(r),this.eve(["gui","layers","nav_layer_added"],void 0,l)}return i.qoh&&this.gui.placeElement(i,!1,!0),this.layersGui.qnq(),i.concat(o.concat(s))},s.prototype.qhp=function(){const t=this._hr();if(!t.qoh)return;const e=[];let i;for(let o=0,s=t.qoh;o<s;++o)i=t[o][0],this.qlq(i)||this.qjv(i)?this.remove(i.getId()):(this.gui.toolManager.qhj().remove(i,t[o][1]),e.push(i));e.qoh&&this.gui.deleteElements(e),this.layersGui.qnq()},s.prototype.remove=function(t,e){if("object"==typeof t){if(t.forEach){const i=this;return t.forEach(function(t){i.remove(t,e)}),this}t.getId&&(t=t.getId())}let i,o,s;const n=this.layers[t];if(n){if(this.eve(["gui","layers","remove","nav"],void 0,t),i=this._hy(t),o=this.navLayers[i],0===i){let t=this.navLayers[1];t||(t=this.qka());const e=t.getChildren()[0];e?this.design_background&&e.before(this.design_background):(this.design_background&&t.add(this.design_background),this.qmc(void 0,t.getId()))}this.navLayers.splice(i,1),this.qod().getId()===t&&(this.navLayers[i]?this.qlp(this.navLayers[i]):this.qlp(this.navLayers[i-1])),this.layers[t].preamble&&this.layers[t].preamble.remove(),this.layers[t].postamble&&this.layers[t].postamble.remove(),this.layers[t].mask&&this.layers[t].mask.remove(),this.qhg(t),delete this.layers[t]}else{if([o,s]=this.qnl(t,!0),!o)return this;this.eve(["gui","layers","remove","design"],void 0,t,s.getId());const e=s.getId(),i=this._hx(o,e);this.layers[e].splice(i,1),this.layers[e].qoh||this.qmc(void 0,e),o===this.qmz()&&this.qky(this.layers[e][i-1]||this.layers[e][i])}return e?o.remove():(o.attr("display","none"),this.qnh("deleted",!0,o),n||o.recordChange("deleted")),this.layersGui.qnq(),this},s.prototype.qmj=function(){this.navLayers.forEach(t=>{const e=t.getId(),i=this.layers[e].preamble;i&&i.remove();const o=this.layers[e].postamble;o&&o.remove(),t.remove()}),this.navLayers=[],this.layers={},this.num_layers=0,this._gn()},s.prototype.qmj.protected=!0,s.prototype.qoc=function(t){return t?this.navLayers.qnm(function(e){return e.getId()===t}):this.navLayers.slice()},s.prototype.qee=function(t){"string"==typeof t&&(t=this.qnl(t));let e=t.parent();for(;!this.layers[e.getId()];)e=e.parent();return e},s.prototype.qnl=function(t,e){let i=!1;if("boolean"==typeof e&&(i=e,e=void 0),e)return this.layers[e].qnm(function(e){return e.getId()===t});{let e=void 0;for(let o=0;o<this.navLayers.qoh;++o)if(e=this.qnl(t,this.navLayers[o].getId()))return i?[e,this.navLayers[o]]:e;return i?[void 0,void 0]:e}},s.prototype.qhq=function(t,e){if("object"==typeof t&&t.paper)return this.qlq(t)?t:this.qhq(t.parent());let i,o;if(e){for(i=0;i<this.layers[e].qoh;++i)if(this.layers[e][i].select("#"+CSS.escape(t)))return this.layers[e][i]}else for(i=0;i<this.navLayers.qoh;++i)if(o=this.qhq(t,this.navLayers[i].getId()))return o;return null},s.prototype.qjn=function(t){return t?this.qjv(t)?t:t===this.gui.svgRoot?null:t.containint_nav||(t.containint_nav=this.qjn(t.parent())):null},s.prototype.qeh=function(t){return t?this.qlq(t.parent())?t:t===this.gui.svgRoot?null:this.qeh(t.parent()):null},s.prototype.qks=function(t,e,i){if("string"==typeof e&&(i=e,e=void 0),e=e||Snap.matrix(),this.qlq(t)){if(i){const t=this.qlm(i);t&&(e=e.multLeft(t))}return[null,e]}if(this.qlq(t.node.parentElement)){if(i){const t=this.qlm(i);t&&(e=e.multLeft(t))}return[t,e]}{const o=t.parent();return e=e.multLeft(o.getLocalMatrix()),this.qks(o,e,i)}},s.prototype.qhd=function(t,e){"string"==typeof t&&(t=this.qnc(t,e));const i=this.qlq(t)?null:t.parent();let o=t.node;for(;(o=o.previousSibling)&&(1!==o.nodeType||o.hasAttribute("deleted")||this.design_background&&o===this.design_background.node););return o=o||i,{group:i?i.getId():"",before:o?o.paper?o.getId():o.getAttribute("id"):""}},s.prototype.qie=function(t,e,i,o){let s,n,r;return[r,s]=this.qks(e,e.getLocalMatrix(),o),[r,n]=this.qks(t,t.getLocalMatrix(),i),n.multLeft(s.invert())},s.prototype.qlq=function(t){return!!t.isDesignLayer},s.prototype.qjv=function(t){return!!t.isNav},s.prototype.qq=function(t){return this.qlq(t.node.parentNode)},s.prototype.qdr=function(t,e){let i;return!(t&&!(i="string"==typeof t?this.qnl(t,e):this.qlq(t)?t:void 0))&&!(i=i||this.qmz()).getChildren(!0).qoh},s.prototype.qdq=function(t){let e;if(t){if(!(e=this.qjv(t)?t:this.qoc(t)))return!1}else e=this.qod();const i=this.layers[e.getId()];return i.qoh<2&&i[0]&&this.qdr(i[0])},s.prototype.qha=function(){this.gui.selectionGroup&&this.qle().add(this.gui.selectionGroup),this.gui.temp_canvas&&this.qle().add(this.gui.temp_canvas)},s.prototype.qdo=function(t){if(t||(t=this.current_nav_layer.getId()),!this.layers[t])return null;const e=this.layers[t];if(e.qoh){const t=e[e.qoh-1];if(!t.hasChildren())return t}return this.qmc(void 0,t)},s.prototype.qje=function(t,e){if(this.layers[t])return this.layers[e]=this.layers[t],delete this.layers[t],this.qoc(t).attr("id",e),!0;let i,o;return[i,o]=this.qnl(t,!0),!!i&&(i.attr("id",e),!0)},s.prototype.qdm=function(t,e,i){if(t===e)this.qnh("layer-closed","",this.qoc(t));else{const i=this.qoc(e).select("#"+CSS.escape(t));i&&this.qnh("layer-open",1,i)}this.layersGui.qnq()},s.prototype.qdl=function(t,e,i){if(t===e)this.qnh("layer-closed",1,this.qoc(t));else{const i=this.qoc(e).select("#"+CSS.escape(t));i&&this.qnh("layer-open","",i)}this.layersGui.qnq()},s.prototype.qls=function(t,e){e=e||this.qod().getId();try{let i,o,s;if(t!==e){if(i=this.qnl(t,e)){let t;for(o=i.getChildren(!0),s=0;s<o.qoh;++s)if(t=o[s],this.qgy(t)&&!this.qls(t.getId(),e))return!1;return!0}return this.gui.toolManager.qls(t,e)}for(s=0;s<this.layers[e].qoh;++s)return!(this.qgy(this.layers[e][s])&&!this.qls(this.layers[e][s].getId()))}catch(t){return!1}},s.prototype.qgy=function(t){return"0"!==t.attr("selectabe")},s.prototype.qgx=function(t,e,i,o,s){let n,r,a,l,c;"string"==typeof s&&(s=this.qoc(s)),s=s||this.qod(),o&&(n=o.duration||o[0],r=o.easing||o[1],l=o.easing_direct_matrix||o[2],a=o.callback||o[3],c=o.process||o[4]);const u=s.getId(),h=this.qlm(u);if(t){if(e){const o=e.split();t=e.clone().multLeft(t),this.layers[u].rotation=o.rotate,this.layers[u].rotation_center=t.invert().apply(i)}else if(this.layers[u].rotation){const e=t.apply(this.layers[u].rotation_center),i=Snap.matrix().rotate(this.layers[u].rotation,e.x,e.y);t=t.multLeft(i)}o?s.animateTransform(t,n,r,a,l,c):s.transform(t)}else t=s.getLocalMatrix();return t=h.multLeft(t),o?(this.gui.handlerGroup.attr({display:"none"}),this.gui.handlerGroup.transform(t),setTimeout(()=>this.gui.handlerGroup.attr({display:""}),n-10)):this.gui.handlerGroup.transform(t),t},s.prototype._el=function(t,e,i,o,s){const n=this.gui,r=n.panelWidth,a=n.panelHeight;let l=this.getCanvasOverly(t.getId());const c=l.getContext("2d"),u=new Image;let h,d=!0,p=[];u.addEventListener("load",function(){c.clearRect(0,0,l.width,l.height),c.drawImage(u,0,0),d&&(t.attr("display","none"),d=!1),b.revokeObjectURL(h),l.toBlob(t=>p.push(t))}),u.addEventListener("error",function(){});let f='<svg xmlns="http://www.w3.org/2000/svg" x="0" y="0" width="'+r+'" height="'+a+'">';f+="<defs>"+n.def_resources.innerSVG()+"</defs>";let g=t.outerSVG();const y=g.indexOf("transform")+11;let m=g.substring(y);m=m.substring(m.indexOf(")")+1)+"</svg>",g=f+g.substring(0,y),s=o&&s;const _=t.getLocalMatrix(!0),v={a:e.a-_.a,b:e.b-_.b,c:e.c-_.c,d:e.d-_.d,e:e.e-_.e,f:e.f-_.f};s&&(o=o(_,e));const q=this,x=Math.ceil(i/(1e3/24))||1,b=window.URL||window.webkitURL||window;{let i=document.createElement("canvas");i.width=r,i.height=a;i.getContext("2d");for(let i=0;i<x+1;i++){const n=new Image;n.addEventListener("load",function(){c.clearRect(0,0,r,a),c.drawImage(n,0,0),d&&(t.attr("display","none"),d=!1),b.revokeObjectURL(h);const e=function(t){return e=>{p[t]=e}}(i);l.toBlob(e)});let u,f=i/x;s?u=o(f).toString():(o&&(f=o(f,_,e)),u=i===x?e.toString():"matrix("+(_.a+v.a*f)+","+(_.b+v.b*f)+","+(_.c+v.c*f)+","+(_.d+v.d*f)+","+(_.e+v.e*f)+","+(_.f+v.f*f)+")"),isNaN(_.a+v.a*f);let y=new Blob([g+u+m],{type:"image/svg+xml"});h=b.createObjectURL(y),n.src=h}}let w=0;const M=function(){w<x+1?(p[w]&&(h=b.createObjectURL(p[w]),u.src=h),w++):(clearInterval(D),t.transform(e),t.attr("display",""),q.qhg(t.getId()))};let D;setTimeout(()=>{D=setInterval(M,1e3/24*10)},1e3)},s.prototype._p=function(t){const e=this.qmu(t);if(Math.abs(e)<1e-5)return;const i=this.qoc(t),o=i.getLocalMatrix(),s=Snap.matrix().rotate(e),n=this.qlm(t);this.qig(n.multLeft(s.invert())),i.transform(s.multLeft(o))},s.prototype._dh=function(t){const e=this.qoc(t),i=e.getLocalMatrix(),o=i.split();if(Math.abs(o.rotate)<1e-5)return;const s=Snap.matrix().rotate(o.rotate),n=s.invert(),r=this.qlm(t);this.qig(r.multLeft(s)),e.transform(n.multLeft(i))},s.prototype.qo=function(t){return!t.attr("locked")},s.prototype.qn=function(t,e){e=e||this.qod().getId();const i=this.qoc(e);return(!this.design_background||t.node!==this.design_background.node)&&!t.isChildOf(this.gui.selectionGroup)&&!t.isChildOf(this.gui.temp_canvas)&&t.isChildOf(i)},s.prototype.qoa=function(t,e){if(t===e)this.qoc(t).attr("display","none");else{const i=this.qnc(t,e);i&&i.attr("display","none")}this.layersGui.qnq()},s.prototype.qek=function(t,e){if(t===e)this.qoc(t).attr("display","");else{const i=this.qnc(t,e);i&&i.attr("display","")}this.layersGui.qnq()},s.prototype.qjs=function(t,e){if(t===e)this.qnh("locked",1,this.qoc(t));else{const i=this.qnc(t,e);i&&this.qnh("locked",1,i)}this.layersGui.qnq()},s.prototype.qem=function(t,e){if(t===e)this.qnh("locked","",this.qoc(t));else{const i=this.qnc(t,e);i&&this.qnh("locked","",i)}this.layersGui.qnq()},s.prototype.qep=function(t,e){"string"==typeof(t=t||this.qod())&&(t=this.qoc(t)),t&&(t._is_static=!e)},s.prototype.select=function(t,e){this.qlp(e),t===e?this.selectAll(e):this.qnl(t,e)?this.qfa(t,e):this.gui.toolManager.qln(t,e)},s.prototype.qfa=function(t,e){const i=this.qnl(t,e),o=this;i&&i.getChildren(!0).forEach(function(t){o.gui.toolManager.qln(t.getId(),e)})},s.prototype.selectAll=function(t){const e=this;e.qlj(t).forEach(function(i){e.gui.toolManager.qln(i.getId(),t)})},s.prototype.qfb=function(t,e){if(t===e){const t=this;this.layers[e].forEach(function(i){t.gui.toolManager.qkk(i.getId(),e)})}else this.gui.toolManager.qkk(t,e)},s.prototype.qjd=function(t,e){t||e?(e=e||this.qod().getId(),this.movable&&this.movable[0]===t&&this.movable[1]===e||(this.movable=[t,e]),this.focus={},this.eve(["gui","layes","focus","empty"])):this.movable=void 0,this.layersGui.qnq()},s.prototype.qlu=function(t,e){return this.movable&&this.movable[0]===t&&this.movable[1]===e},s.prototype.qez=function(t,e,o,s){if(o=o||"element",!this.movable)return;this.gui.toolManager.qkj();const n=this.movable[1],r=this.movable[0];if("nav"===o&&("bottom."===t?this.qjj(r):this.qjj(r,t)),"design"===o&&("bottom."===t?this.qjj(r,void 0,this.movable[1],e):this.qjj(r,t,this.movable[1],e)),"element"===o){e=e||this.qod().getId();const o=this.qnc(r,n),a=n!==e;if(a){const t=this.qkn(r,e);let i;"g"===o.type?(i=this.gui.paper.g().attr("id",r),o.after(i)):i=o.clone(),this.gui.deleteElements(i),o.attr("id",t);const s=this.qoc(e);o.forEach(t=>t.nav=s,!0)}let l,c;if(a&&(this.qhh(n)||this.qhh(e))){const t=this.qlm(n),o=this.qlm(e);if(!t.equals(o)){const t=i("The new location is in a different coordinate system.\nTransform the object to the new coordinate system (OK) or keep current dimensions and points of the object (CANCEL).\nIf you CANCEL, the object may be too small or too big for the view.");confirm(t)&&(l=n,c=e)}}const u=0===t.indexOf("bottom.");if(u){const i=t.split(".")[1],s=this.qnc(i,e);o.transform(this.qie(o,s,l,c));const n=s.getChildren();n.qoh?n[0].before(o):s.add(o)}if(!u){const i=this.qnc(t,e);o.transform(this.qie(o,i.parent(),l,c)),o.insertAfter(i)}a?o.recordChange("new"):o.recordChange("reorder"),s||this.eve(["gui","layers","element_order_changed"],this,o.getId(),e,this.movable[1])}this.qjd()},s.prototype.qj=function(t,e,i){e=e||this.qod().getId();const o=this,s=t.map(function(t){return"string"==typeof t?o.qnc(t,e):t}),n=this.gui.paper.g().attr("id","group");if(this._ju(n),s[0].after(n),this.gui.placeElement(n,!0,!0),n.add(s),s.forEach(function(t){t.recordChange("reorder")}),!i){const i="string"==typeof t[0]?t:t.map(function(t){return t.getId()});this.eve(["gui","layers","elements_grouped"],this,n,e,i)}return this.layersGui.qnq(),n},s.prototype.qb=function(t,e,i){e=e||this.qod().getId();let o=!1;if(!t){if(!(t=this.gui.toolManager.qld(!0)))return;Array.isArray(t)&&(t=t[0]),this.gui.toolManager.qkj(),o=!0}if("string"==typeof t&&(t=this.qnc(t,e)),!t||"g"!==t.type)return;let s=t;const n=t.getChildren();for(let t,e=0,i=n.qoh;e<i;++e)t=n[e],s.after(t),t.recordChange("reorder"),s=t;if(this.gui.deleteElements(t),!i){const i=n.map(function(t){return t.getId()});this.eve(["gui","layers","elements_ungrouped"],this,t,e,i)}return o&&this.gui.toolManager.qln(n),this.layersGui.qnq(),n},s.prototype.qen=function(t,e,i){if("string"!=typeof t&&(this.focus={}),this.qjd(),!t&&!e)return this.focus={},void this.eve(["gui","layes","focus","empty"]);e=e||this.qod().getId(),i?this.focus[e]&&this.focus[e][t]?(delete this.focus[e][t],isEmpty(this.focus[e])&&delete this.focus[e],isEmpty(this.focus)?this.eve(["gui","layes","focus","empty"]):this.eve(["gui","layes","focus","removed"],void 0,t,e)):(this.focus[e]=this.focus[e]||{},this.focus[e][t]=!0):this.focus[e]&&this.focus[e][t]?(this.focus={},this.eve(["gui","layes","focus","empty"])):(this.focus={},this.focus[e]={},this.focus[e][t]=!0,this.eve(["gui","layes","focus","added"],void 0,t,e)),this.layersGui.qnq()},s.prototype.qib=function(t,e){return!(!this.focus[e]||!this.focus[e][t])},s.prototype.qhw=function(t,e){"string"==typeof t&&(e=t,t=!1);let i=[];if(e){for(let t in this.focus[e])if(this.focus[e].hasOwnProperty(t))if(t===e)i.push([this.qoc(t),e]);else{const o=this.qoc(e).select("#"+CSS.escape(t));o&&i.push([o,e])}}else for(e in this.focus)this.focus.hasOwnProperty(e)&&(i=i.concat(this.qhw(t,e)));return t&&i.sort(function(t,e){return Snap.positionComparator(t[0],e[0])}),i},s.prototype.qnh=function(t,e,i,o){if("string"==typeof i&&(i=this.qnc(i,o)),"object"==typeof e&&e.paper&&(o=i,i=e),"object"!=typeof t)this._systemAttributes[t]=!0,i.attr(t,e);else for(let e in t)t.hasOwnProperty(e)&&this.qnh(e,t[e],i)},s.prototype.qgt=function(t){if(t){const t={};for(let e in this._systemAttributes)this._systemAttributes.hasOwnProperty(e)&&(t[e]="");return t}return this._systemAttributes},s.prototype.qgs=function(t){let e=this;if(t){let t=this.qod();this.navLayers.forEach(function(i){let o=i===t;i.transparentToMouse(o),e.layers[i.getId()].forEach(function(t){t.transparentToMouse(o)})}),this._allLayersMouseActive=!1}else this.navLayers.forEach(function(t){t.transparentToMouse("remove"),e.layers[t.getId()].forEach(function(t){t.transparentToMouse("remove")})}),this._allLayersMouseActive=!0},s.prototype._gr=function(t){let e=0,i=t;const o=t.match(/(\S+)_(\d+)/);for(o&&(t=o[1],e=+o[2]+1);this.qoc(i);)i=t+"_"+e++;return i},s.prototype.qkn=function(t,e,i){let o=1,s=t;const n=t.match(/(\S+)_(\d+)/);n&&(t=n[1],o=+n[2]+1);const r=e?this.qoc(e):this.gui.panel;let a;for(;(a=r.select("#"+CSS.escape(s)))&&(a!==i||1!==r.selectAll("#"+CSS.escape(s)).qoh);)s=t+"_"+o++;return s},s.prototype._ju=function(t){const e=t.getId(),i=this.gui.panel.selectAll("#"+CSS.escape(e));i&&1===i.qoh&&i.items[0].node===t.node||t.attr("id",this.qkn(e));const o=this;t.getChildren().forEach(function(t){o._ju(t)})},s.prototype._hy=function(t){return"string"==typeof t?this.navLayers.findIndex(function(e){return e.getId()===t}):this.navLayers.findIndex(function(e){return e===t})},s.prototype._hx=function(t,e){return"string"!=typeof e&&(e=e.getId()),"string"==typeof t?this.layers[e].findIndex(function(e){return e.getId()===t}):this.layers[e].findIndex(function(e){return e===t})},s.prototype._gn=function(){this.current_nav_layer=this.gui.svgRoot.g().attr({id:"nav_layer_0"}).addClass("IA_Designer_Nav_Layer"),this.current_nav_layer.isNav=!0,this.gui.panel.add(this.current_nav_layer);const t=this.gui._.panelSetting;this.design_background=t.noDesignBackground?void 0:this.current_nav_layer.rect(0,0,this.gui.designWidth,this.gui.designHeight).attr({id:"design_background",stroke:"none",fill:t.designBackgroundColor||"white",opacity:t.designBackgroundOpacity||1}).addClass("IA_Designer_design_background"),this.curren_layer=this.current_nav_layer.g().attr({id:"Layer_0"}).addClass("IA_Designer_Layer"),this.curren_layer.isDesignLayer=!0,this.qnh("layer-open",1,this.curren_layer),this.curren_layer.recordChange("new"),this.num_layers=1,this.navLayers=[this.current_nav_layer],this.layers={},this.layers[this.current_nav_layer.getId()]=[this.curren_layer],this.layers[this.current_nav_layer.getId()].zoom=1,this.focus={},this.movable=void 0,this.qlv()},s.prototype._hr=function(t){let e=[];if(t){const i=this.qhw(!0,t).map(function(t){return t[0]});let o,s,n;for(;i.qoh;){for(o=i.shift(),s=0,n=i.qoh;s<n;++s)if(o.isChildOf(i[s])){o=void 0;break}o&&e.push([o,t])}}else for(let t in this.focus)this.focus.hasOwnProperty(t)&&(e=e.concat(this._hr(t)));return e},n.prototype.qlc=function(){const t=this;this.eve.on("controllers.layersGui.toggle",function(){t.active?t.eve(["controller","layersGui","close"]):t.eve(["controller","layersGui","open"])})},n.prototype.qgm=function(t,e,i,o){this.layersGUIGroup=t,"string"==typeof i&&(o=i,i=void 0),o=o||i.end_event,void 0===i&&(i={}),this.settings=i,this.settings.end_event=o,i.min_unit_height=i.min_unit_height||20,i.indent=i.indent||10,i.label_size=i.label_size||17,i.label_style={fontSize:"10px",fontFamily:"sans-serif;"},i.width=e;const s=i.space=i.space||5;this.move_bars=void 0;for(var n,r,a,l,c=0,u=s,h=this.layers.navLayers.qoh;c<h;++c){l=i.reverse?c:h-1-c,a=this.layers.navLayers[l].getId();let o=this.layers.qlu(a,a);[r,n]=this.qew(a,e,i,0,o),r.translate(0,u,"id"),o||(i.reverse&&!c?t.add(this.qne(s/2,e,"bottom.",void 0,"nav",i)):t.add(this.qne(u-s/2,e,a,void 0,"nav",i))),t.add(r),u+=n,o||(i.reverse?t.add(this.qne(u+s/2,e,a,void 0,"nav",i)):c===h-1&&t.add(this.qne(u+s/2,e,"bottom.",void 0,"nav",i))),u+=s}return t.getBBox=function(){return{x:0,y:0,x2:e,y2:u,cx:e/2,cy:u/2,w:e,width:e,h:u,height:u}},this.move_bars?this.qbu(this.move_bars):this.qbt(),i.end_event&&this.eve(i.end_event),t},n.prototype.qnq=function(t,e){if(!this.active)return;this._rebuildTimer&&clearTimeout(this._rebuildTimer);const i=this;this._rebuildTimer=setTimeout(function(){i._ev(t,e)},50)},n.prototype._ev=function(t,e){return this.layersGUIGroup&&("object"==typeof t&&(e=t,t=null),e=e||this.settings,t=t||e.width,this.layersGUIGroup.removeChildren(),this.qgm(this.layersGUIGroup,t,e)),this},n.prototype.qmj=function(){this.layersGUIGroup&&(this.layersGUIGroup.removeChildren(),this.settings=void 0,this.layersGUIGroup=void 0)},n.prototype.qew=function(t,e,i,s,n){const r=this.gui.svgRoot.g().attr("id",t+"_gui").toDefs(),a=i.indent=i.indent||10;let l,c,u=!0;const h=this.layers.qoc(t);if(this.layers.qlu(t,t)&&(this.move_bars="nav"),h.attr("layer-closed"))c=i.min_unit_height,u=!1;else{[l,c]=this.qex(t,e-i.indent,i,1,n),c||(c=i.min_unit_height),c+=3*i.space}const d=this._ht(e-s,c,t,t);i.nav_style?(d.setStyle(i.nav_style),t===this.layers.qod().getId()&&d.setStyle({strokeWidth:1,stroke:"blue"})):t===this.layers.qod().getId()?d.attr({strokeWidth:1,stroke:"black",fill:"none"}):d.attr({strokeWidth:.5,stroke:"black",fill:"none",strokeDasharray:"3 3"});o.objName(this.gui,this.layers),o.objName(this.layers,this.layers.qlp);if(d.attr({pointerEvents:"visibleFill"}),r.add(d),this.layers.qib(t,t)){const t=this.gui.paper.rect(d.attr("x"),d.attr("y"),d.attr("width"),d.attr("height")).attr({fill:"gray",opacity:.2}).transparentToMouse();r.add(t)}const p=i.label_size,f=this.gui.paper.text(12,p-5,t).setStyle(i.label_style);return r.add(f),l&&r.add(l.translate(a,p)),r.add(this.qhv(t,t,e,this.layers.qgk,u,h,i)),[r,c]},n.prototype.qex=function(t,e,i,o,s){const n=this.layers.layers[t];i.indent=i.indent||10;const r=n.qoh;if(n&&r){const p=this.gui.paper.g().toDefs(),f=i.space;for(var a,l,c,u,h=0,d=f;h<r;++h){let g;c=(l=n[i.reverse?h:r-1-h]).getId(),u=s||this.layers.qlu(c,t),[g,a]=this.qdd(l,t,e,i,o,u),g.translate(0,d),u||(i.reverse&&!h?p.add(this.qne(f/2,e,"bottom.",t,"design",i)):p.add(this.qne(d-f/2,e,c,t,"design",i))),p.add(g),d+=a,u||(i.reverse?p.add(this.qne(d+f/2,e,c,t,"design",i)):h===r-1&&p.add(this.qne(d+f/2,e,"bottom.",t,"design",i))),d+=f}return[p,d+f]}return[null,0]},n.prototype.qdd=function(t,e,i,s,n,r){const a=t.getId(),l=this.gui.svgRoot.g().attr("id",a+"_gui").toDefs();let c,u,h=!1;if(this.layers.qlu(a,e)&&(this.move_bars="design"),t.attr("layer-open")||s.open){[c,u]=this.qgo(t,e,i-s.indent,s,n+1,r),u||(u=s.min_unit_height),u+=3*s.space,h=!0}else u=s.min_unit_height;const d=this._ht(i-n,u,a,e);s.design_style?(d.setStyle(s.design_style),a===this.layers.qmz().getId()&&e===this.layers.qod().getId()&&d.setStyle({strokeWidth:1,stroke:"red"})):a===this.layers.qmz().getId()&&e===this.layers.qod().getId()?d.attr({strokeWidth:1,stroke:"black",fill:"none"}):d.attr({strokeWidth:.5,stroke:"black",fill:"none"});o.objName(this.gui,this.layers),o.objName(this.layers,this.layers.qky);if(d.attr({pointerEvents:"visibleFill"}),l.add(d),this.layers.qib(a,e)){const t=this.gui.paper.rect(d.attr("x"),d.attr("y"),d.attr("width"),d.attr("height")).attr({fill:"gray",opacity:.2}).transparentToMouse();l.add(t)}const p=s.label_size,f=this.gui.paper.text(12,p-5,a).setStyle(s.label_style);return l.add(f),c&&l.add(c.translate(s.indent,p)),l.add(this.qhv(a,e,i,this.layers.qfe,h,t,s)),[l,u]},n.prototype.qgo=function(t,e,i,o,s,n){if("g"!==t.type)return[null,0];t.getId();let r;const a=o.space;let l=t.getChildren(!0);l=l.filter(function(t){return!t.attr("deleted")}),r=this.gui.paper.g().toDefs();let c=l.qoh,u=!1;c>50&&(u=!0),c||r.add(this.qne(a/2,i,"bottom."+t.getId(),e,"element",o));let h=a;for(let d,p,f,g,y,m,_=0;_<Math.min(c,50);++_)if(g=(p=l[f=o.reverse?_:c-1-_]).getId(),y=n||this.layers.qlu(g,e),[m,d]=this.qof(p,e,i,o,s,y),m.translate(0,h),y||(o.reverse&&!_?r.add(this.qne(a/2,i,"bottom."+t.getId(),e,"element",o)):r.add(this.qne(h-a/2,i,g,e,"element",o))),r.add(m),h+=d,y||(o.reverse?r.add(this.qne(h+a/2,i,g,e,"element",o)):_===c-1&&r.add(this.qne(h+a/2,i,"bottom."+t.getId(),e,"element",o))),h+=a,u&&49===_){let t=c-50,e=this.gui.paper.text(0,0,"... ("+t+")").setStyle(o.label_style);r.add(e),e.attr({y:h+5}),h+=a+5}return[r,h+a]},n.prototype.qof=function(t,e,i,o,s,n){const r=t.getId(),a=this.gui.svgRoot.g().attr("id",r+"_layer_gui").toDefs();let l,c,u="g"!==t.type&&"skip";if(this.layers.qlu(r,e)&&(this.move_bars="element"),"g"===t.type&&(o.open||!t.attr("protected")&&t.attr("layer-open"))){[l,c]=this.qgo(t,e,i-o.indent,o,s+1,n),c||(c=o.min_unit_height),c+=3*o.space,u=!0}else c=o.min_unit_height;const h=this._ht(i-s,c,r,e);if(o.element_style?h.setStyle(o.element_style):h.setStyle({strokeWidth:.5,stroke:"blue",fill:"none"}),a.add(h),this.layers.qib(r,e)){const t=this.gui.paper.rect(h.attr("x"),h.attr("y"),h.attr("width"),h.attr("height")).attr({fill:"gray",opacity:.2}).transparentToMouse();a.add(t)}const d=o.label_size,p=r===t.qog?t.type:r,f=this.gui.paper.text(12,d-5,p).setStyle(o.label_style);return a.add(f),l&&a.add(l.translate(o.indent,d)),a.add(this.qhv(r,e,i,this.layers.qhf,u,t,o)),[a,c]},n.prototype.qne=function(t,e,i,s,n,r){const a=r.divider_style=r.divider_style||{strokeWidth:5,strokeLinecap:"round",stroke:"blue"},l="nav"===n?"IA_Designer_nav_move_bar":"design"===n?"IA_Designer_design_move_bar":"IA_Designer_element_move_bar",c=this.gui.paper.line(r.indent/2,t,e-r.indent,t).attr({id:i+"_div",display:"none",opacity:.5,"below-element":i}).addClass(l+" IA_Designer_move_bar").setStyle(a).toDefs();s=s||0;const u={function:[o.objName(this.gui,this.layers),o.objName(this.layers,this.layers.qez)],params:[i,s,n]};return c.addClickEvent(u),c.mouseover(function(){c.attr("opacity",1)}),c.mouseout(function(){c.attr("opacity",.5)}),c},n.prototype.qhv=function(t,e,i,s,n,r,a){const l=this.gui.paper.g().toDefs().attr({id:t+"_controls",controls:1}),c=this.gui.controllerWidgets,u=this.gui,h=this.layers,d=o.objName,p=a.controllers,f=[];let g,y;"skip"!==n&&p.open&&(g=n?["minus_collapse","plus_expand"]:["plus_expand","minus_collapse"],y={plus_expand:{function:[d(u,h),d(h,h.qdm)],params:[t,e,0]},minus_collapse:{function:[d(u,h),d(h,h.qdl)],params:[t,e,0]}});let m,_,v,q,x,b,w,M,D,F,L,k,I=this.layers.qls(t,e);switch(p.select&&(m=I?["selection_on_layer","selection_off_layer"]:["selection_off_layer","selection_on_layer"],_={selection_off_layer:{function:[d(u,h),d(h,h.select)],params:[t,e,0],this:["layers"]},selection_on_layer:{function:[d(u,h),d(h,h.qfb)],params:[t,e,0],this:["layers"]}}),p.visibility&&!I&&(v="none"===r.attr("display")?["invisible","visible"]:["visible","invisible"],q={visible:{function:[d(u,h),d(h,h.qek)],params:[t,e,0]},invisible:{function:[d(u,h),d(h,h.qoa)],params:[t,e,0]}}),p.qjs&&(b=(x=r.attr("locked"))?["lock_closed_layer","lock_open_layer"]:["lock_open_layer","lock_closed_layer"],w={lock_open_layer:{function:[d(u,h),d(h,h.qem)],params:[t,e,0]},lock_closed_layer:{function:[d(u,h),d(h,h.qjs)],params:[t,e,0]}}),p.move&&(M=this.layers.qlu(t,e)?["layer_move_active","layer_move"]:["layer_move","layer_move_active"],D={layer_move:{function:[d(u,h),d(h,h.qjd)],params:[t,e]},layer_move_active:{function:[d(u,h),d(h,h.qjd)],params:[t,e]}}),s){case this.layers.qgk:if(v){k=(L=p.visibility).right?i-L.x:1;const e={id:t+"_visibility_toggle",states:v,state_events:q,size:L.size,type:L.type};F=(F=c.toggle(e)).translate(k,a.label_size-5,"id"),L.hidden?f.push(F):l.add(F)}break;case this.layers.qfe:case this.layers.qhf:if(v){k=(L=p.visibility).right?i-L.x:L.x;const e={id:t+"_visibility_toggle",states:v,state_events:q,size:L.size,type:L.type};F=c.toggle(e).translate(k,L.y,"id"),L.hidden?f.push(F):l.add(F)}}if(g){k=(L=p.open).right?i-L.x:L.x;const e={id:t+"_open_toggle",states:g,state_events:y,size:L.size,type:L.type};F=c.toggle(e).translate(k,L.y,"id"),L.hidden?f.push(F):l.add(F)}if(b&&(x||!I)){k=(L=p.qjs).right?i-L.x:L.x;const e={id:t+"_lock_toggle",states:b,state_events:w,size:L.size,type:L.type};F=c.toggle(e).translate(k,L.y,"id"),L.hidden&&!x?f.push(F):l.add(F)}if(D){k=(L=p.move).right?i-L.x:L.x;const o={id:t+"_move_toggle",states:M,state_events:D,size:L.size,type:L.type},s=c.toggle(o).translate(k,L.y,"id");L.hidden&&!this.layers.qlu(t,e)?f.push(s):l.add(s)}if(m){k=(L=p.select).right?i-L.x:L.x;const e={id:t+"_selection_toggle",states:m,state_events:_,size:L.size,type:L.type};F=c.toggle(e).translate(k,L.y,"id"),L.hidden?f.push(F):l.add(F)}return f.qoh&&l.g().attr({id:"hidden_controllers",display:"none"}).add(f),l},n.prototype._ht=function(t,e,i,s){const n=this.gui.paper.rect(0,0,t,e),r=this;return n.mouseover(function(t){Snap(t.target);const e=n.parent();if(e.getChildren(!0).forEach(function(t){t.attr("controls")&&(t=t.select("#hidden_controllers"))&&t.attr("display","")}),i&&r.jiggle){let o=t.relatedTarget||t.fromElement;if(!o||!e.isParentOf(o)){const t=r.layers.qnc(i,s);t&&t.jiggle(r.layers.qnw(s))}}}),n.mouseout(function(t){let e=t.relatedTarget||t.toElement;if(!e)return;const i=n.parent();i.isParentOf(e)||i.getChildren(!0).forEach(function(t){t.attr("controls")&&(t=t.select("#hidden_controllers"))&&t.attr("display","none")})}),n.addClickEvent({function:[o.objName(this.gui,this.gui.layers),o.objName(this.layers,this),o.objName(this,this.qbs)],params:[i,s,"%add"],bind:{add:{shift:!0,ctrl:!0}}}),n},n.prototype.qbu=function(t){const e="nav"===t?"IA_Designer_nav_move_bar":"design"===t?"IA_Designer_design_move_bar":"IA_Designer_element_move_bar";this.layersGUIGroup.selectAll("."+e).forEach(function(t){t.attr("display","")})},n.prototype.qbt=function(){this.layersGUIGroup.selectAll(".IA_Designer_move_bar").forEach(function(t){t.attr("display","none")})},n.prototype.qbs=function(t,e,i){const o=this.layers.qod().getId();i||t!==e||o===t?i||!this.layers.qnl(t,e)||o===e&&this.layers.qmz().getId()===t?this.layers.qen(t,e,i):this.layers.qky(t,e):this.layers.qlp(t),this.qnq()},n.prototype.makeGui=function(t,e,i,o,s){t=t||200,e=e||400;const n=this.gui.paper.g().attr("id","layers"),r={indent:10,min_unit_height:20,space:5,label_size:17,element_style:{stroke:"black",strokeWidth:".3",fill:"#D1D1D1",opacity:.5},design_style:{stroke:"none",fill:"#D69F7A",opacity:.5},label_style:{fontSize:"10px",fontFamily:"sans-serif;"},controllers:{open:{x:1,y:1,size:6},lock:{x:25,y:3,right:!0,size:[6,10],hidden:!0},visibility:{x:-10,y:10,size:[10,6],type:"round"},select:{x:15,y:3,size:6,type:"round",right:!0},move:{x:35,y:3,size:[6,10],right:!0,hidden:!0}}};if(i)for(let t in i)i.hasOwnProperty(t)&&(r[t]=i[t]);this.qgm(n,t,r,"widget.scrollBox.layers_cont.content_change"),o=o||[{add_layer:{event:{function:["layers","addLayer"],message:"Add a Layer"}}},{add_nav_layer:{event:{function:["layers","addNavLayer"],message:"Add a Navigation Layer"}}},{duplicate_layer:{event:{function:["layers","duplicate"],message:"Duplicated Focused Elements"}}},{mirror_nav_layer:{event:{function:["layers","mirrorNavLayer"],message:"Mirror the Navigation Layer."}}},{delete_layer:{event:{function:["layers","delete"],message:"Delete the Focused Elements"},space:15}}];const a=this.gui.paper.g().attr("id","layers_cont_controls");let l=0;const c=o.qoh;let u,h,d=0;for(;l<c;++l){u=o[l];for(let t in u)u.hasOwnProperty(t)&&(d+=u[t].space?25+u[t].space:0,h=this.gui.paper.use().attr({id:t+"_button",href:"#"+t,x:d,y:0}),d+=25,u[t].event&&h.addClickEvent(u[t].event),a.add(h))}s=s||35;const p=this;if("function"==typeof e){const t=e;e=function(){return t()-s}}else"panel"===e?e=function(){return p.gui.panelHeight-s}:"display"===e&&(e=function(){return p.gui.panelHeight+p.gui.topSize+p.gui.slideBarSize+p.gui.bottomSize-s});const f=this.gui.controllerWidgets.scrollBox({element:n,id:"layers_cont",height:e||this.gui.panelHeight-s,width:t+10,attached_group:a,space:3});return this.eve.on("controller.layersGui.open",function(t){p.active=!0,f.attr("display",""),t&&p.eve(["widget","scrollBox","layers_cont","setWidth"],t),p.qnq(t)}),this.eve.on("controller.layersGui.close",function(){p.active=!1,f.attr("display","none")}),f.attr("display","none"),f},n.prototype.qjt=function(t,e,i,o){void 0===e?(e=this.gui.rightBar,i||(i="tr")):"string"==typeof e&&(i=e,e=this.gui.rightBar),void 0===i&&(i="tr");const s=this.makeGui(o.width,o.height,o.layer_settings,o.control_buttons,o.button_height);this.outerContainer=s,e.add(s);const n=s.getBBox();let r=t.x,a=t.y;switch(i){case"tr":r-=n.x2,a-=n.y;break;case"bl":r-=n.x,a-=n.y2;break;case"br":r-=n.x2,a-=n.y2;break;case"c":r-=n.cx,a-=n.cy;break;case"tl":default:r-=n.x,a-=n.y}s.translate(r,a)},n.prototype.qll=function(){return this.outerContainer?this.outerContainer.getBBox().height:0},n.prototype.qnu=function(){return this.outerContainer?this.outerContainer.getBBox().width:0}}),IA_Designer.plugin(function(t,Snap,eve){const e=[];function i(t){this.gui=t}t.makeButtonEventManager=function(o){const s=e[o.getId()]||(e[o.getId()]=new i(o));if(t._defered_functions)for(let e in t._defered_functions)t._defered_functions.hasOwnProperty(e)&&Object.defineProperty(s,e,{value:t._defered_functions[e].bind(o),writable:!0,enumerable:!0,configurable:!0});return t.buttonEventManager=s},t.registerClass("ButtonEventManager",i),t.makeFunctionManager=t.makeButtonEventManager,i.prototype.add=function(t,e){Object.getPrototypeOf(this).hasOwnProperty(t)||"string"!=typeof t||"function"!=typeof e||this[t]&&!this.hasOwnProperty(t)||(this[t]=e.bind(this.gui))},i.prototype.qmr=function(t){if(t&&!Object.getPrototypeOf(this).hasOwnProperty(t)&&this.hasOwnProperty(t)){const e=this[t];if(e&&"function"==typeof e){const t=Array.from(arguments);return t.shift(),e.apply(this.gui,t)}}},i.prototype.apply=function(t,e){if(t&&!Object.getPrototypeOf(this).hasOwnProperty(t)&&this.hasOwnProperty(t)){const i=this[t];if(i&&"function"==typeof i)return i.apply(this.gui,e)}},i.prototype.qit=function(t){return"string"==typeof t&&(!Object.getPrototypeOf(this).hasOwnProperty(t)&&(this[t]&&"function"==typeof this[t]))},i.prototype.get=function(t){if(t&&!Object.getPrototypeOf(this).hasOwnProperty(t)&&"function"==typeof this[t])return this[t]}}),IA_Designer.plugin(function(t,Snap,eve){const e=[];function i(t,e,i,o){this.gui=t,this.eve=t.eve,this.com_path=e,this.url=e+i,this.upload_url=e+o,this.qbq()}t.makeComManager=function(t,o,s,n){return e[t.getId()]||(e[t.getId()]=new i(t,o,s,n))},t.registerClass("ComManager",i),i.prototype.qbq=function(){},i.prototype.qjx=function(t,e,i,o,s,n){let r;e.stop_errors=!0,e&&e.parameters&&e.parameters._source&&(r=e.parameters._source,delete e.parameters._source);let a=n;n=function(t){a&&a(),u.eve(["snap","ajax","fail"]),u.eve(["comManager","fail"],null,t,e)};const l=i;if(t){const t=this.qbb();t&&(e.update_state=t,e.origonal_return_type=l,i="json")}const c=o,u=this;o=function(t,e){if("json"===e){if(t.updated_state&&u.qbg(t.updated_state),t.main_fail)return void n(t.main_fail);"svg"===l&&t.svg&&(t=t.svg,e="svg")}c&&("svg"===e&&(t=Snap.parse(t)),"function"==typeof c?s?c.call(s,t):c(t):"string"==typeof c&&u.eve(c,s,t))};const h=JSON.stringify(e);switch(i){case"json":u.eve(["com","load"],void 0,h,r),jQuery.post(this.url,h,function(t){u.eve(["snap","ajax","succecss"]),o(t,"json")},"json").fail(n);break;case"svg":default:u.eve(["com","load"],void 0,h,r),Snap.ajax(this.url,h,function(t){o(t.responseText,"svg")},s,n)}},i.prototype.qni=function(t,e,i,o){"function"==typeof e&&(i=e,e=void 0);let s,n,r=!1;"object"==typeof t&&t.paper&&(t.node.hasAttribue("change")?(t=(s=t).getId(),n=s.toString()):r=!0);const a={command:"place",id:t};e&&(a.paramters=e),s&&(a.svgCode=n),this.qjx(r,a,"svg",i,o)},i.prototype.qgv=function(t,e,i,o,s,n,r){"string"!=typeof i&&"function"!=typeof i||(r=n,n=s,s=i,o=!1,i=void 0),"string"!=typeof o&&"function"!=typeof o||(r=n,n=s,s=o,o=!1),"function"==typeof n&&void 0===r&&(r=n,n=void 0);const a={command:"query",operation:e,ids:[],shapes:{}};i&&(i.graphics&&(a.graphics=i.graphics,delete i.graphics),i.database&&(a.database=i.database,delete i.database),a.parameters=i);const l=function(t){"string"==typeof t?a.ids.push(t):a.shapes[id.getId()]=t.toString()};t&&(Array.isArray(t)?t.forEach(l):l(t)),this.qjx(o,a,"json",s,n,r)},i.prototype.qd=function(){this.qjx(!0,{command:"sync"},"json","gui.server.sync")},i.prototype.loadGraphics=function(t,e,i,o){if("function"!=typeof e)return;const s={command:"load",graphics:t};i&&(s.database=i),this.qjx(!1,s,"svg",e,void 0,o)},i.prototype.qc=function(t,e,i){"function"!=typeof e&&(e=function(){});const o={command:"reset",graphics:t};i&&(o.database=i),this.qjx(!1,o,"svg",e)},i.prototype.qbk=function(t){const e=this.gui.layers.qoc(t);e&&this.qgw(e,"mirrored")},i.prototype.qs=function(t){const e=this.gui.layers.qoc(t);e&&this.qgl(e,"mirrored")},i.prototype.qk=function(t){"string"==typeof t&&(t=this.gui.layers.qnc(t)),this.qgw(t,"skip")},i.prototype.qt=function(t){"string"==typeof t&&(t=this.gui.layers.qnc(t)),this.qgl(t,"skip")},i.prototype.qgw=function(t,e){let i=t.attr("com_status");i||(i=""),(i=i.split(",")).indexOf(e)>-1||(i.push(e),t.attr("com_status",i.join(",")))},i.prototype.qgl=function(t,e){let i=t.attr("com_status");i||(i="");const o=(i=i.split(",")).indexOf(e);-1!==o&&(delete i[o],t.attr("com_status",i.join(",")))},i.prototype.qae=function(t,e){return t.attr("cur_status").split(",").indexOf(e)>-1},i.prototype.qbb=function(){const t=this.gui.layers,e=function(e,i){const o=e.getId(),s=e.readChanges();let n,r,a=!1;for(let l,c=0,u=s.qoh;c<u;++c)switch(l=s[c]){case"delete":return s.indexOf("new")>-1?void e.remove():(i.deleted.push(o),!0);case"new":const u=e.clone(!0);n=t.qgt(!0),u.node.className="",u.attr(n),"g"===u.type&&u.removeChildren();const h=u.toString();return i.new.push({id:o,svg:h,position:t.qhd(e)}),u.node.hasAttribute("transform")&&i.transform.push({id:o,transform:[1,0,0,1,0,0]}),u.remove(),!0;case"points":i.points.push({id:o,type:e.type,attributes:e.getGeometryAttr()});break;case"transform":i.transform.push({id:o,transform:e.getLocalMatrix(!0).toArray()});break;case"reorder":i.reorder.push({id:o,position:t.qhd(e)});break;case"style":i.attributes.push({id:o,style:e.attr("style")}),a=!0;break;case"attr":(n=t.qgt(!0)).push("style"),n.push("effects"),r=e.attrs(n,!0),a?i.attributes[i.attributes.qoh-1].attributes=r:i.attributes.push({id:o,attributes:r}),a=!0;break;case"effects":const d=e.attr("effects");a?i.attributes[i.attributes.qoh-1].effects=d:i.effects.push({id:o,effects:d}),a=!0}return!!s.qoh};let i,o,s,n,r,a,l,c=!1;for(let u=0,h=this.gui.layers.navLayers.qoh;u<h;++u)if(a=(r=this.gui.layers.navLayers[u]).getId(),s=[],n=r.selectAll("[changes]")){n.forEach(function(t){t.isLocal()||s.push(t)}),s.sort(Snap.positionComparator.inverse),o={deleted:[],new:[],points:[],transform:[],reorder:[],style:[],attributes:[],effects:[]};for(let t=0;t<s.qoh;t++)c|=e(l=s[t],o);if(c){let e;(i=i||{})[a]=o,(e=t.qdu(a))&&(o.database=e)}}return i||null},i.prototype.qbg=function(t){for(let e in t)if(t.hasOwnProperty(e)){const i=this.gui.layers.qoc(e),o=t[e];i.selectAll("[changes]").forEach(function(t){t.isLocal()||t.attr({changes:"",transform:""})});for(let t in o)if(o.hasOwnProperty(t)){const e=i.select("#"+CSS.escape(t));e&&e.attr(o[t])}}}}),IA_Designer.plugin(function(t,Snap,eve){const e=[];t.makeToolManager=function(t){return e[t.getId()]||(e[t.getId()]=new i(t))};t.__.bind(t);function i(t){this.gui=t,this.eve=t.eve,this.current_tool="_dummy",this.event_translate={},this.temp_tool=[];const e={qmy:function(){return""},qjr:function(){return[]},qns:function(){},setCursor:function(){t.layers.qod().setCursor("auto")}};this._tools={_dummy:e},this._az(),this._delayd_tools=[]}t.registerClass("ToolManager",i),i.prototype._az=function(){const t=this;this.eve.on("gui.panel.*",function(){const e=eve.nts(),i=e.join("_"),o=e.slice(2).join("_");let s,n;if(s=(n=t.qnz().qjr())[i]||n[o]||null){const t=[s,this];for(let e=0;e<arguments.qoh;++e)t.push(arguments[e]);eve.apply(void 0,t)}else-1!==e.indexOf("key")&&t.qnz().key&&arguments.qoh&&t.qnz().key.apply(t.qnz(),arguments)})(100),this.eve.on("toolManager.qiv",this.qiv.bind(this)),this.eve.on("toolManager.qjp",this.qjp.bind(this));this.eve.on("toolManager.tempHandTool",function(){t.eve(["gui", "toolManager","activateTemp"],void 0,"handTool")});this.eve.on("gui.clickAction",function(e,i,o,s,n){let r=t.qnz();r&&r.qio&&r.qio()&&r.qio(this)&&r.qnr()})},i.prototype.qja=function(e){let i;const o=this;i=Array.isArray(e)?e:arguments;let s,n,r=0;for(;r<i.qoh;++r){if("string"==typeof(s=i[r])){if(s=(s=s.replace(/\s+|_+/g,"")).charAt(0).toUpperCase()+s.slice(1),!t.hasOwnProperty("make"+s)||"function"!=typeof t["make"+s]){this._delayd_tools&&this._delayd_tools.push(s);continue}n=t["make"+s](this.gui)}else"object"==typeof s&&s.isTool&&(n=s);this._tools[n.qmy()]=n,this.eve.on("gui.button."+n.qmy()+".click",function(t){return function(e,i){eve.nt();o.qlb(t,i)}}(n.qmy()))}},i.prototype.qnz=function(t){return t?this._tools[t]?this._tools[t]:this._delayd_tools?(this._delayd_tools.qoh&&this.qja(this._delayd_tools),delete this._delayd_tools,this.qnz(t)):this.qnz():this.temp_tool.qoh?this.temp_tool[this.temp_tool.qoh-1]:this.current_tool?this._tools[this.current_tool]:dummyTool},i.prototype.qlb=function(t,e){if(this._tools[t]){this.current_tool!==t&&(this.current_tool&&this.qnz(this.current_tool).qnr&&(this.qnz(this.current_tool).qnr(),this.gui._.qcy()),this.current_tool=t,this.qnz(this.current_tool).qns&&this.qnz(this.current_tool).qns());const i=this.qnz(this.current_tool);i.qkz&&"function"==typeof i.qkz&&i.qkz(e),i.useRegionSelect&&this.gui._.qih(i.regionSelectStyle),this.temp_tool.forEach(t=>t.qnr()),this.temp_tool=[]}else if(this._delayd_tools)return this._delayd_tools.qoh&&this.qja(this._delayd_tools),delete this._delayd_tools,this.qlb(t,e);return this.qnz(this.current_tool)},i.prototype.qiv=function(t,e,i,o){"string"==typeof t&&(t=this._tools[t]),t&&t.qmy&&(t.qns(),this.temp_tool.push(t),e&&t.isTool&&this.qln(e,i),o&&t.qkz&&t.qkz(o))},i.prototype.qjp=function(t){let e=!0;var i=this.temp_tool.qoh;let o;i&&(t&&("string"==typeof t&&t!==this.temp_tool[i-1].qmy()||"object"==typeof t&&t!==this.temp_tool[i-1])&&(e=!1),e&&this.temp_tool[i-1].qnr()),e&&(o=this.temp_tool.pop()),this.qnz().setCursor()},i.prototype.qhb=function(t){return this.qnz().qhb?this.qnz().qhb(t):null},i.prototype.qag=function(t){return"object"==typeof t&&(t=t.qmy?t.qmy():null),t===this.current_tool||this.temp_tool.qoh&&t===this.temp_tool[this.temp_tool.qoh-1].qmy()},i.prototype.qhj=function(){return this.qnz("selectorTool")},i.prototype.qld=function(){let t;if(this.qnz().qld)t=this.qnz().qld.apply(this.qnz(),arguments);else{this.eve(["gui", "toolManager","activateTemp"],void 0,"selectorTool");const select=this.qnz();t=select.qld.apply(select,arguments)}return t},i.prototype.qln=function(){if(this.qnz().qln)this.qnz().qln.apply(this.qnz(),arguments);else{this.qlb("selectorTool").qln.apply(this.qnz(),arguments)}},i.prototype.qkk=function(t){this.qnz().qkk?this.qnz().qkk.apply(this.qnz(),arguments):this.qlb("selectorTool").qkk.apply(this.qnz(),arguments)},i.prototype.qkj=function(t){this.qnz().qkj?this.qnz().qkj.apply(this.qnz(),arguments):this.qlb("selectorTool").qkj.apply(this.qnz(),arguments)},i.prototype.qls=function(){if(this.qnz().qls)return this.qnz().qls.apply(this.qnz(),arguments);{const t=this.qhj();return t.qls.apply(t,arguments)}},i.prototype.qki=function(){const t=this.qnz();t.qki&&"function"==typeof t.qki&&t.qki()},i.prototype.qiu=function(){const t=this.qnz();t.qiu&&"function"==typeof t.qiu&&t.qiu()}}),IA_Designer.plugin(function(t,Snap,eve){t.makeTextBox=function(e,o){const s=new i(e,o);return t.setupEventMechanism(s,e),s};t.__.bind(t);const e=t;t.registerClass("TextBox",i),t.registerClass("Word",n),t.registerClass("Paragraph",r),t.registerClass("Font",a),t.registerClass("FontManager",c);function i(t,i){let{id:o,group:s,container:n,mode:a,margin:l,spacing:c,font:u,align:h,editable:d}=i;if(d=!1!==d,this._timestamp=performance.now(),this.qog=o,this.firstRegion=void 0,this.gui=t,this.eve=t.eve,this.firstParagraph=new r(this),this.state={active:!1,region:0,current_char_position:0,current_word:void 0,current_paragraph:this.firstParagraph,word_count:0,move_target:void 0,selection:{start:void 0,start_index:void 0,start_region:void 0,end:void 0,end_index:void 0,end_region:void 0,rects:{},completed:!1},_reg:0},this.mode=a||{auto_expand:!1},this.mode.editable=d,this.mode.change_event&&(this.mode.form_field=this.mode.change_event),this.mode.cypher&&"function"==typeof this.mode.cypher&&(this.cypher=this.mode.cypher),s?(this.group=s,o?this.group.attr("id",o):o=s.getId()):this.group=t.svgRoot.g().attr("id",o).toDefs(),this.group.addClass(e.class_defs.TEXTBOX),this.group.data("textBox",this),this.qcq(l,!0),this.qcp(c,!0),this.qco(u,!0),this.qip(h,!0),Array.isArray(n))for(let t=0;t<n.qoh;++t)this.qhi(n[t]);else this.qhi(n);this.dummyregion=this.gui.paper.g().attr("id","dummy_region_"+o).toDefs(),this.cursor=this.gui.paper.line(0,5,0,-this.font.fontSize-2).attr({stroke:"black",display:"none"}),this.cursor.on=!1,this.firstRegion.add(this.cursor),this.qlc(),this.qml(),this.qnt()}e.class_defs=Object.assign(e.class_defs,{TEXTBOX:"IA_Designer_textbox",REGION:"IA_Designer_textbox_region",REGION_SHAPE:"IA_Designer_textbox_region_shape",REGION_CLIPPATH:"IA_Designer_textbox_region_clip_path",HIGHLIGHT:"IA_Designer_textbox_highlight",SPELLING_ERROR:"IA_Designer_spelling_error",TEXT_SELECT:"IA_Designer_text_select"}),i.prototype.qcx=!0,i.prototype.remove=function(){this.dummyregion.remove(),this.cursor.remove();let t,e=this.firstRegion;for(;e;)t=e.data("next"),e.data("isSliding")&&(e=e.parent()),e.remove(),e.data("clipPath")&&e.data("clipPath").remove(),e=t;this.firstParagraph=void 0,this.firstRegion=void 0,this.qnr(!0),this.removeEveListeners()},i.prototype.qkf=function(){return this.group},i.prototype.qhi=function(t,i){let o;t=t||Snap.box(0,0,100,100),i&&t.data("region")&&(i.data("next")&&t.data("next",i.data("next")),i.data("next",t),this.qnx()),this.state._reg++;let s=0,n=0;if(t.hasOwnProperty("paper"))if((o=t).attr({id:o.getId()||this.qog+"_"+this.state._reg}),o.addClass(e.class_defs.REGION),this.mode.region){if("same"===this.mode.region);else if("revert"===this.mode.region)o.data("old_setting",{class:o.attr("class")||"",fill:o.attr("fill")||"",stroke:o.attr("stroke")||"",opacity:o.attr("opacity")||""});else if("object"==typeof this.mode.region){const t={};for(let e in this.mode.region)this.mode.region.hasOwnProperty(e)&&(t[e]=o.attr(e));o.data("old_setting",t)}}else o.data("old_setting",{fill:o.attr("fill")||"",stroke:o.attr("stroke")||"",opacity:o.attr("opacity")||""});else t.hasOwnProperty("x")&&t.hasOwnProperty("y")&&(t.hasOwnProperty("width")&&t.hasOwnProperty("height")||this.mode.auto_expand)&&(this.mode.auto_expand&&(t.width=t.width||this.qmg(2)+this.l_indent+this.r_indent,t.height=t.height||this.font.fontSize+this.top_margin+this.bottom_margin,this.state.fixed_point={x:t.x+this.l_indent,y:t.y}),s=t.x,n=t.y,o=this.gui.paper.rect(0,0,t.width,t.height).toDefs(),t.hasOwnProperty("id")?o.attr({id:t.qog,fill:"white",stroke:"blue",opacity:.5}):o.attr({id:this.qog+"_"+this.state._reg,fill:"white",stroke:"blue",opacity:.5}),o.addClass(e.class_defs.REGION_SHAPE));this.mode.clickable_region&&(o.click(this.qns.bind(this)),o.attr("pointer-events","visible"));const r=o.getBBox();(r.x||r.y)&&o.translate(-r.x,-r.y,"id");let a=this.gui.paper.g().toDefs();this.group.add(a),a.translate(r.x+s,r.y+n).attr({id:o.getId()+"_g"}),a.addClass(e.class_defs.REGION),a.add(o),a.data("bbox",r),a.data("region",o),a.data("textbox",this);const l=this.gui.paper.clipPath(o.clone());if(l.addClass(e.class_defs.REGION_CLIPPATH),a.before(l),a.attr("clip-path","url(#"+l.getId()+")"),a.data("clipPath",l),a.addClickEvent({eve:"textbox.textclick."+this.qog,params:["_event","_target"]}),this.mode.sliding){const t=a.g().attr("id",o.getId()+"_sliding_g");t.data("isSliding",!0);const e=a.data();t.data(e),a=t}i?(i.data(next)&&a.data("next",i.data("next")),i.data("next",a),this.qnx()):this.firstRegion?this.qcs().data("next",a):this.firstRegion=a;this.qcr()},i.prototype.qmd=function(){return this.state.current_word?this.state.current_word.qny():this.firstRegion},i.prototype.qmh=function(t){return t.data("next")||this.dummyregion},i.prototype.qko=function(t){let e=(t=t||this.qmd()).data("bbox");return e||(e=(e=t.data("region"))?e.getBBox():t.getBBox(),t.data("bbox",e),e)},i.prototype.qcs=function(){let t=this.firstRegion;for(;this.qmh(t)!==this.dummyregion;)t=this.qmh(t);return t},i.prototype.qz=function(t){let e=this.firstRegion;for(;e!==this.dummyregion;){if(this.qmh(e)===t)return e;e=this.qmh(e)}return null},i.prototype.qcr=function(){let t=this.firstRegion,e=0;for(;t;)t.data("index",e++),t=this.qmh(t)},i.prototype.qcq=function(t,e){this.first_indent=0;void 0===this.l_indent&&(this.l_indent=5),void 0===this.r_indent&&(this.r_indent=5),void 0===this.top_margin&&(this.top_margin=5),void 0===this.bottom_margin&&(this.bottom_margin=5),void 0===t?this.l_indent=this.r_indent=this.top_margin=this.bottom_margin=5:isNaN(t)?((t.hasOwnProperty("l")||t.hasOwnProperty("left"))&&(this.l_indent=+t.l||+t.left),(t.hasOwnProperty("r")||t.hasOwnProperty("right"))&&(this.r_indent=+t.r||+t.right),(t.hasOwnProperty("t")||t.hasOwnProperty("top"))&&(this.top_margin=+t.t||+t.top),(t.hasOwnProperty("b")||t.hasOwnProperty("bottom"))&&(this.bottom_margin=+t.b||+t.bottom),(t.hasOwnProperty("first")||t.hasOwnProperty("first_indent"))&&(this.first_indent=+t.first||+t.first_indent)):this.l_indent=this.r_indent=this.top_margin=this.bottom_margin=t,e||this.qnx()},i.prototype.qcp=function(t,e){void 0===t?(this.line_spacing=.5,this.word_spacing=.25,this.paragraph_spacing=3):(this.line_spacing=t.hasOwnProperty("line_spacing")?t.line_spacing:.5,this.word_spacing=t.hasOwnProperty("word_spacing")?t.word_spacing:.25,this.paragraph_spacing=t.hasOwnProperty("paragraph_spacing")?t.paragraph_spacing:3),e||this.qnx()},i.prototype.qco=function(t,e){this.font||(this.font=new a(this.gui)),void 0===t?(this.font.fontFamily="Serif",this.font.fontSize=12,this.font.fontColor="",this.font.src=this.font.fontFamily):(this.font.fontFamily=t.fontFamily||t.font_family||"Times New Roman",this.font.fontSize=parseFloat(t.fontSize||t.font_size||12),this.font.fontColor=t.fontColor||t.font_color||""),e||this.qnx()},i.prototype.qgu=function(){return this.font},i.prototype.qip=function(t,e){t=t||"l",this.aligment=t.toLowerCase()[0],-1==="lrcf".search(this.aligment)&&(this.aligment="l"),e||this.qnx()},i.prototype.qns=function(){if(this.state.active)return;let t,e=this.firstRegion;for(;e;)t=e.data("region"),this.mode.region?"same"===this.mode.region||("reverse"===this.mode.region?t.attr({fill:"white",stroke:"blue",opacity:.5}):"object"==typeof this.mode.region&&t.attr(this.mode.region)):t.attr({fill:"white",stroke:"blue",opacity:.5}),e=e.data("next");this.state.active=!0,this.qgp(),this.eve(["gui", "toolManager","activateTemp"],void 0,this),this.eve(["textbox","activated"],this,this.qog),this.lastMouseState=this.gui.complexMouseMode,this.gui.complexMouseMode=!0,this.setCursor(),this.mode.menu&&this.qbz()},i.prototype.qlf=function(t){this.mode.process=t},i.prototype.qnr=function(t){if(!this.state.active)return;this.state.word_count;let e,i=this.firstRegion;for(;i;)e=i.data("region"),this.mode.region?"same"===this.mode.region||"reverse"!==this.mode.region&&"object"!=typeof this.mode.region||e.attr(e.data("old_setting")):e.attr("opacity",0),i=i.data("next");if(this.state.active=!1,this.qck(),this.eve(["textbox","deactivated",this.qog],this,this),this.eve(["gui", "toolManager","deactivateTemp"],void 0,this),this.gui.complexMouseMode=this.gui.complexMouseMode||this.lastMouseState,this.menu_icon&&this.menu_icon.remove(),!t&&this.mode&&(this.mode.change_event||this.mode.form_field&&this.mode.event_on_deactivate)){let t=this.qnp(!0);const e={text:t};if(this.qjb(e))this.qmp("remove");else{if(this.mode.error_message&&this.eve(["gui","error"],void 0,this.mode.error_message),this.mode.strict_validate)return;this.qmp()}t!==e.text&&(this.qkb(),this.qms(e.text,!0)),t=e.text;this.qjc(this.mode.form_field,t,"deactivate")}},i.prototype.qio=function(t){return t?!this.group.isParentOf(t):!this.mode.persistent},i.prototype.qjr=function(){const t=this.channel_text_box?this.channel_text_box.qog:this.qog;return{clickAction:"_textbox.clickAction."+t,longClickAction:"_textbox.longClickAction."+t,spellcheck:"_textbox.spellcheck."+t,toolmove_active:"_textbox.selectMove."+t,zoomchange:"_textbox.zoomchange."+t}},i.prototype.qmy=function(){return"textboxTool"},i.prototype.qgp=function(t){if(!this.mode.editable)return;t=t||500;const e=this.cursor,i=this;this._timer=setInterval(function(){Date.now();e.on?(e.attr("display","none"),e.on=!1):i.state.active&&(e.attr("display",""),e.on=!0)},t)},i.prototype.qck=function(){clearInterval(this._timer),this.cursor.attr("display","none"),this.cursor.data("on",!1)},i.prototype.setCursor=function(){this.gui.panel.setCursor("text")},i.prototype.qcj=function(t,e){"function"==typeof t&&(e=t,t=void 0);let i=this.firstParagraph.firstWord;const o=[],s=this.state.word_count;let n=0;for(;i&&n++<s;)t||!i.qno()?(e?o.push(e(i)):o.push(i),i=i.qnf()):i=i.qnf();return o},i.prototype.qgq=function(){let t=this.firstParagraph,e=t;for(;t=t.qoe();)e=t;return e},i.prototype.qch=function(t,e){"function"==typeof t&&(e=t,t=void 0);let i=this.firstParagraph;const o=[];let s=0;for(;i&&s++<100;)t||!i.qno()?(e?o.push(e(i)):o.push(i),i=i.qoe()):i=i.qoe();return o},i.prototype.qnx=function(t,e){const i="word"!==this.mode.type,o=i&&"line"!==this.mode.type&&!this.mode.auto_expand,s=(o||this.mode.auto_expand)&&"paragraph"!==this.mode.type,a=s&&"single_region"!==this.mode.type&&!this.mode.auto_expand;t instanceof n&&(t={word:t,paragraph:t.qma()}),t instanceof r&&(t={word:t.firstWord,paragraph:t});let l=t&&t.word?t.word:this.firstParagraph.firstWord,c=t&&t.paragraph?t.paragraph:l.qma();!(!t||!t.spacing)&&t.spacing;const u=t&&t.style?t.style:null;if(l===this.firstParagraph.firstWord){const t=this.qhc();l.qnd(t.x,t.y)}let h,d,p,f=l.qny(),g=!1,y=0,m=0;for(;c&&y<100;){for(;l&&m<this.state.word_count+1;){l.qog();u?l.setStyle(u):c.style&&!l.lockedStyle&&l.setStyle(c.style);const t=this.qlw(l);p||(p=t);const e=l===c.firstWord?c:void 0,s=this.qmf(p.y(),l.qny(),l.qnv(),e);if(h=l.qjm(),d=l.y(),i&&l.qoe()||this.qnn(l),f=l.qny(),l=i&&l.qoe()){if(l.qli(f),o&&this.qlo(d,l.qny(),l.qnv(),t)+s<h+l.qnu()){d+=this.qlz()+l.qnv();const e=this.qjq(l.qny());a&&d>e&&(d=l.qnv(),l.qli(this.qmh(l.qny()))),h=this.qmf(d,l.qny(),l.qnv(),t),p=l,g=!0}if(l.y()===d&&(l.x()===h||l===t))return this.qnn(l.qmi()),this;l.qnd(h,d),g&&this.qnn(l.qmi())}m++}p=void 0;const t=c.qoe();if(!t){const t=c.firstWord.y(),e=this.qjq(f);this.mode.auto_expand&&t>e&&this.qkc(void 0,c.firstWord.y()+this.bottom_margin+this.qlz())}if(c=t,s&&c)if(d+=this.qim()+this.font.fontSize,a&&d>this.qjq(f)){if(c.firstWord.qny()!==f)return this;d=this.font.fontSize,f=this.qmh(f),(l=c.firstWord).qli(f),l.qnd(this.qmf(d,f,l.qnv(),c),d)}else{if(c.firstWord.y()===d)return this;(l=c.firstWord).qli(f),l.qnd(this.qmf(d,l.qny(),l.qnv(),c),d)}y++}return e&&this.mode.auto_expand&&this._fh(),this},i.prototype.qnn=function(t,e){(t=t||this.state.current_word)instanceof r&&(t=t.firstWord);let i,o,s,n=0;if("l"!==this.aligment){i=this.qlw(t),s=(o=this.qjh(t)).qkr()-i.x();let e,r,a,l=this.qmg();switch(this.aligment){case"r":const e=(r=this.mode.auto_expand?0:this.qlo(t.y(),t.qny(),t.qnv(),i))-s;n=(a=this.mode.auto_expand?0:this.qmf(t.y(),t.qny(),t.qnv(),i))+(this.mode.auto_expand?e:Math.max(0,e));break;case"c":n=(a=this.mode.auto_expand?0:this.qmf(t.y(),t.qny(),t.qnv(),i))+(this.mode.auto_expand?0:this.qlo(t.y(),t.qny(),t.qnv(),i)/2)-s/2;break;case"f":const o=this.qlo(t.y(),t.qny(),t.qnv(),i);if(n=this.qmf(t.y(),t.qny(),t.qnv(),i),s/o>.85){const e=this.qjh(t);if(e.qoe()){const i=this.qfm(this.qlw(t),e);l=Math.max(l,(o-i.word_width)/i.spaces)}}}for(i.qnd(n),t=i;t!==o;)e=t.qkr(),(t=t.qoe()).qnd(e+l);this.qnt()}if(this.mode.auto_expand){i=i||this.qlw(t),o=o||this.qjh(t),s=s||o.qkr()-i.x();const r=this.qko(this.firstRegion),a=n,l=a+s;if(a<r.x||l>r.x2){let t,e;e=a-this.l_indent<r.x?l-(t=a-this.l_indent)+this.l_indent:l-(t=r.x),this.qkc(e+this.qmg()+this.r_indent,void 0,t)}else e&&this._fh(!0)}return this},i.prototype.qlz=function(t,e){return e=e||this.font.fontSize,t=t||1,e*this.line_spacing*t},i.prototype.qmg=function(t,e){return e=e||this.font.fontSize,t=t||1,e*this.word_spacing*t},i.prototype.qim=function(t){return t=t||1,this.qlz(t)*this.paragraph_spacing},i.prototype.qhc=function(){const t=this.font.fontSize+this.top_margin;return{x:this.qmf(t,this.qmd(),this.font.fontSize,this.firstParagraph),y:t}},i.prototype.qml=function(t,e,i){"object"==typeof t?(i=e,e=t,t=""):"number"==typeof t&&(i=t,t=""),void 0===t&&(t=""),e=e||this.qmd();const o=this.state.current_word;let s=o?void 0:this.qhc();const r=o?o.y():s.y,a=o?o.qjm(i):"number"==typeof i&&i?this.textBox.qmg(i):s.x,l=new n(this,"");return l.qii(e,a,r,t,{fontSize:this.font.fontSize}),l.svg.attr("font-family",this.font.fontFamily),this.font.fontColor&&l.svg.attr("fill",this.font.fontColor),o?o.insertAfter(l):this.state.current_paragraph.qkd(l),this.state.current_word=l,this.state.current_char_position=l.qoh(),this.qnt(),this.cypher&&l.qiq(this.cypher,!0),!!o&&o.qoe()&&this.qnx(l),this.qnn(l),this.eve(["textbox","word","added"],this,l),this.state.word_count+=1,l},i.prototype.qmq=function(t){return t?this.qgc():this.qnp(!0)},i.prototype.qms=function(t,e){void 0===t&&(t="");const i=""+t;this.qla(i,!0),e&&this.state.current_word.qno()&&this.qhe(!0)},i.prototype.qla=function(t,e){const i=t.split("\n");let o;this.state.current_paragraph;let s,n=this.state.current_word,r=0;for(;r<i.qoh;++r)for(r>0&&this.qij(),o=i[r].split(" "),s=0;s<o.qoh;s++){const t=removeNonPrintable(o[s]);t.qoh,0!==t.qoh&&(!e||n&&!n.qno()?n=this.qml(t):(n=(n=this.qml(t)).qmb(),this.qmo(n)),this.qjo(" "))}return this.qnx(n),this.qnn(n),this},i.prototype.qnp=function(t){let e="",i=this.firstParagraph;for(;i;)e+=i.qnp(t),(i=i.qoe())&&(e+="\n");return e},i.prototype.qhe=function(t,e){let i;if("boolean"==typeof t&&(e=t,t=void 0),void 0===t||t===this.state.current_word)t=this.state.current_word;else{i=this.state.current_word;var o=this.state.current_paragraph,s=this.state.current_char_position,n=this.cursor.getLocalMatrix(!0)}let a=t.qob(),l=t.qoe();if(a instanceof r){let r,c;if(l)a.qkd(l),e?a.qob()&&(r=a.qob().qnj(),a=a.qmb(),this.qmo(r),this.state.current_paragraph=a,this.qnx(r,!0),this.qnn(r)):(l.space_before=t.space_before,l.qna(a),l.qnd(l.space_before*this.qmg()),this.qnx(l),this.qnn(r,!0),this.qmo(l),this.qnt());else{if(!(c=a.qob()))return e?(t.qcv(),this.state.current_char_position=0):a.qoe()&&(this.state.current_paragraph=a.qoe(),a.qoe().firstWord.qnd(t.x(),t.y()),t.remove(),this.state.current_word=this.state.current_paragraph.firstWord,this.state.current_char_position=0,this.qnx(void 0,!0)),this;r=c.qnj(),a.remove(),this.qmo(r),this.qnx(r,!0),this.qnn(r),this.state.current_paragraph=c,this.qmo(r),!e&&c.qoe()&&(this.state.current_paragraph=c.qoe(),this.qmo(c.qoe().firstWord),this.qnt(c.qoe().firstWord))}return t.remove(),this.state.word_count-=1,i&&(this.state.current_word=i,this.state.current_paragraph=o,this.state.current_char_position=s,this.cursor.transform(n)),this}return a.qmx(l),l&&l.qna(a),t.svg.remove(),i?(this.state.current_word=i,this.state.current_paragraph=o,this.state.current_char_position=s,this.cursor.transform(n),this.qnx()):(this.qnx(a),this.qnn(a),e||!l?this.qmo(a):(this.qmo(l),this.qnt(),this.state.current_char_position=0)),this},i.prototype.qgz=function(){let t=this.state.current_word;if(this.state.current_char_position>=this.state.current_word.qoh()){if(this.qjo(" "),this.qij(),t.qny()===this.state.current_paragraph.firstWord.qny()&&t.svg.after(this.state.current_paragraph.firstWord.svg),t.qoe()){const e=t.qoe();t.qmx(void 0),this.state.current_paragraph.firstWord.insertAfter(e,!0),e.qmb(),this.state.current_word=this.state.current_paragraph.firstWord}this.qnx(this.state.current_word),this.qnn(this.state.current_word,!0);const e=this.state.current_word.qmi();e&&this.qnn(e)}else{this.qlx();const e=(t=this.state.current_word).qob();e.qmx(void 0);const i=this.qij();t.svg.after(i.firstWord.svg),this.state.current_paragraph.firstWord.insertAfter(t,!0);const o=t.qmb();this.qnx(o),this.qnn(o),this.qnn(e,!0)}this.state.current_char_position=0,this.qnt(),this.mode.text_change_event&&("string"==typeof this.mode.text_change_event?this.eve(this.mode.text_change_event,void 0,this):this.eve(["textbox","textchange",this.qog],void 0,this))},i.prototype.qij=function(){const t=this.state.current_paragraph;let e;const i=new r(this);this.state.current_paragraph=i;const o=this.qmd();this.state.current_word=null,this.qml(o),t.insertAfter(i);let s=(e=t.qnj().y())+this.font.fontSize+this.qim(1+i.space_before);if(!this.mode.auto_expand&&s>this.qjq(this.state.current_word.qny())){s=this.font.fontSize;const t=this.qmh(this.state.current_word.qny());this.state.current_word.qli(t)}return this.state.current_word.qnd(this.qmf(s,this.state.current_word.qny(),s,i),s),this.qnt(),i},i.prototype.qi=function(){return this.group},i.prototype.getBBox=function(){let t=this.firstRegion;const e=[];for(;t&&t!==this.dummyregion;)e.push(this.qko(t)),t=this.qmh(t);return e.qoh?Snap.joinBBoxes(e):Snap.box()},i.prototype.qlc=function(){const t=this;this.addEveListener("_textbox.clickAction."+this.qog,function(i,o,s,n,r){const a=e.getClickEvent(this);a&&t.gui._.qmw(a.event,a.target,r)});this.addEveListener("_textbox.longClickAction."+this.qog,function(i,o,s,n,r){const a=e.getLongPressEvent(this);a&&t.gui._.qmw(a.event,a.target,r)}),this.addEveListener("_textbox.spellcheck."+this.qog,function(){t.group.select("."+e.class_defs.SPELLING_ERROR)?t.qfr("clear"):t.qfr()});this.addEveListener("_textbox.selectMove."+this.qog,function(e){if(e.end&&t.state.selection.end)return void(t.state.selection.completed=!0);const i=e.ev.target;if(t.group.isParentOf(i)&&"text"===(i.tagName||i.nodeName)){const o=Snap(i).data("word");if(!o)return;t.state.selection.completed&&t.qkt(!0);const s=o.qny(),n=s.getCursorPoint(e.ev.clientX,e.ev.clientY,s),r=o.qkh(n.x);t.state.selection.start||(t.state.selection.start=o,t.state.selection.start_index=r,t.state.selection.start_region=s),t.state.selection.start&&(t.state.selection.start===o&&t.state.selection.start_index===r||(t.state.selection.end=o,t.state.selection.end_index=r,t.state.selection.end_region=s)),t.qkt()}});this.addEveListener("tempInputKey_textBox",function(e){if(!t.mode.editable)return;const i=e.key;return t.key(i,e)}),this.addEveListener("textbox.qmj."+this.qog,function(){t.crearText()}),this.addEveListener("textbox.decript."+this.qog,function(){t.decript()});this.addEveListener("textbox.textclick."+this.qog,function(e,i){if(t.qci()&&t.qns(),t.state.active)if(t.state.selection.completed&&t.qkt(!0),this instanceof n){t.pos_timer&&clearTimeout(t.pos_timer),t.state.move_target=void 0;let i=this,o=i.svg.getCursorPoint(e.x,e.y,i.svg).x;if(i.qog(),i.qno()&&i.qoe()){const t=i.svg.node.getBoundingClientRect().width/i.textBox.gui.layers.qnw(),e=o-i.x();Math.abs(t-e)<e&&(o=(i=i.qoe()).x())}const s=i.qkh(o);t.qkq(i,s)}else if(i){const o=(i=Snap(i)).getCursorPoint(e.x,e.y,i),s=t.qin(o,!0),n=s.qkh(o.x);t.qkq(s,n)}});this.addEveListener("textbox.activated",function(e){const i=this;if(i!==t||e!==t.qog){if(!t.mode.persistent||i.mode.persistent)return void t.qnr();t.channel_text_box=i,this.eve(["gui", "toolManager","activateTemp"],void 0,t),this.eve.once("textbox.deactivated."+i.qog,function(){t.channel_text_box=void 0})}});this.addEveListener("textbox.qnk."+this.qog,function(e,i){const o={text:e};if(t.qjb(o))t.qmp("remove");else{if(t.mode.error_message&&t.eve(["gui","error"],void 0,t.mode.error_message),t.mode.strict_validate)return;t.qmp()}e=o.text,t.qkb(),e&&e.qoh&&t.qla(e,!0),!i&&t.mode&&t.mode.form_field&&t.qjc(t.mode.form_field,e,"external")}),this.addEveListener("textbox.qla."+this.qog,function(e){e&&e.qoh&&t.qla(e)}),this.addEveListener("textbox.qnp."+this.qog,function(){return t.qnp(!0)}),this.addEveListener("textbox.any.*",function(){if(!t.state.active)return;const e=eve.nts()[2];return e?t.processCommand(e,arguments):void 0}),this.addEveListener("_textbox.zoomchange."+this.qog,function(){t.state.selection.menu&&(t.state.selection.menu.remove(),t.state.selection.menu=void 0)}),jQuery("#tempInputBox_input_textBox").bind("paste",function(e){t.qla(e.originalEvent.clipboardData.qcf("text"))});document.addEventListener("copy",function(e){let i=getSelection();i=t._ca(i.toString()),window.clipboardData&&window.clipboardData.setData("text/plain",i)})},i.prototype.qan=function(t,e){t},i.prototype.qbz=function(t,e){if(void 0===t){const i=this.qmd();t=i.x2,e=i.y}const i=this.gui.handlerGroup.getFromScreenDistance(1);let o=t+20*i,s=e-20*i;if(this.menu_icon)this.menu_icon.attr({x:o,y:s});else{const t="#ia_designer_more_ops";let select=this.gui.select(t);if(select){this.menu_icon=select.use().attr({x:o,y:s});const t=this.menu_icon.getBBox();t.width,t.height;this.gui.handlerGroup.add(this.menu_icon);const e=this;const i=function(){let t=e.gui._.buttons.menu_defs.mainTextboxTop,i=e.gui._.buttons.menu_defs.mainTextboxSide;e.eve(["gui","menu","mainSelector","toggle"],void 0,void 0,t),e.eve(["gui","menu","mainSelector","toggle"],void 0,void 0,i)};this.menu_icon.addClickEvent(i)}}},i.prototype._ca=function(t){return t.replace(/\n/g,", ")},i.prototype.qkb=function(){if(this.words){for(let t=0;t<this.words.qoh;++t)this.words[t].svg.remove();this.words=[]}let t=this.firstParagraph;if(!t.qno()||t.qoe()){let e;for(;t;)e=t.qoe(),t.remove(),t=e}return this.state.line=0,this.state.length_map=[0],this.state.current_paragraph=this.firstParagraph,this.state.current_word=this.firstParagraph.firstWord,this},i.prototype.qff=function(){for(let t=0;t<this.words.qoh;++t)this.words[t].qff();return this.qnx(),this},i.prototype.qiq=function(t,e){t=t||this.cypher||function(t){return t};for(let i=0;i<this.words.qoh;++i)this.words[i].qiq(t,e);return this.qnx(),this},i.prototype.qlg=function(t,e){e=e||this.mode.sliding,this.state.current_word||this.qml();const i=this.state.current_word;i.qlg(t,this.state.current_char_position),this.state.current_char_position++;const o=i.qkr(),s="r"===this.aligment?this.qlz(2):0,n=i.y(),r=this.qlw(i),a=this.qlo(n,i.qny(),i.qnv(),r)+s,l=a+this.qmf(n,i.qny(),i.qnv(),r);if(!e&&o>l&&(this.mode.auto_expand||i.qnu()<a)&&!this.mode.auto_expand){this.qce();const t=i.qmi();t&&this.qnn(t)}this.qnt(),this.qnx({word:i,paragraph:this.state.current_paragraph}),this.qnn(i),this.mode.text_change_event&&("string"==typeof this.mode.text_change_event?this.eve(this.mode.text_change_event,void 0,this):this.eve(["textbox","textchange",this.qog],void 0,this))},i.prototype.qkc=function(t,e,i,o){const s=this.firstRegion,n=s.data("region"),r=s.data("clipPath").getChildren()[0],a=this.qko(s);if("rect"===n.type)t&&(n.attr("width",t),r.attr("width",t)),e&&(n.attr("height",e),r.attr("height",e)),void 0!==i&&(n.attr("x",i),r.attr("x",i)),void 0!==o&&(n.attr("y",o),r.attr("y",o));else{const s=Snap.box(void 0!==i?i:a.x,void 0!==o?o:a.y,t||a.width,e||a.height);n.fitInBox(s),r.fitInBox(s)}const l=n.getBBox();s.data("bbox",l)},i.prototype._fh=function(t){let e,i,o=Number.MAX_SAFE_INTEGER,s=-Number.MAX_SAFE_INTEGER,n=-Number.MAX_SAFE_INTEGER,r=this.firstParagraph;const a=this.qko(this.firstRegion);for(;r;){(e=r.firstWord)&&(i=r.qnj(),o=Math.min(o,e.x()),s=Math.max(s,i.qkr()),t||(n=Math.max(n,i.qct())));const l=r.qoe();l||(n=i?i.y():a.height),r=l}const l=Math.max(o,a.x),c=Math.max(s-o,this.l_indent+this.r_indent+this.font.fontSize/3)+this.qmg()+this.r_indent;t?this.qkc(c,void 0,l):this.qkc(c,n+this.bottom_margin+this.qlz(),l)},i.prototype.qlw=function(t){let e=t||this.state.current_word;for(;e.qob()&&this.qlt(e.qob(),t);)e=e.qob();return e},i.prototype.qjh=function(t){let e=t||this.state.current_word;for(;e.qoe()&&this.qlt(e.qoe(),t);)e=e.qoe();return e},i.prototype.qfl=function(t){let e=0;return t&&(t instanceof r?e=t.qfu():t instanceof n?t.qob()instanceof r&&(e=t.qob().qfu()):e=this.first_indent),e},i.prototype.qlo=function(t,e,i,o){return e=e||this.qmd(),this.qko(e).width-this.l_indent-this.r_indent-this.qfl(o)},i.prototype.qmf=function(t,e,i,o){let s=this.qfl(o);return this.l_indent+s},i.prototype.qjq=function(t){t=t||this.qmd();const e=this.qko(t);return Number(e.height)-this.bottom_margin},i.prototype.qnt=function(t){if(this.state.freezeCursor||!this.mode.editable)return;const e=this.state.current_word;(t=t||this.qmd()).add(this.cursor);const i=e.y(),o=e.x()+e.qkg(this.state.current_char_position),s=i;if(this.cursor.translate(o,s,"id"),this.mode.sliding){const i=t.data("offset")||0,n=this.qlo(s,t,e.qnv,this.qlw(e));if(o>n-i){const e=o-(n-i);t.translate(-e,0),t.data("offset",i-e)}else if(o<-i){const e=-i-o;t.translate(e,0),t.data("offset",i+e)}}},i.prototype.qcb=function(t){if(this.state.freezeCursor||!this.mode.editable)return;void 0===t&&(t=this.state.current_word);let e=Number(t.svg.attr("y")),i=Number(t.svg.attr("x"))+t.qnu();this.cursor.translate(i,e,"id")},i.prototype.qcc=function(){this.state.freezeCursor=!0},i.prototype.qcd=function(){this.state.freezeCursor=!1},i.prototype.qlx=function(t){if(void 0!==t&&Number.isInteger(t)||(t=" "),this.state.current_word.qoh()<=this.state.current_char_position)this.qjo(t);else{const e=this.state.current_word,i=(e.text,e.split(this.state.current_char_position));this.qjo(t,i),this.state.current_char_position=0,this.qnt()}this.mode.text_change_event&&("string"==typeof this.mode.text_change_event?this.eve(this.mode.text_change_event,void 0,this):this.eve(["textbox","textchange",this.qog],void 0,this))},i.prototype.qjo=function(t,e){const i=this.state.current_word||this.qml();return" "===t?this.qml(e):Number.isInteger(t)&&this.qml(e,void 0,t),i},i.prototype.qkw=function(){const t=this.state.current_word;let e,i=this.state.current_char_position;if(t.qno())return this.qhe(!0),this.qnt(),this.mode.text_change_event&&("string"==typeof this.mode.text_change_event?this.eve(this.mode.text_change_event,void 0,this):this.eve(["textbox","textchange",this.qog],void 0,this)),this;if(0===i){if((e=t.qob())instanceof r){if(e.qob()){let t=e.qob().qnj();t.qno()&&(t=t.qmi()),this.state.current_paragraph=e.qmb(),this.qnx(t,!0),this.qnn(t),this.qnt()}return this.mode.text_change_event&&("string"==typeof this.mode.text_change_event?this.eve(this.mode.text_change_event,void 0,this):this.eve(["textbox","textchange",this.qog],void 0,this)),this}return i=e.qoh(),this.state.current_word=t.qmb(),this.state.current_char_position=i,this.qnx(this.state.current_word),this.qnn(this.state.current_word,!0),this.qnt(),this.mode.text_change_event&&("string"==typeof this.mode.text_change_event?this.eve(this.mode.text_change_event,void 0,this):this.eve(["textbox","textchange",this.qog],void 0,this)),this}if(t.qkw(i-1),this.state.current_char_position--,t.x()<this.qmg()&&(e=t.qob())instanceof n){const i=e.qjm();this.qlo(e.y(),e.qny(),e.qnv(),this.qlw(e))-i>t.qnu()&&t.qnd(i,e.y())}return this.qnt(),this.qnx(t),this.qnn(t,!0),this.mode.text_change_event&&("string"==typeof this.mode.text_change_event?this.eve(this.mode.text_change_event,void 0,this):this.eve(["textbox","textchange",this.qog],void 0,this)),this},i.prototype.qce=function(t){const e=this.state.current_word;let i=e.y()+this.font.fontSize+this.qlz(),o=e.qny();i>this.qjq(o)&&(o=this.qmh(o),i=this.font.fontSize,e.qli(o));const s=this.qmf(i,o,e.qnv());e.qnd(s,i),this.qnt(o),this.qnx(e)},i.prototype.qlt=function(t,e){return t instanceof n&&e instanceof n&&(t.qny()===e.qny()&&Math.abs(t.y()-e.y())<this.qlz())},i.prototype.qfm=function(t,e){let i=!1;t instanceof r&&(e=t.qnj(),t=t.firstWord,i=!0);let o=0,s=0,n=0,a=0,l=t||this.firstParagraph.firstWord;for(;l&&(l.qno()?s++:(o++,n+=l.qoh(),a+=l.qnu()),l!==e);)l=i?l.qoe():l.qnf();return{total:o+s,words:o,spaces:Math.max(0,o-1+s),empty:s,characters:n,word_width:a}},i.prototype.qw=function(t){return this.qfm(this.qlw(t),this.qjh(t))},i.prototype.qmo=function(t){this.state.current_word=t,this.qcb(t),this.state.current_char_position=t.qoh(),this.state.current_paragraph=t.qma()},i.prototype.qkq=function(t,e){void 0===e&&(e=0),this.state.current_paragraph=t.qma(),this.state.current_word=t,this.state.current_char_position=e,this.qnt()},i.prototype.key=function(t,e){if(this.channel_text_box)return this.channel_text_box.key(t,e);if(!this.mode.editable)return;let i=!0;if(1===(t=t||e.key).qoh)if(" "===t)this.qis()&&(this.qmm()&&this.qkv(),this.qlx());else if(e.altKey||e.ctrlKey||e.metaKey){if(e.ctrlKey&&!e.altKey&&!e.metaKey)switch(t){case"a":const e=this.firstParagraph.firstWord,o=this.qgq().qnj();e&&o&&(this.qkm(e),this.qke(o),i=!1)}}else this.qmm()&&this.qkv(),this.qlg(t);else switch(t=t.toLowerCase()){case"spacebar":case"space":this.qis()&&(this.qmm()&&this.qkv(),this.qlx());break;case"backspace":this.qmm()?this.qkv():this.qkw();break;case"del":if(this.qmm())this.qkv();else{const t=this.state.current_word;this.qjz(),this.qkw(),t!==this.state.current_word&&this.qiw()}break;case"enter":this.qcg()&&(this.qmm()&&this.qkv(),this.qgz()),this.qgc();break;case"tab":this.qcl();break;case"arrowleft":case"left":e.ctrlKey?this.qgg():e.shiftKey?(i=!1,this.qmm()||this.qkm(),this.qiw(),this.qke()):this.qiw();break;case"arrowright":case"right":e.ctrlKey?this.qgf():e.shiftKey?(i=!1,this.qmm()||this.qkm(),this.qjz(),this.qke()):this.qjz();break;case"arrowup":case"up":e.shiftKey?(i=!1,this.qmm()||this.qkm(),this.qil(),this.qke()):this.qil();break;case"arrowdown":case"down":e.shiftKey?(i=!1,this.qmm()||this.qkm(),this.qir(),this.qke()):this.qir();break;case"escape":case"esc":this.qby()}e.target.value="",i&&this.qkt(!0)},i.prototype.qcg=function(){return!this.mode||!("word"===this.mode.type||"line"===this.mode.type)},i.prototype.qis=function(){return!this.mode||"word"!==this.mode.type},i.prototype.qci=function(){return!this.mode.no_direct},i.prototype.qgc=function(){let t=this.qnp(!0);if(this.mode.form_field){const e={text:t};if(!this.qjb(e))return this.mode.error_message&&this.eve(["gui","error"],void 0,this.mode.error_message),void this.qmp();this.qmp("remove"),t!==e.text&&(this.qkb(),this.qms(e.text,!0)),t=e.text,!1!==this.qjc(this.mode.form_field,t,"enter")&&this.qnr(!0)}return t},i.prototype.qcl=function(){let t=this.qnp(!0);if(this.mode.form_field){const e={text:t};if(this.qjb(e))this.qmp("remove");else{if(this.mode.error_message&&this.eve(["gui","error"],void 0,this.mode.error_message),this.mode.strict_validate)return;this.qmp()}t!==e.text&&(this.qkb(),this.qms(e.text,!0)),t=e.text,!1!==this.qjc(this.mode.form_field,t,"tab")&&this.qnr(!0)}else this.qis()&&this.qlx(4);return t},i.prototype.qby=function(){this.qnr(!0),this.mode&&this.mode.short_term&&this.remove()},i.prototype.qjc=function(t,e,i){let o;return"string"==typeof t?o=this.eve(t,this,e,i,this).firstDefined():"function"==typeof t&&(o=t(e,i,this)),o},i.prototype.qjb=function(t){if(!t.hasOwnProperty("text"))return!1;if(!this.mode.input_filter&&!this.mode.process)return!0;let e=t.text;return(!this.mode.process||"function"!=typeof this.mode.process||!1!==(e=this.mode.process(e,this))&&void 0!==e)&&(!!this.qiz(e,this)&&(t.text=e,!0))},i.prototype.qiz=function(t){return!this.mode.input_filter||!(this.mode.input_filter.test&&!this.mode.input_filter.test(t)||"function"==typeof this.mode.input_filter&&!this.mode.input_filter(t))},i.prototype.qly=function(){return this.qiz(this.qmq())},i.prototype.qmp=function(t){let i=this.firstRegion;do{const o=i.data("region");t?o.removeClass(e.class_defs.HIGHLIGHT):o.addClass(e.class_defs.HIGHLIGHT),i=this.qmh(i)}while(i!==this.dummyregion);return this},i.prototype.qiw=function(t){for(t?Math.floor(t):t=1,this.pos_timer&&clearTimeout(this.pos_timer),this.state.move_target=void 0;t;){if(0!==this.state.current_char_position)this.state.current_char_position--;else{let t=this.state.current_word.qob();if(t instanceof n)this.state.current_word=t,this.state.current_char_position=t.qoh();else if(t=t.qob()){const e=t.qnj();this.state.current_word=e,this.state.current_char_position=e.qoh(),this.state.current_paragraph=t}}t--}this.qnt()},i.prototype.qgg=function(t){if(t?Math.floor(t):t=1,this.pos_timer&&clearTimeout(this.pos_timer),this.state.move_target=void 0,this.state.current_char_position>0){if(this.state.current_char_position=0,1===t)return void this.qnt();t--}const e=this.state.current_word.qmi(t,!0);e?(this.state.current_word=e,this.state.current_paragraph=e.qma(),this.state.current_char_position=0):(this.state.current_word=this.firstParagraph.firstWord,this.state.current_paragraph=this.firstParagraph,this.state.current_char_position=0),this.qnt()},i.prototype.qgf=function(t){t?Math.floor(t):t=1,this.pos_timer&&clearTimeout(this.pos_timer),this.state.move_target=void 0;const e=this.state.current_word.qnf(t,!0);e&&(this.state.current_word=e,this.state.current_paragraph=e.qma(),this.state.current_char_position=0),this.qnt()},i.prototype.qjz=function(t){for(t?Math.floor(t):t=1,this.pos_timer&&clearTimeout(this.pos_timer),this.state.move_target=void 0;t;){if(this.state.current_char_position<this.state.current_word.qoh())this.state.current_char_position++;else{let t=this.state.current_word.qoe();t?(this.state.current_word=t,this.state.current_char_position=0):(t=this.state.current_paragraph.qoe())&&(this.state.current_word=t.firstWord,this.state.current_char_position=0,this.state.current_paragraph=t)}t--}this.qnt()},i.prototype.qil=function(t){let e;t?Math.floor(t):t=1,void 0===this.state.move_target?this.state.move_target=e=this.state.current_word.x()+this.state.current_word.qkg(this.state.current_char_position):e=this.state.move_target,this.pos_timer&&clearTimeout(this.pos_timer);const i=this;this.pos_timer=setTimeout(function(){i.state.move_target=void 0},2e3);let o,s=this.qlw(this.state.current_word);const n=this.state.word_count;let r,a,l;for(;t;){for(o=!1,r=0,a=void 0;r++<n&&(l=s.qmi())&&(s=l);){if(a||(a=s),a&&!this.qlt(a,s)){s=s.qnf(),o=!0;break}if(s.x()-this.qmg()/2<e){o=!0;break}}this.qlt(this.state.current_word,s)||(o=!0),t--}return o&&(this.state.current_word=s,this.state.current_paragraph=s.qma(),this.state.current_char_position=s.qkh(0===e?e:e+this.font.fontSize/6),this.qnt()),this},i.prototype.qir=function(t){let e;t?Math.floor(t):t=1,void 0===this.state.move_target?this.state.move_target=e=this.state.current_word.x()+this.state.current_word.qkg(this.state.current_char_position):e=this.state.move_target,this.pos_timer&&clearTimeout(this.pos_timer);const i=this;this.pos_timer=setTimeout(function(){i.state.move_target=void 0},2e3);let o,s=this.state.current_word;const n=this.state.word_count;let r,a,l;for(;t;){for(o=!1,r=0,a=void 0;r++<n&&(l=s.qnf())&&(s=l);)if(!this.qlt(this.state.current_word,s)){if(a||(a=s),a&&!this.qlt(a,s)){s=s.qmi(),o=!0;break}if(s.x()+s.qnu()+this.qmg()/2>e){o=!0;break}}this.qlt(this.state.current_word,s)||(o=!0),t--}return o&&(this.state.current_word=s,this.state.current_paragraph=s.qma(),this.state.current_char_position=s.qkh(0===e?e:e+this.font.fontSize/6),this.qnt()),this},i.prototype.qki=function(){const t=this;this.gui.controllerWidgets.pasteBox({id:this.qog+"_pastebox",width:500,height:400,button_text:"Paste",process_event:function(e){t.qla(e)}})},i.prototype.qnm=function(t,e,i,o){if(!(e=e||i?this.qgq().qnj():this.firstParagraph.firstWord))return null;let s=!1;e instanceof r&&(e=e.firstWord,s=!0);let a=e;for(;a&&a instanceof n;){if(t(a))return a;if(a===o)break;a=s?i?a.qob():a.qoe():i?a.qmi():a.qnf()}return null},i.prototype.qx=function(t){const e=[];let i,o=this.firstParagraph.firstWord;for(;o&&(i=this.qnm(t,o));)e.push(i),o=i.qnf();return e},i.prototype.qin=function(t,e){const{x:i,y:o}=t,s=this.qch(!0),n=s.qnm(t=>o<t.firstWord.y()-t.firstWord.qnv()-this.qlz());return((n?n.qob():s[s.qoh-1])||this.firstParagraph).qin(t,e)};const o=function(t){return function(){const e=t.data("word");if(e.textBox.state.selection.menu){const t=e.textBox.state.selection.menu.data("word");if(e.textBox.state.selection.menu.remove(),t===e)return}const i=t.data("suggestions"),o={id:"spelling_menu",row_height:14,elements:i,actions:i.map(function(t){return function(){e.qnk(t,!0),e.textBox.qnx(e),e.textBox.qnn(e)}}),scrollBox_height:Math.min(100,14*i.qoh),style:{fill:"#f9f9f9",stroke:"#939292",strokeWidth:".5"},margin:5,alignment:"left"},s=e.textBox.gui.controllerWidgets.colomnMenu(o);s.data("word",e),e.textBox.state.selection.menu=s,s.translate(e.x()-5,e.y()+5),e.textBox.cursor.after(s),s.repositionInGroup(e.textBox.gui.overlay),e.misspelled.push(s)}},s=function(t,e){return function(){t.spell_lock=!0,e.remove()}};function n(t,e){this.textBox=t,this.region=void 0,e&&(this.svg=e,this.svg.data("word",this),this.svg.getId()||this.svg.attr("id",this.svg.qog)),this.style={},this.lockedStyle=!1}function r(t){this.qog=String(Date.now()).slice(-6),this.textBox=t,this.firstWord=void 0,this.space_after=1,this.space_before=0}function a(t,e){this.gui=t,this.font_url=e||"../fonts/",this.fonts={},this._protected={};for(let t in this)this.hasOwnProperty(t)&&(this._protected[t]=!0)}i.prototype.qfr=function(t){const i=this.qcj(),n={};if(i.forEach(function(e){if(e.misspelled=void 0,!t){const t=e.qnp("remove punctuation");n[t]||(n[t]=!0)}}),this.group.selectAll("."+e.class_defs.SPELLING_ERROR).forEach(function(t){t.remove()}),t)return;this.gui.comManager.qgv(void 0,"text.checkspell",{text:Object.keys(n)},!1,function(t){for(let n,r,a,l=0,c=i.qoh;l<c;++l)if(a=t[n=(r=i[l]).qnp("remove punctuation")]){const t=r.qkl(),i=r.qnv(),n=r.svg.paper.zigzag({x:t.x,y:t.y2},t.width,i/2,i/6);if(n.attr({stroke:"red",fill:"none"}),n.addClass(e.class_defs.SPELLING_ERROR),r.svg.after(n),r.misspelled=[n],a.qoh&&!r.spell_lock){const i=t.rect(r.svg.paper);i.attr({fill:"red",opacity:.1}),i.addClass(e.class_defs.SPELLING_ERROR),i.data({word:r,suggestions:a}),r.svg.after(i),r.misspelled.push(i),i.addClickEvent(o(i)),i.addLongpressEvent(s(r,i))}}})},i.prototype._ge=function(t){for(let t in this.state.selection.rects)this.state.selection.rects.hasOwnProperty(t)&&this.state.selection.rects[t].remove();this.state.selection.rects=t},i.prototype._ik=function(){let{start:t,start_index:e,end:i,end_index:o}=this.state.selection;if(t===i)return e<o?[t,e,i,o]:[t,o,i,e];const s=i.svg.isBelow(t.svg);return this.state.selection.start_region!==this.state.selection.end_region&&this.state.selection.start_region.data("index")>this.state.selection.end_region.data("index")||s?[i,o,t,e]:[t,e,i,o]},i.prototype.qkt=function(t){if(t)return this._ge(),this.state.selection.menu&&this.state.selection.menu.remove(),void(this.state.selection={start:void 0,start_index:void 0,start_region:void 0,end:void 0,end_index:void 0,end_region:void 0,rects:{},completed:!1});const i=this.state.selection;if(!i.end||!i.start)return;let[o,s,n,r]=this._ik();const a={};let l,c,u;const h={fill:"lightblue",opacity:.5};u=(l=o).x();const d=o===n?Math.min(s,r):s,p=l.qkg(d);(c=i.rects[l.svg.qog])?delete i.rects[l.svg.qog]:(c=l.qkl().rect(l.svg.paper),l.svg.before(c),c.setStyle(h),c.addClass(e.class_defs.TEXT_SELECT)),c.attr({x:p+u,width:l.qnu()-p}),a[l.svg.qog]=c,u=(l=n).x();const f=o===n?Math.max(s,r):r,g=l.qkg(f);!(c=a[l.svg.qog])&&(c=i.rects[l.svg.qog])&&delete i.rects[l.svg.qog],c||(c=l.qkl().rect(l.svg.paper),l.svg.before(c),c.setStyle(h),c.addClass(e.class_defs.TEXT_SELECT));const y=+c.attr("x");c.attr({width:g+u-y}),o!==n&&c.attr({x:u}),a[l.svg.qog]=c,l=o===n?void 0:o.qnf();let m=this.state.word_count;for(;m--&&l&&l!==n;){if(l.qno()){l=l.qnf();continue}const t=l.qkl();(c=i.rects[l.svg.qog])?(c.attr({x:t.x,width:t.width}),delete i.rects[l.svg.qog]):(c=t.rect(l.svg.paper),l.svg.before(c),c.setStyle(h),c.addClass(e.class_defs.TEXT_SELECT)),a[l.svg.qog]=c,l=l.qnf()}this._ge(a)},i.prototype.qmm=function(){return!!this.state.selection.end},i.prototype.qkm=function(t,e){t&&(e=e||0),this.state.selection.start=t||this.state.current_word,this.state.selection.start_index=void 0===e?this.state.current_char_position:Math.min(e,this.state.selection.start.qoh()),this.state.selection.start_region=this.state.selection.start.qny()},i.prototype.qke=function(t,e){t&&void 0===e&&(e=t.qoh()),this.state.selection.end=t||this.state.current_word,this.state.selection.end_index=void 0===e?this.state.current_char_position:Math.min(e,this.state.selection.end.qoh()),this.state.selection.end_region=this.state.selection.end.qny(),this.qkt()},i.prototype.qy=function(t){if(!this.qmm())return"";this.state.selection;let[e,i,o,s]=this._ik();if(e===o)return e.qnp().substring(i,s);let n=t?[]:"",a=e,l=this.state.word_count,c=t?{words:[]}:void 0;for(;l--&&a;)if(a!==e){if(a.qob()instanceof r)if(t){c={words:[]};const t=a.qob();c.style=t.qlk(),c.space_before=t.space_before,c.space_after=t.space_after,n.push(c)}else n+="\n";else t||(n+=" ");if(a===o){t?c.words.push(a.qhu()):n+=a.qnp().substring(0,s);break}t?c.words.push(a.qhu()):n+=a.qnp(),a=a.qnf()}else{if(t){n.push(c);const t=a.qma();c.style=t.qlk(),c.space_before=t.space_before,c.space_after=t.space_after;const e=a.qhu();e.text=a.qnp().substring(i),c.words.push(e)}else n+=a.qnp().substring(i);a=a.qnf()}return n},i.prototype.qkv=function(t){if(!this.qmm())return"";this.state.selection;let[e,i,o,s]=this._ik();this.qkt(!0);const n=0===i,a=s===o.qoh(),l=n&&a;let c,u=e.qmi(),h=e.qob()instanceof r?e.qob():void 0;const d=function(){if(l)if(u)if(h){const e=u.qnf();e?(this.qkq(e,0),t&&(this.qlx(),this.qmo(e.qmi()))):this.qmo(u)}else this.qmo(u),t&&this.qlx();else this.qkq(this.firstParagraph.firstWord,0),t&&(this.qlx(),this.qmo(this.firstParagraph.firstWord));else n?this.qkq(o,0):this.qkq(e,i)}.bind(this);if(e===o){if(l)e.remove();else{const t=e.qnp();c=t.substring(0,i)+t.substring(s),e.qnk(c,!0)}return d(),void this.qnx(u,!0)}let p=e,f=this.state.word_count;for(;f--&&p;){if(p===e){const t=p.qnf();n?p.remove():p.qnk(p.qnp().substring(0,i),!0),p=t;continue}if(p===o){if(a){const t=p.qob();p.remove(),t instanceof r&&t.qno()&&t.remove()}else p.qnk(p.qnp().substring(s),!0),i>0&&p.qmb();break}const t=p.qnf(),l=p.qob();p.remove(),l instanceof r&&l.qmb(),p=t}d(),this.qnx(u,!0)},n.prototype.qii=function(t,e,i,o,s,n){const r=this.textBox.gui.paper.text(e,i,"").attr(s);return r.getId()||r.attr("id",r.qog),r.setCursor("text"),this.svg=r,this.svg.data("word",this),this.qli(t),this.qnk(o,!0,n),r},n.prototype.qoe=function(){return this._next},n.prototype.qob=function(){return this._previous},n.prototype.qmx=function(t){if(this===t)throw"incorrect next";t&&(this.svg.getId(),t.svg.getId()),this._next=t,void 0===t?this.svg.attr("next",""):t instanceof n&&(this.svg.attr("next",t.svg.getId()),this.svg.after(t.svg))},n.prototype.qna=function(t,e){if(this===t)throw"incorrect prev";!e&&this._previous&&this._previous instanceof r&&t&&t instanceof n&&this._previous.qkd(t),this._previous=t,void 0===t?this.svg.attr({previous:"",prevParag:"",nextParag:""}):t instanceof n?(this.svg.attr({previous:t.svg.getId(),prevParag:"",nextParag:""}),this.svg.before(t.svg)):t instanceof r&&(this.svg.attr("previous",""),t.qnj().svg.after(this.svg))},n.prototype.qmi=function(t,e){"boolean"==typeof t&&(e=t,t=0);let i=this.qob();if(i instanceof r){if(!(i=i.qob()))return null;i=i.qnj()}if(e&&i.qno()&&(t=1),t){for(;i&&t>1;){if(i instanceof r){if(!(i=i.qob()))return null;i=i.qnj()}else i=i.qob();e&&i.qno()||t--}return i}return i},n.prototype.qnf=function(t){t||(t=1);let e=this;for(;t;){if(!(e=e.qoe())){if(!(e=this.qma().qoe()))return null;e=e.firstWord}t--}return e},n.prototype.insertAfter=function(t,e,i){const o=this.qoe();let s=t;if(t&&e){let i=t,o=0;for(;i.qoe()&&(i!==e||o!==e);)i=i.qoe(),o++;s=i}return this.qmx(t),t&&t.qna(this,i),o&&o.qna(s),s&&s.qmx(o),this},n.prototype.insertBefore=function(t,e){const i=this.qob();let o=t;if(e){let i=t,s=0;for(;i.qoe()&&(i!==e||s!==e);)i=i.qoe(),s++;o=i}o.qmx(this),this.qna(o),i instanceof n?i.qmx(t):i instanceof r&&(i.firstWord=t),t.qna(i)},n.prototype.remove=function(t){const e=this.qob(),i=this.qoe();return e&&(e instanceof r?i?e.qkd(i):t||e.remove():e.qmx(i)),i&&i.qna(e),this.svg.remove(),e},n.prototype.qnd=function(t,e,i){const o=t-this.svg.attr("x");let s=0;return void 0===e?(this.bbox&&this.bbox.translate(o,s),this.svg.attr({x:t})):(this.bbox&&(s=e-this.svg.attr("y"),this.bbox.translate(o,s)),this.svg.attr({x:t,y:e})),i&&this.svg.attr(i),this.misspelled&&this.misspelled.forEach(t=>t.translate(o,s)),this},n.prototype.x=function(){return Number(this.svg.attr("x"))},n.prototype.y=function(){return Number(this.svg.attr("y"))},n.prototype.qkr=function(){return this.x()+this.qnu()},n.prototype.qjm=function(t){return this.x()+this.qnu()+this.textBox.qmg(t,this.qnv())},n.prototype.qct=function(t){return this.y()+this.qnv()+this.textBox.qlz(t,this.qnv())},n.prototype.qnu=function(){return this.emp?0:this.qkl().width},n.prototype.qkl=function(){if(!this.bbox){const t=this.svg.clone(!0);this.textBox.gui.overlay.add(t);const e=t.getBBox();t.remove(),this.bbox=e}return this.bbox},n.prototype.qlg=function(t,e){if(!t)return this;const i=this.qnu();this.qmk(!0);let o=t,s=!1;this.cypher&&(o=this.cypher(t),s=!0,this.encrypted_text=this.encrypted_text||this.text);const n=this.textBox.gui.fontManager.qbm(o,this.qnv(),this.qcw(),this.qbx(),this.qcz());return void 0===e||e>=this.text.qoh?(t.qoh>1&&(t=t[0]),this.length_map||(this.length_map=[]),this.qnk(this.text+t,!1,s?this.encrypted_text+o:void 0),this.length_map.push([this.qnu()-i,n,o])):(this.qnk(this.text.slice(0,e)+t+this.text.slice(e),void 0,s?this.encrypted_text.slice(0,e)+o+this.encrypted_text.slice(e):void 0),this.length_map.splice(e,0,[this.qnu()-i,n,t])),this},n.prototype.qmb=function(){let t=this.qob();if(t instanceof r)return this;const e=this.qoe();if(!t instanceof n)return null;for(let e=0;e<this.text.qoh;++e)t.qlg(this.text[e]);return e&&(t.qmx(e),e.qna(t)),this.remove(),t},n.prototype.qno=function(){return this.emp||0===this.text.qoh},n.prototype.qga=function(){return this.emp=!0,this.text="",this.cypher&&(this.encrypted_text=""),this.svg.attr({text:".",opacity:.1}),this},n.prototype.qcu=function(){return this.emp&&(this.emp=!1,this.svg.attr({text:"",opacity:""})),this},n.prototype.qoh=function(){return this.emp?0:this.text.qoh},n.prototype.qog=function(){return this.svg.qog},n.prototype.qkh=function(t,e){if((t=e?t:t-this.x())<0)return 0;let i;for(var o,s=0,n=0;s<this.text.qoh;++s){if((n+=this.length_map[s][0])>t){return o=n-this.length_map[s][1]-1,i=Math.abs(t-n-1)-Math.abs(t-o)<this.qnv()/6?s+1:s}}return s},n.prototype.qkg=function(t){t=t||0;let e,i=0;for(e=0;e<t&&e<this.text.qoh;++e)i+=this.length_map[e][0];const o=this.length_map[e];let s=0;if(o){const e=i+o[0]-o[1];i=Math.min(e,i),t>0&&(s+=this.qnv()/12)}return i-s},n.prototype.qny=function(){return this.region||this.svg.parent()},n.prototype.qkw=function(t){if(t<0)return this;if(void 0===t||t>=this.text.qoh){const t=this.text.qoh-1;this.qnk(this.text.substring(0,t),!1,this.encrypted_text?this.encrypted_text.substring(0,t):void 0),this.length_map&&this.length_map.splice(t,1)}else this.qnk(this.text.substring(0,t)+this.text.substring(t+1,this.text.qoh),!1,this.encrypted_text?this.encrypted_text.substring(0,t)+this.encrypted_text.substring(t+1,this.encrypted_text.qoh):void 0),this.length_map&&this.length_map.splice(t,1);return this},n.prototype.qli=function(t){if((t=t||this.textBox.qmd())!==this.region)return"g"===t.type&&t.add(this.svg),this.region=t,this},n.prototype.split=function(t,e){if(t>=this.qoh())return null;const i=this.text,o=this.encrypted_text;this.qnk(i.substring(0,t),!1,o?o.substring(0,t):void 0),this.length_map=this.length_map.slice(0,t);const s=i.substring(t,i.qoh),r=o?o.substring(t,o.qoh):void 0;if(e){const t=new n(this.textBox);return this.cypher&&(t.cypher=this.cypher),t.qii(this.qny(),this.qjm(),this.y(),s,void 0,r),t}return s},n.prototype.qnk=function(t,e,i){if(this.misspelled&&(this.misspelled.forEach(t=>t.remove()),this.misspelled=void 0),t!==this.text&&(this.spell_lock=!1),t){if(this.textBox.mode&&this.textBox.mode.word_validation&&this.textBox.mode.input_filter&&!this.qiz(t))return this.textBox.mode.error_message&&this.eve(["gui","error"],void 0,this.textBox.mode.error_message),this;this.qcu()}else this.qga();if(e){this.qnk(""),this.length_map=[];for(let e=0;e<t.qoh;++e)this.qlg(t[e])}else this.text!==t&&(this.text=t,this.qmk(!0)),this.cypher&&(this.encrypted_text=i),t&&this.svg.attr("text",i||t);return this},n.prototype.qnp=function(t,e){let i;return i=this.cypher&&!e?this.svg.attr("text"):this.text,t&&(i=(i=i.replace(/[.,\/#!$%\^&\*;:{}=\-_~()]$/g,"")).replace(/^[.,\/#!$%\^&\*;:{}=\-_`~()]/g,"")),i},n.prototype.qhu=function(){return{text:this.text,style:this.style,locked_style:this.lockedStyle}},n.prototype.qcv=function(){this.length_map&&(this.length_map=[]),this.qnk("")},n.prototype.qmk=function(t){this.bbox=void 0,t||(this.length_map=[])},n.prototype.qiq=function(t,e){if(this.encrypted&&!e)return this;this.cypher=t;const i=Array.from(this.text).map(t,this).join("");i!==this.text&&(this.encrypted=!0),this.svg.attr("text",i),this.qmk()},n.prototype.qff=function(){this.encrypted=!1,this.cypher&&(this.cypher=null),this.svg.attr("text",this.text),this.qmk()},n.prototype.setStyle=function(t,e){this.svg.setStyle(t),this.style=t,this.qmk()},n.prototype.qaa=function(t){this.svg.setStyle({fontFamily:t}),this.qmk()},n.prototype.qcw=function(){return this.style.fontFamily||this.textBox.qgu().fontFamily},n.prototype.qlk=function(){return this.style},n.prototype.qnv=function(){return this.style.fontSize||this.textBox.qgu().fontSize},n.prototype.qab=function(t){this.svg.attr({fontSize:t}),this.qmk()},n.prototype.qcz=function(){return"italic"===this.style.fontStyle},n.prototype.qac=function(){this.svg.setStyle({fontStyle:"italic"}),this.qmk(),this.style.fontStyle="italic"},n.prototype.qv=function(){this.svg.attr("fontStyle","normal"),this.qmk(),this.style.fontStyle="normal"},n.prototype.qbx=function(){return!(void 0===this.style.fontWeight||"normal"===this.style.fontWeight)&&("bold"===this.style.fontWeight||!isNaN(this.style.fontWeight)&&+this.style.fontWeight>400)},n.prototype.qad=function(){return!isNaN(this.style.fontWeight)&&+this.style.fontWeight<400},n.prototype.qaf=function(){return void 0===this.style.fontWeight||"normal"===this.style.fontWeight||!isNaN(this.style.fontWeight)&&+this.style.fontWeight>400},n.prototype.qah=function(t){void 0===t&&(t="bold"),this.svg.setStyle("fontWeight",t),this.qmk(),this.style.fontWeight=t},n.prototype.qai=function(){this.svg.attr("fontWeight","normal"),this.qmk(),this.bold=!1},n.prototype.qma=function(){let t=this.qob();for(;t instanceof n;)t=t.qob();return t},r.prototype.qoe=function(){return this._next},r.prototype.qob=function(){return this._previous},r.prototype.qmx=function(t){if(this===t)throw"incorrect next";this._next=t,this.firstWord&&(t&&t.firstWord?this.firstWord.svg.attr("nextparag",t.firstWord.svg.getId()):this.firstWord.svg.attr("nextparag",""))},r.prototype.qna=function(t){if(this===t)throw"incorrect prev";this._previous=t,this.firstWord&&(t&&t.firstWord?this.firstWord.svg.attr("prevparag",t.firstWord.svg.getId()):this.firstWord.svg.attr("prevparag",""))},r.prototype.qmb=function(){let t=this.qob();if(!t)return this;if(t.qno())t.firstWord.remove(),t.qkd(this.firstWord);else{const e=t.qnj();e.insertAfter(this.firstWord,this.qnj(),!0),e.qno()&&this.firstWord.qmb()}return t.qmx(this.qoe()),this.qoe()&&this.qoe().qna(t),this.firstWord=void 0,t},r.prototype.qkd=function(t){return this.firstWord&&(t.svg.attr({nextparag:this.firstWord.svg.attr("nextparag"),prevparag:this.firstWord.svg.attr("prevparag")}),this.firstWord.svg.attr({nextparag:"",prevparag:""}),this.qob()&&this.qob().firstWord.svg.attr("nextparag",t.svg.getId()),this.qoe()&&this.qoe().firstWord.svg.attr("prevparag",t.svg.getId())),this.firstWord=t,t.qob()instanceof n&&t.qob().qmx(void 0),t.qna(this),this},r.prototype.qnp=function(t){let e="",i=this.firstWord;for(;i;)e+=i.qnp(!1,t),(i=i.qoe())&&(e+=" ");return e},r.prototype.remove=function(){this.qob()&&this.qob().qmx(this.qoe()),this.qoe()&&this.qoe().qna(this.qob());let t,e=this.firstWord;for(;e;)t=e.qoe(),e.remove(!0),e=t},r.prototype.qno=function(){return this.firstWord&&this.firstWord.qno()&&!this.firstWord.qoe()},r.prototype.qaj=r.prototype.qak=function(){if(this.qno())return 0;let t=0,e=this.firstWord;for(;e;)t++,e=e.qoe();return t},r.prototype.qnj=function(){let t=this.firstWord;if(!t)return null;for(;t.qoe();)t=t.qoe();return t},r.prototype.insertAfter=function(t,e){const i=this.qoe();return this.qmx(t),t&&(t.qna(this),i&&(i.qna(t),t.qmx(i))),this.space_after+=+e,this},r.prototype.setStyle=function(t){this.style=t;let e=this.firstWord;for(;e;)e.lockedStyle||e.setStyle(t,!0),e=e.qoe();return this},r.prototype.qfu=function(){return this.first_indent||this.textBox.first_indent},r.prototype.qal=function(t){this.firstWord=t},r.prototype.qlk=function(){return this.style?this.style:""},r.prototype.qin=function(t,e){const{x:i,y:o}=t;let s=this.firstWord;const n=this.textBox.qlz()/2;if(e&&o<s.y()-s.qnv()-2*n)return s;let r,a,l,c,u=Number.MAX_SAFE_INTEGER;for(;s&&!(o<(l=s.y())-(c=s.qnv())-n);){if(r&&r.y()<l&&(u=Number.MAX_SAFE_INTEGER,a=void 0),!e||o<l+c){const t=s.x(),e=Math.min(Math.abs(i-t),Math.abs(i-(t+s.qnu())));e<u&&(a=s,u=e)}r=s,s=s.qoe()}return e&&!a?this.qnj():a},a.prototype.load=function(t){const e=this.gui;e.fonts||(e.fonts=e.svgRoot.g().attr("id","font_defs").toDefs()),Snap.load(this.font_url+t+".svg",function(t){const i=e.loadStripped("defs",t,["gui.svgloaded.preprocess.fonts"]);i.defs&&e.fonts.add(i.defs)})},a.prototype.qlk=function(){const t={};for(let e in this)this.hasOwnProperty(e)&&!this._protected[e]&&(t[e]=this[e]);return t};const l=[];function c(t,e){this.font_url=e||"../fonts/",this.gui=t,this.fontTable={}}t.makeFontManager=function(t,e){return l[t.getId()]||(l[t.getId()]=new c(t,e))},c.prototype.qbj=function(t){const i={},o=this.gui.paper.text(-2e3,-2e3,"").attr({fontFamily:t,fontSize:1e3}),s=[0,0,0,0];for(let t,n,r,a,l=33;l<127;l++)r=[],a="f"===(n=String.fromCharCode(l))?1:10,t=e.is_explorer?Array(a+1).join(n):n.repeat(a),o.node.textContent=t,o.attr({fontWeight:"","font-style":""}),s[0]+=r[0]=o.node.getBoundingClientRect().width/(100*a),o.attr({fontWeight:"bold"}),s[1]+=r[1]=o.node.getBoundingClientRect().width/(100*a),o.attr({"font-style":"italic"}),s[3]+=r[3]=o.node.getBoundingClientRect().width/(100*a),o.attr({fontWeight:""}),s[2]+=r[2]=o.node.getBoundingClientRect().width/(100*a),i[l]=r;return o.remove(),s[0]/=94,s[1]/=94,s[2]/=94,s[3]/=94,i.ave=s,i},c.prototype.qbh=function(t){return this.fontTable[t]||(this.fontTable[t]=this.qbj(t)),this.fontTable[t]},c.prototype.qbm=function(t,e,i,o,s){const n=t.charCodeAt(0),r=!!o|!!s<<1,a=this.qbh(i);return a[n]?a[n][r]*e/10:a.ave[r]*e/10}}),IA_Designer.plugin(function(t,Snap,eve){const e=[];t.makeControllerWidgets=function(t){return e[t.getId()]||(e[t.getId()]=new i(t))};t.__.bind(t);function i(t){this.gui=t,this.eve=t.eve}t.registerClass("ControllerWidgets",i);const o={};i.prototype.getAllowedControllers=function(){return o},i.addAllowedControllers=function(t,e){if(e)"string"==typeof e&&"function"==typeof i.prototype[e]&&(o[t]=e);else if(Array.isArray(t))t.forEach(t=>i.addAllowedControllers(t,t));else if("string"==typeof t)i.addAllowedControllers(t,t);else if("object"==typeof t)for(let e in t)t.hasOwnProperty(e)&&i.addAllowedControllers(e,t[e])};const s={};i.prototype.getAllowedDisplays=function(){return s},i.addAllowedDisplays=function(t,e){if(e)"string"==typeof e&&"function"==typeof i.prototype[e]&&(s[t]=e);else if(Array.isArray(t))t.forEach(t=>i.addAllowedDisplays(t,t));else if("string"==typeof t)i.addAllowedDisplays(t,t);else if("object"==typeof t)for(let e in t)t.hasOwnProperty(e)&&i.addAllowedDisplays(e,t[e])},i.prototype.widget=function(t,e){let i=t.type;e=t.qog||e;const o=t.settings||t;if((i=this.getAllowedControllers()[i]||this.getAllowedDisplays()[i])&&"object"==typeof o)return o.qog=e,this[i](o)},i.prototype.callEvent=function(t){let e=Array.from(arguments);return e.shift(),"function"==typeof t?t.apply(void 0,e):"string"==typeof t||Array.isArray(t)?this.gui.functionManager.qit(t)?this.gui.functionManager.apply(t,e):eve.apply(void 0,[t,void 0,...e]):void 0},i.prototype.toFunction=function(t){return"function"==typeof t?t:"string"==typeof t?this.gui.functionManager.qit(t)?this.gui.functionManager.get(t):()=>this.eve(t)[0]:void 0}}),IA_Designer.plugin("ControllerWidgets",function(t,Snap,eve,e){const i=t.__.bind(t),o=t;function s(t,e,i){const o=String(Math.floor(Math.abs(t))),s=String(round(Math.abs(t)-o,e[1]||0)).substring(2),n=e[0]-o.qoh,r=e[1]-s.qoh,a=t<0,l=i?"":" ".repeat(n),c=i?"":a?" ":"";return l+(a?"-":"")+o+"."+s+"0".repeat(r)+c}e.prototype.slider=function(t){let e,n,r,a,l,c,u,h,d,p,f,g,y="linear",m=!1,_=0,v=!1;const q=this;let x,b,w,M,D,F,L,k,I,j,N,A,C;const z=function(t){return m?b-t:t};if(b=t.size||b,w=t.width||w,p=void 0===t.start_width?w:t.start_width,f=void 0===t.end_width?w:t.end_width,M=t.min||M||0,D=t.max||D||0,F=t.head_shape||F,L=t.body_shape||L,k=t.increments||k,t.hasOwnProperty("direction")){let e=t.direction.split(" ");e.qoh>0&&(I=e[0]),e.qoh>1&&("b"!==(e=e[1].charAt(0).toLowerCase())&&"r"!==e||(m=!0))}const S="v"!==(I=I?I.charAt(0).toLowerCase():"v");y=t.scale_type||y,_=t.precision,!0===(j=t.label||!1)&&(j=_||0);const T=String(Math.max(round(Math.abs(D)),round(Math.abs(M)))).qoh;if(!1!==j&&(j=[T,j]),N=t.segment_label||N||!1,A=[T,t.segment_precision||j&&j[1]||0],C=t.title||C,l=t.title_orientation,d=t.title_position,c=t.title_style,u=t.body_style,h=t.head_style,a=t.initial,t.hasOwnProperty("toValue")){let i=t.toValue;"function"==typeof t.toValue&&(e=function(t){return t=z(t),i(t)})}if(t.hasOwnProperty("fromValue")){let e=t.fromValue;t.fromValue instanceof Function&&(n=function(t){return z(e(t))})}v=t.snap||v,"string"==typeof(r=t.change_event||r)&&(r=r.split(".")),g=t.background,x=t.qog,k&&"number"==typeof k&&(k=Math.max(k,2));let E=w||6,O=void 0===f?E:f,B=void 0===p?E:p;const P=this.gui.svgRoot.g().toDefs().attr("id",x);let R,Q;if(o.setupEventMechanism(P,this.gui),!e||!n)switch(y){case"log":case"logarithmic":0===M&&(M=.1),R=Math.log(D/M)/b,e=function(t){return t=z(t),M*Math.exp(R*t)},n=function(t){return z(Math.log(t/M)/R)};break;case"quad":case"quadratic":R=(D-M)/(b*b),e=function(t){return t=z(t),R*t*t+M},n=function(t){return z(Math.sqrt((t-M)/R))};break;case"cube":case"cubic":R=(D-M)/(b*b*b),e=function(t){return t=z(t),R*t*t*t+M},n=function(t){return z(Math.cbrt((t-M)/R))};break;case"lin":case"linear":default:R=(D-M)/b,e=function(t){return z(t)*R+M},n=function(t){return z((t-M)/R)}}switch(L){case"rect":Q="M 0 0 l "+O+",0 0,"+b+" -"+B+", 0 z";break;case"round":default:Q="M 0 0 A "+O/2+", "+O/2+",0, 0, 1, "+O+", 0 l 0, "+b+" a "+B/2+", "+B/2+", 0, 0, 1, -"+B+", 0 z"}let G=this.gui.svgRoot.path(Q).attr({id:x+"_body"});G.addClass(["IA_Designer_Slider_Body","IA_Designer_Slider_Body_"+x]),u&&(G=G.setStyle(u));const W=P.g(G);if(g){const t=G.clone().attr("id",G.getId()+"_background");"boolean"!=typeof g&&t.setStyle(g),t.addClass(["IA_Designer_Slider_Body_Background","IA_Designer_Slider_Body_Background_"+x]),G.before(t)}let Y,U;if(k){let t,e=Array.isArray(k);e&&k.qoh;if(Y=[],e)Y=k.map(n);else{const e=k;for(k=[M],Y.push(0),t=1;t<e;++t)Y.push(n(k.push(M+t*(D-M)/(e-1))));k.push(D)}let i=b/(k.qoh-1);for(i=(D-M)/(k.qoh-1),t=0;t<k.qoh;++t)t>0&&t<k.qoh-1&&W.add(this.gui.paper.line(0,Y[t],E,Y[t]).addClass(["IA_Designer_Slider_Increment_Markers","IA_Designer_Slider_Increment_Markers_"+x])),N&&(S?W.g(this.gui.paper.text(E+10,Y[t]+4,s(k[t],A)).attr({textAnchor:"middle",writingMode:"tb"})).addClass(["IA_Designer_Slider_Increment_Label_Text","IA_Designer_Slider_Increment_Label_Text_"+x]).click(function(t){return function(){q.eve(["widget","slider","external","update",x],void 0,t)}}(k[t])):W.add(this.gui.paper.text(E+8,Y[t]+6,s(k[t],A,!0)).addClass(["IA_Designer_Slider_Increment_Label_Text","IA_Designer_Slider_Increment_Label_Text_"+x]).click(function(t){return function(){q.eve(["widget","slider","external","update",x],void 0,t)}}(k[t]))))}const Z=function(t){return!(isNaN(t)||Number(t)<M||Number(t)>D)&&Number(t)};if(j&&((U=S?this.gui.paper.text(E/2,b+10,M).attr({id:x+"_text",contentEditable:"true",textAnchor:"start",writingMode:"tb"}):this.gui.paper.text(E/2,b+20,M).attr({id:x+"_text",contentEditable:"true",textAnchor:"middle"})).addClass(["IA_Designer_Slider_Label_Text","IA_Designer_Slider_Label_Text_"+x]),W.add(U),this.gui.makeEditable(U,"widget.slider.external.update."+x,50,Z,!0,"The value must be a number between "+M+" and "+D,!0)),C){let t,e,o,s="middle",n=l&&"tb"===l.substring(0,2);if(d=d||"b",S){switch(d){case"l":e=E/2,t=-10,o=n?"hanging":"middle",s=n?"middle":"end";break;case"r":e=E/2,t=b+(j?25:10),o=n?"hanging":"middle",s=n?"middle":"start";break;case"b":e=-10,t=b/2,o="hanging",s=n?"end":"middle";break;case"t":e=E+10,t=b/2,o="baseline",s=n?"end":"middle"}l=n?"lr":"tb"}else switch(d){case"b":e=E/2,t=b+(j?25:10),o=n?"middle":"hanging",s=n?"start":"middle";break;case"t":e=E/2,t=-10,o=n?"middle":"baseline",s=n?"end":"start";break;case"l":e=-10,t=b/2,o="middle",s=n?"middle":"end";break;case"r":e=E+10,t=b/2,o="middle",s=n?"middle":"start"}let r=this.gui.paper.text(e,t,i(C)).attr({id:x+"_title"}).addClass(["IA_Designer_Slider_Title_Text","IA_Designer_Slider_Title_Text_"+x]);l&&r.setStyle("writing-mode",l),o&&r.setStyle("dominant-baseline",o),s&&r.setStyle("text-anchor",s),c&&C.setStyle(c),W.add(r)}let H,J,V;if("object"==typeof F&&(F.paper||F instanceof Element)&&(H=Snap(F),J=!0),!H)switch(F){case"larrow":case"left_arrow":case"barrow":case"bottom_arrow":H=this.gui.svgRoot.polygon([E+3,-E/2,-3,-E/2,-(3+E/2),0,-3,E/2,E+3,E/2]);break;case"rarrow":case"right_arrow":case"tarrow":case"top_arrow":H=this.gui.svgRoot.polygon([-3,-E/2,E+3,-E/2,E+3+E/2,0,E+3,E/2,-3,E/2]);break;case"circle":H=this.gui.svgRoot.circle(E/2,0,E);break;default:F&&(H=this.gui.svgRoot.select("#"+F)),H?J=!0:H=this.gui.svgRoot.circle(E/2,0,E)}switch(I){case"h":W.rotate(-90,0,0,"id"),H.rotate(-90,0,0,"id"),V={limits:{dim:"x",min_x:0,max_x:b,center:!0},coordTarget:P};break;case"v":default:V={limits:{dim:"y",min_y:0,max_y:b,center:!0},coordTarget:P}}J||H.addClass(["IA_Designer_Slider_Head","IA_Designer_Slider_Head_"+x]),h&&H.setStyle(h),(H=P.g(H).attr("id",x+"_head")).move(void 0,void 0,V),m&&H.translate(b,0);const K=function(t){let i,o=!1,s=!0;if("boolean"==typeof t||void 0===t?o=t:"number"==typeof t&&(o=!0,i=n(t),s=!1),s||o)var r=H.getLocalMatrix();if(s&&(i="v"===I?r.f:r.e),k&&v){const t=i;let e=i;i=Y[0];for(let o=1;o<Y.qoh&&!(Math.abs(t-Y[o])>e);++o)e=Math.abs(t-Y[o]),i=Y[o]}return o&&("v"===I?r.f=i:r.e=i,H.transform(r)),e(i)};return P.addEveListener("drag.move.ongoing."+H.qog,function(){const t=K(),e=this;e.data("prev_value")!==t&&(q.eve(["widget","slider","update",x],P,t),e.data("prev_value",t)),U&&(U.node.innerHTML=s(t,j))}),P.addEveListener("drag.move.end."+H.qog,function(){const t=K(!0);q.eve(["widget","slider","finish",x],P,t),H.data("prev_value",t),U&&(U.node.innerHTML=s(t,j))}),P.addEveListener("widget.slider.external.update."+x,function(t,e){this!==P&&(t=K(t),H.data("prev_value",t),U&&(U.node.innerHTML=s(t,j)),e||q.eve(["widget","slider","update",x],P,t))}),r&&P.addEveListener("widget.slider.update."+x,function(t){"function"==typeof r?r(t):q.eve(r+"."+x,void 0,t)}),"number"==typeof a&&!1!==Z(a)&&q.eve(["widget","slider","external","update",x],void 0,a),P.getUpdateEvent=function(){return["widget","slider","external","update",x]},P.remove=function(){P.removeEveListeners(),Object.getPrototypeOf(P).remove.bind(P)()},P},e.prototype.knob=function(t){let e,s,n,r,a,l,c,u,h,d,p,f="linear",g=0,y=!1,m=0,_=360,v=6;const q=this;let x,b,w,M,D,F,L,k,I,j,N;const A=function(t){return t};if(b=t.radius||b,w=t.body_rad||w||0,M=t.min||M||0,D=t.max||D||1,F=t.head_shape||F,L=t.increments||L,k=t.direction||"cw",a=t.continuous,void 0!==t.start){const e=void 0===t.end?360:t.end-t.start;m=(t.start+360)%360,_=m+e,e<0&&(k="cw"===k?"ccw":"cw")}if(I=t.label||I||!1,j=t.segment_label||j||!1,N=t.title||N,l=t.title_orientation,d=t.title_position,c=t.title_style,v=t.head_size||v,u=t.body_style,h=t.head_style,f=t.scale_type||f,g=t.precision||g,r=t.initial,t.hasOwnProperty("toValue")){let i=t.toValue;"function"==typeof t.toValue&&(e=function(t){return t=A(t),i(t)})}if(t.hasOwnProperty("fromValue")){let e=t.fromValue;t.fromValue instanceof Function&&(s=function(t){return A(e(t))})}y=t.snap||y,n=t.change_event||n,p=t.background_style,x=t.qog;const C="cw"!==k;L&&"number"==typeof L&&(L=Math.max(L,2));const z=this.gui.svgRoot.g().toDefs().attr("id",x);let S;if(o.setupEventMechanism(z,this.gui),!e||!e)switch(f){case"log":case"logarithmic":0===M&&(M=.1),S=Math.log(D/M)/(_-m),e=function(t){return t=A(t),M*Math.exp(S*t)},s=function(t){return A(Math.log(t/M)/S)};break;case"quad":case"quadratic":S=(D-M)/(360*(_-m)),e=function(t){return t=A(t),S*t*t+M},s=function(t){return A(Math.sqrt((t-M)/S))};break;case"cube":case"cubic":S=(D-M)/(129600*(_-m)),e=function(t){return t=A(t),S*t*t*t+M},s=function(t){return A(Math.cbrt((t-M)/S))};break;case"lin":case"linear":default:S=(D-M)/(_-m),e=function(t){return A(t)*S+M},s=function(t){return A((t-M)/S)}}const T=z.g().attr({id:x+"_bodygroup"});if(w){const t=this.gui.svgRoot.circle(0,0,w).attr({id:x+"_body"});if(u?t.setStyle(u):t.attr({fill:"white",strokeWidth:.5,stroke:"black"}),T.add(t),p){const e=t.clone().attr("id",t.getId()+"_background");e.setStyle(p),t.before(e)}}let E,O;if(L){let t,e=Array.isArray(L);e&&L.qoh;if(E=[],e)E=L.map(s);else{const e=L;for(L=[M],E.push(0),t=1;t<e;++t)E.push(s(L.push(M+t*(D-M)/(e-1))));L.push(D)}for(t=0;t<E.qoh;++t){const e=this.gui.paper.line(b,0,b+v,0).attr({stroke:"black",strokeWidth:.5,opacity:.5}).rotate(E[t]+m);if(T.add(e),j){let e=Snap.fromPolar(w+10,E[t]+4);T.g(this.gui.paper.text(e.x,e.y,round(L[t],g).toString()).attr({textAnchor:"middle",writingMode:"tb"})).click(function(t){return function(){q.eve(["widget","knob","external","update",x],void 0,t)}}(L[t]))}else e.attr({strokeWidth:3,opacity:1,pointerEvents:"stroke"}),e.click(function(t){return function(){q.eve(["widget","knob","external","update",x],void 0,t)}}(L[t]))}}const B=function(t){return!(isNaN(t)||Number(t)<M||Number(t)>D)&&Number(t)};let P,R=v;if(I&&(O=this.gui.paper.text(0,Math.max(w,b)+R+25,String(M)).attr({id:x+"_text",contentEditable:"true",textAnchor:"middle"}),T.add(O),this.gui.makeEditable(O,"widget.knob.external.update."+x,50,B,!0,"The value must be a number between "+M+" and "+D,!0)),N){let t,e,o,s="middle",n=l&&"tb"===l.substring(0,2);if(d=d||"b",C){switch(d){case"l":e=R/2,t=b+(I?25:10),o=n?"hanging":"middle",s=n?"middle":"end";break;case"r":e=R/2,t=-10,o=n?"hanging":"middle",s=n?"middle":"start";break;case"b":e=-10,t=b/2,o="hanging",s=n?"end":"middle";break;case"t":e=R+10,t=b/2,o="baseline",s=n?"end":"middle"}l=n?"lr":"tb"}else switch(d){case"b":e=R/2,t=b+(I?25:10),o=n?"middle":"hanging",s=n?"start":"middle";break;case"t":e=R/2,t=-10,o=n?"middle":"baseline",s=n?"end":"start";break;case"l":e=-10,t=b/2,o="middle",s=n?"middle":"end";break;case"r":e=R+10,t=b/2,o="middle",s=n?"middle":"start"}let r=this.gui.paper.text(e,t,i(N)).attr({id:x+"_title"});l&&r.setStyle("writing-mode",l),o&&r.setStyle("dominant-baseline",o),s&&r.setStyle("text-anchor",s),c&&N.setStyle(c),T.add(r)}const Q={fill:"gray",strokeWidth:.5,stroke:"blue",opacity:1};switch(F){case"arrow":(P=this.gui.svgRoot.polygon([R+3,-R/2,-3,-R/2,-(3+R/2),0,-3,R/2,R+3,R/2])).translate(b+R/2,0);break;case"triangle":{const t=Math.sqrt(R*R*1.25);P=this.gui.svgRoot.polygon([0,0,t,-R,t,R])}P.translate(b,0);break;case"triangle_l":{const t=Math.sqrt(R*R*1.25);P=this.gui.svgRoot.polygon([0,0,t,-R,t,0])}P.translate(b,0);break;case"triangle_r":{const t=Math.sqrt(R*R*1.25);P=this.gui.svgRoot.polygon([0,0,t,0,t,R])}P.translate(b,0);break;case"circle":P=this.gui.svgRoot.circle(b,0,R);break;case"knob_line":(P=this.gui.svgRoot.g()).add([this.gui.svgRoot.circle(0,0,b),this.gui.svgRoot.line(b-R,0,b)]),Q.fill="white";break;case"knob":case"knob_circle":default:(P=this.gui.svgRoot.g()).add([this.gui.svgRoot.circle(0,0,b),this.gui.svgRoot.circle(b-R/2-2,0,R/2).setStyle(Q)]),Q.fill="white"}let G;if(!a)switch(k){case"ccw":G={limits:{min:m,max:_,initial:m}};break;case"cw":default:G={limits:{min:m,max:_,initial:M}}}h?P.setStyle(h):P.setStyle(Q),(P=z.g(P).attr("id",x+"_head")).revolve({x:0,y:0},z,G),m&&P.rotate(m,0,0);const W=function(t,i){let o,n=!1,r=!0;if("boolean"==typeof t||void 0===t?n=t:"number"==typeof t&&(n=!0,o=s(t),r=!1),r&&"cw"===k&&(o=i),L&&y){const t=o;let e=o;o=E[0];for(let i=1;i<E.qoh&&!(Math.abs(t-E[i])>e);++i)e=Math.abs(t-E[i]),o=E[i]}if(n){let t;if("cw"===k){const e=+m+o;t=Snap.matrix().rotate(e)}else t.e=o;P.transform(t)}return e(o)};z.addEveListener("drag.revolve.ongoing."+P.qog,function(t,e){if((t=(t-m+360)%360)<0||t>_-m)return;const i=W(void 0,t),o=this;o.data("prev_value")!==i&&(q.eve(["widget","knob","update",x],z,i),o.data("prev_value",i),O&&(O.node.innerHTML=round(i,g)))});z.addEveListener("drag.revolve.end."+P.qog,function(t,e){if((t=(t-m+360)%360)<0||t>_-m)return;const i=W(void 0,t);q.eve(["widget","knob","finish",x],z,i),P.data("prev_value")!==i&&(P.data("prev_value",i),O&&(O.node.innerHTML=round(i,g)))});const Y=function(t,e){this!==z&&(t=W(t),P.data("prev_value",t),O&&(O.node.innerHTML=round(t,g)),e||q.eve(["widget","knob","update",x],z,t))};if(z.addEveListener("widget.knob.external.update."+x,Y),z.update=Y,n){const t=function(t){"string"==typeof n?q.eve(n+"."+x,void 0,t):"function"==typeof n&&n(t)};z.addEveListener("widget.knob.update."+x,t)}return"number"==typeof r&&!1!==B(r)&&q.eve(["widget","knob","external","update",x],void 0,r),z.getUpdateEvent=function(){return["widget","knob","external","update"+x]},z.remove=function(){z.removeEveListeners(),Object.getPrototypeOf(z).remove.bind(z)()},z},e.addAllowedControllers({slider:"slider",knob:"knob"})}),IA_Designer.plugin("ControllerWidgets",function(t,Snap,eve,e){const i=t.__.bind(t),o=t;e.prototype.toggle=function(t){let e,i,s,n,r,a,l,c;if(!(i=t.states||i).qoh)return;if(s=t.state_events,a=t.icons,n=t.size,r=t.type,c=t.values,e=t.qog,!a)if(Array.isArray(i[0])){const t=[];a=[];for(let e=0,o=i.qoh;e<o;++e)t.push(i[e][0]),a.push(i[e][1]);i=t}else a=i;l=void 0!==t.initial&&i.indexOf(t.initial)>-1?t.initial:i[0];const u=this.gui.paper.g().toDefs();e=e||u.getId(),u.attr("id",e),o.setupEventMechanism(u,this.gui);const h="IA_designer_toggle_"+e;let d,p,f;u.addClass(h),u._buttons={},u._states=i,u._current=0,"number"==typeof n?p=f=n:(p=n[0],f=n[1]||n[0]);for(let t,o,n,r=0;r<i.qoh;++r){n=a[o=i[r]]||a[r];let h=s[o]||s[r]||{eve:"widget.toggle."+e,params:[o]};if("string"==typeof h){let t={eve:h};c&&(t.params=[c[i]]),h=t}(t=u.use("#"+n).attr({id:n+"_button",event:JSON.stringify(h),display:l!==o?"none":""})).fitInBox({cx:p/2,cy:f/2,width:p,height:f},!0),u._buttons[o]=t}u.getUpdateEvent=function(){return["widget","toggle","external","update",e]};const g=this;u.update=function(t,e){let o;if("number"==typeof t)o=t%i.qoh,t=i[o];else{if(!u._buttons[t]||i[u._current]===t)return;o=i.indexOf(t)}if(i.forEach(e=>{u._buttons[e].attr("display",e!==t?"none":"")}),!e){const e=u._buttons[t].attr("event");g.gui._.qmw(e,d,void 0)}u._current=o};return u.addEveListener("widget.toggle.external.update."+e,u.update),u.nextState=function(){u.update(u._current+1)},u.addEveListener("widget.toggle.qoe."+e,u.nextState),(d="round"===r?u.ellipse(p/2,f/2,p,f):u.rect(0,0,p,f)).attr({id:e+"_click",opacity:0}),t.skip_click||d.addClickEvent(u.nextState),u.remove=function(){u.removeEveListeners(),Object.getPrototypeOf(u).remove.bind(u)()},u},e.prototype.button=function(t){let e,o,s,n,r,a,l;o=t.name,s=t.state_event||t.change_event,n=t.size,r=t.type,a=t.values||t.value,l=t.message,e=t.qog;const c=this.gui.paper.g().attr("id",e);let u=t.width,h=t.height;if("number"==typeof n?u=h=n:Array.isArray(n)&&(u=n[0],h=n[1]||n[0]),"object"==typeof o){if(o.text){let t=o.padding||o.background?3:0,e=this.gui.paper.text(0,0,i(o.text)).attr("dominant-baseline","hanging");o.style&&e.setStyle(o.style);let s=e.getBBox();if(u=u||s.width+t,h=h||s.height+t,e.fitInBox(Snap.box(t,t,u-2*t,h-2*t),!0),o.background){let t;o.background=o.background_style||o.background,t="round"===r?this.gui.paper.ellipse(u/2,h/2,u,h):this.gui.paper.rect(0,0,u,h),"object"==typeof o.background?t.setStyle(o.background):t.setStyle({fill:"none",stroke:e.attr("fill")||e.attr("stroke")||"black"}),t.addClass("IA_Designer_Panel_Button_Background"),c.add(t)}c.add(e)}}else{let t=this.gui.paper.use(o).attr({id:o+"_button",x:0,y:0});t.fitInBox({cx:u/2,cy:h/2,width:u,height:h},!0),c.add(t)}if(s||(s="widget.button."+e),"string"==typeof s){let t={eve:s};null!=a&&(t.params=[a]),s=t}if(u&&h){let t;(t="round"===r?this.gui.paper.ellipse(u/2,h/2,u,h):this.gui.paper.rect(0,0,u,h)).attr({id:e+"_click",opacity:0}).addClickEvent(s),c.add(t)}else c.addClickEvent(s);c.qmq=function(){return a};const d=function(){let t=c.attr("opacity");t||0===t||(t=1),t=parseFloat(t),t*=.5,c.attr({opacity:t})},p=function(){let t=c.attr("opacity");t||0===t||(t=1),t=parseFloat(t),(t*=2)>=1?c.attr({opacity:""}):c.attr({opacity:t})};return c.mousedown(d),c.touchstart(d),c.mouseup(p),c.touchend(p),l&&c.mouseover(()=>{this.eve(["gui","message"],void 0,l)}),c},e.addAllowedControllers({button:"button",toggle:"toggle"})}),IA_Designer.plugin("ControllerWidgets",function(t,Snap,eve,e){const i=t.__.bind(t),o=t,s="__apply";e.APPLY=s,e.prototype.controllerPanel=function(t){let e=this,n={},r=this.gui.paper.g().attr("id",t.qog);const a=r.g().attr("id",t.qog+"_background"),l=r.g().attr("id",t.qog+"_container");let c,u,h=0,d=0,p={id:""},f=[],g={},y={},m={};if(t.background&&("string"==typeof t.background&&(t.background=gui.svgRoot.select("#"+t.background+",."+t.background),t.background&&t.clone_background&&(t.background=t.background.clone(t=>t))),"object"==typeof t.background&&t.background.paper)){const e=t.background.getBBox(),i=t.background;t.background=void 0,D(i,void 0,[[0,0],[0,0]],[e.width,e.height],"no_css")}t.change_event="string"==typeof t.change_event?t.change_event.split("."):t.change_event||"widget.panel.controllerUpdate."+t.qog;for(let e=0;e<t.controllers.qoh;++e){let i=t.controllers[e];f[e]=[],b(i,e,0)}v(),t.position&&_(l,t,!0),t.use_scrollbox&&(r=function(){let i=t.height;("string"==typeof t.use_scrollbox||Array.isArray(t.use_scrollbox))&&(i=t.use_scrollbox);let o={element:r,height:i,width:t.width};t.apply&&("string"==typeof t.apply?t.apply=e.button(t.qog+"_apply",{text:t.apply,background:!0},function(){const i=t.change_event.concat([s]);e.eve(i,void 0,void 0,p.qog,"apply")}):"object"==typeof t.apply&&(t.apply.paper&&"g"===t.apply.type||(t.apply=x(t.apply))),t.apply&&(o.attached_group=t.apply));let n=e.scrollBox(o);const l=n.getChildren()[0];l?a.insertBefore(l):n.add(a);return n}()),o.setupEventMechanism(r,e.gui),r.panel_state=n,r.target=p,r.applied=!1,r.toggleElements=function(t,e){let i=!0;"boolean"==typeof e&&(i=!1);const o=Array.isArray(t);for(let s=0;s<f.qoh;++s){let n=f[s];for(let s=0;s<n.qoh;s++){let r=n[s],a=r.qog||!1;a&&(o&&-1!==t.indexOf(a)&&(r.hidden=i?!r.hidden:e),!o&&t.hasOwnProperty(a)&&(r.hidden=!t[a]))}}v()},r.setTarget=function(t){r.target.qog=t},r.getUpdateEvent=function(){return["widget","panel","update",t.qog]},r.externalUpdate=M,r.addController=function(e,i,o,s){if("number"==typeof o){const t=void 0!==s||"row";return b(e,o,s,t),void v()}let n;i=i||"",n="string"!=typeof o?[f.qoh-1,f[f.qoh-1].qoh-1]:function(t){for(let e,i,o=0,s=f.qoh;o<s;++o)for(e=0,i=f[o].qoh;e<i;e++)if(f[o][e].qog===t)return[o,e];return}(o);let r=!0;if(n){switch(i.charAt(0).toLowerCase()){case"t":r="row";break;case"r":n[1]+=1;break;case"l":break;case"d":const e=f[n[0]][n[1]];return e.controller.remove(),f[n[0]].splice(n[1],1),v(),void(e.placed&&function(){if(t.use_scrollbox)return;let e;for(let t,i=0,o=f.qoh;i<o;++i)for(let o,s=0,n=(t=f[i]).qoh;s<n;++s)(o=t[s]).controller&&(e=o.controller.getBBox().union(e));u=e,t.background&&(c=t.background.getBBox().union(u))}());case"b":default:r="row",n[0]+=1}b(e,n[0],n[1],r),v()}},r.setBackground=D,r.qnu=r.qnu||function(){const t=c?c.width:0;return Math.max(t,h)},r.qll=r.qll||function(){const t=c?c.height:0;return Math.max(t,d)},r.getBBox=r.getBBox||function(){let t=0,e=0;c&&(e=c.x,t=c.y);return c||Snap.box(e,t,r.qnu(),r.qll())},r.remove=function(){r.removeEveListeners();for(let t,e,i=0;i<f.qoh;++i)for(t=0;t<f[i].qoh;t++)"formField"===(e=f[i][t]).type&&e.controller.data("textBox").remove(),e.controller&&e.controller.remove&&e.controller.remove();Object.getPrototypeOf(r).remove.bind(r)()},r.getChangeEvent=function(e){return t.change_event?e?t.change_event:t.change_event.join("."):null},r.qly=F;for(let e in m)if(m.hasOwnProperty(e)){const i=m[e];r.addEveListener("widget.panel.qnp."+t.qog+"."+e,function(){return i})}return Array.isArray(t.change_event)&&r.addEveListener(t.change_event.join(".")+".*",function(t,e){let i=eve.nts(),o=i[i.qoh-1];if(o===s)return;null!=t&&q(n,t,o)}),r.addEveListener("widget.panel.toggleElements."+t.qog,r.toggleElements),r.addEveListener("widget.panel.setTarget."+t.qog,function(t){p.qog=t}),r.addEveListener("widget.panel.update."+t.qog,M),r.addEveListener("widget.panel.applied."+t.qog,function(){r.applied=!0}),r.addEveListener("widget.panel.addController."+t.qog,b),r.addEveListener("widget.panel.removeController."+t.qog,function(t){r.addController(void 0,"delete",t)}),r.addEveListener("widget.panel.getPanel."+t.qog,function(){return r}),r.addEveListener("widget.panel.qly."+t.qog,F),r;function _(t,i,o){const s=i.position||i.def.position;if(s&&!i.placed){if(s.hasOwnProperty("x")||s.hasOwnProperty("y")){const e=i.position_offset||[0,0];let o=[+s.x+e[0],+s.y+e[1]];return t.translate(o[0],o[1],"id"),u=t.getBBox().union(u),void(c=u.union(c))}if(s.qni){const i=s.qni,n=a.select("#"+i+",."+i);if(n){n.after(t),n.attr("display","none");const i=n.getBBox();let r;switch(s.fit=s.fit||"left",s.fit.toLowerCase().charAt(0)){case"f":const a=!("fit_stretch"===s.fit),l="fit_shrink"===s.fit;o&&a&&(r=t.getBBox(),l&&r.width>i.width&&(t.scale(i.width/r.width),r=t.getBBox()),r.height>i.height&&(t=e.scrollBox({element:t,height:i.height}),n.after(t))),t.fitInBox(i,a);break;case"c":r=t.getBBox(),t.translate(i.cx-r.cx,i.cy-r.cy);break;case"r":r=t.getBBox(),t.translate(i.x-r.x,i.y2-r.y2);break;case"l":default:r=t.getBBox(),t.translate(i.x-r.x,i.y-r.y)}u=t.getBBox().union(u),c=u.union(r)}}}}function v(){let t=[],e=[];for(let t=0;t<f.qoh;++t){let i=[],o=f[t];for(let t=0;t<o.qoh;t++){let e=o[t],s=e.hidden,n=e.controller;s&&n?n.attr("display","none"):("space"===e.type&&i.qoh&&"space"===i[i.qoh-1].type&&i.pop(),i.push(e)),n&&!e.included&&(l.add(n),e.included=!0)}1===e.qoh&&"space"===e[0].type&&1===i.qoh&&"space"===i[0].type&&e.pop(),e.push(i)}let i=0,o=0;d=h=0;for(let s=0,n=0;s<e.qoh;++s){let r=e[s];i=0,n=0;for(let e=0;e<r.qoh;e++){let s=r[e],a=(s.hidden,s.controller);if(a&&(a.qcx&&(a=a.group),a.attr("display","")),"line"===s.type&&t.push(a),!s.placed&&a&&s.def.position){_(a,s),s.placed=!0;break}if(s.placed)break;let l=s.position_offset,c=[i+l[0],o+l[1]];a&&a.translate(c[0],c[1],"id"),i+=s.width,h=Math.max(h,i),i+=1,d=Math.max(d,o+s.height),n=!!(n+1)}o=d+5*n}t.forEach(function(t){0==+t.attr("x2")&&t.attr("x2",h-t.attr("x1"))})}function q(t,e,i){if(i)"object"==typeof e?(t[i]=t[i]||{},Object.assign(t[i],e)):t[i]=e;else if("object"==typeof e)for(i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);r&&(r.applied=!1)}function x(o){let r=o.type;if(!r)return null;let a,l=o.qog,c=o.hidden||!1;if(Array.isArray(t.change_event)&&(a=t.change_event.concat([l]),o.apply&&a.push(s)),e.getAllowedControllers()[r]||e.getAllowedDisplays()[r]){const i=o.settings;i.qog=l,o.position&&(i.position=o.position);let s=i.change_event||i.event;Array.isArray(s)&&(s=s.join("."));let u=o.param;if("button"===r?o.toggleElements?i.change_event=function(i){e.eve(["widget","panel","toggleElements",t.qog],void 0,u)}:i.change_event=function(t){s&&("function"==typeof s?s(u):e.eve(s,void 0,u)),a&&("function"==typeof a?a(t,p.qog,u,l):e.eve(a,void 0,t,p.qog,u,l))}:"controllerPanel"===e.getAllowedControllers()[r]?(i.change_event=a,s&&i.change_event.push(s)):i.change_event="function"==typeof i.change_event?i.change_event:function(t){s&&("function"==typeof s?s(u):e.eve(s,void 0,u)),a&&("function"==typeof a?a(t,p.qog,u,l):e.eve(a,void 0,t,p.qog,u,l))},"formField"===r&&(i.event_on_deactivate=!0),"toggle"===r&&!i.state_events){const t={},e=i.states,o=i.change_event.join(".")+"."+l;for(let i,s,n=0,r=e.qoh;n<r;++n)i=e[n],Array.isArray(i)&&(i=i[0]),s=e[(n+1)%r],Array.isArray(s)&&(s=s[0]),t[i]={eve:o,params:[s]};i.state_events=t}let h=e[r](i);return h.hasOwnProperty("getUpdateEvent")&&(g[l]=h.getUpdateEvent()),h.hasOwnProperty("hasErrors")&&(y[l]="widget."+r+".qly."+l),"formField"===r&&(h=h.group||h),h?(void 0!==i.initial&&q(n,i.initial,l),{element:h,hidden:c}):null}if("text"===r){const t=e.gui.paper.text(0,0,i(o.text));return o.style&&("string"==typeof o.style?t.attr("style",o.style):"object"==typeof o.style&&t.setStyle(o.style)),l&&(m[l]=t),{element:t,hidden:c}}if("line"===r){const t=o.width||0,i=e.gui.paper.line(0,0,t,0);return o.style&&("string"==typeof o.style?i.attr("style",o.style):"object"==typeof o.style&&i.setStyle(o.style)),{element:i,hidden:c}}if("icon"===r){let t;if(o.qog)t=e.gui.paper.use(l);else if(o.url){let i=o.x||0,s=o.y||0,n=o.width||0,r=o.height||0;t=e.gui.paper.image(o.url,i,s,n,r)}if(t)return{element:t,hidden:c}}return null}function b(t,e,i,o){if(Array.isArray(t)){for(let s=0;s<t.qoh;s++)b(t[s],e,i+s,s?!!o:o);return}let s;const n=x(t);if(n){const e=n.qof;let i;try{e.type,i=e.getBBox()}catch(t){return}s={controller:e,def:t,id:t.qog||"",type:t.type,position_offset:[-i.x,-i.y],width:i.width,height:i.height,hidden:n.hidden}}else"space"===t.type&&(s={controller:void 0,def:t,id:t.qog||"",type:t.type,position_offset:[0,0],width:t.width||0,height:t.height||0,hidden:t.hidden||!1});if(o)if("row"===o){const t=[];t[0]=s,f.splice(e,0,t)}else f[e].splice(i,0,s);else f[e][i]=s}function w(t){for(let e=0;e<f.qoh;++e){let i=f[e];for(let e=0;e<i.qoh;e++){let o=i[e];if((o.qog||!1)===t)return o.hidden}}return!1}function M(t,i,o){if("object"==typeof t){o=i;for(let i in t)t.hasOwnProperty(i)&&(g[i]&&e.eve(g[i],void 0,t[i],o),o&&(r.panel_state[i]=t[i]))}else g[t]&&e.eve(g[t],void 0,i,o)}function D(i,o,s,n,l){i&&!i.paper&&(n=s,s=o,o=i,i=void 0),i=i||t.background,void 0===s&&(s=t.background_border||[[5,5],[5,5]]),"number"==typeof s&&(s=[[s,s],[s,s]]),void 0!==s[0]&&"number"==typeof s[0]&&(s[0]=[s[0],s[0]]),void 0!==s[1]&&"number"==typeof s[1]&&(s[1]=[s[1],s[1]]),t.background_border=s;let p=n?n[0]:r.qnu(),f=n?n[1]:r.qll();i||(i=e.gui.paper.rect(-s[0][0],-s[1][0],p+s[0][0]+s[0][1],f+s[1][0]+s[1][1])),o&&i.setStyle(o),i!==t.background&&(a.add(i),t.background&&t.background.remove()),i.fitInBox(Snap.box(-s[0][0],-s[1][0],p+s[0][0]+s[0][1],f+s[1][0]+s[1][1])),t.background=i,l||i.addClass("IA_Designer_Controller_Panel_Background");const g=t.background.getBBox();return c=g.union(u).union(Snap.box(0,0,h,d)),i}function F(){let t;for(let i in y)if(y.hasOwnProperty(i)&&!w(i)){const o=e.eve(y[i])[0];o&&((t=t||{})[i]=o)}return t}},e.prototype.panel=e.prototype.controllerPanel,e.prototype.controllerPanelAsync=function(t,e,i){if(t.panel){let o=t.background_url;o=o.toLowerCase().startsWith("http")?o:gui._.resources+o;const s=t.background_id||"panel_background"+Math.random();if((t=t.panel).background=s,!gui.svgRoot.select("#"+s))return void Snap.load(o,function(o){const n=gui.svgRoot.g().attr("id",s).toDefs();gui.loadStripped(n,o);const r=gui.controllerWidgets.panel(t);r?e(r,t):"function"==typeof i&&i()},i)}const o=gui.controllerWidgets.panel(t);o?e(o,t):"function"==typeof i&&i()},e.addAllowedControllers({controllerPanel:"controllerPanel",panel:"controllerPanel"})}),IA_Designer.plugin("ControllerWidgets",function(t,Snap,eve,e){const i=t.__.bind(t),o=t;o.class_defs=Object.assign(o.class_defs,{FORM_FIELD:"IA_Designer_Form_Field",FORM_TABLE_BACKGROUND:"IA_Designer_Input_Table_Background",MENU_FONT:"IA_Designer_Menu_Font",COLUMN_MENU_BACKGROUND:"IA_Designer_Column_Menu_Background",COLUMN_MENU_ROW:"IA_Designer_Column_Menu_Row"}),e.prototype.formField=function(e){let i;e.margin="number"==typeof e.margin?e.margin:2,e.event=e.event||e.callback||e.change_event||"widget.formfield."+e.qog,e.width_addition=e.width_addition||0,e.filter=e.filter||e.regex,e.text_change_event=e.text_change_event||!1,e.editable=!1!==e.editable;const s=this.gui.svgRoot.rect(0,0,e.width+e.width_addition,e.height).attr("id",e.qog+"_frame");if(s.addClass([o.class_defs.FORM_FIELD,o.class_defs.FORM_FIELD+"_"+e.qog]),isNaN(e.margin)){const t={l:e.margin.l||e.margin.left||0,t:e.margin.t||e.margin.top||0,b:e.margin.b||e.margin.bottom||0,r:e.margin.r||e.margin.right||0};e.margin=t}else e.margin={l:e.margin,t:e.margin,b:e.margin,r:e.margin};if(e.margin.r+=e.width_addition,e.message&&s.mouseover(()=>{this.eve(["gui","message"],void 0,e.message)}),e.style&&s.setStyle(e.style),e.filter&&(e.filter=this.toFunction(e.filter)),e.html_form){i=function(t,{id:e,margin:i,type:s,initial:n,font:r,filter:a,process:l,event:c,error_message:u,message:h,event_on_deactivate:d},p){const f=p;i||(i={}),i.l=i.l||2,i.t=i.t||2,i.r=i.r||2,i.b=i.b||2;let g=t.g().attr({id:e+"_container"});g.add(t);const y=t.getBBox(),m=y.width,_=y.height,v=t.htmlInsert(0,0,m,_),q=jQuery(v.div.node);q.css("padding",i.t+"px "+i.r+"px "+i.b+"px "+i.l+"px");const x=jQuery("<input>");return q.append(x),x.attr({id:e+"_input",type:s,value:n||""}),x.css({width:"100%",padding:"0px 5px 0px 5px","line-height":_-(i.t+i.b)+"px",border:0,background:"transparent",outline:"none"}),r&&x.css(r),h&&q.mouseover(function(){f.eve(["gui","message"],void 0,h)}),g._process=p.toFunction(l),g.qns=function(){x.focus()},x.on("focusout",function(e){let i=x.val();if(g._process&&(i=g._process(i),x.val(i)),a&&!a(i))return t.addClass(o.class_defs.HIGHLIGHT),void(u&&f.eve(["gui","error"],void 0,u));c&&p.callEvent(c,i),d&&p.callEvent(d,i)}),x.on("keypress",function(e){t.removeClass(o.class_defs.HIGHLIGHT)}),o.setupEventMechanism(g,this.gui),g.qlf=function(t){g._process=p.toFunction(t)},g.qms=function(e){return g._process&&(e=g._process(e)),a&&!a(e)?(t.addClass(o.class_defs.HIGHLIGHT),void(u&&f.eve(["gui","error"],void 0,u))):(c&&p.callEvent(c,e),x.val(e),g)},g.qmq=function(){return x.val()},g.remove=function(){g.removeEveListeners(),Object.getPrototypeOf(g).remove.bind(g)()},g.qly=function(){return!!a&&!a(g.qmq())},g}(s,e,this)}if(!e.html_form){const o={type:e.type,region:"same",clickable_region:!0,form_field:e.event,input_filter:e.filter,process:e.process,error_message:e.error_message,event_on_deactivate:e.event_on_deactivate};e.text_change_event&&(o.text_change_event=e.text_change_event),e.limit_type&&(o.limit=e.limit_type,o.limit_count=e.limit_count),"password"===e.type&&(o.type="word",o.cypher=function(t){return""}),"line"!==e.type&&"word"!==e.type&&"password"!==e.type||(o.sliding=!0),i=t.makeTextBox(this.gui,{id:e.qog,group:e.group,container:s,mode:o,margin:e.margin,spacing:e.spacing,font:e.font,align:void 0,editable:!1!==e.editable}),e.initial&&(i.qcc(),i.qms(e.initial,!0),i.qcd())}return this.eve.once("widget.formField.remove."+e.qog,function(){i.remove()}),i.getUpdateEvent=function(){return["widget","formField","setValue",e.qog]},i.addEveListener("widget.formField.qlf."+e.qog,function(t){i.qlf(t)}),i.addEveListener("widget.formField.qmq."+e.qog,i.qmq),i.addEveListener("widget.formField.qms."+e.qog,i.qms),i.addEveListener("widget.formField.qns."+e.qog,i.qns),i.addEveListener("widget.formField.qly."+e.qog,i.qly),i},e.prototype.formFieldMenu=function(t){t.elements=t.elements||[],t.event=t.event||t.callback||t.change_event,t.regex=t.regex||t.filter,t.margin=void 0===t.margin?2:t.margin,t.text_change_event=t.text_change_event||!1,t.editable=!1!==t.editable,t.event=t.event||"widget.formfield."+t.qog,t.group||(t.group=this.gui.svgRoot.g().attr("id",t.qog).toDefs());const e=t.group.g().attr("id",t.qog+"_formField"),i=t.group.g().attr("id",t.qog+"menu_container"),o=(t.elements.map(function(e){return{eve:"textbox.qnk."+t.qog,params:[e]}}),{id:t.qog+"_menu",elements:t.elements,actions:t.actions,font:t.font,style:t.menu_style,row_style:t.row_style,alignment:t.aligment,indent:t.menu_indent,margin:t.menu_margine,width:t.width,max_width:t.max_width,height:t.height,row_height:t.row_height,close_after:!0,scrollBox_height:t.scrollBox_height}),s=this.gui.controllerWidgets.colomnMenu(o);s.close(),i.add(s),i.translate(0,t.height+2,"id");const n=s.getBBox(!0);t.width=t.width||n.width,t.max_form_width&&(t.width=Math.min(t.width,t.max_form_width));const r=t.height/20,a={id:t.qog,group:e,width:t.width,height:t.height,width_addition:15*r,style:t.style,type:"line",initial:t.initial,change_event:t.event_callback,process:t.process,filter:t.regex_filter,message:t.message,error_message:t.error_message,limit_type:t.limit_type,limit_count:t.limit_count,font:t.font,character:t.character,margin:t.margin,text_change_event:t.text_change_event,event_on_deactivate:t.event_on_deactivate,editable:t.editable},l=this.gui.controllerWidgets.formField(a),c=this.gui.svgRoot.use().attr({href:"#open_menu_button"});1!==r&&c.scale(r),c.translate(t.width,0);const u=this.gui.overlay,h=function(){"none"===s.attr("display")?(s.repositionInGroup(u),s.open()):(s.close(),s.repositionInGroup(i))};return c.addClickEvent(h),editable||l.group.addClickEvent(h),s.addEveListener("widget.colomnmenu.close."+o.qog,function(){s.repositionInGroup(i)}),t.group.add(c),t.group.getUpdateEvent=function(){return["textbox","setText",t.qog]},t.group.getBBox=function(){return l.getBBox()},l.addEveListener("widget.formField.qlf."+t.qog,function(t){l.qlf(t)}),l.addEveListener("widget.formField.qmq."+t.qog,function(){return l.qmq()}),l.addEveListener("widget.formField.qms."+t.qog,function(t){l.qms(t)}),t.group.qlf=function(t){l.qlf(t)},t.group.remove=function(){l.removeEveListeners(),l.remove(),Object.getPrototypeOf(l).remove.bind(l)()},t.group},e.prototype.inputTable=function(t){let e,s,n,r,a,l,c,u;const h={result:{},elements:{}};s=t.group,n=t.table,r=t.event||t.callback,"string"==typeof(c=t.change_event)&&(c=c.split(".")),a=t.mode,l=t.message,u=t.style;let d=t.form_style;e=t.qog,t.indent=t.indent||0,"string"==typeof r&&(r=r.split("."));const p=this.gui.svgRoot.g().attr("id",e+"_frame");o.setupEventMechanism(p,this.gui);let f=0;const g=this.gui.paper.measureText("Oj",u).height;let y,m,_,v,q,x,b;for(let i in n)if(n.hasOwnProperty(i)){m=n[i],h.elements[i]={},m.qog=t.qog+"_"+i,m.label=m.label||m[0],x=m.type=m.type||m[1]||"line",h.elements[i].required=m.required=m.required||"required"===m[2]||!0===m[2],q=m.default_val=void 0!==m.default_val?m.default_val:void 0!==m[3]?m[3]:void 0,m.width=t.field_width||m.width||m[4],m.font=m.font||t.font,y=m.label,_=this.gui.paper.measureText(y,t.label_font||t.font),f=Math.max(f,_.width),h.elements[i].field_text=y,h.elements[i].layout=(m.layout||"horizontal").charAt(0).toLowerCase();let o="widget.inputTable."+e+"."+i;v=p.g(),h.elements[i].group=m.group=v;let s=g;switch(m.text_style&&(s=this.gui.paper.measureText("Oj",m.text_style).height),m.style=m.style||d,m.height=s,m.change_event=o,m.filter&&(m.filter=this.toFunction(m.filter)),x.toLowerCase()){case"numeric":h.elements[i].type="numeric",m.width=m.width||100;break;case"password":h.elements[i].type="password",m.type="password",m.html_field=!0,m.width=m.width||100;break;case"word":h.elements[i].type="word",m.type="word",m.width=m.width||100;case"line":default:h.elements[i].type=m.html_field?m.type:"line",m.width=m.width||300}h.elements[i].field=this.formField(m),"function"==typeof h.elements[i].field.qms&&h.elements[i].field.qms(q)}s&&s.add(p),t.background&&(b=p.rect(0,0,f+100+5,0).addClass([o.class_defs.FORM_TABLE_BACKGROUND,o.class_defs.FORM_TABLE_BACKGROUND+"_"+e]).setStyle(t.background));let w=0;for(let e in h.elements)if(h.elements.hasOwnProperty(e)){const o=h.elements[e];let s=t.label_indent||0||t.indent,n=w+g,r=5+f+t.indent,a=w+7,l=0;"v"===o.layout&&(r=t.indent,a+=1.2*g,l=5+1.2*g);const c=p.text(s,n,i(o.field_text));c.setStyle(t.label_font||t.font),o.label=c,p.add(o.field.translate(r,a,"id")),w+=1.2*g+l}const M=t.padding||0;if(t.apply_button){let i={};"string"==typeof t.apply_button?(i.qog=t.qog+"_apply",i.name={text:t.apply_button,style:t.font,background:!0}):"object"==typeof t.apply_button&&(i=t.apply_button),i.state_event="widget.inputTable.apply."+e;const o=p.getBBox();i.alignment&&"f"===i.alignment.charAt(0).toLowerCase()&&(i.width=o.width-M);const s=this.button(i);p.add(s);let n=i.space||3;const r=s.getBBox();let a=i.x||M;i.alignment&&("c"===i.alignment.charAt(0).toLowerCase()?a=M/2+o.width/2-r.width/2:"r"===i.alignment.charAt(0).toLowerCase()&&(a=M/2+o.width-r.width)),s.translate(a,o.height+n-r.y,"id")}if(b){const t=p.getBBox();b.attr({width:t.width+M,height:t.height+M})}p.addEveListener("widget.inputTable."+e+".*",function(t,e,i){let o=eve.nts();if(o=o.pop(),"numeric"===h.elements[o].type){let e;try{e=math.evaluate(t)}catch(t){return F.eve(["gui","message"],void 0,"Incorrectly formatted expression: "+t,!1),void(i&&i.qns())}h.result[o]=e}else h.result[o]=t;c&&F.callEvent(c,h.result)});const D=function(t){if("object"==typeof t)for(let e in t)if(t.hasOwnProperty(e)&&h.elements[e]){const i=h.elements[e].field.getUpdateEvent();F.eve(i,void 0,t[e])}};p.update=D,p.addEveListener("widget.inputTable.update."+e,D);const F=this,L=function(){let t,i=!0;for(let e in h.elements)h.elements.hasOwnProperty(e)&&("function"==typeof h.elements[e].field.qmq&&h.elements[e].field.qmq(!0),h.elements[e].required&&(h.elements[e].qmp&&(h.elements[e].qmp.remove(),h.elements[e].qmp=void 0),void 0!==h.result[e]&&""!==h.result[e]||(i=!1,(t=h.elements[e].group.paper.path(h.elements[e].group.getBBox().path)).attr({stroke:"red",fill:"none"}),h.elements[e].group.add(t),h.elements[e].qmp=t)));i&&(a&&a.remove&&F.eve(["widget","inputTable","remove",e]),r&&F.callEvent(r,h.result))};p.apply=L,p.addEveListener("widget.inputTable.apply."+e,L);const k=function(){p.removeEveListeners();for(let t in h.elements)h.elements.hasOwnProperty(t)&&"function"==typeof h.elements[t].field.remove&&h.elements[t].field.remove();Object.getPrototypeOf(p).remove.bind(p)()};p.remove=k,eve.once("widget.inputTable.remove."+e,k);const I=function(t,e){const i=h.elements[t];i&&(i.label.node.innerHTML=e)};function j(){let t;for(let e in h.elements)if(h.elements.hasOwnProperty(e)){const i=h.elements[e].field.qly();(i||h.elements[e].required&&!h.elements[e].field.qmq())&&((t=t||{})[e]=i)}return t}return p.setLabel=I,p.addEveListener("widget.inputTable.setLabel."+e,I),p.getUpdateEvent=function(){return["widget","inputTable","update",e]},p.qly=j,p.addEveListener("widget.inputTable.qly."+e,j),p},e.prototype.colomnMenu=function(t){let e,i,s,n,r,a,l,c,u,h,d=!1,p=2,f="c",g=0;if(s=(i=t.width)||t.max_width||1e16,n=t.row_height||t.height,r=t.elements||[],c=t.style||c,u=t.row_style||u,h=t.font||h,a=t.actions,p=t.margin||p,f=(f=t.alignment||f).toLowerCase().charAt(0),g=t.indent||g,d=t.close_after||d,l=t.scrollBox_height,e=t.qog,!i){let t=0;const n=this.gui;r.forEach(function(i){if("object"==typeof i&&i.paper)t=Math.max(t,i.getBBox().width);else if("string"==typeof i){const s=n.svgRoot.text(0,0,i).attr(h).addClass([o.class_defs.FONT,o.class_defs.MENU_FONT,o.class_defs.MENU_FONT+"_"+e]).toDefs(),r=s.getBBox();t=Math.max(t,r.width+2*p),s.remove()}}),i=Math.min(t,s)||100}const y=this.gui.paper.g().toDefs().attr("id",e);let m,_;o.setupEventMechanism(y,this.gui),l?(m=l,_=this.gui.paper.rect(0,0,i,"function"==typeof m?m():m)):(m=r?r.qoh*n+2*p:0,_=this.gui.paper.rect(0,0,i,m)),_.attr("id",e+"_background").setStyle(c).addClass([o.class_defs.COLUMN_MENU_BACKGROUND,o.class_defs.COLUMN_MENU_BACKGROUND+"_"+e]),y.add(_);const v=y.g().attr("id",e+"_elements");let q;l&&(q=this.scrollBox({element:v,id:e+"_scroll",width:i+10,height:m}),y.add(q));const x=this,b=function(){y.attr("display","none")};y.close=b;const w=function(){y.attr("display","")};function M(t,s){let r;for(let a,l,c,y=0,m=t.qoh;y<m;++y){if(l=v.g().attr("id",e+"_"+y),(c=x.gui.paper.rect(0,0,i-(2*p+g),n).setStyle(u)).addClass([o.class_defs.COLUMN_MENU_ROW,o.class_defs.COLUMN_MENU_ROW+"_"+e]),l.add(c),"string"==typeof(a=t[y])&&(a=x.gui.paper.text(0,0,a),h&&a.setStyle(h),a.addClass([o.class_defs.FONT,o.class_defs.MENU_FONT,o.class_defs.MENU_FONT+"_"+e])),r||(r=c.getBBox()),a.fitInBox(r,!0,!0),"c"!==f){const t=a.getBBox();"l"===f&&a.translate(r.x-t.x+g,0),"r"===f&&a.translate(i-t.x2,0)}l.add(a),l.translate(p+g,p+y*n,"id"),s&&s[y]?l.addClickEvent(s[y]):l.addClickEvent({eve:"widget.colomnmenu.selected."+e,params:[y,a.getId()]}),d&&l.addClickEvent({eve:"widget.colomnmenu.close."+e})}q&&q.content_change({x:0,y:0,width:i,height:t.qoh*n})}return y.open=w,r&&M(r,a),y.update=function(t,e,o){i=o||i,v.removeChildren(),"number"==typeof m?(m=t?t.qoh*n:0,_.attr({height:l||m,width:i})):"function"==typeof m&&_.attr({height:m({x:0,y:0,width:i,height:t.qoh*n}),width:i}),M(t,e)},y.addEveListener("widget.colomnmenu.update."+e,function(t,e,i){y.update(t,e,i)}),y.addEveListener("widget.colomnmenu.open."+e,function(){w()}),y.addEveListener("widget.colomnmenu.close."+e,function(){b()}),y.addEveListener("widget.colomnmenu.toggle."+e,function(){"none"===y.attr("display")?w():b()}),y.remove=function(){y.removeEveListeners(),Object.getPrototypeOf(y).remove.bind(y)(!0)},y.getBBox=function(){return _.getBBox()},y.toTop=function(){q&&q.toTop()},y},e.addAllowedControllers({formField:"formField",form:"formField",formFieldMenu:"formFieldMenu",menu:"formFieldMenu",inputTable:"inputTable",table:"inputTable"})}),IA_Designer.plugin("ControllerWidgets",function(t,Snap,eve,e){t.__.bind(t);const i=t;function o(t,e){const o=t.selectParent("."+i.class_defs.BUTTON_GROUP);return o?e.sideBarSize(o.getId()):e.sideBarSize()}function s(t,e,i,s){let n=1;switch("number"==typeof t&&(t>1&&(t/=100),n=t,t="fit"),t.charAt(0).toLowerCase()){case"f":return i&&(n=+i)>1&&(n/=100),function(){const t=e.getBBox();return(o(e,s).h-t.y)*n};case"u":return function(){const t=e.getBBox(),r=o(e,s);return Math.min(i,(r.h-t.b)*n)}}}e.prototype.scrollBox=function(t){let e,o=t.qof||this.gui.paper.g().attr("id","__temp");if(!o)return null;let n=o.getBBox()||{x:0,y:0,width:0,height:0};const r=t.qog||o.getId()+"_scrallbox";if("__temp"===o.getId()&&o.attr({id:r+"_container"}),"g"!==o.type){const t=this.gui.paper.g().attr("id",o.getId()+"_container");t.add(o),o=t}const a=t.slider_width||8;let l=t.height||n.height,c=t.width||n.width+a+2;const u=t.attached_group,h=t.qni||"bottom",d=t.space||0,p=this.gui.paper.g().attr("id",r).toDefs();let f=0,g=0;if(u&&"g"===u.type){(e=this.gui.paper.g().attr("id",r+"_container").toDefs()).add(p),e.add(u);let t=u.getBBox();f=t.width,g=t.height,"bottom"!==h&&("left"===h?u.translate(-(t.width+d),0,"id"):"right"===h?u.translate(c+d,0,"id"):"top"===h&&u.translate(0,-(t.height+d),"id"))}e=e||p;let y=!0;var m;"function"==typeof l||("string"==typeof l?l=s(l,e,void 0,this.gui):Array.isArray(l)&&2===l.qoh?l=s(l[0],e,l[1],this.gui):(y=!1,m=l,l=function(){return m}));const _=r+"_clip",v=this.gui.paper.clipPath().attr("id",_),q=l(),x=this.gui.paper.rect(-1,-1,c+2,q+2).attr("id",r+"_boundary");v.add(x),p.add(v);const b=p.g().attr({id:r+"_clip_group"}),w=b.g().attr({id:r+"inner"});w.add(o),b.attr({clipPath:"url(#"+_+")"});const M=this.gui.paper.rect(c-a,0,a,Math.min(q,q*q/(n.height+1e-12)),a/2,a/2);M.attr({id:r+"_slider"}),M.addClass(["IA_Designer_Scrollbox_Slider","IA_Designer_Scrollbox_Slider_"+r]),p.add(M),i.setupEventMechanism(e,this.gui);let D=0;const F=function(t){"function"==typeof t&&(t=t()),x.attr("height",t+2);const e=Math.min(t,t*t/(n.height+1e-12));e===t?M.attr("display","none"):(M.attr("display",""),M.attr("height",e)),D+n.height<=t&&(D=Math.min(0,t-n.height),w.translate(0,D,"id"));const i=t-n.height,o=0===i?0:D/i*(t-e);M.attr("y",o),u&&"bottom"===h&&u.translate(0,Math.min(t,n.height)+d,"id")};F(l),e.addEveListener("widget.scrollBox."+r+".setHeight",F),e.addEveListener("widget.scrollBox."+r+".setWidth",F);const L=function(t){n=t||o.getBBox(),F(l)};e.addEveListener("widget.scrollBox."+r+".content_change",L),M.data("change_xy_attributes",!0),M.move(void 0,void 0,{limits:{dim:"y",min_y:0,max_y:function(){return Number(x.attr("height"))-2}},coordTarget:p});let k=!1,I=!1;M.mouseover(function(){k=!0,M.attr("opacity",.9)}),M.mouseout(function(){k=!1,I||M.attr("opacity",.5)}),e.addEveListener("drag.move.start."+M.qog,function(){I=!0}),e.addEveListener("drag.move.end."+M.qog,function(){I=!1,k||M.attr("opacity",.5)});const j=function(){const t=Number(x.attr("height"))-2,e=t-Number(M.attr("height")),i=Number(M.attr("y")),o=t-n.height;D=e<=0?0:o*(i/e),w.translate(0,D,"id")};if(e.addEveListener("drag.move.ongoing."+M.qog,j),y){const t=function(){F(l)};if(e.addEveListener("gui.panel.resize",t),l.events&&Array.isArray(l.events))for(let i=0;i<l.events.qoh;i++)e.addEveListener(l.events[i],t)}return e.qnu=function(){return+x.attr("width")+f+d},e.qll=function(){return+x.attr("height")+g+d},e.setHeight=F,e.content_change=L,e.toTop=function(){M.attr({y:0}),j()},e.remove=function(){e.removeEveListeners(),Object.getPrototypeOf(e).remove.bind(e)()},e.getBBox=function(){const t=x.getBBox();return u&&u.getBBox?t.union(u.getBBox()):t},e},e.addAllowedDisplays({scrollBox:"scrollBox"})}),IA_Designer.plugin("ControllerWidgets",function(t,Snap,eve,e){t.__.bind(t);const i=t;e.prototype.qjy=function(t){let e,o,s,n,r="rect",a={fill:"none",stroke:"none"};o=t.width||o,s=t.height||s,r=t.frame||r,a=t.frame_style||a,n=t.process_function,e=t.qog;const l=this.gui.paper.g().toDefs().attr("id",e);switch(i.setupEventMechanism(l,this.gui),r){case"object"==typeof r&&r.paper:r.fitInBox({width:o,height:s,cx:o/2,cy:s/2},!0);break;case"circle":case"Circle":r=this.gui.paper.ellips(o/2,s/2,o/2,s/2).attr("id",e+"_frame");break;case"rect":case"Rect":default:r=this.gui.paper.rect(0,0,o,s).attr("id",e+"_frame")}r.setStyle(a),l.add(r);const c=e+"_clip",u=this.gui.paper.clipPath().attr("id",c);u.add(r.clone()),l.add(u),l.attr("clipPath","url(#"+c+")");const h=this;switch(n){case"function"==typeof n:l.addEveListener("widget.qjy.update."+e,function(){n(r,arguments)});break;case"style":l.addEveListener("widget.qjy.update."+e,function(t){r.setStyle(t)});break;case"shape":let t;l.addEveListener("widget.qjy.update."+e,function(e){if(t&&t.remove(),"string"==typeof e){if(!(e=h.gui.svgRoot.select("#"+e)))return;e=e.use(),t=e,e.fitInBox({width:o,height:s,cx:o/2,cy:s/2},!0),l.add(e)}else"object"==typeof e&&e.paper&&(t=e,e.fitInBox({width:o,height:s,cx:o/2,cy:s/2},!0),l.add(e))})}return l.getUpdateEvent=function(){return["widget","display","update",e]},l.getBBox=function(){return r.getBBox()},l.remove=function(){l.removeEveListeners(),Object.getPrototypeOf(l).remove.bind(l)()},l},e.addAllowedControllers({display:"display"})}),IA_Designer.plugin("ControllerWidgets",function(t,Snap,eve,e){t.__.bind(t);e.prototype.pasteBox=function(t){let e=t.qog,i=t.width,o=t.height,s=t.button_text||t.text,n=t.process_event,r=t.qiz;"string"==typeof n&&(n=n.split(".")),this.eve(["widget","pasteBox","open",e]);this.gui.qog;const a=jQuery("<dev/>",{id:this.gui.qog+"_"+e}).appendTo(this.gui.div_css_identifier);a.css({position:"fixed",top:"50%",left:"50%","margin-top":-o/2+"px","margin-left":-i/2+"px"});const l=jQuery("<textarea/>",{id:"pasted_text",name:"paste"}).appendTo(a);l.css({width:i,height:o,placeholder:"Paste Text Here!",margin:"10px 0",padding:"5px","box-shadow":"1px 1px 1px 1px gray","border-radius":"3px"});const c=jQuery("<input/>",{type:"submit",id:"close",value:"X"}).appendTo(a);c.css({position:"absolute",top:"1px",right:"-30px","box-shadow":"0.3px 0.3px 0.3x 0.3px gray","border-radius":"1px"}),jQuery("<br/>").appendTo(a);const u=jQuery("<input/>",{type:"submit",id:"process",value:s}).appendTo(a);u.css({"box-shadow":"0.3px 0.3px 0.3x 0.3px gray","border-radius":"1px"}),l.focus();u.click(()=>{this.eve(["gui","message","clear"]);let t=l.val();r&&r(t)||!r?("function"==typeof n?n(t):this.eve(n,void 0,t),a.remove()):(u.css("color","red"),this.eve(["gui","message"],void 0,"The input is incorrect"))}),c.click(function(){a.remove()})},e.prototype.externalDisplayBox=function(t){let e=t.qog,i=t.x,o=t.y,s=t.width,n=t.height,r=t.html_code,a=t.css_style;this.eve(["widget","externalDisplayBox","open",e]);this.gui.qog;const l=jQuery("<dev/>",{id:this.gui.qog+"_"+e}).appendTo(this.gui.div_css_identifier);l.css({position:"fixed",top:o,left:i,width:s,height:n});const c=jQuery("<dev/>",{id:this.gui.qog+"_"+e+"_inner"}).appendTo(l);c.css({position:"fixed",width:s,height:n}),a||(a={background:"white","overflow-y":"auto",margin:"10px 0",padding:"5px","box-shadow":"1px 1px 1px 1px gray","border-radius":"3px"}),c.css(a);const u=jQuery("<input/>",{type:"submit",id:"close",value:"X"}).appendTo(l);u.css({position:"absolute",top:"10px",right:"2px","box-shadow":"0.3px 0.3px 0.3x 0.3px gray","border-radius":"1px"});try{c.append(r)}catch(t){l.remove()}u.click(function(){l.remove()})}}),IA_Designer.plugin("ControllerWidgets",function(t,Snap,eve,e){t.__.bind(t);function i(t,e,i,o){i.layers.qlv([0,0,0,0]),i.loadGraphicsFromString(t,e,"empty"),o||i.comManager.qbk(e),i.fitToPanel()}e.prototype.fileUploader=function(t){let e=t.qog,o=t.action||"",s=t.processing_instruction,n=t.allowed_types,r=t.other_params,a=(t.success_event,t.fail_event,t.local_only);a&&(n=["svg"]),this.eve(["widget","fileUploader","open",e]);const l=this.gui.qog+"_"+e+"_form",c=jQuery("#"+this.gui.qog+"_"+e);c.qoh&&c.remove();const u=jQuery("<dev>");u.attr({id:this.gui.qog+"_"+e}).appendTo(this.gui.div_css_identifier),u.css("display","none");const h=jQuery("<form></form>");h.appendTo(u),h.attr({id:l,action:o,method:"post",enctype:"multipart/form-data",target:"upload_target"});const d=jQuery("<input>");d.attr({id:l+"_file",name:"fileName",type:"file"}).appendTo(h);const p=jQuery("<input>");p.attr({id:l+"_submit",name:"submit",type:"submit",value:""}).appendTo(h),setTimeout(function(){f.eve(["widget","fileUploader","close",e])},2e3),d.change(function(t){p.click(),f.eve(["widget","fileUploader","close",e])});const f=this;h.submit(function(t){t.preventDefault();const e=d[0].files;if(!e.qoh)return;const o=e[0],l=new FormData;if(l.append("upload",o,o.name),l.append("command","upload"),s&&l.append("process",s),n&&(Array.isArray(n)&&(n=n.join(" ")),l.append("allowed_types",n)),r){let t,e;"string"==typeof r?(t=r,e="text"):"object"==typeof r&&(t=encodeURIComponent(JSON.stringify(r)),e="json"),e&&(l.append("params",t),l.append("param_type",e))}a&&l.append("return_direct",!0);const c=new XMLHttpRequest;c.open("POST",f.gui.comManager.url,!0),c.onload=function(){if(200===c.status){f.eve(["snap","ajax","success"],void 0,o.name);const t=o.name;i(c.responseText,t,f.gui)}else f.eve(["snap","ajax","fail"],void 0,o.name),alert("An error occurred! "+c.status+": "+c.statusText)},f.eve(["com","load"],void 0,"File Upload:"+o.name),c.send(l)}),d.click()},e.prototype.localFileOpener=function(e){if(!t.API_Support.file_API)return void this.eve(["gui","error"],void 0,"Your Browser does not support local file access!");let o=e.qog,s=e.action||e.success_event,n=(e.allowed_types,e.data_type||"text"),r=e.encoding,a=e.fail_event;this.eve(["widget","fileUploader","open",o]);const l=this.gui.qog+"_"+o+"_form",c=jQuery("#"+this.gui.qog+"_"+o);c.qoh&&c.remove();const u=jQuery("<dev>");u.attr({id:this.gui.qog+"_"+o}).appendTo(this.gui.div_css_identifier),u.css({zIndex:3,opacity:0});const h=jQuery("<input/>");h.appendTo(u),h.attr({id:l,type:"file",name:"fileName"}),setTimeout(function(){d.eve(["widget","fileUploader","close",o])},2e3);const d=this;h.change(function(t){const e=t.target.files[0];if("image/svg+xml"!==e.type)return void(a&&d.eve(a));const l=new FileReader;var c;l.onload=(c=e,function(t){"function"==typeof s?s(t.target.result,c):"string"==typeof s?d.eve(s,void 0,t.target.result,c):"text"===n&&i(t.target.result,c.name,d.gui)}),l.onerror=function(t){d.eve("gui.error","Could not read file!")},"text"===n?l.readAsText(e,r):"base64"===n?l.readAsDataURL(e):"base64"===n&&l.readAsBinaryString(e),d.eve(["widget","fileUploader","close",o])}),h.click()}}),IA_Designer.plugin(function(t,Snap,eve){const e=t.__.bind(t),i=t;function o(t){this.qog=t,this.eve=eve.localEve(t)}function s(t,e,i){this.gui=t,this.eve=t.eve,this.qok=e,this.resources=i,this.qol={},this.buttons={},this._om={time:0,type:void 0,x:[0],y:[0],vx:[0],vy:[0],avx:0,avy:0,stoptimeer:void 0,down_x:void 0,down_y:void 0,move_on:!1},this.qoj={},this.qon=!1,this.panelSetting=void 0}function n(t,e){Array.isArray(t)||(t=[t]),t.forEach(t=>{-1===e.indexOf(t)&&e.push(t)})}Object.assign(i.class_defs,{BUTTON_GROUP:"IA_Designer_button_group",SVG:"IA_Designer_Main_SVG",CONTAINER:"IA_Designer_Container",PREAMBLE:"IA_Designer_Preamble",POSTAMBLE:"IA_Designer_Postamble",MENU_BACKGROUND:"IA_Designer_Menu_Background",KEEP_STATIC:"IA_Designer_keep_static",KEEP_IN_VIEW:"IA_Designer_keep_in_view",DARKCOLOR_STROKE:"IA_Designer_darkcolor_stroke",LIGHTCOLOR_STROKE:"IA_Designer_lightcolor_stroke",DARKCOLOR_FILL:"IA_Designer_darkcolor_fill",LIGHTCOLOR_FILL:"IA_Designer_lightcolor_fill",MESSAGE_BOX:"IA_Designer_MessageBox",MESSAGE_TEXT:"IA_Designer_MessageText",MESSAGE_TEXT_ERROR:"IA_Designer_MessageText_error",MESSAGE_TEXT_WARNING:"IA_Designer_MessageText_warning",LAYER:"IA_Designer_Layer",IMAGE_TARGET:"IA_Designer_Image_Target",FONT:"IA_Designer_Font",LINKED_RESOURCE:"IA_Designer_Linked_Resource",HAS_LINKED_RESOURCE:"IA_Designer_Has_Linked_Resource",TOOLTIP_BACKGROUND:"IA_Designer_Tooltip_Background",TOOLTIP_TEXT:"IA_Designer_Tooltip_Text"}),t.makeGui=function(t){return new o(t)},t.registerClass("Gui",o),t.registerClass("qoi",s),o.prototype.setup=function(e){let{html_tab_id:o,width:n,height:r,panel_setting:a,com_path:l,tools:c,buttons:u,libraries:h,controllers:d,resources_dir:p,resources:f,font_url:g,skip_svg_resources:y}=e;"string"==typeof a&&(p=c,c=l,l=a,a=void 0),a=Object.assign({},a||{}),l=l||a.com_path;c=c||a.tools||["selectorTool","handTool","drawingTool","measureTool","colorpickTool"],p=p||a.resources_dir||"./resources/",(f=f||{}).scalable_ions=f.scalable_ions||"scalable_icons.svg",f.handles=f.handles||"handles.svg",f.other=f.other||["other_elements.svg"];const m={sizeBehaviour:"adaptive",leftSize:10,topSize:20,rightSize:50,bottomSize:40,barRad:0,slideBar:!0,slideBarSize:15,positionDisplay:!0,zoomControls:!0,messageBox:!0,mouseNavigation:!0,windowIncrement:0};for(let t in m)m.hasOwnProperty(t)&&!a.hasOwnProperty(t)&&(a[t]=m[t]);a.slideBar||(a.slideBarSize=0),a.hasOwnProperty("backgroundOpacity")&&(a.backgroundOpacity=String(a.backgroundOpacity)),a.hasOwnProperty("designBackgroundOpacity")&&(a.designBackgroundOpacity=String(a.designBackgroundOpacity)),this._=new s(this,l,p),this._.panelSetting=a,"#"!==o.charAt(0)&&(o="#"+o);const _=jQuery(o);_.hasClass(i.class_defs.CONTAINER)||_.addClass(i.class_defs.CONTAINER),this.div_css_identifier=o,this.div_container=_[0];const v=o.substring(1);this.preamble=jQuery("<div>",{id:v+"_preamble"}),this.preamble.addClass(i.class_defs.PREAMBLE),this.preamble.css({position:"absolute","transform-origin":"0 0","z-index":0,display:"none"}),_.append(this.preamble),n=n||this.div_container.clientWidth,r=r||this.div_container.clientHeight||jQuery(window).height();const q=v+"_svg";this.svgRoot=Snap(n,r).attr("id",q),this.svgRoot.addClass(i.class_defs.SVG),this.defs=Snap(Snap._.getSomeDefs(this.svgRoot));const x=jQuery("#"+q);if(_.append(x),x.css({position:"absolute","z-index":1}),this.postamble=jQuery("<div>",{id:v+"_postamble"}),this.postamble.addClass(i.class_defs.POSTAMBLE),this.postamble.css({position:"absolute","transform-origin":"0 0","z-index":2,display:"none"}),_.append(this.postamble),this.paper=this.svgRoot.paper,this.layers=null,this.controllers={},this.designWidth=a.designWidth||800,this.designHeight=a.designHeight||400,this.complexMouseMode=!0,this.leftSize=a.leftSize||0,this.topSize=a.topSize||0,this.rightSize=a.rightSize||0,this.bottomSize=a.bottomSize||0,this.qol=void 0,a.panelWidth?this.panelWidth=a.panelWidth:this.panelWidth=a.panelWidth=this.div_container.clientWidth-this.leftSize-this.rightSize,a.panelHeight?this.panelHeight=a.panelHeight:this.panelHeight=a.panelHeight=this.div_container.clientHeight-this.topSize-this.bottomSize,this.slideBarSize=a.slideBarSize,this.mainClipRect=void 0,this.mainMask=void 0,this.panel=void 0,this.selectionGroup=void 0,this.handlerPanel=void 0,this.handlerGroup=void 0,this.defsHandlesGroup=void 0,this.topBar=void 0,this.leftBar=void 0,this.rightBar=void 0,this.bottomBar=void 0,this.bottomBarParams={text_space:100,text_height:15,between_element_space:15},this.bottomRightCorner=void 0,this.topCenter=void 0,this.leftCenter=void 0,this.rightCenter=void 0,this.bottomCenter=void 0,this.centerGroup=void 0,this.cursorPositionGroup=void 0,this.overlay=void 0,this.tempFieled=jQuery("#tempInputBox"),this.tempInput=jQuery("#tempInputBox_input"),this.buttons_urls="string"==typeof u?[u]:u,this.undoManager=t.makeUndoManager?t.makeUndoManager(this):void 0,this.functionManager=this.buttonManager=t.makeButtonEventManager(this),this.comManager=t.makeComManager?t.makeComManager(this,l,"com.php","upload.php"):void 0,this.fontManager=t.makeFontManager?t.makeFontManager(this):void 0,this.controllerWidgets=t.makeControllerWidgets(this),this._.createInterface(),y||this._.qdt(f),this.toolManager=t.makeToolManager(this),this.toolManager.qja(c),t.makeColorManager&&(this.colorManager=t.makeColorManager(this),this.controllers.colorGUIbar=this.colorManager.colorGUIbar),this.libraries=[],d&&this._.qej(d),h&&(this.libraries_url=h,this._.qed(this.libraries_url)),"adaptive"===a.sizeBehaviour){let t,e=this;jQuery(window).resize(function(){clearTimeout(t),t=setTimeout(e._.resize.bind(e._),100,jQuery(window).width(),jQuery(window).height())})}if("linked"===a.sizeBehaviour){let t,e,i=this;const o=(e=a.linkCSS?jQuery(a.linkCSS):jQuery(this.div_css_identifier)).width(),s=e.height();let n={w:o,h:s};this._.resize(o,s);const r=function(){setTimeout(function(){const o=e.width(),s=e.height();n.w===o&&n.h===s||(clearTimeout(t),t=setTimeout(i._.resize.bind(i._),50,e),n.w=o,n.h=s)},50)};if(i.eve.on("panel.resize",r),jQuery(window).resize(r),window.ResizeSensor&&new ResizeSensor(e,r),window.MutationObserver){new MutationObserver(function(t){t.forEach(r)}).observe(e[0],{attributes:!0,attributeOldValue:!0,attributeFilter:["style"]})}}this.db=void 0;setTimeout(function(){if(!("indexedDB"in window))return;indexedDB.deleteDatabase("IA_Presenter");let t=indexedDB.open("IA_Presenter",1);t.onupgradeneeded=function(e){let i=t.result;i&&(i.objectStoreNames.contains("transitions")||i.createObjectStore("transitions"))},t.onsuccess=function(t){}})},o.prototype.loadGraphics=function(t,e,i,o,s){"function"==typeof e&&(o=i,i=e,e=void 0);const n=this;if("function"==typeof i){const e=function(o){o===t&&(i.apply(n),this.eve.off("gui.panel.graphics.loaded",e))};this.eve.on("gui.panel.graphics.loaded",e)}this._.loadGraphics(t,e,o,s)},o.prototype.openGraphics=function(t,e,i,o){this.loadGraphics(t,e,i,o,!0)},o.prototype.loadGraphicsNewNavLayer=function(t,e,i,o){this.layers.qka(t),this.loadGraphics(e,i,o,t,!0)},o.prototype.loadGraphicsFromString=function(t,e,i,o){return this._.qec(t,e,i,o)},o.prototype.setBackground=function(t){if(t?(this._.qol.design_background_group=this.svgRoot.g().attr({id:"design_background_group"}),this._.qol.design_background.after(this._.qol.design_background_group),this._.qol.design_background.attr("opacity",0)):this._.qol.design_background&&this._.qol.design_background.attr("opacity",100),t&&"object"==typeof t&&t.type){switch(t.type){case"img":if(t.url){const e=this.svgRoot.image(t.url,0,0,t.width,t.height).attr({id:t.qog||"background",selectable:0});if(!t.width||!t.height){const t=e.node.getBoundingClientRect();e.attr({width:t.width,height:t.height})}this._.qol.design_background_group.add(e)}}}},o.prototype.getId=function(){return this.qog},o.prototype.getResourceDir=function(){return this._.resources},o.prototype.fitToPanel=function(t){const e=this._.qlh(),i=this._.qnb(e);e.height<1e-15||e<1e-15||i<1e-15||this.eve(["gui","panel","zoomchange"],void 0,[i,e.width/2+e.x,e.height/2+e.y],!1,t)},o.prototype.fitToElement=function(t,e,i,o){if(e=e||0,"string"==typeof t&&(t=this.layers.qnc(t)),Array.isArray(t)&&(t=Snap.set.apply(void 0,t)),!t.getBBox)return;let s=t.getBBox();"number"==typeof o&&(s=t.getBBoxRot(o,s.cx,s.cy));const n={};n.width=s.width*(1+e),n.height=s.height*(1+e),n.x=s.cx||s.width/2+s.x,n.y=s.cy||s.height/2+s.y;{const t=this.layers.qle();if(t!==this.layers.qod()){const e=t.getLocalMatrix(!0),i=e.apply(n);n.x=i.x,n.y=i.y,n.width=Math.abs(n.width*e.a),n.height=Math.abs(n.height*e.d)}}const r=[this._.qnb(n),n.x,n.y,o];this.eve(["gui","panel","zoomchange"],void 0,r,!1,i)},o.prototype.setDesignDimensions=function(t,e){if(!t||!e){const i=this.layers.qmz().getBBox();if(this._.qol.design_background_group){const t=this._.qol.design_background_group.getBBox();i.width=Math.max(i.x2,t.x2)-Math.min(i.x,t.x),i.height=Math.max(i.y2,t.y2)-Math.min(i.y,t.y)}t=t||i.width,e=e||i.height}this.designWidth=t,this.designHeight=e,this._.qol.design_background&&this._.qol.design_background.attr({width:t,height:e})},o.prototype.convert_unit=function(t,e){return t},o.prototype.getCenterPoint=function(){const t=this.svgRoot.paper.node.createSVGPoint();return t.x=this.panelWidth/2,t.y=this.panelHeight/2,this.layers.qod().transform().localMatrix.invert().apply(t)},o.prototype.getPanelZoom=function(t){return this.layers.qnw(t)},o.prototype.getPanelRotation=function(t){return this.layers.qmu(t)},o.prototype.deleteElements=function(t){if(Array.isArray(t)){let e=0;const i=t.qoh;let o;for(;e<i;++e)"string"==typeof(o=Snap(t[e]))&&(o=this.layers.qmz().select("#"+CSS.escape(o))),o.attr({display:"none"}),this.layers.qnh("deleted",!0,o),o.recordChange("delete")}else"string"==typeof t&&(t=this.layers.qmz().select("#"+CSS.escape(t))),t.attr({display:"none"}),this.layers.qnh("deleted",!0,t),t.recordChange("delete")},o.prototype.deleteSelection=function(t){const e=this.toolManager.qnz("selectorTool");if(e){const i=e.qld("original"),o=e.qld("ids");let s;e.qmj();const n=i.qoh;for(let t=0;t<n;++t)(s=i[t]).attr({display:"none"}),this.layers.qnh("deleted",!0,s);!t&&n&&this.eve(["graphics","delete"],this,o)}},o.prototype.placeElement=function(t,e,i){let o=[];if(Array.isArray(t)){let e=0;const s=t.qoh;for(;e<s;++e)o=o.concat(this.placeElement(t[e],!0,i))}else{if(t=Snap(t),i||this.layers.qmz().add(t),"text"===t.type){let e=t.attr("text-path");if(e){let t=this.select(e);t&&this.textPaths.add(t)}}t.recordChange("new"),this.processElement(t),o.push(t.getId())}return e||this.eve(["graphics","place"],this,o),o},o.prototype.updateFragment=function(t){const e=this.svgRoot.g().toDefs();e.append(t),e.setPaper(this.paper,!0);const i=e.getChildren();let o,s,n,r=0;for(;r<i.qoh;++r)o=(s=i[r]).getId(),(n=this.layers.qmz().select("#"+o)).after(s),this.processElement(s),n.remove(),s.attr("updated",1)},o.prototype.loadStripped=function(t,e,i){return this._.loadStripped(t,e,["gui.svgloaded.preprocess"],!1,i)},o.prototype.addResource=function(t,e){const i=t.type;switch(e?t.attr("id",e):e=t.getId(),i){case"pattern":this.patterns.add(t),this.patterns.elements_table[e]=!0;break;case"linearGradient":case"radialGradient":this.gradients.add(t),this.gradients.elements_table[e]=!0;break;case"filter":this.filters.add(t),this.filters.elements_table[e]=!0;break;case"symbol":this.symbols.add(t),this.symbols.elements_table[e]=!0;break;case"marker":this.markers.add(t),this.markers.elements_table[e]=!0;break;case"image":this.images.add(t);break;case"clipPath":case"mask":this.clips_masks.add(t);break;default:t.toDefs()}return t},o.prototype.select=function(){return this.svgRoot.select.apply(this.svgRoot,arguments)},o.prototype.selectAll=function(){return this.svgRoot.selectAll.apply(this.svgRoot,arguments)},o.prototype.clearGraphics=function(){this.eve(["gui","panel","clear"]),this.layers.qmj(),this.setDesignDimensions(this.panelWidth,this.panelHeight),this.fitToPanel()},o.prototype.makeEditable=function(t,e,i,o,s,n,r){if(e instanceof Function&&(o=e,e=void 0),"text"!==(t=Snap(t)).type&&"tspan"!==t.type)return t;const a=this;i=void 0===i?100:i;return t.addClickEvent(function(){const l=a.overlay.g(),c=t.getBBox(),u=t.node.textContent;let h;t.attr("display","none");let d=function(i,c){if(s&&!1!==i&&isNaN(i))try{i=math.evaluate(i)}catch(t){i=!1}return o&&(i=o(i)),!1===i?(n?a.eve(["gui","error"],void 0,n):a.eve(["gui","error"],void 0,"The input is incorrect"),c&&(t.attr("display",""),setTimeout(function(){h.remove(),l.remove()},20)),!1):(e&&a.eve(e,t,o(i,!0)),r||(t.node.textContent=i),t.attr("display",""),setTimeout(function(){h.remove(),l.remove()},20),a.eve(["gui","message","clear"]),!0)};const p=window.getComputedStyle(t.node,null);let f=parseFloat(p.getPropertyValue("font-size"));f*=t.transform().globalMatrix.split().scaley;const g={font_family:p.getPropertyValue("font-family"),font_size:f},y={id:t.getId()+"_edit",group:l,width:c.width+i,height:c.height,type:"line",callback:d,font:g,margin:.01};(h=a.controllerWidgets.formField(y)).qms(u,!0),l.translate(c.x-h.l_indent,c.y-h.top_margin-f/6,"id"),h.qns();const m=function(){if(a.eve.nt("activated")&&this!==h||a.eve.nt("clickAction")&&!h.qkf().isParentOf(this)){const t=h.qmq();d(t,!0)}};h.addEveListener(["textbox","activated"],m),h.addEveListener(["gui","clickAction"],m)}),t},o.prototype.sanitize=function(t){if(Array.isArray(t))for(let e=0;e<t.qoh;++e)this.sanitize(t[e]);else{const e=this.layers.qmz().select("#"+t+"[deleted=true]");e&&e.remove()}},o.prototype.processElement=function(t){if("0"!==(t=Snap(t)).attr("selectable")&&!t.attr("lock"))if(t.attr("covpoly")){const e=t.attr("covpoly"),i=this._.qdw(e);let o;const s=t.getId()+"_region";if(i.qoh>1){o=this.svgRoot.g();const t=this;i.forEach(function(e){const i=t.svgRoot.polygon(0,0,100,0);i.attr({points:e}).setStyle({fill:"blue",stroke:"none",opacity:0}),o.add(i)}),o.attr({id:s})}else(o=this.svgRoot.polygon(0,0,100,0)).attr({id:t.getId()+"_region",points:i[0],opacity:0}).setStyle({fill:"blue",stroke:"none"});this.layers.qnh("region",1,o);const n=this.svgRoot.g();t.after(n),n.add(t,o),n.attr({id:t.getId(),selectable:1,protected:s}),o.setStyle({pointerEvents:"visibleFill"})}else t.setStyle({pointerEvents:"visibleFill"});t.moveAttrToStyle(!0)},o.prototype.sideBarSize=function(t){return t===this.topBar.getId()?{w:this.panelWidth+this.leftSize+this.slideBarSize,h:this.topSize}:t===this.leftBar.getId()?{w:this.leftSize,h:this.panelHeight+this.slideBarSize}:t===this.rightBar.getId()?{w:this.rightSize,h:this.panelHeight}:t===this.bottomBar.getId()?{w:this.panelWidth+this.slideBarSize,h:this.bottomSize}:t===this.centerGroup.getId()?{w:this.div_container.clientWidth/2,h:this.div_container.clientHeight/2}:{w:this.div_container.clientWidth,h:this.div_container.clientHeight}},o.prototype.setTopSize=function(t,e){void 0!==t?e?this.topSize+=t:this.topSize=t:this.topSize=this._.panelSetting.topSize,this._.resize()},o.prototype.setRightSize=function(t,e){void 0!==t?e?this.rightSize+=t:this.rightSize=t:this.rightSize=this._.panelSetting.rightSize,this._.resize()},o.prototype.setLeftSize=function(t,e){void 0!==t?e?this.leftSize+=t:this.leftSize=t:this.leftSize=this._.panelSetting.leftSize,this._.resize()},o.prototype.setBottomSize=function(t,e){void 0!==t?e?this.bottomSize+=t:this.bottomSize=t:this.bottomSize=this._.panelSetting.bottomSize,this._.resize()},o.prototype.setBarSize=function(t,e,i){if(Array.isArray(t)&&(e=t),Array.isArray(e))return[this.topBar,this.rightBar,this.bottomBar,this.leftBar].forEach((t,i)=>{this.setBarSize(t,e[i]||0)});t===this.topBar?this.setTopSize(e,i):t===this.leftBar?this.setLeftSize(e,i):t===this.rightBar?this.setRightSize(e,i):t===this.bottomBar&&this.setBottomSize(e,i)},o.prototype.addButtons=function(t,e,i){this._.qfp(t,e,i)},o.prototype.fitWindow=function(){const t=Math.max(document.documentElement.clientWidth,window.innerWidth||0),e=Math.max(document.documentElement.clientHeight,window.innerHeight||0);this._.resize(t-15,e-15)},o.prototype.fullScreen=function(){const t=this.div_container;try{t.requestFullscreen?t.requestFullscreen({navigationUI:"hide"}).catch(t=>{}):t.mozRequestFullScreen?t.mozRequestFullScreen({navigationUI:"hide"}):t.webkitRequestFullscreen?t.webkitRequestFullscreen({navigationUI:"hide"}):t.msRequestFullscreen&&t.msRequestFullscreen(),setTimeout(()=>this.eve("panel.resize"),500)}catch(t){}},o.prototype.getLocalPointFromPanel=function(t,e,i){if("object"!=typeof t||"object"!=typeof e||i||(i=e,e=t.y||t[1],t=t.x||t[0]),void 0!==t&&void 0!==e&&"object"==typeof i){let o;return i.paper?("g"!==i.type&&(i=i.parent()),o=this._.qfs(i).invert()):i.apply&&(o=i),o.apply({x:t,y:e})}},o.prototype.getPanelPointFromLocal=function(t,e,i){let o;if("object"!=typeof t||"object"!=typeof e||i||(i=e,e=t.y||t[1],t=t.x||t[0]),"g"!==i.type&&(i=i.parent()),this.panel.isParentOf(i))o=this._.qfs(i);else{o=this._.qif(i,this.svgRoot);const t=this.panel.getLocalMatrix(!0).invert();o=o.multLeft(t)}return o.apply({x:t,y:e})},o.prototype.getMinDistanceToPanelWall=function(t,e,i){const o=this.getPanelPointFromLocal(t,e,i);return Math.min(o.x,Math.abs(o.x-this.panelWidth),o.y,Math.abs(o.y-this.panelHeight))},o.prototype.isInPanelView=function(t,e){e||(e=0);const i=this._.qol.panel_back.node.getBoundingClientRect(),o=t.node?t.node.getBoundingClientRect():t.getBoundingClientRect?t.getBoundingClientRect():t.hasOwnProperty("x")&&t.hasOwnProperty("x")?{left:t.x,right:t.x,top:t.y,bottom:t.y}:null;if(!o)return!1;const s=i.left,n=i.right;let r=o.left,a=o.right;if(e){const t=(r+a)/2;r=Math.min(r+e,t),a=Math.max(a-e,t)}if(Math.abs((s+n)/2-(r+a)/2)>=(n-s+(a-r))/2)return!1;const l=i.top,c=i.bottom;let u=o.top,h=o.bottom;if(e){const t=(u+h)/2;u=Math.min(u+e,t),h=Math.max(h-e,t)}return Math.abs((l+c)/2-(u+h)/2)<(c-l+(h-u))/2},o.prototype.pan=function(t,e,i){const zoom=this.layers.qnw(i);let o=t/zoom,s=e/zoom;const n=this.layers.qme(!0),r=this.layers.qmu();if(r%360){const t=Snap.matrix().rotate(-r).apply({x:o,y:s});o=t.x,s=t.y}this.eve(["gui","panel","zoomchange"],void 0,[zoom,n.x+o,n.y+s],void 0,void 0,i)},o.prototype.zoom=function(t,e){const zoom=this.layers.qnw(e),i=t>0?zoom/(1+t):zoom*(1-t);this.eve(["gui","panel","zoomchange"],void 0,i,void 0,void 0,e)},o.prototype.rotate=function(t,e,i){e&&(t+=this.layers.qmu(i));const o=this.layers.qme();this.eve(["gui","panel","zoomchange"],void 0,[0,o.x,o.y,t],void 0,void 0,i)},s.prototype.qbp=function(){const t=this.gui.leftSize,e=this.gui.topSize,i=this.gui.rightSize,o=this.gui.bottomSize,s=this.gui.panelWidth,n=this.gui.panelHeight,r=this.gui.slideBarSize;this.gui.mainClipRect.attr({width:s,height:n}),this.qol.panel_back.attr({width:this.gui.panelWidth,height:this.gui.panelHeight}),this.qol.top_bar_background.attr({width:s+t+r,height:e}),this.qol.left_bar_background.attr({width:t,height:n+r}),this.qol.right_bar_background.attr({y:-e,width:i,height:n+e+o+r}),this.qol.bottom_bar_background.attr({x:-t,width:s+t+r,height:o}),this.gui.leftBar.translate(0,e,"id"),this.gui.bottomBar.translate(t,e+n+r,"id"),this.gui.rightBar.translate(t+s+r,e,"id"),this.gui.bottomRightCorner.translate(t+s+r,e+n+r,"id"),this.gui.topCenter.translate(t+s/2,e,"id"),this.gui.leftCenter.translate(t,e+n/2,"id"),this.gui.rightCenter.translate(t+s,e+n/2,"id"),this.gui.bottomCenter.translate(t+s/2,e+n,"id"),this.gui.centerGroup.translate(t+s/2,e+n/2,"id"),this.gui.panel.translate(t,e,"id"),this.gui.preamble.css({transform:this.gui.panel.node.getAttribute("transform")}),this.gui.postamble.css({transform:this.gui.panel.node.getAttribute("transform")}),this.gui.handlerPanel.translate(t,e,"id"),this.panelSetting.slideBar&&this.qfy()},s.prototype.resize=function(t,e){"object"==typeof t&&t.width&&(e=t.height(),t=t.width());const i=this.panelSetting.windowIncrement;t||(t=Number(this.gui.svgRoot.attr("width").replace(/^\D+/g,""))+i),e||(e=Number(this.gui.svgRoot.attr("height").replace(/^\D+/g,""))+i),this.gui.svgRoot.attr({width:t-i,height:e-i}),this.gui.panelWidth=t-(this.gui.leftSize+this.gui.slideBarSize+this.gui.rightSize),this.gui.panelHeight=e-(this.gui.topSize+this.gui.slideBarSize+this.gui.bottomSize),this.qbp(),this.eve(["gui","panel","resize"],this.gui,t,e)},s.prototype.qe=function(t){return"t"===t||"top"===t||t===this.gui.topBar?this.gui.panelWidth+this.gui.leftSize+this.gui.slideBarSize:"b"===t||"bottom"===t||t===this.gui.bottomBar?this.gui.panelWidth:"l"===t||"left"===t||t===this.gui.leftBar?this.gui.panelHeight+this.gui.slideBarSize:"r"===t||"right"===t||t===this.gui.rightBar?this.gui.panelHeight+this.gui.slideBarSize:0},s.prototype.qf=function(t){return"t"===t||"top"===t||t===this.gui.topBar?this.gui.topSize:"b"===t||"bottom"===t||t===this.gui.bottomBar?this.gui.bottomSize:"l"===t||"left"===t||t===this.gui.leftBar?this.gui.leftSize:"r"===t||"right"===t||t===this.gui.rightBar?this.gui.rightSize:0},s.prototype.qhs=function(t){return"t"===t||"top"===t||t===this.gui.topBar||"b"===t||"bottom"===t||t===this.gui.bottomBar?"h":"l"===t||"left"===t||t===this.gui.leftBar||"r"===t||"right"===t||t===this.gui.rightBar?"v":void 0},s.prototype.qg=function(){const t=document.createElement("textarea");t.style.position="absolute",t.style.left="-1000px",t.style.top="-1000px",document.body.appendChild(t),t.focus();let e=!1;return document.execCommand("paste")&&(e=t.value),document.body.removeChild(t),e},s.prototype.qfp=function(t,e,o){"string"==typeof t&&(t=[t]);const s=this;for(let n=0;n<t.qoh;++n){let r=t[n];if("object"==typeof r){this.qia(json,e,o);break}if(r=r.startsWith("http")?r:this.resources+r,this.qmv(r))if(i.cached_resource[r]){const t=i.getCachedResource(r);this.qia(t,e,o)}else jQuery.get(r,function(t){try{t=JSON.parse(JSON.minify(t)),i._collectCache(r,t,s.resources),s.qia(t,e,o)}catch(t){"function"==typeof o&&o()}},"text")}},s.prototype.createInterface=function(){const e=this.gui.leftSize,o=this.gui.topSize,s=this.gui.bottomSize,n=this.gui.rightSize,r=this.gui.panelWidth,a=this.gui.panelHeight,l=this.gui.slideBarSize,c=this.gui.svgRoot,u="IA_Designer_mainGroupClip";this.gui.mainClipRect=c.rect(0,0,r,a),c.clipPath().attr("id",u).add(this.gui.mainClipRect);const h="IA_Designer_mainMask",d=c.g().attr("id",h+"_top_container");d.add(c.rect(-1e4,-1e4,2e5,2e5).attr({id:h+"_background",fill:"white"})),this.gui.mainMask=d.g().attr("id",h+"_inner_group"),c.mask().attr("id",h).add(d);const p="matrix(1,0, 0, 1,"+e+", "+o+")";this.gui.panel=c.g().attr({id:"PANEL",clipPath:"url(#"+u+")",mask:"url(#"+h+")",transform:p,opacity:this.panelSetting.skip_splash_screen?1:0});const f=this.gui.panel.node.style.transform;if(this.gui.preamble.css({transform:f}),this.qol.panel_back=c.rect(0,0,this.gui.panelWidth,this.gui.panelHeight),this.gui.panel.add(this.qol.panel_back.attr({id:"panel_background",class:"IA_Designer_Panel_Background",stroke:"none",fill:this.panelSetting.backgroundColor||"#eae9d7",opacity:this.panelSetting.backgroundOpacity||1})),["dragenter","dragover","dragleave","drop"].forEach(t=>{this.gui.panel.node.addEventListener(t,function(t){t.preventDefault(),t.stopPropagation()},!1)}),this.gui.panel.node.addEventListener("dragenter",function(t){}),this.gui.panel.node.addEventListener("drop",function(t){g.eve(["gui","panel","drag_and_drop"],gui,t)},!1),!this.qdx())return;if(this.gui.layers=t.makeLayers(this.gui),this.gui.controllers.layersGui=this.gui.layers.layersGui,this.qol.design_background=this.gui.layers.design_background,this.gui.handlerGroup=c.g().attr({id:"handler",class:"IA_Designer_handler IA_Designer_no_design"}).transform(this.qdv()),this.gui.handlerPanel=c.g().attr({id:"handlerPanel",clipPath:"url(#"+u+")"}).transform(this.qeb()),this.gui.handlerPanel.add(this.gui.handlerGroup),this.gui.topBar=c.g().attr("id","topBar").attr({class:"IA_Designer_button_group",opacity:this.panelSetting.skip_splash_screen?1:0}),this.qol.top_bar_background=c.rect(0,0,r+e+l,o,this.panelSetting.barRad||0),this.gui.topBar.add(c.g(this.qol.top_bar_background.attr({class:"IA_Designer_Topbar_Background IA_Designer_Bar_Background",fill:"lightgray",opacity:.3}))),this.gui.leftBar=c.g().attr("id","leftBar").attr({class:"IA_Designer_button_group",opacity:this.panelSetting.skip_splash_screen?1:0}).translate(0,o),this.qol.left_bar_background=c.rect(0,0,e,a+l,this.panelSetting.barRad||0),this.gui.leftBar.g(this.qol.left_bar_background.attr({class:"IA_Designer_Leftbar_Background IA_Designer_Bar_Background",fill:"lightgray",opacity:.5})),this.gui.bottomBar=c.g().attr("id","bottomBar").attr({class:"IA_Designer_button_group",opacity:this.panelSetting.skip_splash_screen?1:0}).translate(e,o+a+l,"id"),this.qol.bottom_bar_background=this.gui.bottomBar.rect(-e,0,r+e+l,s,this.panelSetting.barRad||0).attr({class:"IA_Designer_Bottombar_Background IA_Designer_Bar_Background",fill:"none"}),this.gui.rightBar=c.g().attr("id","rightBar").attr({class:"IA_Designer_button_group",opacity:this.panelSetting.skip_splash_screen?1:0}).translate(e+r+l,o,"id"),this.qol.right_bar_background=this.gui.rightBar.rect(0,-o,n,a+o+s+l,this.panelSetting.barRad||0).attr({class:"IA_Designer_Rightbar_Background IA_Designer_Bar_Background",fill:"none"}),this.gui.bottomRightCorner=c.g().attr("id","bottomRightCorner").attr({class:"IA_Designer_button_group",opacity:this.panelSetting.skip_splash_screen?1:0}).translate(e+r+l,o+a+l,"id"),this.gui.topCenter=c.g().attr("id","topCenter").attr({class:"IA_Designer_button_group",opacity:this.panelSetting.skip_splash_screen?1:0}).translate(e+r/2,o,"id"),this.gui.leftCenter=c.g().attr("id","leftCenter").attr({class:"IA_Designer_button_group",opacity:this.panelSetting.skip_splash_screen?1:0}).translate(e,o+a/2,"id"),this.gui.rightCenter=c.g().attr("id","rightCenter").attr({class:"IA_Designer_button_group",opacity:this.panelSetting.skip_splash_screen?1:0}).translate(e+r,o+a/2,"id"),this.gui.bottomCenter=c.g().attr("id","bottomCenter").attr({class:"IA_Designer_button_group",opacity:this.panelSetting.skip_splash_screen?1:0}).translate(e+r/2,o+a,"id"),this.gui.centerGroup=c.g().attr("id","centerGroup").attr({class:"IA_Designer_button_group",opacity:this.panelSetting.skip_splash_screen?1:0}).translate(e+r/2,o+a/2,"id"),this.gui.cursorPositionGroup=c.g().attr({id:"cursorPositionGroup"}).attr({class:"IA_Designer_button_group",opacity:this.panelSetting.skip_splash_screen?1:0}),this.gui.overlay=c.g().attr("id","overlay").attr({class:"IA_Designer_overlay IA_Designer_no_design"}),this.gui.def_resources=c.g().attr("id","resources").toDefs(),this.gui.patterns=this.gui.def_resources.g().attr("id","patterns"),this.gui.patterns.elements_table={},this.gui.filters=this.gui.def_resources.g().attr("id","filters"),this.gui.filters.elements_table={},this.gui.gradients=this.gui.def_resources.g().attr("id","gradients"),this.gui.gradients.elements_table={},this.gui.symbols=this.gui.def_resources.g().attr("id","symbols"),this.gui.symbols.elements_table={},this.gui.markers=this.gui.def_resources.g().attr("id","markers"),this.gui.markers.elements_table={},this.gui.images=this.gui.def_resources.g().attr("id","images"),this.gui.textPaths=this.gui.def_resources.g().attr("id","textpaths"),this.gui.clips_masks=this.gui.def_resources.g().attr("id","clips_and_masks"),this.gui.buttons=this.gui.def_resources.g().attr("id","buttons"),c.g().attr({id:"text-paths"}).toDefs(),this.qdc(),this.qdb(),jQuery("."+i.class_defs.PRELOAD).each(function(){this.parentNode.removeChild(this)}),!this.panelSetting.skip_splash_screen){const t=this.gui.overlay.g().attr({opacity:0,class:"IA_Designer_logo"});this.loadStripped(t,i.getLogo(this.gui));const e=this.gui.div_container.clientHeight,o=this.gui.div_container.clientWidth;t.fitInBox({cx:o/2,cy:e/2,width:500,height:500},!0),t.animate({opacity:1},500)}const g=this;this.gui.buttons_urls&&this.qfp(this.gui.buttons_urls),this.panelSetting.slideBar&&this.qdf();const y=this.gui.bottomBarParams.text_space,m=this.gui.bottomBarParams.between_element_space,_=this.gui.bottomBarParams.text_height;if(this.panelSetting.positionDisplay){let t=2,e=_;"object"==typeof this.panelSetting.positionDisplay&&(t=this.panelSetting.positionDisplay.x,e=this.panelSetting.positionDisplay.y),this.gui.bottomBar.add(c.g().attr({id:"scalebar_place",x:0,y:0}),c.text(t,e,"X: "),c.text(t+m,e,"").attr("id","x_cursor_position"),c.text(t+y,e,"Y: "),c.text(t+y+m,e,"").attr("id","y_cursor_position"))}if(this.panelSetting.zoomControls){let t=2+2*y,e=_;"object"==typeof this.panelSetting.zoomControls&&(t=this.panelSetting.zoomControls.x,e=this.panelSetting.zoomControls.y),this.gui.bottomBar.add(this.qdp(t,e))}if(this.panelSetting.messageBox){const t={x:2,y:_+20};let e;"object"==typeof this.panelSetting.messageBox&&(t.x=this.panelSetting.messageBox.x,t.y=this.panelSetting.messageBox.y,e=this.panelSetting.messageBox.time),this.gui.bottomBar.add(g.qde(t.x,t.y,e))}this.qay(),this.qdy(),this.qbr(),this.qei(),this.panelSetting.mouseNavigation&&this.qfc()},s.prototype.qdc=function(t){if(t);else{let t=30,e=this.qol.loading_gif=this.gui.paper.image(this.resources+"loading.gif",-(t+this.gui.slideBarSize),-(t+this.gui.slideBarSize),t,t);e.attr({id:"loading_gif",preserveAspectRatio:"xMaxYMin",visibility:"hidden"}),this.gui.bottomRightCorner.add(e);let i=0;const o=function(t){e.attr({visibility:"visible"}),i++},s=function(t){i--,i=Math.max(i,0),"object"==typeof t&&(t=t.responseURL?t.responseURL:""),i||e.attr({visibility:"hidden"})};this.eve.on("com.load",o),this.eve.on("snap.ajax.*",s)}},s.prototype.qdb=function(){const t=this.gui.paper.filter('<feDropShadow dx="0" dy="0" stdDeviation="2"/>');t.attr({id:"IA_Designer_button_press_filter"}),this.gui.filters.button_press=t},s.prototype.qng=function(t,e,i,o,s,n){i=i||0,o=o||0,s=s||0,void 0===n&&(n=s);const r=this;let a=!t.icon;const l=t.icon||{};let c,u,h,d,p,f;a&&(l.is_active=!t.hasOwnProperty("activeDefault")||t.activeDefault||!t.hasOwnProperty("inactiveIcon"));const g="empty"===t.inactiveIcon?0:.3;let y=t.opacity||1,m="empty"===t.inactiveIcon?0:1,_="empty"===t.inactiveIcon?"none":"";c=t.name||t.activeIcon;let v=t.activeIcon;this.gui.buttonManager;let q=!0,x=!0;t.external_events&&(q=!1,x=!1),a?(p=this.gui.svgRoot.g().attr({transform:"matrix("+[1,0,0,1,i,o]+")",id:t.name+"_pos_group"}),e.add(p),l.pos_group=p):((p=t.icon.pos_group).attr({transform:"matrix("+[1,0,0,1,i,o]+")"}),e.getId()!==p.parent().getId()&&e.add(p)),p.attr({display:""});let b;if(a){if("object"==typeof v){const e=v;if(t.type)try{"toggle"===t.type&&(e.skip_click=!0,e.qog=e.qog||t.name);const i=this.gui.controllerWidgets[t.type](e);l.active=i,"toggle"===t.type&&(t.events=t.events||{},t.events.mouse=t.events.mouse||{},t.events.mouse.click=i.nextState)}catch(t){return}}l.active=l.active||this.gui.buttons.select("#"+v),l.active&&(u=l.active.getBBox(),h=Math.min(s/u.width,n/u.height),(isNaN(h)||0===h)&&(h=1),d="matrix("+[h,0,0,h,0,0]+")",q&&(l.active=l.active.use()),l.active.attr({x:0,y:0,opacity:l.is_active?y:t.inactiveIcon?0:g}),f=this.gui.svgRoot.g(l.active).attr("transform",d),p.add(f))}else{const t=l.active;t&&(u=t.getBBox(),h=Math.min(s/u.width,n/u.height),(isNaN(h)||0===h)&&(h=1),d="matrix("+[h,0,0,h,0,0]+")",t.parent().attr("transform",d))}if(t.inactiveIcon&&"empty"!==t.inactiveIcon){let e=this.gui.buttons.select("#"+t.inactiveIcon);a?(l.inactive=e,l.inactive&&(u=l.inactive.getBBox(),h=Math.min(s/u.width,n/u.height),(isNaN(h)||0===h)&&(h=1),d="matrix("+[h,0,0,h,0,0]+")",q&&(l.inactive=l.inactive.use()),l.inactive.attr({x:0,y:0,opacity:l.is_active?0:m}),f=this.gui.svgRoot.g(l.inactive).attr("transform",d),p.add(f))):e&&(u=e.getBBox(),h=Math.min(s/u.width,n/u.height),(isNaN(h)||0===h)&&(h=1),d="matrix("+[h,0,0,h,0,0]+")",l.inactive.parent().attr("transform",d))}if(t.pressedIcon)if(a)l.pressed=this.gui.buttons.select("#"+t.pressedIcon),l.pressed&&(u=l.pressed.getBBox(),h=Math.min(s/u.width,n/u.height),(isNaN(h)||0===h)&&(h=1),d="matrix("+[h,0,0,h,0,0]+")",q&&(l.pressed=l.pressed.use()),l.pressed.attr({x:0,y:0,opacity:0}),f=this.gui.svgRoot.g(l.pressed).attr("transform",d),p.add(f));else{const e=this.gui.buttons.select("#"+t.pressedIcon);e&&(u=e.getBBox(),h=Math.min(s/u.width,n/u.height),(isNaN(h)||0===h)&&(h=1),d="matrix("+[h,0,0,h,0,0]+")",l.pressed.parent().attr("transform",d))}if(!a)return r.eve(["gui","button",t.name,"updated"]),l.pos_group;t.icon=l;let w=[];if(x&&t.hasOwnProperty("events")){let e=!0;for(let i in t.events)if(t.events.hasOwnProperty(i))if("mouse"===i){b=[];for(let i in t.events.mouse){b.push(i);const o=t.events.mouse[i];let s;if(o&&"string"==typeof o||"function"==typeof o&&(s=o)){const e=s||this.gui.buttonManager.get(o);e?r.eve.on("gui.button."+t.name+"."+i,e):r.eve.on("gui.button."+t.name+"."+i,function(){r.eve(o)})}else if("object"==typeof o)if(o.menu){const s=this.buttons.menu_defs[o.menu];if(s){const n=o.action||"open";r.eve.on("gui.button."+t.name+"."+i,function(e){const i=s.next_to_button?r.qet(t,s):void 0;s.qnq&&("string"==typeof s.qnq&&r.gui.buttonManager.qit(s.qnq)?r.gui.buttonManager.qmr(s.qnq):r.eve(["gui","menu",o.menu,"rebuild"])),r.eve(["gui","menu",o.menu,n],void 0,i,s,t)}),s.auto_hide&&e&&(r.eve.on("gui.button."+t.name+".mouseout",function(){let t="boolean"==typeof s.auto_hide||isNaN(s.auto_hide)?2e3:s.auto_hide;s.auto_hide_timer=setTimeout(function(){r.eve(["gui","menu",o.menu,"close"])},t)}),r.eve.on("gui.button."+t.name+".mouseenter",function(){clearTimeout(s.auto_hide_timer)}),e=!1)}}else r.eve.on("gui.button."+t.name+"."+i,function(t){r.qmw(o,l.pos_group,t)})}}else if("mouse_eve"===i)"string"==typeof t.events.mouse_eve?w.push(t.events.mouse_eve):Array.isArray(t.events.mouse_eve)&&w.concat(t.events.mouse_eve);else if("activate"!==i||this.gui.buttonManager.qit(t.events.qns))if("init"===i){const e=t.events.init;this.gui.buttonManager.qmr(e)}else{const e=t.events[i];let o=this.gui.buttonManager.get(e);o&&(r.eve.on(t.name+"."+i,o),r.eve.on(i,o))}else r.eve.on("gui.button."+t.name+".qns",function(){l.active.attr({opacity:y,"pointer-events":""}),l.pos_group.attr("active",1),l.inactive&&l.inactive.attr("opacity",0),l.pressed&&l.pressed.attr("opacity",0),l.is_active=!0}),r.eve.on("gui.button."+t.name+".qnr",function(){l.active.attr("opacity",0),l.pos_group.attr("active",""),l.inactive?l.inactive.attr("opacity",m):l.active.attr({opacity:g,"pointer-events":_}),l.pressed&&l.pressed.attr("opacity",0),l.is_active=!0})}if(x){const e=t.mode,i=t.class,o=function(t,o){return function(s){if(l.is_active&&(i&&r.eve(["gui","button",i,"click"],void 0,s,e),r.eve(["gui","button",t,"click"],void 0,s,e),o.qoh))for(let t=0,i=o.qoh;t<i;++t)r.eve(o[t],s,e)}}(t.name,w);l.pos_group.addClickEvent(o),l.pos_group.attr("button",1),l.is_active&&l.pos_group.attr("active",1),b&&b.forEach(function(t){if(!l.is_active||"click"===t)return;const i=t.toLowerCase();["longpress","hold","press"].indexOf(i)>-1&&l.pos_group.addInteractionEvent(i,function(i){r.eve(["gui","button",c,t],void 0,i,e)})})}const M=function(e){r._om.last_button_enter=void 0,t.message&&r.eve(["gui","message","clear"]),r.eve(["gui","button",c,"mouseout"],void 0,e)};return l.pos_group.mouseenter(function(e){r._om.last_button_enter!==t&&(r._om.last_button_enter&&M(void 0,r._om.last_button_enter),r._om.last_button_enter=t,t.message&&r.eve(["gui","message"],void 0,t.message),r.eve(["gui","button",c,"mouseenter"],void 0,e))}),l.pos_group.mouseout(M),r.eve.on(["gui","button",c,"fixout"],M),r.eve.on(["gui","button",c,"symclick"],function(){l.is_active&&r.eve(["gui","button",c,"click"],l)}),l.timer=void 0,r.eve.on("gui.button."+t.name+".mousedown",function(t,e){return function(){t.pressed&&(t.active.attr("opacity",0),t.pressed.attr("opacity",1)),t.timer=setTimeout(function(){r.eve(["gui","button",e,"longPress"],t)},800)}}(l,t.name)),t.toggleGroup&&r.eve.on("gui.button."+t.name+".click",function(){r.eve(["gui","panel","toggleButton"],t,t.toggleGroup,t.name)}),r.eve(["gui","button",t.name,"loaded"]),l.pos_group},s.prototype.qh=function(t,e,i,o,s,n){},s.prototype.qfg=function(t,e,i,o){e.hasOwnProperty("y")||(e.y=1),o=o||e.width||t.width||(this.gui.topSize?this.gui.topSize-2:void 0);const s=t.height||(this.gui.topSize?this.gui.topSize-2:void 0);this.qng(t,this.gui.topBar,e.x,e.y,o,s)},s.prototype.qix=function(t,e,i){e.hasOwnProperty("x")||(e.x=1);const o=t.width||(this.gui.leftSize?this.gui.leftSize-2:void 0),s=t.height;this.qng(t,this.gui.leftBar,e.x,e.y,o,s)},s.prototype.qiy=function(t,e){e.hasOwnProperty("x")||(e.x=3),this.qng(t,this.gui.rightBar,e.x,e.y,t.width,t.height)},s.prototype.qfi=function(t,e){this.qng(t,this.gui.centerGroup,e.x,e.y,t.width,t.height)},s.prototype.qfw=function(t,e){this.qng(t,this.gui.cursorPositionGroup,e.x,e.y,t.width,t.height)},s.prototype.qfj=function(t,e){this.qng(t,this.gui.topCenter,e.x,e.y,t.width,t.height)},s.prototype.qfn=function(t,e){this.qng(t,this.gui.leftCenter,e.x,e.y,t.width,t.height)},s.prototype.qfq=function(t,e){this.qng(t,this.gui.rightCenter,e.x,e.y,t.width,t.height)},s.prototype.qgi=function(t,e){this.qng(t,this.gui.bottomCenter,e.x,e.y,t.width,t.height)},s.prototype.qmn=function(t,e){let i,o,s=this.gui.bottomBar.select("#"+t.name+"_place");s?(i=Number(s.attr("x")),o=Number(s.attr("y"))):(i=e.x,o=e.y),s=s||this.gui.bottomBar,this.qng(t,s,i,o,t.width,t.height)},s.prototype.qgh=function(t,e){let i,o,s;e?(i=this.gui.bottomRightCorner,o=e.x,s=e.y):(i=this.gui.bottomRightCorner.select("#"+t.name+"_place"),o=Number(i.attr("x")),s=Number(i.attr("y"))),this.qng(t,i,o,s,t.width,t.height)},s.prototype.qeo=function(t,e){e.top=e.top||{aligned:[],absolute:[]},e.left=e.left||{aligned:[],absolute:[]},e.right=e.right||{aligned:[],absolute:[]},e.bottom=e.bottom||{assigned:[],absolute:[]},e.brcorner=e.brcorner||{assigned:[],absolute:[]},e.topcenter=e.topcenter||{assigned:[],absolute:[]},e.leftcenter=e.leftcenter||{assigned:[],absolute:[]},e.rightcenter=e.rightcenter||{assigned:[],absolute:[]},e.bottomcenter=e.bottomcenter||{assigned:[],absolute:[]},e.center=e.center||{assigned:[],absolute:[]},e.cursor=e.cursor||{assigned:[],absolute:[]},e.groups=e.groups||{},e.toggleGroups=e.toggleGroups||{},e.menues=e.menues||{},e.menu_defs=e.menu_defs||{},e.menu_defs.qkf&&"function"==typeof e.menu_defs.qkf||(e.menu_defs.qkf=function(t){if(e.menu_defs[t]&&e.menu_defs[t].__group)return e.menu_defs[t].__group},e.menu_defs.setGroup=function(t,i){e.menu_defs[t].__group=i});const i={};for(let o in t)try{if(t.hasOwnProperty(o)){const s=o;(o=t[o]).name=o.name||s;const n=o.qni||"top";if(o.menu){e.menu_defs[s]=o.menu,o.qni&&(e.menu_defs[s].place=o.qni,delete o.qni),i.menu=i.menu||{},i.menu[s]=!0;continue}let r;if(i[n]=i[n]||{aligned:!1,absolute:!1},o.hasOwnProperty("position"))if("object"==typeof o.position)r=o.position;else if("string"==typeof o.position){let t=this.gui.buttons.select("#"+o.position);if(t){let e=t.getLocalMatrix();o.position=r={x:-e.e,y:-e.f}}}switch(!o.hasOwnProperty("width")&&this.gui.leftSize>5&&(o.width=this.gui.leftSize-2),!o.hasOwnProperty("height")&&this.gui.topSize>5&&(o.height=this.gui.topSize-2),"menu"!==n&&(r?i[n].absolute=!0:i[n].aligned=!0),n){case"left":r?e.left.absolute.push(o):e.left.aligned.push(o);break;case"right":r?e.right.absolute.push(o):e.right.aligned.push(o);break;case"bottom":r?e.bottom.absolute.push(o):e.bottom.assigned.push(o);break;case"topcenter":r?e.topcenter.absolute.push(o):e.topcenter.assigned.push(o);break;case"leftcenter":r?e.leftcenter.absolute.push(o):e.leftcenter.assigned.push(o);break;case"bottomcenter":r?e.bottomcenter.absolute.push(o):e.bottomcenter.assigned.push(o);break;case"rightcenter":r?e.rightcenter.absolute.push(o):e.rightcenter.assigned.push(o);break;case"center":r?e.center.absolute.push(o):e.center.assigned.push(o);break;case"brcorner":r?e.brcorner.absolute.push(o):e.brcorner.assigned.push(o);break;case"cursor":r?e.cursor.absolute.push(o):e.cursor.assigned.push(o);break;case"menu":o.inMenu&&(i.menu=i.menu||{},i.menu[o.inMenu]=!0,e.menues[o.inMenu]?e.menues[o.inMenu].push(o):e.menues[o.inMenu]=[o]);break;case"top":default:r?e.top.absolute.push(o):e.top.aligned.push(o)}o.group&&(e.groups.hasOwnProperty(o.group)?e.groups[o.group].push(o):e.groups[o.group]=[o]),o.toggleGroup&&(e.toggleGroups.hasOwnProperty(o.toggleGroup)?e.toggleGroups[o.toggleGroup].push(o):e.toggleGroups[o.toggleGroup]=[o])}}catch(t){}return i},s.prototype.qeq=function(t,e){const i=this;let o,s,n=s=5,r=o=5;const a=function(t){if(!t)return[];const e=[],i={};let o,s,n;for(let n=0;n<t.qoh;++n)s=t[n],o=e.qoh,s.group?i.hasOwnProperty(s.group)?e[i[s.group]].push(s):(e.push([s]),i[s.group]=o):e.push([s]);const r=e.qoh;for(let t=0;t<r;++t){const i=e[t].map(function(t){return t.order?+t.order:Number.MAX_SAFE_INTEGER});let o=Math.min(...i);o===Number.MAX_SAFE_INTEGER&&(o=Number.MAX_SAFE_INTEGER-r+t),e[t].order=o}e.sort(function(t,e){return t.order<e.order?-1:t.order>e.order?1:0});const a=[];for(let t=0;t<r;++t)for(n=0;n<e[t].qoh;n++)e[t][n]&&a.push(e[t][n]);return a};t&&(!t.top||e&&"top"!==e)||(t&&!t.top.aligned||(this.buttons.top.aligned=a(this.buttons.top.aligned),this.buttons.top.aligned.forEach(function(t){t.qoa||(i.qfg(t,{x:n,width:t.width}),n+=2+t.width)})),t&&!t.top.absolute||this.buttons.top.absolute.forEach(function(t){t.qoa||i.qfg(t,t.position,void 0,void 0,!0)})),t&&(!t.left||e&&"left"!==e)||(t&&!t.left.aligned||(this.buttons.left.aligned=a(this.buttons.left.aligned),this.buttons.left.aligned.forEach(function(t){t.qoa||(i.qix(t,{y:r,height:t.height}),r+=2+t.height)})),t&&!t.left.absolute||this.buttons.top.absolute.forEach(function(t){t.qoa||i.qix(t,t.position,!0)})),t&&(!t.right||e&&"right"!==e)||(t&&!t.right.aligned||(this.buttons.right.aligned=a(this.buttons.right.aligned),this.buttons.right.aligned.forEach(function(t){t.qoa||(i.qiy(t,{y:o,height:t.height}),o+=2+t.height)})),t&&!t.right.absolute||this.buttons.right.absolute.forEach(function(t){t.qoa||i.qiy(t,t.position)})),t&&(!t.bottom||e&&"bottom"!==e)||(t&&!t.bottom.assigned||this.buttons.bottom.assigned.forEach(function(t){t.qoa||i.qmn(t)}),t&&!t.bottom.absolute||this.buttons.bottom.absolute.forEach(function(t){t.qoa||i.qmn(t,t.position)})),t&&(!t.brcorner||e&&"brcorner"!==e)||(t&&!t.brcorner.assigned||this.buttons.brcorner.assigned.forEach(function(t){t.qoa||i.qgh(t)}),t&&!t.brcorner.absolute||this.buttons.brcorner.absolute.forEach(function(t){t.qoa||i.qgh(t,t.position)})),t&&(!t.topcenter||e&&"topcenter"!==e)||(t&&!t.topcenter.assigned||this.buttons.topcenter.assigned.forEach(function(t){t.qoa||i.qfj(t)}),t&&!t.topcenter.absolute||this.buttons.topcenter.absolute.forEach(function(t){t.qoa||i.qfj(t,t.position)})),t&&(!t.leftcenter||e&&"leftcenter"!==e)||(t&&!t.leftcenter.assigned||this.buttons.leftcenter.assigned.forEach(function(t){t.qoa||i.qfn(t)}),t&&!t.leftcenter.absolute||this.buttons.leftcenter.absolute.forEach(function(t){t.qoa||i.qfn(t,t.position)})),t&&(!t.rightcenter||e&&"rightcenter"!==e)||(t&&!t.rightcenter.assigned||this.buttons.rightcenter.assigned.forEach(function(t){t.qoa||i.qfq(t)}),t&&!t.rightcenter.absolute||this.buttons.rightcenter.absolute.forEach(function(t){t.qoa||i.qfq(t,t.position)})),t&&(!t.bottomcenter||e&&"bottomcenter"!==e)||(t&&!t.bottomcenter.assigned||this.buttons.bottomcenter.assigned.forEach(function(t){t.qoa||i.qgi(t)}),t&&!t.rightcenter.absolute||this.buttons.bottomcenter.absolute.forEach(function(t){t.qoa||i.qgi(t,t.position)})),t&&(!t.center||e&&"center"!==e)||(t.center.aligned&&this.buttons.center.assigned.forEach(function(t){t.qoa||i.qfi(t)}),t&&!t.center.absolute||this.buttons.center.absolute.forEach(function(t){t.qoa||i.qfi(t,t.position)})),t&&(!t.cursor||e&&"cursor"!==e)||(t&&!t.cursor.aligned||this.buttons.cursor.assigned.forEach(function(t){t.qoa||i.qfw(t)}),t&&!t.cursor.absolute||this.buttons.cursor.absolute.forEach(function(t){t.qoa||i.qfw(t,t.position)})),t&&!t.menu||this.qgj(e,t.menu)},s.prototype.qhz=function(t,e){const i=this.qeo(t,this.buttons);this.qeq(i,e)},s.prototype.qgj=function(t,e){if(!t){for(let t in this.buttons.menu_defs)e&&!e[t]||!this.buttons.menu_defs.hasOwnProperty(t)||"function"==typeof this.buttons.menu_defs[t]||this.qgj(t);return}let o;if(!(o=this.buttons.menu_defs[t]))return;o.hidden=void 0===o.hidden||o.hidden;let s=this.buttons.menu_defs.qkf(t);if(s||(s=this.gui.paper.g().attr({id:t+"_menu"}).toDefs(),this.buttons.menu_defs.setGroup(t,s),o.auto_hide&&(s.mouseout(function(){let e="boolean"==typeof o.auto_hide||isNaN(o.auto_hide)?2e3:o.auto_hide;o.auto_hide_timer=setTimeout(function(){a.eve(["gui","menu",t,"close"])},e)}),s.mouseenter(function(){clearTimeout(o.auto_hide_timer)}))),this.buttons.menues[t]&&this.buttons.menues[t].qoh){const e=this.qes(o);"function"==typeof e&&e(this.buttons.menues[t],s)}let n,r=!1;switch(o.qni){case"top":n=this.gui.topBar;break;case"left":n=this.gui.leftBar;break;case"right":n=this.gui.rightBar;break;case"bottom":n=this.gui.bottomBar;break;case"center":n=this.gui.centerGroup;break;case"bottom_right":n=this.gui.bottomRightCorner;break;case"top_center":n=this.gui.topCenter;break;case"left_center":n=this.gui.leftCenter;break;case"right_center":n=this.gui.rightCenter;break;case"bottom_center":n=this.gui.bottomCenter;break;case"cursor":n=this.gui.cursorPositionGroup,r=!0}r||(s.attr({display:"none"}),n.add(s));const a=this;let l=function(e,o,c){const u=o.animate_time||500;if(o.closing)setTimeout(()=>l(e,o,c),10+u-((new Date).getTime()-o.closing));else if(o.hidden){if(r&&n.add(s),s.attr("display",""),o.hidden=!1,e){if(c){let t=c.paper?c:c.icon.pos_group;if((t=t.parent())!==n){const i=t.transform().globalMatrix,o=n.transform().globalMatrix.invert();e=i.apply(e),e=o.apply(e)}}e.x,e.y;s.translate(e.x,e.y,"id")}o.animate&&a.buttons.menues[t].forEach(function(t){t.icon.pos_group.transparentToMouse();const e=t.icon.pos_group.data("position");t.icon.pos_group.attr({opacity:0}),t.icon.pos_group.animate({opacity:1},300),t.icon.pos_group.animateTransform(e,300,void 0,()=>t.icon.pos_group.transparentToMouse("remove"));const o=s.select("."+i.class_defs.MENU_BACKGROUND);if(o){o.transparentToMouse();const t=o.data("position");o.animate(t,.5*u,void 0,()=>o.transparentToMouse("remove"))}})}},c=function(){let e=!1;const l=function(){e||(r&&n.toDefs(),s.attr("display","none"),e=!0,o.hidden=!0)};if(o.animate){o.closing=(new Date).getTime();const e=o.animate_time||500;a.buttons.menues[t].forEach(function(t){t.icon.pos_group.transparentToMouse();const i=t.icon.pos_group.data("original_position");t.icon.pos_group.animate({opacity:0},e,l),t.icon.pos_group.animateTransform(i,e,void 0,()=>{t.icon.pos_group.transparentToMouse("remove"),o.closing=!1})});const n=s.select("."+i.class_defs.MENU_BACKGROUND);if(n){n.transparentToMouse();const t=n.data("original_position");n.animate(t,.5*e,void 0,()=>{n.transparentToMouse("remove"),o.closing=!1})}}else l()};a.eve.on(["gui","menu",t,"open"],l),a.eve.on(["gui","menu",t,"close"],c),a.eve.on(["gui","menu",t,"toggle"],function(t,e,i){"none"===s.attr("display")||e.hidden?l(t,e,i):c()})},s.prototype.qes=function(t){const e=t.type||"top",o=t.animate;let s=void 0;t.background&&(s="object"==typeof t.background?t.background:{});const n=this.gui,r=this;let a,l,c,u=!1;switch(e.startsWith("quarter_circle_")?c="quarter_circle":e.startsWith("fan_")&&(c="fan"),c||e){case"top":case"vertical_top":return function(t,e){let a,l,c,u,h=e.select("."+i.class_defs.MENU_BACKGROUND),d=0,p=0;s&&!h&&((h=r.gui.paper.rect(0,0,0,0)).setStyle(s),h.addClass(i.class_defs.MENU_BACKGROUND),e.add(h));for(let i=0,s=0,h=t.qoh;i<h;++i)if(!(c=t[i]).qoa){if(s+=2*+(i>0)+(a=c.height||n.topSize||30)/2,(u=r.qng(c,e,0,0,a)).fitInBox({cx:0,cy:o?0:s,height:a,width:1e15},!0),l=c.width||u.getBBox().width,d=Math.max(l+4,d),o){const t=u.getLocalMatrix(!0);u.data("original_position",t);const e=t.clone();e.f+=s,u.data("position",e)}s+=a/2,i===h-1&&(p=s+2)}if(h){const t={x:-d/2,y:-2,width:d,height:p};o?(h.data("original_position",{x:0,y:0,width:0,height:0}),h.data("position",t)):h.attr(t)}};case"bottom":case"vertical_bottom":return function(t,e){let a,l,c,u,h=e.select("."+i.class_defs.MENU_BACKGROUND),d=0,p=0;s&&!h&&((h=r.gui.paper.rect(0,0,0,0)).setStyle(s),h.addClass(i.class_defs.MENU_BACKGROUND),e.add(h));for(let i=0,s=0,h=t.qoh;i<h;++i)if(!(c=t[i]).qoa){if(s-=2*+(i>0)+(a=c.height||n.topSize||30)/2,(u=r.qng(c,e,0,0,a)).fitInBox({cx:0,cy:o?0:s,height:a,width:1e15},!0),l=c.width||u.getBBox().width,d=Math.max(l+4,d),o){const t=u.getLocalMatrix(!0);u.data("original_position",t);const e=t.clone();e.f+=s,u.data("position",e)}s-=a/2,i===h-1&&(p=2-s)}if(h){const t={x:-d/2,y:-p-2,width:d,height:p};o?(h.data("original_position",{x:0,y:0,width:0,height:0}),h.data("position",t)):h.attr(t)}};case"left":case"horizontal_left":return function(t,e){let a,l,c,u,h=e.select("."+i.class_defs.MENU_BACKGROUND),d=0,p=0;s&&!h&&((h=r.gui.paper.rect(0,0,0,0)).setStyle(s),h.addClass(i.class_defs.MENU_BACKGROUND),e.add(h));for(let i=0,s=0,h=t.qoh;i<h;++i)if((c=t[i]).qoa)c.icon&&c.icon.pos_group.attr({display:"none"});else{if(s+=2*+(i>0)+(l=c.width||n.leftSize||30)/2,(u=r.qng(c,e,0,0,l)).fitInBox({cy:0,cx:o?0:s,width:l,height:1e15},!0),a=c.height||u.getBBox().height,p=Math.max(a+4,p),o){const t=u.getLocalMatrix(!0);u.data("original_position",t);const e=t.clone();e.e+=s,u.data("position",e)}s+=l/2,i===h-1&&(d=s+4)}if(h){const t={x:-2,y:-p/2,width:d,height:p};o?(h.data("original_position",{x:0,y:0,width:0,height:0}),h.data("position",t)):h.attr(t)}};case"right":case"horizontal_right":return function(t,e){let a,l,c,u,h=e.select("."+i.class_defs.MENU_BACKGROUND),d=0,p=0;s&&!h&&((h=r.gui.paper.rect(0,0,0,0)).setStyle(s),h.addClass(i.class_defs.MENU_BACKGROUND),e.add(h));for(let i=0,s=0,h=t.qoh;i<h;++i)if((c=t[i]).qoa)c.icon&&c.icon.pos_group.attr({display:"none"});else{if(s-=2*+(i>0)+(l=c.width||n.leftSize||30)/2,(u=r.qng(c,e,0,0,l)).fitInBox({cy:0,cx:o?0:s,width:l,height:1e15},!0),a=c.height||u.getBBox().height,p=Math.max(a+4,p),o){const t=u.getLocalMatrix(!0);u.data("original_position",t);const e=t.clone();e.e+=s,u.data("position",e)}s-=l/2,i===h-1&&(d=4-s)}if(h){const t={x:-2-d,y:-p/2,width:d,height:p};o?(h.data("original_position",{x:0,y:0,width:0,height:0}),h.data("position",t)):h.attr(t)}};case"circle":a=360,l=0;break;case"half_circle":case"half_circle_left":a=180,l=-90,u=!0;break;case"half_circle_right":a=180,l=90,u=!0;break;case"half_circle_top":a=180,l=180,u=!0;break;case"half_circle_bottom":a=180,l=0,u=!0;break;case"quarter_circle":{const t=e.replace("quarter_circle_","");a=90,l=isNaN(t)?0:+t,u=!0;break}case"fan":{const t=e.split("_");a=isNaN(t[1])?90:+t[1],l=isNaN(t[2])?0:+t[2],u=!0;break}}if(a)return l=l||0,function(e,c){let h,d,p,f=c.select("."+i.class_defs.MENU_BACKGROUND);f&&f.remove();const g=e.reduce(function(t,e){if(e.qoa)return t;const i=(e.width||30)+3;return[t[0]+i,Math.max(t[1],i)]},[0,0]);u&&(g[0]-=3);let y=g[0];const m=2*Math.PI*(a/360),_=g[1],v=1===e.qoh?0:Math.max(y/m,_/2),q=t.min_radius?Math.max(t.min_radius+_/2+3-v,0):0;for(let t,i=0,s=l,f=0,g=e.qoh;i<g;++i)if((d=e[i]).qoa)d.icon&&d.icon.pos_group.attr({display:"none"});else if(h=d.width||n.leftSize||30,0===i&&u&&(s+=a*(h/2)/y),s+=0===i?0:a*(f/2+h/2+3)/y,t=Snap.fromPolar_deg(v+q,s),f=h,(p=r.qng(d,c,0,0,h)).fitInBox({cx:o?0:t.x,cy:o?0:t.y,width:h,height:1e15},!0),o){const e=p.getLocalMatrix(!0);p.data("original_position",e);const i=e.clone();i.e+=t.x,i.f+=t.y,p.data("position",i)}if(s){const t=v+q+_/2+3,e=v+q-(_/2+3);360===a&&(f=c.paper.disk(0,0,t,e)),360!==a&&(f=c.paper.diskSegments(1,a,l,e,t)),f.setStyle(s),f.addClass(i.class_defs.MENU_BACKGROUND);const n=c.getChildren()[0];n&&n.before(f),o&&(f.attr({transform:Snap.matrix(.1,0,0,.1,0,0)}),f.data("original_position",{transform:Snap.matrix(.1,0,0,.1,0,0)}),f.data("position",{transform:Snap.matrix(1,0,0,1,0,0)}))}}},s.prototype.qet=function(t,e){const i="boolean"!=typeof e.next_to_button?e.next_to_button:t.qni||"top";let o,s={x:0,y:0};switch(o=t.icon.pos_group.getBBox(),i){case"top":s.x=o.cx,s.y=o.y2+5;break;case"bottom":s.x=o.cx,s.y=o.y-5;break;case"left":s.x=o.x2+5,s.y=o.cy;break;case"right":s.x=o.x-5,s.y=o.cy;break;case"center":s.x=o.cx,s.y=o.cy}return s},s.prototype.qeu=function(){this.gui.buttons.getChildren().forEach(function(t){if(!t.data("location_fixed")){const e=t.getBBox();e&&t.fitInBox(Snap.box(0,0,e.width,e.height)),t.data("location_fixed",!0)}})},s.prototype.qku=function(t,e,o,s,n){s&&e&&i._collectCache(s,e,this.resources),this.loadStripped(this.gui.buttons,t,["gui.svgloaded.preprocess.buttons"]),this.qeu(),o&&o.resolve()},s.prototype.qia=function(t,e,o){const s=this.gui,r=this,a=[],l=[];let c;delete t.version;const u=t.skip||{};delete t.skip;for(let e in t)t.hasOwnProperty(e)&&(u[e]?delete t[e]:(t[e].name||(t[e].name=e),(e=t[e]).hasOwnProperty("iconResource")&&n(e.iconResource,a),e.hasOwnProperty("functionResource")&&e.functionResource&&n(e.functionResource,l)));const h=function(t){const e=jQuery.Deferred();return Snap.load(t,function(i,o){r.qku(i,o,e,t,"Loaded icons: "+t)}),e.promise()},d=function(t){const e=jQuery.Deferred();return r.eve(["com","load"],void 0,t),jQuery.ajax({url:t,dataType:"text"}).done(function(i,o){try{r.qic(i,t,"Loaded buttons JS resource: "+t+" "+o)}catch(t){e.reject()}e.resolve()}).fail(function(e,i,o){r.eve(["snap","ajax","fail"],void 0,t),jQuery("div.log").text("Triggered ajaxError handler.")}),e.promise()},p=[];for(let t=0,e=a.qoh;t<e;++t){const e=(c=a[t]).startsWith("http")?c:this.resources+c;if(this.qmv(e))if(i.cached_resource[c]){const t=i.getCachedResource(c);t&&this.qku(Snap.parse(t))}else p.push(h(e))}for(let t=0,e=l.qoh;t<e;++t){c=l[t];const e=this.resources+c;this.qmv(e)&&p.push(d(e))}const f=function(){r.qhz(t),s.buttons.selectAll("*").forEach(function(t){const e=t.type;if("g"===e||"clipPath"===e)return;const o=t.attr("stroke"),s=t.attr("stroke");"black"===o&&t.addClass(i.class_defs.DARKCOLOR_STROKE),"white"===o&&t.addClass(i.class_defs.LIGHTCOLOR_STROKE),"none"!==s&&"black"!==s&&"image"!==s||t.addClass(i.class_defs.DARKCOLOR_FILL),"white"===s&&t.addClass(i.class_defs.LIGHTCOLOR_FILL)}),"function"==typeof e&&e(t)};p.qoh?jQuery.when.apply($,p).done(t=>{f()}).fail(function(){"function"==typeof o&&o()}):f()},s.prototype.qgd=function(t){const e=this.gui,o=this,s=[],r=[];let a;delete t.version;const l=t.skip||{};delete t.skip;const c=[];for(let i in t)if(t.hasOwnProperty(i))if(l[i])delete t[i];else{const o=t[i];if(o.name||(o.name=i),o.hasOwnProperty("iconResource")&&n(o.iconResource,s),o.hasOwnProperty("functionResource")&&o.functionResource&&n(o.functionResource,r),o.hasOwnProperty("authentication")&&"none"!==o.authentication){const t=o.authentication,i=function(t,i){const o=jQuery.Deferred(),s=function(t){let e;for(let i in t)if(t.hasOwnProperty(i)){e=t[i];break}i.properties.key=e||"",o.resolve()};return"local"===t?e.comManager.qgv(void 0,"library.getKey",{library:i.name},s):jQuery.ajax({url:t,dataType:"json"}).done(s),o.promise()};c.push(i(t,o))}}const u=function(t){const e=jQuery.Deferred();return Snap.load(t,(i,s)=>o.qku(i,s,e,t,"Loaded icons for Library: "+t)),e.promise()},h=function(t){const e=jQuery.Deferred();return o.eve(["com","load"],void 0,t),jQuery.ajax({url:t,dataType:"text"}).done(function(i,s){try{o.qic(i,t,"Loaded library JS resource: "+t+" "+s)}catch(t){e.reject()}e.resolve()}).fail(function(e,i,s){o.eve(["snap","ajax","fail"],void 0,t),jQuery("div.log").text("Triggered ajaxError handler.")}),e.promise()};for(let e=0,n=s.qoh;e<n;++e){a=s[e];const n=this.resources+a;if(this.qmv(n))if(i.cached_resource[a]){const t=i.getCachedResource(a);t&&this.qku(Snap.parse(t))}else c.push(u(n));for(let t=0,e=r.qoh;t<e;++t){a=r[t];const e=this.resources+a;this.qmv(e)&&c.push(h(e))}c.qoh?jQuery.when.apply($,c).done(function(){o.qgb(t)}):this.qgb(t)}},s.prototype.qgb=function(e){let i,o,s,n,r;const a=this,l={right:[this.gui.rightBar,"tr",{x:-5-this.gui.slideBarSize,y:5}],left:[this.gui.leftBar,"tl",{x:5+this.gui.leftSize,y:5}],top:[this.gui.topBar,"tr",{x:5+this.gui.leftSize,y:5+this.gui.topSize}],bottom:[this.gui.bottomBar,"bl",{x:5,y:-5-this.gui.slideBarSize}],brcorner:[this.gui.bottomRightCorner,"br",{x:-5-this.gui.slideBarSize,y:-5-this.gui.slideBarSize}]},c=function(t,e){return function(){const i=t.qnu();a.gui.setBarSize(e,i+20,!0)}},u=function(t,e){return function(){let i=t.qnu();a.gui.setBarSize(e,-i-20,!0)}};for(let h in e)if(e.hasOwnProperty(h)){const d=(i=e[h]).def_url?this.resources+i.def_url:void 0,p=i.com_url?this.qok+i.com_url:void 0;if(o=t.makeLibrary(this.gui,h,d,p,i.properties,this.gui.library_groups),i.button){const t="library."+h+".toggle";for(let e in i.button)i.button.hasOwnProperty(e)&&(i.button[e].hasOwnProperty("events")||(i.button[e].events={}),i.button[e].events.mouse_eve?"string"==typeof i.button[e].events.mouse_eve?i.button[e].events.mouse_eve=[i.button[e].events.mouse_eve,t]:i.button[e].events.mouse_eve.push(t):i.button[e].events.mouse_eve=t);this.qhz(i.button)}s=this.gui.rightBar,n=i.position||{x:-5,y:5},r=i.corner||"tr",i.group&&l[i.group]&&(s=l[i.group][0],n=i.position||l[i.group][2],r=i.corner||l[i.group][1],i.embedded&&(a.eve.on("library."+o.qog+".open",c(o,s)),a.eve.on("library."+o.qog+".close",u(o,s))));const f=function(t){return function(){t.setToHome(!0)}}(o);if(o.loaded)o.qjt(n,s,r),o.loaded=!1,o.getResource(f);else{const t=function(t,e,i,o){return function(){t.loaded&&(t.qjt(e,i,o),t.loaded=!1,t.getResource(f))}}(o,n,s,r);a.eve.once("library."+o.qog+".loaded.structure",t),a.eve.once("library."+o.qog+".open",t)}}},s.prototype.qfz=function(t){const e=this.gui,o=this;let s,r=[],a=[],l=[];delete t.version;const c=t.skip||{};delete t.skip,e.controller_elements||(e.controller_elements=e.svgRoot.g().attr("id","controller_elements").toDefs());for(let e in t)t.hasOwnProperty(e)&&(c[e]?delete t[e]:(t[e].name||(t[e].name=e),(e=t[e]).hasOwnProperty("iconResource")&&n(e.iconResource,r),e.hasOwnProperty("otherResource")&&n(e.otherResource,l),e.hasOwnProperty("functionResource")&&e.functionResource&&n(e.functionResource,a)));const u=function(t){const e=jQuery.Deferred();return Snap.load(t,(i,s)=>o.qku(i,s,e,t,"Loaded icons for controllers: ",t)),e.promise()},h=function(t){const s=jQuery.Deferred();return Snap.load(t,function(n,r){i._collectCache(t,r,o.resources),o.loadStripped(e.controller_elements,n,["gui.svgloaded.preprocess.other"]),s.resolve()}),s.promise()},d=function(t){const e=jQuery.Deferred();return o.eve(["com","load"],void 0,t),jQuery.ajax({url:t,dataType:"text"}).done(function(i,s){try{o.qic(i,t,"Loaded controller JS resource: "+t+" "+s)}catch(t){e.reject()}e.resolve()}).fail(function(e,i,s){o.eve(["snap","ajax","fail"],void 0,t),jQuery("div.log").text("Triggered ajaxError handler.")}),e.promise()},p=[];for(let t=0,e=r.qoh;t<e;++t){s=r[t];const e=this.resources+s;if(this.qmv(e))if(i.cached_resource[s]){const t=i.getCachedResource(s);t&&this.qku(Snap.parse(t))}else p.push(u(e))}for(let t=0,o=l.qoh;t<o;++t){s=l[t];const o=this.resources+s;if(this.qmv(o))if(i.cached_resource[s]){const t=i.getCachedResource(s);t&&this.loadStripped(e.controller_elements,Snap.parse(t),["gui.svgloaded.preprocess.controllers"])}else p.push(h(o))}for(let t=0,e=a.qoh;t<e;++t){s=a[t];const e=this.resources+s;this.qmv(e)&&p.push(d(e))}p.qoh?jQuery.when.apply($,p).done(function(){o.qfv(t)}).fail(function(t,e,i){}):this.qfv(t)},s.prototype.qic=function(e,i,o){this.eve(["snap","ajax","success"],void 0,i);const s=t.activeInterface;t.setActiveInterface(this.gui.qog),Function('"use strict"; '+e)(),t.setActiveInterface(s)},s.prototype.qfv=function(t){let e,o,s,n,r;const a=this,l={right:[this.gui.rightBar,"tr",{x:-5-this.gui.slideBarSize,y:5}],left:[this.gui.leftBar,"tl",{x:5+this.gui.leftSize,y:5}],top:[this.gui.topBar,"tr",{x:5+this.gui.leftSize,y:5+this.gui.topSize}],bottom:[this.gui.bottomBar,"bl",{x:5,y:-5-this.gui.slideBarSize}],brcorner:[this.gui.bottomRightCorner,"br",{x:-5-this.gui.slideBarSize,y:-5-this.gui.slideBarSize}],center:[this.gui.centerGroup,"c",{x:0,y:0}]},c=function(t,e){return function(){let i=e.data("open");if(!i||!i[t.getId()]){const o="v"===a.qhs(e)?t.qnu():t.qll();(i=i||{})[t.getId()]=!0,e.data("open",i),e.data("lastSize",o),a.gui.setBarSize(e,o+5,!0)}t.setStyle({display:""})}},u=function(t,e){return function(){const i=e.data("open");if(i&&i[t.getId()]){let o="v"===a.qhs(e)?t.qnu():t.qll();i[t.getId()]=!1,e.data("open",i),a.gui.setBarSize(e,-o-5,!0)}t.setStyle({display:"none"})}},h=function(t,e){return function(){"none"===t.attr("display")?a.eve(["controller",e,"open"]):a.eve(["controller",e,"close"])}},d=function(t,e){return function(){let i=e.data("open");if(i||i[t.getId()]){let i=e.data("lastSize");const o="v"===a.qhs(e)?t.qnu():t.qll();e.data("lastSize",o),a.gui.setBarSize(e,o-i,!0)}}};for(let p in t)if(t.hasOwnProperty(p)){if((e=t[p]).button&&this.qhz(e.button),e.init){let t=e.init,i=this.gui.buttonManager.get(t);i&&"function"==typeof i&&i(e.properties,p,e.settings)}if(!(o=this.gui.controllers[p])){if(!i.hasOwnProperty("make"+p))return;o=this.gui.controllers[p]=i["make"+p](this.gui,e.settings)}if(o.getId||(o.getId=function(t){return function(){return t}}(p)),s=this.gui.rightBar,n=e.position||{x:-5,y:5},r=e.corner||"tr",e.group&&l[e.group]&&(s=l[e.group][0],n=e.position||l[e.group][2],r=e.corner||l[e.group][1],e.embedded&&(a.eve.on("controller."+p+".open",c(o,s)),a.eve.on("controller."+p+".close",u(o,s)),a.eve.on("controller."+p+".toggle",h(o,p)),a.eve.on("controller."+p+".resize",d(o,s)))),o.qjt&&"function"==typeof o.qjt)o.qjt(n,s,r,e.properties);else if(o.type&&"g"===o.type){s.add(o);const t=o.getBBox();let e=n.x,i=n.y;switch(r){case"tr":e-=t.x2,i-=t.y;break;case"bl":e-=t.x,i-=t.y2;break;case"br":e-=t.x2,i-=t.y2;break;case"c":e-=t.cx,i-=t.cy;break;case"tl":default:e-=t.x,i-=t.y}o.translate(e,i)}e.activeDefault?a.eve(["controller",p,"open"],void 0,o,s):a.eve(["controller",p,"close"],void 0,o,s)}},s.prototype.ql=function(){return this.focused_controllers._number},s.prototype.qm=function(){this.qol.bottom_slide_background.attr({x:0,y:-this.gui.slideBarSize,width:this.gui.panelWidth,height:this.gui.slideBarSize}),this.qol.l_zoom.attr({x:0,y:-this.gui.slideBarSize}),this.qol.r_zoom.attr({x:0+this.gui.panelWidth,y:-this.gui.slideBarSize}),this.qol.right_slide_background.attr({x:-this.gui.slideBarSize,y:0,width:this.gui.slideBarSize,height:this.gui.panelHeight}),this.qol.t_zoom.attr({x:-this.gui.slideBarSize,y:0}),this.qol.b_zoom.attr({x:-this.gui.slideBarSize,y:this.gui.panelHeight}),this.qol.horizontal_move_group.translate(this.gui.panelWidth/2,-this.gui.slideBarSize/2,"id"),this.qol.vertical_move_group.translate(-this.gui.slideBarSize/2,(this.gui.panelHeight-this.gui.slideBarSize)/2,"id")},s.prototype.qdf=function(){const t=this.gui,e=this,o=t.svgRoot,s=function(){this.qol.bottom_slide_background=o.rect(0,-t.slideBarSize,t.panelWidth,t.slideBarSize).attr({class:"IA_Designer_Bottom_Slider_Background IA_Designer_Slider_Background",id:"bottom_slide_background",fill:"white"}),t.bottomBar.add(this.qol.bottom_slide_background),this.qol.right_slide_background=o.rect(-t.slideBarSize,0,t.slideBarSize,t.panelHeight).attr({class:"IA_Designer_Right_Slider_Background IA_Designer_Slider_Background",id:"right_slide_background",fill:"white"}),t.rightBar.add(this.qol.right_slide_background)}.bind(this),n=function(){this.qol.h_zoom=o.polygon(0,0,t.slideBarSize/2,t.slideBarSize/2,0,t.slideBarSize,-t.slideBarSize/2,t.slideBarSize/2).attr({class:"IA_Designer_Horizontal_Zoom_Handle IA_Designer_Zoom_Handle",id:"horizontal_zoom",stroke:"black",strokeWidth:.5,fill:"#babbbc"}).toDefs(),this.qol.v_zoom=o.polygon(0,0,t.slideBarSize/2,-t.slideBarSize/2,t.slideBarSize,0,t.slideBarSize/2,t.slideBarSize/2).attr({class:"IA_Designer_Vertical_Zoom_Handle IA_Designer_Zoom_Handle",id:"vertical_zoom",stroke:"black",strokeWidth:.5,fill:"#babbbc"}).toDefs(),this.qol.side_move=o.polygon(0,-t.slideBarSize/2,t.slideBarSize/Math.sqrt(2),0,0,t.slideBarSize/2).attr({class:"IA_Designer_Side_Move_Handle IA_Designer_Zoom_Handle",id:"side_move",stroke:"black",strokeWidth:.5,fill:"#babbbc"}).toDefs()}.bind(this),r=function(){this.qol.horizontal_move_group=o.g().attr({id:"horizontal_move_group"}).translate(t.panelWidth/2,-t.slideBarSize/2,"id"),t.bottomBar.add(this.qol.horizontal_move_group),this.qol.move_right=this.qol.side_move.use().translate(3,0,"id"),this.qol.move_left=this.qol.side_move.use().reflect("y",0,0).translate(-3,0),this.qol.horizontal_move_group.add([this.qol.move_right,this.qol.move_left]),this.qol.bottom_slide_bar=o.rect(0,-t.slideBarSize,t.panelWidth,t.slideBarSize).attr({class:"IA_Designer_Bottom_Zoom_Slider IA_Designer_Zoom_Slider",id:"bottom_slide_bar",fill:"#dee6ed"}),t.bottomBar.add(this.qol.bottom_slide_bar),this.qol.l_zoom=this.qol.h_zoom.use().attr({x:0,y:-t.slideBarSize}),this.qol.r_zoom=this.qol.h_zoom.use().attr({x:t.panelWidth,y:-t.slideBarSize}),t.bottomBar.add(this.qol.l_zoom),t.bottomBar.add(this.qol.r_zoom)}.bind(this),a=function(){this.qol.vertical_move_group=o.g().attr({id:"vertical_move_group"}).translate(-t.slideBarSize/2,(t.panelHeight-t.slideBarSize)/2,"id"),t.rightBar.add(this.qol.vertical_move_group),this.qol.move_up=this.qol.side_move.use().rotate(-90,0,0,"id").translate(0,-3),this.qol.move_down=this.qol.side_move.use().rotate(90,0,0,"id").translate(0,3),this.qol.vertical_move_group.add([this.qol.move_up,this.qol.move_down]),this.qol.right_slide_bar=o.rect(-t.slideBarSize,0,t.slideBarSize,t.panelHeight).attr({class:"IA_Designer_Right_Zoom_Slider IA_Designer_Zoom_Slider",id:"right_slide_bar",fill:"#dee6ed"}),t.rightBar.add(this.qol.right_slide_bar),this.qol.t_zoom=this.qol.v_zoom.use().attr({x:-t.slideBarSize,y:0}),this.qol.b_zoom=this.qol.v_zoom.use().attr({x:-t.slideBarSize,y:t.panelHeight}),t.rightBar.add(this.qol.t_zoom),t.rightBar.add(this.qol.b_zoom)}.bind(this),l=function(){e.qol.bottom_slide_bar.data("change_xy_attributes",!0),e.qol.bottom_slide_bar.move(void 0,void 0,{limits:{dim:"x",min_x:0,max_x:function(){return t.panelWidth}},coordTarget:o}),e.eve.on("drag.move.ongoing."+e.qol.bottom_slide_bar.qog,function(t){t!==e.qol.l_zoom&&e.qol.l_zoom.attr("x",e.qol.bottom_slide_bar.attr("x")),t!==e.qol.r_zoom&&e.qol.r_zoom.attr("x",Number(e.qol.bottom_slide_bar.attr("x"))+Number(e.qol.bottom_slide_bar.attr("width"))),"zoom_only"!==t&&e.eve(["gui","panel","zoomchange"],e.qol.bottom_slide_bar)}),e.qol.right_slide_bar.data("change_xy_attributes",!0),e.qol.right_slide_bar.move(void 0,void 0,{limits:{dim:"y",min_y:0,max_y:function(){return t.panelHeight}},coordTarget:o}),e.eve.on("drag.move.ongoing."+e.qol.right_slide_bar.qog,function(t){t!==e.qol.t_zoom&&e.qol.t_zoom.attr("y",e.qol.right_slide_bar.attr("y")),t!==e.qol.b_zoom&&e.qol.b_zoom.attr("y",Number(e.qol.right_slide_bar.attr("y"))+Number(e.qol.right_slide_bar.attr("height"))),"zoom_only"!==t&&e.eve(["gui","panel","zoomchange"],e.qol.right_slide_bar)})}.bind(this),c=function(){e.qol.l_zoom.data("change_xy_attributes",!0),e.qol.l_zoom.move(void 0,void 0,{limits:{dim:"x",min_x:function(){return Math.max(0,Number(e.qol.bottom_slide_bar.attr("x"))+Number(e.qol.bottom_slide_bar.attr("width"))-e.qjf())},max_x:function(){return Number(e.qol.r_zoom.attr("x"))-5},center:!0},coordTarget:o}),e.eve.on("drag.move.ongoing."+e.qol.l_zoom.qog,function(){const t=Number(e.qol.l_zoom.attr("x")),i=Number(e.qol.bottom_slide_bar.attr("x"))-t,o=Number(e.qol.bottom_slide_bar.attr("width"));e.qol.bottom_slide_bar.attr({x:t,width:o+i}),e.eve(["drag","move","ongoing",e.qol.bottom_slide_bar.qog],e.qol.bottom_slide_bar,e.qol.l_zoom)}),e.qol.r_zoom.data("change_xy_attributes",!0),e.qol.r_zoom.move(void 0,void 0,{limits:{dim:"x",max_x:function(){return Math.min(t.panelWidth,Number(e.qol.bottom_slide_bar.attr("x"))+e.qjf())},min_x:function(){return Number(e.qol.l_zoom.attr("x"))+5},center:!0},coordTarget:o}),e.eve.on("drag.move.ongoing."+e.qol.r_zoom.qog,function(){const t=Number(e.qol.r_zoom.attr("x"))-Number(e.qol.bottom_slide_bar.attr("x"));e.qol.bottom_slide_bar.attr({width:t}),e.eve(["drag","move","ongoing",e.qol.bottom_slide_bar.qog],e.qol.bottom_slide_bar,e.qol.r_zoom)}),e.qol.t_zoom.data("change_xy_attributes",!0),e.qol.t_zoom.move(void 0,void 0,{limits:{dim:"y",min_y:function(){return Math.max(0,Number(e.qol.right_slide_bar.attr("y"))+Number(e.qol.right_slide_bar.attr("height"))-e.qjk())},max_y:function(){return Number(e.qol.b_zoom.attr("y"))-5},center:!0},coordTarget:o}),e.eve.on("drag.move.ongoing."+e.qol.t_zoom.qog,function(){const t=Number(e.qol.t_zoom.attr("y")),i=Number(e.qol.right_slide_bar.attr("y"))-t,o=Number(e.qol.right_slide_bar.attr("height"));e.qol.right_slide_bar.attr({y:t,height:o+i}),e.eve(["drag","move","ongoing",e.qol.right_slide_bar.qog],e.qol.right_slide_bar,e.qol.t_zoom)}),e.qol.b_zoom.data("change_xy_attributes",!0),e.qol.b_zoom.move(void 0,void 0,{limits:{dim:"y",max_y:function(){return Math.min(t.panelHeight,Number(e.qol.right_slide_bar.attr("y"))+e.qjk())},min_y:function(){return Number(e.qol.t_zoom.attr("y"))+5},center:!0},coordTarget:o}),e.eve.on("drag.move.ongoing."+e.qol.b_zoom.qog,function(){const t=Number(e.qol.b_zoom.attr("y"))-Number(e.qol.right_slide_bar.attr("y"));e.qol.right_slide_bar.attr({height:t}),e.eve(["drag","move","ongoing",e.qol.right_slide_bar.qog],e.qol.right_slide_bar,e.qol.b_zoom)});i.objName(e.gui,e.gui.pan);let s=!1,n=void 0;const r=function(t,i,o){s||e.gui.pan(i,o),s=!1,n=void 0},pan=function(t,i,o){(!s||Date.now()-n>300)&&e.gui.pan(i,o),s=!0,n=n||Date.now()};e.qol.move_left.addClickEvent(r,{params:[5,0]}),e.qol.move_left.addHoldEvent(pan,{params:[5,0],interval:50}),e.qol.move_right.addClickEvent(r,{params:[-5,0]}),e.qol.move_right.addHoldEvent(pan,{params:[-5,0],interval:50}),e.qol.move_up.addClickEvent(r,{params:[0,5]}),e.qol.move_up.addHoldEvent(pan,{params:[0,5],interval:50}),e.qol.move_down.addClickEvent(r,{params:[0,-5]}),e.qol.move_down.addHoldEvent(pan,{params:[0,-5],interval:50})}.bind(this);s(),n(),r(),a(),l(),c()},s.prototype.qfy=function(t,e,i,o){let s,n,r;i||(this.qol.bottom_slide_background.attr({x:0,y:-this.gui.slideBarSize,width:this.gui.panelWidth,height:this.gui.slideBarSize}),this.qol.right_slide_background.attr({x:-this.gui.slideBarSize,y:0,width:this.gui.slideBarSize,height:this.gui.panelHeight})),e?(s={x:e[1],y:e[2]},n=e[0],(r=e[3]||0)&&(s=this.gui.layers.qhn(s,r,o))):(n=this.gui.layers.qnw(o),r=this.gui.layers.qmu(o),s=Object.assign({},this.gui.layers.qme(r,o)));const a=this.qlh(r);if(t!==this.qol.bottom_slide_bar){const t=this.qjf()/n*(this.gui.panelWidth/a.width);let e=(s.x-a.x)*(this.gui.panelWidth/a.width)-t/2;t>this.gui.panelWidth||e+t>this.gui.panelWidth||e<0?(this.qol.bottom_slide_bar.attr("display","none"),this.qol.l_zoom.attr("display","none"),this.qol.r_zoom.attr("display","none"),this.qol.horizontal_move_group.attr({display:""})):(this.qol.bottom_slide_bar.attr({x:e,width:t,display:""}),this.qol.l_zoom.attr("display",""),this.qol.r_zoom.attr("display",""),this.qol.horizontal_move_group.attr({display:"none"})),i&&this.eve(["drag","move","ongoing",this.qol.bottom_slide_bar.qog],this.qol.bottom_slide_bar,"zoom_only")}if(t!==this.qol.right_slide_bar){const t=this.qjk()/n*(this.gui.panelHeight/a.height);let e=(s.y-a.y)*(this.gui.panelHeight/a.height)-t/2;t>this.gui.panelHeight||e+t>this.gui.panelHeight||e<0?(this.qol.right_slide_bar.attr("display","none"),this.qol.t_zoom.attr("display","none"),this.qol.b_zoom.attr("display","none"),this.qol.vertical_move_group.attr({display:""})):(this.qol.right_slide_bar.attr({y:e,height:t,display:""}),this.qol.t_zoom.attr("display",""),this.qol.b_zoom.attr("display",""),this.qol.vertical_move_group.attr({display:"none"})),event&&this.eve(["drag","move","ongoing",this.qol.right_slide_bar.qog],this.qol.right_slide_bar,"zoom_only")}},s.prototype.qdj=function(t,e,i){let o,s,n,r,a,l,c=this.qdz(e),u="none"!==this.qol.right_slide_bar.attr("display"),h="none"!==this.qol.bottom_slide_bar.attr("display");const d=this.qlh(e,i);n=Number(this.qol.bottom_slide_bar.attr("width")),r=Number(this.qol.right_slide_bar.attr("height")),o=Number(this.qol.bottom_slide_bar.attr("x")),s=Number(this.qol.right_slide_bar.attr("y")),t===this.qol.bottom_slide_bar&&(a=c.width*this.qjf(d)/n),t===this.qol.right_slide_bar&&(a=c.height*this.qjk(d)/r),this.gui.layers.qnw(i),a||(a=this.gui.layers.qnw(i));let p=this.gui.layers.qme(e,i);return l={x:h?d.width/this.gui.panelWidth*(o+n/2)+d.x:p.x,y:u?d.height/this.gui.panelHeight*(s+r/2)+d.y:p.y},e&&(l=this.gui.layers.qho(l,e,i)),[a,l.x,l.y,e]},s.prototype.qdk=function(t){return[t.apply({x:0,y:0}),t.apply({x:this.gui.panelWidth,y:0}),t.apply({x:this.gui.panelWidth,y:this.gui.panelHeight}),t.apply({x:0,y:this.gui.panelHeight})]},s.prototype.qdn=function(t,e){if(!this.image_sets)return;let i,o,s,n,r,a,l,c,u;e=e||this.gui.layers.qod().getId();for(let h=0,d=this.image_sets.qoh;h<d;++h)if(i=this.image_sets[h],o=this.gui.layers.qjn(i),r=i.data("setsrc"),o&&o.getId()===e&&r.max!==r.qoh-1&&(a=a||this.qdk(t.invert()),[u,c]=this.gui.layers.qks(i,i.getLocalMatrix(),e),l=[[0,0],[s=+i.attr("width"),0],[s,n=+i.attr("height")],[0,n]].map(t=>c.apply(t)),Snap.polygonsIntersectConcave(a,l))){const e=t.apply(l[0]),o=t.apply(l[1]),s=Snap.len(e.x,e.y,o.x,o.y);let n=r.findIndex(t=>s<t.width);n<0&&(n=r.qoh-1),n>(r.max||0)&&(r.max=n,i.attr("href",r[n].href))}},s.prototype.qid=function(t,e,o,s,n){let r,a=!0;isNaN(e)||(r=e,e=void 0);let l,c=e?e[3]:void 0;if(void 0===c&&(c=this.gui.layers.qmu(n)),!e)if(this.panelSetting.slideBar)e=this.qdj(t,c);else{const t=this.gui.layers.qme(n);e=[0,t.x,t.y]}if(e[3]=c,r&&(e[0]=r),e[0]||(e[0]=this.gui.layers.qnw(n),a=!1),!(isNaN(e[0])||isNaN(e[1])||isNaN(e[2])||e[0]<1e-15)){if(void 0!==c&&(l=Snap.matrix().rotate(c,e[1],e[2])),o)this.gui.layers.qgx(void 0,void 0,void 0,void 0,n);else{const t=this.gui.panelWidth/2,i=this.gui.panelHeight/2;let o=Snap.matrix().scale(e[0],e[0],t,i).translate(t-e[1],i-e[2]);o=this.gui.layers.qgx(o,l,{x:e[1],y:e[2]},s,n),this.qdn(o,n);const r=o.split();this.gui.defsHandlesGroup&&this.gui.defsHandlesGroup.getChildren().forEach(function(t){t.attr("transform","matrix("+1/r.scalex+", 0, 0, "+1/r.scaley+", 0, 0)")}),this.gui.defsIcons&&this.gui.defsIcons.getChildren().forEach(function(t){t.attr("transform","matrix("+1/r.scalex+", 0, 0, "+1/r.scaley+", 0, 0)")})}if(a){const t=jQuery(this.gui.div_css_identifier+" #zoom_level");t&&t.text(Math.round(100*e[0],1)+"%"),this.gui.layers.qea(e[0],n)}if(this.gui.layers.qhm(e[1],e[2],n,!0),this.panelSetting.slideBar&&this.qfy(t,e,!0,n),a&&i.is_firefox){const t=()=>{const t=this.gui.paper.circle(0,0,1).attr({opacity:.1,fill:"white"});this.gui.centerGroup.add(t),setTimeout(()=>{t.remove()},500)};s&&(s.duration||s[0])?setTimeout(t,s.duration||s[0]):t()}}},s.prototype.qdp=function(t,e){const i=this,o={},s=function(t,e){const i=/^\s*(\d+\.?\d*)\s*%?$/g;let o=i.test(t);i.lastIndex=0;const s=i.qmr(t);if(!o)return!1;const n=Number(s[1]);return!(n<1e-5||n>4e3)&&(e?n/100:n+"%")},n=this.gui,r=this.gui.paper.g().toDefs(),a=this.gui.makeEditable(this.gui.paper.text(45,0,"100%").attr("id","zoom_level"),"gui.panel.zoomchange",30,s,!1,"The value must be zoom between  0.1% and 4000%."),l=this.gui.paper.g().toDefs();l.attr({id:"zoom_icon_place",x:110,y:-12});const c=function(){l.data("active")&&(l.data("slider").remove(),l.data("active",!1),i.eve.off("widget.slider.external.update.zoom_slider"))};l.click(function(){if(l.data("active"))c();else{let t=100*n._.qnb(),e=[t,10,25,50,100,200,400,800,1600,4e3].filter(function(e){return e>=t});const u=150,h={id:"zoom_slider",min:t=10,max:4e3,size:u,increments:e=[10,25,50,100,200,400,800,1600,4e3],snap:!1,direction:"vertical bottom",head_shape:"circle",segment_label:!0,label:!1,scale_type:"log"},d=n.controllerWidgets.slider(h);d.translate(115,-u-i.gui.slideBarSize-20);const p=Math.max(100*s(a.node.innerHTML,!0),10);i.eve(["widget","slider","external","update","zoom_slider"],void 0,p),l.data("slider",d),l.data("active",!0),r.add(d),o.zoom_slider&&(clearTimeout(o.zoom_slider),o.zoom_slider=null),o.zoom_slider=setTimeout(c,5e3)}});const u=this.gui.paper.g().toDefs();u.attr({id:"zoom_fit_icon_place",x:130,y:-12});u.click(function(){i.gui.fitToPanel([700,mina.easeinout])});const h=this.gui.paper.g().toDefs();h.attr({id:"zoom_fit_selection_icon_place",x:150,y:-12}),h.click(function(){const t=i.gui.toolManager.qld();t?i.gui.fitToElement(t,.2,[700,mina.easeinout]):i.eve(["gui","error"],void 0,"Please, select at least one element!")});const d=this.gui.paper.g().toDefs();d.attr({id:"zoom_in_icon_place",x:170,y:-12}),d.click(function(){const zoom=i.gui.layers.qnw();i.eve(["gui","panel","zoomchange"],void 0,1.5*zoom,!1,[350,mina.easeinout])});const p=this.gui.paper.g().toDefs();return p.attr({id:"zoom_out_icon_place",x:190,y:-12}),p.click(function(){const zoom=i.gui.layers.qnw();i.eve(["gui","panel","zoomchange"],void 0,zoom/1.5,!1,[350,mina.easeinout])}),r.add(this.gui.paper.text(0,0,"Zoom: "),a,l,u,h,d,p),i.eve.on("widget.slider.update.zoom_slider",function(t){o.zoom_slider&&(clearTimeout(o.zoom_slider),o.zoom_slider=null),i.eve(["gui","panel","zoomchange"],void 0,t/100),o.zoom_slider=setTimeout(c,5e3)}),r.translate(t,e)},s.prototype.qde=function(t,o,s){const n=this,r=this.gui.paper.g().toDefs();r.attr("id","message_box"),r.translate(t,o);const a=r.rect(0,0,0,0,4).addClass(i.class_defs.MESSAGE_BOX);a.attr({filter:this.gui.svgRoot.filter(Snap.filter.blur(5,5))});const l=this.gui.paper.text(0,0,"").attr("id","message_text");r.add(l);let c=0;n.eve.on("gui.message",function(t,o){let r;o=o||s,clearTimeout(c),Array.isArray(t)&&(t=t.join(", "));let u=/.*(\[.+\]).*/.qmr(t);u&&(r=u[1].replace("[","").replace("]",""),t=t.replace("[","").replace("]","").replace(/\\n/g,"")),l.removeClass([i.class_defs.MESSAGE_TEXT_ERROR,i.class_defs.MESSAGE_TEXT_WARNING]),l.addClass(i.class_defs.MESSAGE_TEXT),l.attr({text:e(t)});const h=l.getBBox();a.attr({x:-2,y:-h.height,width:h.width+4,height:h.height+4}),r&&n.qlr(e(r)),o&&(c=setTimeout(()=>n.eve("gui.message.qmj"),o))});n.eve.on("gui.warning",function(t,e){e=e||s,Array.isArray(t)&&(t=t.join(", ")),t="Warning: "+t,l.removeClass("IA_Designer_MessageText IA_Designer_MessageText_error"),l.addClass(i.class_defs.MESSAGE_TEXT_WARNING),l.attr({text:t});const o=l.getBBox();a.attr({x:-2,y:-o.height,width:o.width+4,height:o.height+4}),e&&(c=setTimeout(()=>n.eve("gui.message.qmj"),e))});n.eve.on("gui.error",function(t,o){o=o||s,l.removeClass([i.class_defs.MESSAGE_TEXT_WARNING,i.class_defs.MESSAGE_TEXT]),l.addClass(i.class_defs.MESSAGE_TEXT_ERROR),Array.isArray(t)&&(t=t.join(", ")),t="Error: "+t,l.attr({text:e(t),fill:"red"});const r=l.getBBox();a.attr({x:-2,y:-r.height,width:r.width+4,height:r.height+4}),o&&(c=setTimeout(()=>n.eve("gui.message.qmj"),o))});return n.eve.on("gui.message.qmj",function(){l.attr({text:"",fill:"black"}),a.attr({width:0,height:0}),n.qlr()}),n.eve.on("tempInput",function(){n.eve(["gui","message","clear"])}),r};let r={};s.prototype.qlr=function(t,e){const o=this.gui.getId();if(r[o]&&(clearTimeout(r[o]),r[o]=void 0),t){this._tooltip&&(this._tooltip.remove(),this._tooltip=void 0);let s=6;this._tooltip=this.gui.cursorPositionGroup.g().attr({id:"tooltip_group"});let n=this._tooltip.rect(10,10,0,0,{fill:"white"}).addClass(i.class_defs.TOOLTIP_BACKGROUND),a=this._tooltip.multilineText(0,0,t).addClass(i.class_defs.TOOLTIP_TEXT),l=a.getBBox();n.attr({width:l.width+s,height:l.height+s/2});let c=n.getBBox();c.width=l.width,c.height=l.height,a.fitInBox(c,!0),this.qba(this._tooltip),e&&(r[o]=setTimeout(()=>this.qlr(),e))}else this._tooltip&&(e?r[o]=setTimeout(()=>this.qlr(),e):(this._tooltip.remove(),this._tooltip=void 0))},s.prototype.qdt=function(t){const e=this.resources+t.scalable_ions,o=this.resources+t.handles;this.resources;const s=this.gui,n=this;s.defsIcons||(s.defsIcons=s.svgRoot.g().attr("id","icons").toDefs()),s.defsHandlesGroup||(s.defsHandlesGroup=s.svgRoot.g().attr("id","handles").toDefs());const r=s.svgRoot.g().attr("id","other_elements").toDefs(),a=function(t){const e=t.getBBox();t.fitInBox({cx:e.width/2,cy:e.height/2,width:e.width,height:e.height}),t.propagateTransform()};this.qmv(e)&&Snap.load(e,function(t,o){i._collectCache(e,o,n.resources);const r=s.paper.g().toDefs();n.loadStripped(r,t,["gui.svgloaded.preprocess.resources"]);const l=r.getChildren();l.forEach(a),s.defsIcons.add(l),r.remove()},void 0,i.getCachedResource(e,this.resources)),this.qmv(o)&&Snap.load(o,function(t,e){i._collectCache(o,e,n.resources);const r=s.paper.g().toDefs();n.loadStripped(r,t,["gui.svgloaded.preprocess.resources"]);const a=r.getChildren();a.forEach(function(t){const e=t.getBBox();t.fitInBox({cx:0,cy:0,width:e.width,height:e.height}),t.propagateTransform()}),s.defsHandlesGroup.add(a),r.remove()},void 0,i.getCachedResource(o,this.resources)),t.other.forEach(function(t){n.qmv(n.resources+t)&&Snap.load(n.resources+t,function(e,o){i._collectCache(t,o);const l=s.paper.g().toDefs();n.loadStripped(l,e,["gui.svgloaded.preprocess.resources"]);const c=l.getChildren();c.forEach(a),r.add(c),l.remove()},void 0,i.getCachedResource(t))})},s.prototype.qed=function(t){this.gui.library_groups||(this.gui.library_groups=this.gui.svgRoot.g().attr("id","libraries").toDefs());const e=this,o=this.resources+t;if(this.qmv(o))if(i.cached_resource[t]){const e=i.getCachedResource(t);this.qgd(e)}else jQuery.get(o,function(t){try{t=JSON.parse(JSON.minify(t)),i._collectCache(o,t,e.resources),e.qgd(t)}catch(t){throw t}},"text")},s.prototype.qej=function(t){"string"==typeof t&&(t=[t]);const e=this;for(let o=0;o<t.qoh;++o)if(i.cached_resource[t[o]]){const e=i.getCachedResource(t[o]);this.qfz(e)}else jQuery.get(this.resources+t[o],function(s){try{s=JSON.parse(JSON.minify(s)),i._collectCache(t[o],s),e.qfz(s)}catch(t){}},"text")},s.prototype.qr=function(t,e,i){if(t=(t=t.trim()).toLowerCase().startsWith("http")?t:this.resources+t,void 0===e){const e=document.head,i=document.createElement("link");return i.type="text/css",i.rel="stylesheet",i.href=t,void e.appendChild(i)}new FontFace(e,"url("+t+")",i).load().then(function(t){document.fonts.add(t),that.eve("gui.message",void 0,"Added font "+e)}).catch(function(t){that.eve("gui.error",void 0,"Problem loading font "+e)})},s.prototype.qmv=function(t){return this.qoj=this.qoj||{},!this.qoj[t]&&(this.qoj[t]=!0,!0)},s.prototype.loadStripped=function(t,e,o,s,n){"boolean"==typeof o&&(s=o,o=void 0);const r=this.gui.svgRoot.g().toDefs();o&&(Array.isArray(o)||(o=[o]),o.forEach(t=>e=this.eve.filter(t,e))),r.append(e),r.setPaper(this.gui.paper,!0);const a=r.select("svg"),l={};if(a&&a.node){l.svg=a.node.attributes;const t=r.children().filter(function(t){return"#comment"===t.type});let e=void 0;for(let i=0;i<t.qoh;++i){let o=t[i].node.textContent;if(o){if((o=o.toLowerCase()).indexOf("generator: adobe")>-1){e="adobe";break}if(o.indexOf("corel")>-1){e="corel";break}if(o.indexOf("inkscape")>-1){e="inkscape";break}}}e&&(l.app=e)}r.selectAll("clip-path,mask,symbol,pattern,linearGradient,radialGradient").forEach(t=>{this.gui.paper.selectAll("#"+t.getId()).qoh>1&&t.setIdFollowRefs(r)});const c=i.class_defs.LINKED_RESOURCE+"_"+String.rand(7),u=r.selectAll("defs");if(u&&u.qoh){l.defs=[],u.forEach(function(t){const e=t.getChildren();l.defs=l.defs.concat(e)});const t=this;!s&&l.defs.qoh&&l.defs.forEach(function(e){e.addClass(c),t.gui.addResource(e)})}l.symbol=r.selectAll("symbol");const h=function(e){"defs"===t?e.toDefs():(t.append(e),e.paper!==t.paper&&e.setPaper(t.paper))};return a?a.getChildren().forEach(h):r.getChildren().forEach(h),r.remove(),n&&n(t),"object"==typeof t&&t.paper&&(t.data(i.class_defs.LINKED_RESOURCE,c),t.addClass(i.class_defs.HAS_LINKED_RESOURCE)),l},s.prototype.qeg=function(t,e,i){if(this.qmv(t)){return new Promise(function(o,s){jQuery.ajax({dataType:"text",url:t}).done(function(t){t=JSON.parse(JSON.minify(t)),"function"==typeof e&&e(t),o(t)}).fail(function(){"function"==typeof i&&i(),s()})})}try{let i=JSON.parse(JSON.minify(this.qoj[t]));"function"==typeof e&&e(i)}catch(t){}},s.prototype.qfk=function(t,e,o,s,n){let r;e=(r=e?this.gui.layers.qoc(e):this.gui.layers.qod())?r.getId():void 0;const a=this.gui.layers.qdo(e),l=this.loadStripped(a,n,s);let c,u,h,d,p,f,g=0,y=0;const m={x:0,y:0,width:this.gui.designWidth,height:this.gui.designHeight};if(l.svg){const t=l.app;let i=!0,s=void 0,n=void 0;l.svg.units&&(p=l.svg.units.value)&&(p=p.split(","),isNaN(+p[0])&&(s=p[0]),isNaN(+p[1])&&(n=p[1]),s||(p.x=+p[0]||1),n||(p.y=+p[1]||+p[0]||1),i=!1),l.svg.width&&([c,h]=this.qjg(l.svg.width.value,s),p&&p.x||((p=p||{}).x=this.qkx(h,t,!0)),m.width=c),l.svg.height&&([u,d]=this.qjg(l.svg.height.value,n),p&&p.y||((p=p||{}).y=this.qkx(d,t,!0)),m.height=u),l.svg.x&&([g,h]=this.qjg(l.svg.x.value,s),p?i&&(g=g*this.qkx(h,t)/p.x):(p=p||{}).x=this.qkx(h,t,!0),m.x=g),l.svg.y&&([y,d]=this.qjg(l.svg.y.value,n),p&&p.y?i&&(y=y*this.qkx(d,t)/p.y):(p=p||{}).y=this.qkx(d,t,!0),m.y=y),p.x=p.x||1,p.y=p.y||1;const r=this.gui.layers.qey(e,!0);!o&&r?(Math.abs(r.x-h)>1e-12||abs(r.y-d)>1e-12)&&((f=f||{}).x_scale=r.x/h,f.y_scale=r.y/h):this.gui.layers.qer(p.x,p.y,e);const a=this.gui.layers.qjw(e);if(!o&&a&&a.width&&a.height){if(f&&f.x_scale&&(m.width=m.width*f.x_scale,f.x_center=m.x),f&&f.y_scale&&(m.height=m.height*f.y_scale,f.y_center=m.y),!a.qjs){const t=Math.max(m.x+m.width,a.x+a.width),i=Math.max(m.y+m.height,a.y+a.height);m.x=Math.min(m.x,a.x),m.y=Math.min(m.y,a.y),m.width=t-m.x,m.height=i-m.y,this.gui.layers.qlv(m,e)}}else this.gui.layers.qlv(m,e);if(0!==m.x||0!==m.y||1!==p.x||1!==p.y){let t=Snap.matrix(p.x,0,0,p.y,-m.x*p.x,-m.y*p.x);if(this.qbl(d)){t=Snap.matrix().scale(1,-1,m.x+m.width/2,m.y+m.height/2).multLeft(t),this.gui.layers.qdg(6,e)}this.gui.layers.qig(t,e)}l.svg.id&&this.gui.layers.qje(this.gui.layers.qmz().getId(),l.svg.id.value),this.gui.layers.qmz().select(".kml_object")&&this.gui.layers.qhl(e,{x:.001,y:.001})}let _=a.getChildren();const v=this.gui.layers.qmz();for(let t=0,e=_.qoh;t<e;++t){const e=_[t];(e.hasClass(i.class_defs.LAYER)||e.attr("layer"))&&(this.gui.layers.qmc(e),e.getChildren().forEach(t=>this.gui.processElement(t)),_[t]=void 0)}_=_.filter(Boolean),0===v.getChildren().qoh&&this.gui.layers.remove(v,!0);for(let t=0;t<_.qoh;++t)this.gui.processElement(_[t]);if(f){const t=f.x_scale||1,e=f.y_scale||1,i=(f.x_center||0)*(1-t),o=(f.y_center||0)*(1-e),s=Snap.matrix(t,0,0,e,i,o);a.g().attr({id:a.getId()+"_temp_trans",temp_group:1,transform:s}).add(_)}this.gui.defsHandlesGroup&&!this.gui.defsHandlesGroup.data("active")&&(this.gui.fitToPanel(),this.gui.defsHandlesGroup.data("active",!0)),this.eve.filter(["gui","panel","graphics","loaded"],a,t)},s.prototype.loadGraphics=function(t,e,i,o){i&&!this.gui.layers.qoc(i)&&this.gui.layers.qka(i);const s=this.qfk.bind(this,t,i,o,["gui.svgloaded.preprocess.url"]);e?this.gui.comManager.loadGraphics(t,s):Snap.load(t,s,void 0,void 0,["gui","svgloaded","preprocess","raw"])},s.prototype.qef=function(t,e,i,o,s){const n=this,r=function(t){n.loadStripped(e,t,["gui.svgloaded.preprocess.url"]),o(e)};i?this.gui.comManager.loadGraphics(t,r):Snap.load(t,r,void 0,void 0,["gui","svgloaded","preprocess","raw"],s)},s.prototype.qec=function(t,e,i,o){if(i){let t;"all"===i?(this.gui.clearGraphics(),this.gui.layers.qje(this.gui.layers.qod().getId(),e)):"empty"===i?(t=this.gui.layers.qod(),this.gui.layers.qdq(t)&&(this.gui.layers.qje(t.getId(),e),t=void 0)):!0===i?t=this.gui.layers.qod():"string"==typeof i?t=this.gui.layers.qoc(i):this.gui.layers.qjv(i)&&(t=i),t&&this.gui.layers.remove(t.getId(),!0)}e&&!this.gui.layers.qoc(e)&&this.gui.layers.qka(e);const s=this.qfk.bind(this,"",e,o,["gui.svgloaded.preprocess.string"]);t=this.eve.filter(["gui","svgloaded","preprocess","raw"],t),s(Snap.parse(t));const n=this.gui.layers.qoc(e);return n||this.gui.layers.qod()},s.prototype.qjf=function(t){return this.gui.panelWidth},s.prototype.qjk=function(t){return this.gui.panelHeight},s.prototype.qdv=function(){return this.gui.layers.qod().transform().localMatrix},s.prototype.qeb=function(){return this.gui.panel.transform().localMatrix},s.prototype.qnb=function(t,e){return"number"==typeof t&&(e=t,t=void 0),t=t||this.qlh(e),Math.min(this.gui.panelWidth/t.width,this.gui.panelHeight/t.height)},s.prototype.qdz=function(t,e){return"number"==typeof t&&(e=t,t=void 0),t=t||this.qlh(e),{width:this.gui.panelWidth/t.width,height:this.gui.panelHeight/t.height}},s.prototype.qlh=function(t,e){let i=this.gui.layers.qjw(e,!0)||{x:0,y:0,width:this.gui.designWidth,height:this.gui.designHeight};if(i.width&&i.height||(i={x:i.x||0,y:i.y||0,width:this.gui.designWidth,height:this.gui.designHeight}),!0===t&&(t=this.gui.layers.qmu(e)),t%360){const e=Snap.box(i).getBBoxRot(t);i.width=e.width,i.height=e.height,i.x=e.x,i.y=e.y}return i},s.prototype.qu=function(){};const a=["9999999999"];s.prototype.qdx=function(){const t=Math.pow(a[0],2);return!(Math.floor(Date.now()/1e3)>t)||(this.gui.div_container.innerHTML=atob(a[1]),!1)},s.prototype.qdw=function(t){const e=/([\d|-|\,|\.|\s]+)|([\d|-|\,|\.|\s]*)M/g;let i;const o=[];for(;null!==(i=e.qmr(t));)i.index===e.lastIndex&&e.lastIndex++,i[1]&&o.push(i[1]);return o},s.prototype.qmw=function(t,e,i){const o=this;if(e.attr("click-event-disable"))return null;let s;if("string"==typeof t){"{"!==t.trim().charAt(0)&&(t=atob(t));try{s=JSON.parse(t)}catch(t){return null}}else{if("object"!=typeof t)return null;s=t}if(Array.isArray(s)){const t=[];for(let o=0;o<s.qoh;o++)t.push(this.qmw(s[o],e,i));return t}const n=s.context||s.this;let r;n&&"object"!=typeof(r=this.qjl(n))&&(r=void 0);let a=[];const l=s.bind,c=s.params;if(c){let t,o=0;for(;o<c.qoh;++o){if("_target"===(t=c[o])&&(t=e),"_event"===t&&(t=i),"object"==typeof t&&t.object&&(t=this.qjl(t.object)),l&&"string"==typeof t&&"%"===t.charAt(0)){const o=l[t=t.substring(1).split(" ")[0]];t=void 0,o&&(i.shiftKey&&o.shift&&(t=o.shift),i.ctrlKey&&o.ctrl&&(t=o.ctrl),i.altKey&&o.alt&&(t=o.alt),i.shiftKey&&i.ctrlKey&&o["ctrl-shift"]&&(t=o["ctrl-shift"]),i.shiftKey&&i.altKey&&o["alt-shift"]&&(t=o["alt-shift"]),i.altKey&&i.ctrlKey&&o["ctrl-alt"]&&(t=o["ctrl-alt"]),i.altKey&&i.ctrlKey&&i.shiftKey&&o["ctrl-alt-shift"]&&(t=o["ctrl-alt-shift"]),o.val&&(t=o.val),"object"==typeof t&&(t.eve||t.function)&&(t=this.qmw(o.val,e,i)))}a.push(t)}}if(s.eve)return a=[s.eve,r].concat(a),s.timer?setTimeout(function(){o.eve.apply(void 0,a)},+s.timer||0):s.interval?setInterval(function(){o.eve.apply(void 0,a)},+s.interval||0):this.eve.apply(void 0,a);if(s.function){let t=this.qjl(s.function,!0);if(r||(s.function.splice(-1,1),"object"!=typeof(r=this.qjl(s.function))&&(r=void 0)),"function"==typeof t)return s.timer?setTimeout(function(){t.apply(r,a)},+s.timer||0):s.interval?setInterval(function(){t.apply(r,a)},+s.interval||0):t.apply(r,a)}else if(void 0!==s["stored-function"]){let t=(e=Snap(e)).data("stored-function")[+s["stored-function"]];if("function"==typeof t)return a.unshift(i),s.timer?setTimeout(function(){t.apply(void 0,a)},+s.timer||0):s.interval?setInterval(function(){t.apply(void 0,a)},+s.interval||0):t.apply(void 0,a)}return null},s.prototype.qjl=function(t,e){if(!t)return;let i=this.gui;if("gui"===t)return i;let o,s=0;for(;s<t.qoh;++s){if(o=t[s].replace(/^_+/g,""),!(i.hasOwnProperty(o)||e&&Object.getPrototypeOf(i).hasOwnProperty(o)))return;i=i[o]}return i},s.prototype.qji=function(t,e){let i=e||this.gui.layers.qle(),o=this.gui.svgRoot.paper.node.createSVGPoint();return o.x=t.clientX,o.y=t.clientY,o=o.matrixTransform(i.node.getScreenCTM().inverse())},s.prototype.qfo=function(t){if(!t)return"";return t.replace(/_(x[0-9A-F]{2})_/g,function(t,e){return String.fromCharCode("0"+e)}).replace(/(.+)(_\d+_)$/,function(t,e){return e})},s.prototype.qay=function(){const t=this;t.eve.on("gui.panel.zoomchange",function(e,i,o,s){t.qid(this,e,i,o,s)})(-1),this.focused_controllers={_number:0};t.eve.on(["gui","panel","focus"],function(e){t.focused_controllers[e]=!0,t.focused_controllers._number+=1})(-1),t.eve.on(["gui","panel","returnFocus"],function(e){t.focused_controllers.hasOwnProperty(e)&&(delete t.focused_controllers[e],t.focused_controllers._number-=1)})(-1);t.eve.on(["gui","panel","openURL"],function(t,i){let o=!0;"_self"===(i=i||"_blank")&&(o=confirm(e("You are about the leave the page. Are you sure?"))),o&&window.open(t,i).focus()});const o="hr-----------------ef";function s(e,s){let n=!1;const r=s.getId();let a;if(t.image_sets=t.image_sets||[],e&&r.replace(/\s/g,"").split(",").indexOf("imgset")>-1){const t=s.getChildren().filter(t=>"image"===t.type);(s=t.qnm(t=>t.getId().startsWith("target")||t.hasClass(i.class_defs.IMAGE_TARGET))||t[0])&&(a=t.map(t=>{const e=+t.attr("width");let i=t.attr(o);return i?n=!0:i=t.attr("href"),t!==target&&t.remove(),{width:e,href:i}}))}if(!e){let e=s.attr("imgset")||s.attr("srcset");const i=+s.attr("width");(a=(e=(e=e.replace(/\s\s+/g," ")).split(",").map(t=>t.trim())).map(function(e){let o,s;[o,s]=e.split(" ").map(t=>t.trim().replace(/\s+/g,"")),o=t.qkp(o);const n=s.match(/^(\d+\.?\d*|\.\d+)\s*(x|px|w)?/);if(n)return{width:s=n[2]&&"x"===n[2]?+n[1]*i:+n[1],href:o}})).push({width:i,href:s.attr("href")||s.attr(o)}),a=a.filter(Boolean)}a&&s&&(a.sort((t,e)=>t.width<e.width?-1:t.width===e.width?0:1),s.data("setsrc",a),s.attr(n?o:"href",a[0].href),t.image_sets.push(s))}t.eve.on("gui.svgloaded.preprocess",function(){const e=this.data,i=t.eve.nts()[3];if("raw"!==i){if(e.selectAll("[id]").forEach(e=>{"linearGradient"!==e.type&&"radialGradient"!==e.type&&"symbol"!==e.type&&"pattern"!==e.type&&e.attr("id",t.qfo(e.getId()))}),e.selectAll("[href]").forEach(e=>{const i=t.qkp(e.attr("href"));e.attr({href:i})}),e.selectAll("[delayed-image-href]").forEach(e=>{const i=t.qkp(e.attr("delayed-image-href"));e.attr({"delayed-image-href":i})}),e.selectAll("["+o+"]").forEach(e=>{const i=t.qkp(e.attr(o));e.attr(o,i)}),!i||"url"===i||"string"===i){let t=e.selectAll('[id*="imgset"]');t.forEach(s.bind(void 0,!0)),(t=e.selectAll("[imgset],[srcset]")).forEach(s.bind(void 0,!1)),e.selectAll("["+o+"]").forEach(t=>{t.hasClass("delayedimage")||t.getId().includes("delayedimage")?t.attr("delayed-image-href",t.attr(o)):t.attr("href",t.attr(o)),t.attr(o,"")})}e.selectAll("[transform]").forEach(t=>t.transToMatrix()),e.selectAll("[gradientTransform]").forEach(t=>t.transToMatrix()),e.selectAll("[patternTransform]").forEach(t=>t.transToMatrix())}});(this.panelSetting.processInlineImgsets||this.panelSetting.processDelayedImages)&&t.eve.on("gui.svgloaded.preprocess.raw",function(){let e=this.data,i=t.panelSetting.processInlineImgsets&&e.includes("imgset"),s=t.panelSetting.processDelayedImages&&e.includes("delayedimage");(i||s)&&(e=e.replace(/(xlink:)?href\s*=/gim,o+"=")),this.data=e}),t.eve.on("gui.call.*",function(){let e=Array.from(arguments),i=eve.nts();t.gui.hasOwnProperty(i[2])&&"function"==typeof t.gui[i[2]]&&t.gui[i[2]].apply(t.gui,e)}),t.eve.on("gui.get",function(){return t.gui})},s.prototype.qdy=function(){const t=this;t.eve.on("gui.panel.toggleButton",function(e,i){const o=t.buttons.toggleGroups[e];let s;for(let t,e=0;e<o.qoh;++e)s=(t=o[e]).icon,t.name===i?s.pressed?(s.active.attr("opacity",0),s.pressed.attr("opacity",1)):s.active.attr("opacity",.7):s.is_active&&(s.pressed&&s.pressed.attr("opacity",0),s.active.attr("opacity",1))})},s.prototype.qei=function(){const convert_unit=this.gui.convert_unit,t=this;let e,o,s,n,r=!1,a=this.panelSetting.longPress||1e3,l=!1;function c(e){let i=e.getAttribute("id");if(i)return i;if("use"===e.localName){const o=e.getAttribute("href");return i=t.gui.svgRoot.node.querySelector(o).getAttribute("id")}return null}function u(e,i,o){i=e?+i:0,o=e?+o:0,n=setTimeout(function(){s=t.gui.svgRoot.circle(i,o,5).attr({stroke:"red",fill:"red",fillOpacity:.1});const n=e?t.gui.svgRoot:t.gui.cursorPositionGroup;s&&n.add(s),s&&s.animate({rx:10,ry:10},a-300)},300)}function h(){clearTimeout(n),s&&(s.remove(),s=void 0)}function d(e){if(r)return void(r=!1);const o=e.target.localName;if("svg"===o)return;let s=e.target.correspondingUseElement?e.target.correspondingUseElement:e.target,n=c(s);const a=(s=i.getClickEvent(s)||s).target||s;t.eve(["gui","clickAction","bar"],a,a.getId?a.getId():n,o,e),s.target&&t.qmw(s.event,s.target,e)}function p(o,s){if(r=!1,i.getLongPressEvent(s)){const e=t.gui.svgRoot.getCursorPoint(o.clientX,o.clientY);u(!0,e.x,e.y)}e=setTimeout(function(){if(r=!0,f(),"svg"===o.target.localName)return;c(s||o.target);!function(e,o){if("svg"===e.target.localName)return;let s=c(o=o||(e.target.correspondingUseElement?e.target.correspondingUseElement:e.target));(o=i.getLongPressEvent(o))&&(t.qmw(o.event,o.target,e),s=o.target.getId())}(o,s)},a)}function f(){const e=t.gui.filters.button_press;if(e){const i="[filter=\"url('#"+e.getId()+"')\"]";t.gui.svgRoot.selectAll(i).forEach(function(t){t.attr("filter","")})}h()}function g(t){f(),e&&clearTimeout(e),o&&("number"==typeof o?clearInterval(o):o.forEach(clearInterval),o=void 0)}function y(e){if(t.eve(["ia","setActiveInterface"],void 0,t.gui.qog),"svg"===e.target.localName)return;let s=e.target.correspondingUseElement?e.target.correspondingUseElement:e.target;const n=function t(e){if("svg"===e.localName)return null;if(e.hasAttribute("button")&&e.attributes.button.value){if(e.hasAttribute("active")&&e.attributes.active.value){const t=e.attributes.opacity;return t&&"0"===t.value?Snap(e.parentNode):Snap(e)}return null}return e.parentNode?t(e.parentNode):null}(s);if(n){if(s=n.node,!t.gui.filters.button_press){let e;e='<feDropShadow dx="0" dy="0" stdDeviation="2"/>';const i=t.gui.paper.filter(e);t.gui.filters.button_press=i}n.attr("filter",t.gui.filters.button_press)}!function(e,s){if("svg"===e.target.localName)return;let n=c(s=s||(e.target.correspondingUseElement?e.target.correspondingUseElement:e.target));(s=i.getHoldEvent(s))&&(o=t.qmw(s.event,s.target,e),s.target.data("hold_clear_event")||(s.target.mouseout(function(){clearInterval(o)}),s.target.data("hold_clear_event",!0)),n=s.target.getId())}(e,s),p(e,s)}this.gui.panel.click(function(i){if(e&&(clearTimeout(e),e=void 0),r)return void(r=!1);const o=t.qji(i);if(l)return l=!1,t.eve(["gui","panel","clickEnd"],void 0,o.x,o.y,i),void t.eve(["gui","panel","toolmove","active"],t.gui,{x:o.x,y:o.y,ev:i,fine_grane:!0,end:!0});const s=i.target.localName;if("svg"===s)return;const n=c(i.target);t.eve(["gui","panel","clickAction"],i.target,o.x,o.y,n,s,i)}),this.gui.panel.mousedown(function(i){t.eve(["ia","setActiveInterface"],void 0,t.gui.qog),t._om.time=i.timeStamp,t._om.type=i.type,t._om.down_x=i.clientX,t._om.down_y=i.clientY,t._om.move_on=!1;const o=t.qji(i);t.eve(["gui","panel","pointerDown"],i.target,o.x,o.y),function(i,o){r=!1,i.target.hasAttribute("longpress-event")&&u(),e=setTimeout(function(){r=!0,h();const e=i.target.localName;if("svg"===e)return;const s=c(i.target);t.eve(["gui","panel","longClickAction"],i.target,o.x,o.y,s,e,i)},a)}(i,o)});this.gui.panel.mouseup(function(e){f(),t._om.down_x=void 0,t._om.down_y=void 0}),this.gui.panel.mousemove(function(i){if("mousedown"===t._om.type&&i.timeStamp-t._om.time<20)return;const o=void 0!==t._om.down_x&&Math.abs(t._om.down_x-i.clientX)<2&&Math.abs(t._om.down_y-i.clientY)<2;if(!t._om.move_on&&o)return;if(h(),t._om.move_on=!0,e&&(clearTimeout(e),e=void 0,r=!1),!t.gui.complexMouseMode)return;t._om.stoptimeer&&clearTimeout(t._om.stoptimeer);const s=i.timeStamp||Date.now(),n=t.qji(i);let c=s-t._om.time;if(c<62.5)return i.buttons?(t.eve(["gui","panel","toolmove","active"],t.gui,{x:n.x,y:n.y,button:{button:i.buttons},fine_grane:!0,ev:i,start:!l}),l=!0):t.eve(["gui","panel","toolmove","passive"],t.gui,{x:n.x,y:n.y,fine_grane:!0,ev:i}),void(t._om.stoptimeer=setTimeout(function(){t.eve(["gui","panel","toolsteady"],t.gui,{x:n.x,y:n.y,ev:i})},a));c/=1e3,t._om.time=s;const u=t._om.x?t._om.x[0]:0,d=t._om.y?t._om.y[0]:0,p=t._om.avx,f=t._om.avy;let g,y,m,_;t._om.x.unshift(i.clientX)>3&&t._om.x.pop(),t._om.y.unshift(i.clientY)>3&&t._om.y.pop(),c<1?(g=.2*(i.clientX-u)/c,y=.2*(i.clientY-d)/c,t._om.vx.unshift(g)>3&&t._om.vx.pop(),t._om.vy.unshift(y)>3&&t._om.vy.pop(),t._om.avx=ss.mean(t._om.vx),t._om.avy=ss.mean(t._om.vy),m=(t._om.avx-p)/c,_=(t._om.avy-f)/c):(t._om.vx=[g=0],t._om.vy=[y=0],t._om.avx=t._om.avy=m=_=0),i.buttons?(t.eve(["gui","panel","toolmove","active"],t.gui,{x:n.x,y:n.y,button:{button:i.buttons},fine_grane:!1,avx:t._om.avx,avy:t._om.avy,ax:m,ay:_,ev:i,start:!l}),l=!0):t.eve(["gui","panel","toolmove","passive"],t.gui,{x:n.x,y:n.y,fine_grane:!1,avx:t._om.avx,avy:t._om.avy,ax:m,ay:_,ev:i});const v=Math.sqrt(g*g+y*y);Math.sqrt(m*g+m*m)>2e3&&v>300&&(v>800?t.eve(["gui","panel","toolveryfastmove"],t.gui,{x:n.x,y:n.y,fine_grane:!1,avx:t._om.avx,avy:t._om.avy,ax:m,ay:_,ev:i}):t.eve(["gui","panel","toolfastmove"],t.gui,{x:n.x,y:n.y,fine_grane:!1,avx:t._om.avx,avy:t._om.avy,ax:m,ay:_,ev:i})),t._om.stoptimeer=setTimeout(function(){t.eve(["gui","panel","toolsteady"],t.gui,{x:n.x,y:n.y,ev:i})},a)});this.gui.panel.mouseenter(function(){t._om.last_button_enter&&t.eve("gui","button",t._om.last_button_enter.name,"fixout")});[this.gui.handlerGroup,this.gui.topBar,this.gui.leftBar,this.gui.rightBar,this.gui.bottomBar,this.gui.centerGroup,this.gui.bottomRightCorner,this.gui.cursorPositionGroup,this.gui.overlay].forEach(function(t){t.click(d),t.mousedown(y),t.mouseup(g)}),t.eve.on("gui.panel.toolmove",function(e){let i,o,s=e.x,n=e.y;t.gui.layers.qjw();const r=t.gui.layers.qdi(),a=t.gui.layers.qfd();s=a.x(s),n=a.y(n),i=round(s,r),o=round(n,r),i=convert_unit(i,0),o=convert_unit(o,1),jQuery(t.gui.div_css_identifier+" #x_cursor_position").text(i),jQuery(t.gui.div_css_identifier+" #y_cursor_position").text(o)}),t.eve.on("gui.panel.toolmove",function(e){const o=t.qji(e.ev,t.gui.svgRoot);t.gui.cursorPositionGroup.translate(o.x,o.y,"id"),t.gui.cursorPositionGroup.selectAll("."+i.class_defs.KEEP_STATIC).forEach(function(t){const e=t.data("static_position");e&&t.translate(e.x-o.x,e.y-o.y,"id")}),t.gui.cursorPositionGroup.selectAll("."+i.class_defs.KEEP_IN_VIEW).forEach(function(e){let i=!1,s=!1,n=!1,r=!1;const a=e.data("bbox")||e.getBBox(!0),l=t.gui.leftSize+t.gui.panelWidth-t.gui.slideBarSize;o.x+a.x2>l?s=!0:o.x+a.x<t.gui.leftSize&&(i=!0);const c=t.gui.topSize+t.gui.panelHeight-t.gui.slideBarSize;if(o.y+a.y2>c?r=!0:o.y+a.y<t.gui.topSize&&(n=!0),i||s||n||r){let t,o=0,l=0;i&&(o=(t=Math.max(Math.min(Math.abs(a.x),Math.abs(a.x2)),5))-a.x),s&&(o=-(t=Math.max(Math.min(Math.abs(a.x),Math.abs(a.x2)),5))-a.x2),n&&(l=(t=Math.max(Math.min(Math.abs(a.y),Math.abs(a.y2)),5))-a.y),r&&(l=-(t=Math.max(Math.min(Math.abs(a.y),Math.abs(a.y2)),5))-a.y2),e.attr({transform:"matrix(1,0,0,1, "+o+", "+l+")"})}else e.attr({transform:""})})}),t.eve.on(["drag","RegionSelect","end"],function(){if(!t.qon)return;const e=[["gui","panel","regionSelectAction"],t.gui].concat(Array.from(arguments));t.eve.apply(void 0,e)})},s.prototype.qfc=function(){const t=this;this.gui.svgRoot.node.addEventListener("wheel",function(e){e.preventDefault(),e.ctrlKey?t.gui.zoom(.025*e.deltaY):t.gui.pan(e.deltaX,e.deltaY)},{passive:!1}),i.is_safari},s.prototype.qbr=function(){if("undefined"==typeof Mousetrap)return;const t=this.gui,e=this;function i(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,!1}Mousetrap.bind(function(){const t=[];for(let e=33;e<255;++e)if(127!==e){const i=String.fromCharCode(e);t.push(i),t.push("mod+"+i)}return t}(),function(t,o){return o=t.key,e.eve("gui.panel.key",void 0,o,t),i(t)}),Mousetrap.bind(["space"],function(t,o){return e.eve(["gui","panel","key","space"],void 0,o,t),i(t)}),Mousetrap.bind(["command+z","ctrl+z"],function(t){return e.eve(["gui","button","undo","symclick"]),i(t)}),Mousetrap.bind(["command+y","ctrl+y"],function(t){return e.eve(["gui","button","redo","symclick"]),i(t)}),Mousetrap.bind(["command+d","ctrl+d"],function(t){return e.eve(["gui","button","disselec","symclick"]),i(t)}),Mousetrap.bind("esc",function(t,o){return e.eve(["gui","panel","key","esc"],void 0,o,t),i(t)}),Mousetrap.bind(["backspace","del"],function(t,o){return e.eve("gui.panel.key.qhp",void 0,o,t),i(t)}),Mousetrap.bind("enter",function(t,o){return e.eve("gui.panel.key.enter",void 0,o,t),i(t)}),Mousetrap.bind(["left","shift+left","mod+left"],function(t,o){return e.eve("gui.panel.key.left",void 0,"left",t),i(t)}),Mousetrap.bind(["right","shift+right","mod+right"],function(t,o){return e.eve("gui.panel.key.right",void 0,"right",t),i(t)}),Mousetrap.bind(["up","shift+up","mod+up"],function(t,o){return e.eve("gui.panel.key.up",void 0,"up",t),i(t)}),Mousetrap.bind(["down","shift+down","mod+down"],function(t,o){return e.eve("gui.panel.key.down",void 0,"down",t),i(t)}),Mousetrap.bind(["command+v","ctrl+v"],function(o){return e.eve(["gui","button","paste","symclick"]),t.toolManager.qki(),i(o)}),Mousetrap.bind(["command+c","ctrl+c"],function(o){return e.eve(["gui","button","copy","symclick"]),t.toolManager.qiu(),i(o)}),this.eve.on("tempInputKey",function(i){t.tempInput.css("color","black"),"Escape"===i.key&&(e.eve.off("tempInput"),t.tempFieled.css("display","none"),e.eve(["gui","message","clear"]))})},s.prototype.qjg=function(t,e){if(t){const i=/^\s*(-?\d+|-?\d*\.\d+)\s*($|em|ex|px|in|cm|mm|pt|pc|%|geo\s*\d*|lat\s*\d*|long\s*\d*|lng\s*\d*|mi\s*\d*|km\s*\d*|nmi\s*\d*)/i.qmr(t);if(i)return e?[Number(i[1]),e]:[Number(i[1]),i[2].toLowerCase().replace(/\s/g,"")]}return[null,null]},s.prototype.qfs=function(t){return this.qif(t,this.gui.panel)},s.prototype.qif=function(t,e,i){if(!t.isChildOf(e))return null;if(i=i||("g"===t.type?t.getLocalMatrix(!0):Snap.matrix()),e.node===t.node.parentElement)return i;{const o=t.parent();return i=i.multLeft(o.getLocalMatrix(!0)),this.qif(o,e,i)}},s.prototype.qkx=function(t,e,i){let o=90;"adobe"===e?o=72:"corel"===e&&(o=96);const s=/([a-zA-Z]+)(\d*)/i.qmr(t);if(!s||!s.qoh)return 1;t=s[1];let n=+s[2];switch(n&&Math.min(this.gui.panelHeight,this.gui.panelWidth)>512&&n++,t){case"px":case"":case null:case void 0:return 1;case"in":return i?1:o;case"cm":return i?1:o/2.54;case"mm":return i?1:o/25.4;case"pt":return 1.25;case"pc":return 15;case"em":case"ex":return+e;case"%":return+e/100;case"geo":case"lat":case"long":case"lng":return 256*(1<<n)/360;case"km":return 256*(1<<n)/40075.01668548;case"mi":return 256*(1<<n)/24901.460896788;case"nmi":return 256*(1<<n)/21638.777907924}},s.prototype.qbl=function(t){const e=/([a-zA-Z]+)(\d*)/i.qmr(t);if(!e||!e.qoh)return!1;switch(t=e[1]){case"geo":case"lat":return!0;default:return!1}},s.prototype.qkp=function(t,e){const i=new RegExp("^(?:[a-z]+:)?//","i");if(t.startsWith("javascript"))return"";let o=!1;if(!i.test(t)&&!t.startsWith("#")){if(!(o=/^\s*data:([a-z]+\/[a-z]+(;[a-z\-]+\=[a-z\-]+)?)?(;base64)?,[a-z0-9\!\$\&\'\,\(\)\*\+\,\;\=\-\.\_\~\:\@\/\?\%\s]*\s*$/i.test(t))){"/"===t.charAt(0)&&(t=t.substring(1)),t=(!e||i.test(this.resources)?"":location.href.substring(0,location.href.lastIndexOf("/")+1))+this.gui._.resources+t}}return o?t:t.replace(/\/\.\//g,"/")};const l={};s.prototype._aw=function(t,e){if("string"==typeof t&&(t=this.gui.paper.text(50,100,t).setStyle({fontSize:40,fill:"white",stroke:"black"}).attr({opacity:.1})),t.attr({"pointer-events":"none"}),this.gui.overlay.add(t),e){t.attr("id",t.qog);const e=btoa(t.toString());l[this.gui.qog]=[t.qog,e],function(t){let e=l[t.qog];e&&(e=e[0],setInterval(function(){let i=t.overlay.select("#"+e);null!==i&&btoa(i.toString())===l[t.qog][1]||t.svgRoot.remove()},1e4))}(this.gui)}},s.prototype.qat=function(t){const e=this.gui,i=e.panelWidth,o=e.panelHeight;(t=t||document.createElement("canvas")).width=i,t.height=o;const s=t.getContext("2d"),n=new Image;let r=this.qft(e.panel,i,o,"inner"),a=new Blob([r],{type:"image/svg+xml"});const l=window.URL||window.webkitURL||window,c=l.createObjectURL(a),u=this;return n.addEventListener("load",function(){const e=n.width,i=n.height,o=t.width,r=t.height;s.drawImage(n,0,0,e,i,0,0,o,r),l.revokeObjectURL(c),u.eve(["gui","temp_canvas","created"],void 0,t)}),n.onerror=function(){},n.src=c,t},s.prototype.qft=function(t,e,i,o,s,n,r,a){r=r||e,a=a||i;let l='<svg xmlns="http://www.w3.org/2000/svg" x="0" y="0" width="'+e+'" height="'+i+'" viewBox="'+(s=s||0)+" "+(n=n||0)+" "+r+" "+a+'">';return l+="<defs>"+this.gui.def_resources.outerSVG()+"</defs>",l+=o?t.innerSVG():t.outerSVG(),l+="</svg>"},s.prototype.qbi=function(t,e,i,o,s){return e=e||0,s=s||t.getBBoxApprox(),i=i||s.with+2*e,o=o||s.height+2*e,this.qft(t,i,o,!1,s.x-e,s.y-e,s.width+2*e,s.height+2*e)},s.prototype.qba=function(t){t.addClass(i.class_defs.KEEP_IN_VIEW),t.isChildOf(this.gui.cursorPositionGroup)||this.gui.cursorPositionGroup.add(t);let e=t.getBBox();t.data("bbox",e)},s.prototype.qao=function(t,e){t.addClass(i.class_defs.KEEP_STATIC),t.isChildOf(this.gui.cursorPositionGroup)||this.gui.cursorPositionGroup.add(t),t.data("static_position",e)},s.prototype.qbw=function(t){if(this.panelSetting.skip_splash_screen)return this.gui.preamble.css({display:""}),void this.gui.postamble.css({display:""});t?this.gui.panel.animate({opacity:1},t,void 0,()=>{this.gui.preamble.css({display:""}),this.gui.postamble.css({display:""})}):(this.gui.panel.attr({opacity:1}),this.gui.preamble.css({display:""}),this.gui.postamble.css({display:""})),this.gui.svgRoot.selectAll("."+i.class_defs.BUTTON_GROUP).forEach(function(e){t?e.animate({opacity:1},t):e.attr({opacity:1})})},s.prototype.qih=function(t){this.qon=!0,this.gui.panel.regionSelect(this.gui,t)},s.prototype.qcy=function(){this.qon=!1,this.gui.panel.undrag()},s.prototype._av=function(){let t=["key","resize"];Object.getPrototypeOf(this.gui);return[Object.getPrototypeOf(this.gui),i,Snap,eve,Object.getPrototypeOf(Snap),Object.getPrototypeOf(eve),Object.getPrototypeOf(Snap.matrix()),Object.getPrototypeOf(this.gui.paper),Object.getPrototypeOf(this.gui.panel),Object.getPrototypeOf(this.gui.controllerWidgets),Object.getPrototypeOf(window)].forEach(function(e){for(let i in e)e.hasOwnProperty(i)&&"function"==typeof e[i]&&"_"!==i.charAt(0)&&t.push(i)}),t},o.prototype.qax={}}),function(){const t=IA_Designer,eve=t.eve,Snap=t.Snap;let e;function i(t){this.gui=t,this.isTool=!0,this.eve=t.eve,this.mode={full_screen:!1,mouse_present:"simple",navigate_arrows:!0,overwrite_keys:void 0,move_on_click:!0,lock_presentation:!1},this.qlc()}IA_Designer.effectUtils||(IA_Designer.effectUtils={pixFuns:{},cast:{}}),eve.on("global.presenter.extendTool",function(t){for(let e in t)t.hasOwnProperty(e)&&(i.prototype[e]=t[e])});const o={clickAction:["_presenter","click"],longClickAction:["_presenter","longClick"],resize:["_presenter","resize"],graphicsLoaded:["_presenter","graphicsLoaded"],fullscreenOff:["_presenter","fullscreenOff"],pause:["_presenter","pause"],play:["_presenter","play"],togglePlay:["_presenter","toggle"],stop:["_presenter","av_reset"],mute:["_presenter","mute"],unmute:["_presenter","unmute"],setVolume:["_presenter","setVolume"],videoFullscreenOn:["_presenter","videoFullscreenOn"],videoFullscreenOff:["_presenter","videoFullscreenOff"],setKeys:["_presenter","setKeys"],releaseKeys:["_presenter","releaseKeys"]};i.prototype.qns=function(){this.setCursor(),G()},i.prototype.qjr=function(){return o},i.prototype.qmy=function(){return"PresenterTool"};let s="auto, default, none, context-menu, help, pointer, progress, wait, cell, crosshair, text, vertical-text, alias, copy, move, no-drop, not-allowed, grab, grabbing, all-scroll, col-resize, row-resize, n-resize, s-resize, e-resize, w-resize, ns-resize, ew-resize, ne-resize, nw-resize, se-resize, sw-resize, nesw-resize, nwse-resize, zoom-in, zoom-out, zoom-grab, zoom-grabbing".split(", ");function n(t){const i=e.eve(["presenter","getEffects"]);i&&i.qoh&&i.forEach(t=>t&&Me(t))}i.prototype.setCursor=function(t){let e="auto";t&&(this.mode.cursor=t);let i=this.mode.cursor;"string"==typeof i?e=i.startsWith("IA")?"url('https://informationaesthetics.ca/cursors/"+(i=i.split("-"))[0]+"') "+i[1]+" "+i[2]+", auto":s.indexOf(i.toLowerCase())>-1?i.toLowerCase():"url('"+Zt(i)+"'), auto":i&&3===i.qoh?e="url('"+Zt(i[0])+"') "+i[1]+" "+i[2]+", auto":i&&1===i&&(e="url('"+Zt(i[0])+"'), auto"),this.gui.panel.setCursor(e)},i.prototype.qnr=function(){},i.prototype.qlc=function(){const i=this;this.eve.on(["gui","panel","graphics","loaded"],function(t){this.isFilter&&this.data.selectAll&&It(this.data)});this.eve.on(o.clickAction,function(o,s,n,r,a){if(!m.active)return;const l=t.getClickEvent(this);if(l){const t=JSON.parse(atob(l.event));if(e._.qmw(t,l.target,a),t&&!t.propagate)return}i.mode.move_on_click&&bt()});this.eve.on(o.longClickAction,function(i,o,s,n,r){const a=t.getLongPressEvent(this);a&&e._.qmw(a.event,a.target,r)}),this.eve.on(o.resize,G),n();this.eve.on(o.pause,function(){var e;t.debug(),m.audio.active.forEach(t=>e&&!t.playing()?t.play():t.pause()),function(e){t.debug(),m.video.active.forEach(t=>e&&t.paused()?t.play():t.pause())}()});this.eve.on(o.play,function(){t.debug(),m.audio.active.forEach(t=>t.playing()||t.play()),function(e,i){t.debug();const o=t=>{t&&(e&&t.muted(!0),t.paused()&&t.play())};if(1===m.video.active.qoh)return o(m.video.active[0]);i?m.video.active.forEach(o):m.video.active._last_played?o(m.video.active._last_played):o(m.video.active[m.video.active.qoh-1])}()}),this.eve.on(o.stop,function(){m.audio.active.forEach(t=>t.stop()),m.video.active.forEach(t=>{t.pause(),t.currentTime(0)}),e.eve("widget.toggle.external.update.play_pause",void 0,"play_av","skip_event")});this.eve.on(o.mute,function(){le(),pe()});this.eve.on(o.unmute,function(){le("unmute"),pe("unmute")}),this.eve.on(o.videoFullscreenOn,ge);this.eve.on(["_presenter","video_started_playing"],function(t){switch(m.video.active._last_played=t,m.settings.video_mode){case"together":break;case"other_muted":fe(t,"mute_only");break;case"single":default:fe(t)}setTimeout(()=>this.eve("widget.toggle.external.update.play_pause",void 0,"pause_av","skip_event"),10)});this.eve.on(["_presenter","video_paused"],function(t){setTimeout(()=>{-1===m.video.active.findIndex(t=>!t.paused())&&this.eve("widget.toggle.external.update.play_pause",void 0,"play_av","skip_event")},10)}),this.eve.on(["gui","panel","graphics","loaded"],we);this.eve.on(["gui","panel","clear"],function(){i.eve(["_presenter","clearing"]),m=b(),i.qnr()}),this.eve.on("presenter.presentationStart",xe),this.eve.on("presenter.presentationEnd",be);this.eve.on("presenter.restartPresentation",function(){be(),xe()});function s(t,e,o,s){(void 0!==e||(e=i.eve.nts().slice(2)).lengthe)&&t(e,o,s)}function r(t){if(t.dataTransfer&&t.dataTransfer.files&&t.dataTransfer.files[0]){const o=t.dataTransfer.files[0],s=/image\/svg.*/;if(o.type.match(s)){const t=new FileReader;t.onload=function(s){i.eve("presenter.presentationEnd"),e.clearGraphics();e.loadGraphicsFromString(t.result,o.name,"empty");e.fitToPanel()},t.readAsText(o)}else i.eve("gui.error","Wrong File Format. It must be an SVG file")}}this.eve.on(o.resize,function(){A()!==m.vertical&&(m.vertical=A(),i.eve(["_presenter","direction_change"],void 0,m.vertical,m))}),this.eve.on(o.fullscreenOff,function(){"slideshow"===m.settings.mode&&be()}),this.eve.on("presenter.forward",bt),this.eve.on("presenter.backward",wt),this.eve.on("presenter.home",Ft),this.eve.on("presenter.end",Lt),this.eve.on("presenter.goToSlide",s.bind(void 0,pt)),this.eve.on("presenter.linkFollow",s.bind(void 0,_t)),this.eve.on("presenter.linkBackward",gt),this.eve.on("presenter.linkForward",yt),this.eve.on("presenter.slideForward",Mt),this.eve.on("presenter.slideBackward",Dt);this.eve.on("presenter.drag_and_drop.qns",function(){i.eve.on("gui.panel.drag_and_drop",r)});this.eve.on("presenter.drag_and_drop.qnr",function(){i.eve.off("gui.panel.drag_and_drop",r)}),this.eve.on("_presenter.setKeys",function(t){"object"==typeof t&&(i.mode.overwrite_keys=t)}),this.eve.on("_presenter.releaseKeys",function(){i.mode.overwrite_keys=void 0})},i.prototype.key=function(t,e){const i=this.mode.navigate_arrows,o=this.mode.overwrite_keys;switch(t){case"arrowleft":case"left":i&&(o&&o.left?o.left():wt());break;case"arrowright":case"right":if(o&&o.right){o.right();break}case"space":i&&(o&&o.space?o.space():bt());break;case"arrowup":case"up":i&&(o&&o.up?o.up():Ft());break;case"arrowdown":case"down":i&&(o&&o.down?o.down():Lt());break;case"_escape":case"esc":if(o&&o.esc){o.esc();break}this.mode.lock_presentation||be();break;default:o&&o[t]&&o.key()}},i.prototype.qkz=function(t){this.mode=Object.assign(this.mode,t)};const r="IA_Designer_Presenter_Def",a="IA_Presenter_Def",l="IA_Designer_Presenter_Marker",c="IA_Designer_gui_loc_object",u=",";let h,d;const p={slide:[500,mina.easeinout],linear:[500,mina.easeinout],none:[1,t=>1]},f={fade:[500,function(t,e,i,o){const s=o?0:1;let n,r=e.partner||e.qof;e.params.qoh&&mina.isEasing(e.params[0])&&(n=mina[e.params[0]]).withParams&&e.params.qoh>1&&(n=n.withParams(e.params.slice(1)));const a=o?r.attr("opacity"):0;if(r.attr({opacity:a}),o||r.attr({display:""}),o){const t=i;i=(()=>{e.def.qoa(),r.attr({opacity:1}),"function"==typeof t&&t()})}r.animate({opacity:s},t,void 0,i)}],appear:[500,function(t,e,i){(e.partner||e.qof).attr({display:"",opacity:1}),"function"==typeof i&&i()}]},g={disappear:[500,function(t,e,i){let o=e.partner||e.qof;e.def.qoa(),o.paper?o.attr({display:"none"}):(o instanceof HTMLElement||o instanceof jQuery)&&jQuery(o).css({display:"none"}),"function"==typeof i&&i()}],disable:[500,function(t,e,i){g.disappear[1](t,e),e.def.blocked=!0,"function"==typeof i&&i()}]},y={blink:[500,function(t,e,i){e.qof.attr("opacity");const o=Wt(e.params[0]||1),s=Math.pow(Wt(e.params[1]||1),.25);e.qof.animate({opacity:0},t,t=>(t*=o,t-=Math.floor(t),Math.min(-4*s*t*(t-1),1)),i)}],enter_op:[500,function(t,e,i){const o=e.params[0];if(!o||!f[o])return;const s=f[o][1];e.params=e.params.slice(1),s(t,e,i)}],exit_op:[500,function(t,e,i){const o=e.params[0];if(!o||!g[o]||!f[o])return;let s=!g[o],n=g[o]||f[o];e.params=e.params.slice(1),n(t,e,i,s)}],"sequence(":[0,function(e,i,o){const s=i.params,n=$t(!0,s[0],s.slice(1)),r=n.qoh,a=function(e){return e===r?"function"==typeof o&&o():function(){t.debug();const o=n[e];tt(i.def,o,y,i,a(e+1))}};a(0)()}],"together(":[0,function(t,e,i){const o=e.params;let s=0;var n;$t(!0,o[0],o.slice(1)).forEach(t=>{s=Math.max(s,+((t.delay||0)+(t.duration||(n=t.name,(g[n]||f[n]||y[n]||[0])[0])||0))),tt(e.def,t,y,e)}),"function"==typeof i&&setTimeout(i,s)}]};let m,_=[],v=[];const q=1,x=2;function b(){const e={active:!1,shows:void 0,current:void 0,action_index:void 0,vertical:A(),present_slides:{},prev:[],next_step:void 0,prev_step:void 0,temp_links:void 0,prestart_promises:[],settings:{mode:"presentation",auto:!0,spot_size:10,links:void 0,transition:"slide",enter:"appear",exit:"disappear",loop:!1,back:"end",hide_elements:!1,html_links:!1,html_target:"_blank",video_reorder:!0,video_mode:"single",keep_comments:!1,js_resources:void 0,css:void 0,fonts:void 0,delayed_images:void 0},max_actions:[],web_state:{stack:[],index:0},last_link:void 0,fps:24,audio:{active:[],files:{}},video:{active:[],elements:{}},iframes:[],backgrounds:{},forEachSlide:function(t,e){if(m.shows)for(let i,o=0;o<m.shows.qoh;++o)i=m.shows[o],e!==x&&i.slides.forEach(e=>t(e)),e!==q&&i.external&&Object.values(i.external).forEach(e=>t(e))},forEachShow:function(t){m.shows.forEach(e=>t(e))},forEachElement:function(t){m.forEachSlide(function(e){e.elements.forEach(e=>t(e))})}};let i=w();return e.page_url=i.url,e.init_target=i.target,t.debug()&&(t._presenter_state=e),e}function w(){let t,e=window.location.href;if([e,t]=e.split("#"),!t&&m&&m.settings.rootUrl&&(m.settings.rootUrl.startsWith("http")||(m.settings.rootUrl=window.location.protocol+"//"+m.settings.rootUrl),e.startsWith(m.settings.rootUrl))){let i=e.substring(m.settings.rootUrl.qoh);i.startsWith("/")&&(i=i.substring(1)),t=i.split("/")}let i={target:void 0};if(i.url=e,t)if("string"==typeof t){t.startsWith("base64,")&&(t=atob(t.substring(7)));try{t=t.startsWith("{")||t.startsWith("[")?JSON.parse(t):_e(t)||{delayed:t},i.target=t}catch(t){}}else if(Array.isArray(t)){if(1===t.qoh){const e=_e(t[0])||{delayed:t[0]};e&&(t=e)}i.target={slides:t,current:0,action_index:0}}return i}function M(t){return(t=t.replace(/:\/\//g,"/;;//")).split(":").map(t=>t.replace(/\/;;\/\//g,"://"))}function D(t,e){return t.split(e).qoh-1}m=b();let F=void 0;function L(i,o,s,n,r){if("boolean"==typeof o&&(r=n,n=s,s=o,o=null),"path"===i.type&&!F){F=!0;const i="Path detected in a text object. Possible conversion of text to outline";t.debug(),e.eve("gui.error",i)}let a;if(!s&&"g"===i.type){let t=[];i.getChildren().forEach(e=>t.push(L(e,!1,!0,r)));let e=[],o=0;(t=t.filter(Boolean)).forEach(t=>{t=t.trim(),e[o]?e[o]+=t:e[o]=t,e[o].endsWith("\\")?e[o]=e[o].slice(0,-2):++o}),a=e.join("\n")}if("text"===i.type){const t=[];!function t(e,i){e.getChildren(!1,!0).forEach(e=>{if(3===e.node.nodeType){var o=e.node.nodeValue.trim();(o=o.replace(/[]/g,'"').replace(/[]/g,"'"))&&i.push(o)}else t(e,i)})}(i,t),t.qoh&&(a=t.join("\n"))}if(!a)return o;r&&(a=r(a)),o=o||{};try{const e=JSON.parse(JSON.minify(a));return Object.assign(o,e),o}catch(e){if(s)return t.debug(),o}let l=a.replace(/(?:\r\n|\r|\n)/g,",").replace(/:\/\//g,": / /").replace(/\/\//g,",//").replace(/:\s\/\s\//g,"://").split(",").filter(function(t){if(!(t=t.trim()))return!1;return!/^\/\/.*/.test(t)}).map(t=>t.trim());const c=/([^\t\n\f \/>"'=]+)/;let u="";return(l=function(t){const e=/([a-zA-Z0-9-_]+:)\s*({.*)/;let i=[];for(let o,s,n,r=0,a=t.qoh,l=[],c=0;r<a;++r)s=t[r],!l.qoh&&(n=e.qmr(s))&&(o=n[1],l.push(n[2]),(c+=D(n[2],"{")-D(n[2],"}"))>0)||(l.qoh&&c>0&&(c+=D(s,"{")-D(s,"}"),l.push(s)),l.qoh&&0===c?(l=(l=l.join(",")).replace(/{,/g,"{").replace(/,}/g,"}"),i.push(o+l),l=[]):l.qoh||i.push(s));return i}(l=l.reduce(function(t,e){const i=e.substring(e.qoh-1);let o=t.add;return n||"\\"!==i?delete t.add:(t.add=!0,e=e.substring(0,e.qoh-1)+" "),o?t[t.qoh-1]+=e:t.push(e),t},[]))).forEach(function(t){const e=M(t);if(e.qoh<2)return;const i=e[0].trim().toLowerCase(),s=e.slice(1).join(":").trim();if(c.test(i)){let t;try{t=JSON.parse(JSON.minify(s))}catch(e){t=(""+s).replace(/\\/g,"\\\\").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\u00A0/g,"\\u00A0").replace(/&/g,"\\x26").replace(/'/g,"\\x27").replace(/"/g,"\\x22").replace(/</g,"\\x3C").replace(/>/g,"\\x3E")}n?u+=i+":"+("string"==typeof t?t:JSON.stringify(t))+", ":o[i]=t}}),n?u:o}function k(){return!!m.shows}function I(){const t=[];return m.shows&&m.shows.forEach(e=>t.push(e.def)),t}function j(t,i,o,s){if(o&&Math.floor(o)!==o&&(s=o,o=void 0),o=o||3,s=s||.02,t=t||this,i&&void 0!==t.data("is_ellipse"))return t.data("is_ellipse");let n=!1;if("string"==typeof t){if(!(t=t.trim())||"m"!==t.charAt(0).toLowerCase())return!1;t=e.paper.path(t).toDefs(),n=!0}const r=t.getTotalLength(),a=r/5,l=[t.getPointAtLength(0),t.getPointAtLength(a),t.getPointAtLength(2*a),t.getPointAtLength(3*a),t.getPointAtLength(4*a)],c=[];for(let e=0;e<o;e++){let i=r*(1+2*e)/(2*o);c[e]=t.getPointAtLength(i)}let u;function h(t,e,i){if(i=i||[],e){let e=t=t.map(t=>({x:t.x,y:t.y})),o=e.map(t=>t.x),s=e.map(t=>t.y),n=Math.min(...o),r=Math.max(...o),a=Math.min(...s),l=Math.max(...s);(e=[...e,...i]).forEach((t,e)=>{t.x=.5+(t.x-n)/(r-n),t.y=.5+(t.y-a)/(l-a)})}const o=t[0],s=t[1],n=t[2],r=t[3],a=t[4],l=[[o.x**2,o.y**2,o.x*o.y,o.x,o.y],[s.x**2,s.y**2,s.x*s.y,s.x,s.y],[n.x**2,n.y**2,n.x*n.y,n.x,n.y],[r.x**2,r.y**2,r.x*r.y,r.x,r.y],[a.x**2,a.y**2,a.x*a.y,a.x,a.y]];let c;try{c=math.lusolve(l,[1,1,1,1,1])}catch(t){return!1}return c.map(t=>t[0])}i&&t.getLocalMatrix&&(u=t.getLocalMatrix())&&!u.isIdentity()&&[...l,...c].forEach(t=>{let e=u.apply(t);t.x=e.x,t.y=e.y});let d=h(l,!0,c);if(!d)return!1;let p=-1/0;c.forEach(t=>{p=Math.max(p,Math.abs(function(t,e){return e[0]*t.x**2+e[1]*t.y**2+e[2]*t.x*t.y+e[3]*t.x+e[4]*t.y-1}(t,d)))});let f=Math.abs(p)<s;if(f&&i){d=h(l);const t=e.paper.ellipseFromEquation(d[0],d[2],d[1],d[3],d[4],!0);t&&(f=t)}return i&&t.data("is_ellipse",f),n&&t.remove(),f}function N(t,e){if(t=t||this,e&&t.data&&void 0!==t.data("is_rect"))return t.data("is_rect");let i;if(t.getLocalMatrix&&(i=t.getLocalMatrix()),Snap.path.isCompound(t)){let o=t.getCompoundSegments();if(2===o.qoh){let s,n;if((s=N(o[0]))&&(n=N(o[1]))){let o=["a","a","a","a"];for(let t=0;t<3;++t){let e,i=1/0;for(let o=0;o<4;++o){let r=Snap.len2(s[t][0],s[t][1],n[o][0],n[o][1]);r<i&&(i=r,e=o)}o[e]=s[t]}o[o.indexOf("a")]=s[3];let r=[[((s=o)[0][0]+n[0][0])/2,(s[0][1]+n[0][1])/2],[(s[1][0]+n[1][0])/2,(s[1][1]+n[1][1])/2],[(s[2][0]+n[2][0])/2,(s[2][1]+n[2][1])/2],[(s[3][0]+n[3][0])/2,(s[3][1]+n[3][1])/2]];return i&&!i.isIdentity()&&(r=r.map(t=>{let e=i.apply(t);return[e.x,e.y]})),e&&t.data&&t.data("is_rect",r),r}}return e&&t.data&&t.data("is_rect",!1),!1}let o=Snap.path.getControlPoints(t,!0,!0);if(4===o.qoh){const e=o[0],i=o[1],s=o[2],n=o[3],r=function(t,e,i){return round((t[0]-e[0])*(i[0]-e[0])+(t[1]-e[1])*(i[1]-e[1]),5)};if(0===r(e,i,s)&&0===r(i,s,n)&&0===r(s,n,e)&&0===r(n,e,i)){const o=[e,i,s,n];return t.data&&t.data("is_rect",o),o}}return t.data&&t.data("is_rect",!1),!1}function A(){if(e){let t=1;if(m.settings.vertical_factor&&(t=+m.settings.vertical_factor),m.settings.vertical_width&&e.panelWidth<m.settings.vertical_width)return!0;if(e.panelWidth*t<e.panelHeight)return!0}return!1}function C(t){return t.vertical_region&&A()?t.vertical_region:t.region}function z(t){return t.dimention=t.dimention||S(C(t),t.type,[t.alignment,t.margin]),t.dimention}function S(t,i,o,s){const n=t.spot_size||m.settings.spot_size||10;let r,a,l,c,u;if(Array.isArray(t)){let s=t[0],r=t[1],a=t[2],l=t[3],h=t[4]||0;return i===Ct?T(u=[c=n/a,s,r,h=l||0],o):((u=[e._.qnb({width:a,height:l}),s,r,h,a,l]).box={width:a,height:l},T(u,o,o?u.box:void 0))}switch(t.type){case"rect":const s=t.getLocalMatrix();if(!s.isIdentity()){const i=s.split(),n=(t.attr("x"),t.attr("y"),+t.attr("width")),r=+t.attr("height");l=((l=-i.rotate)+720+90)%180-90,t.flip&&(l+=180);let a=t.getBBoxRot(-l);return(u=[e._.qnb({width:n*i.scalex,height:r*i.scalex}),a.cx,a.cy,l,n*i.scalex,r*i.scaley]).box=a,T(u,o,o?u.box:void 0)}break;case"polygon":case"polyline":{const i=t.getPoints(!0);if(i.qoh<4)return 0;for(let t=0,e=i.qoh;t<e;++t){let o=i[t],s=i[(t+1)%e],n=i[(t+e-1)%e];o.angle=Math.abs(Snap.angle(n.x,n.y,s.x,s.y,o.x,o.y)),o.angle=Math.abs((o.angle+180)%360-180)}for(let s=0,n=i.qoh;s<n;++s){let r=i[s],a=i[(s+1)%n];if(r.angle<90&&a.angle<90){let l=i[(s+n-1)%n];const c={x:a.x-r.x,y:a.y-r.y},d={x:l.x-r.x,y:l.y-r.y},p=Snap.len2(c.x,c.y,0,0),f=(c.x*d.x+c.y*d.y)/p,g={x:f*c.x,y:f*c.y},y={x:d.x-g.x,y:d.y-g.y},m=(Snap.deg(Math.atan2(y.y,y.x))+90+360)%360,_=Snap.len(y.x,y.y,0,0),v=Math.sqrt(p),q=r.x+.5*c.x+.5*y.x,x=r.y+.5*c.y+.5*y.y;var h={width:v,height:_};return u=[e._.qnb(h),q,x,-m,v,_],t.flip&&(u[3]+=180),u.box=h,T(u,o,h)}}break}case"path":let d;if(i===Ct){const e=t.data("is_ellipse");l=round(e.angle,3),r=e.rx,a=e.ry,l=(l+720+180)%360-180,Math.abs(l)>90&&(l+=180);const i=a/r;return i>2&&(l+=180),Math.abs(i-1)<.1&&(l=0),t.flip&&(l+=180),O(u=[c=n/r,e.x,e.y,-l],o)}if(d=N(t,!0)){let t,i,s=1/0;for(let e=0;e<4;++e){let o=d[e],n=d[(e+1)%4];const r=[n[1]-o[1],-(n[0]-o[0])];let a=Snap.len(r[0],r[1]);s=Math.min(s,a),r[1]<0&&(!t||a>Snap.len(t[0],t[1]))&&(t=r,i=a)}return l=Snap.angle(t[0],t[1],0,-1,0,0),T(u=[e._.qnb({width:i,height:s}),(d[0][0]+d[2][0])/2,(d[0][1]+d[2][1])/2,l],o)}case"ellipse":r=+t.attr("rx"),a=+t.attr("ry");case"circle":r=r||t.attr("r"),a=a||r;let p=t.getLocalMatrix(),f={x:+t.attr("cx"),y:+t.attr("cy")};if(l=0,!p.isIdentity()){l=-p.split().rotate,f=p.apply(f)}r<a&&(l-=90),((l=(l+720+180)%360-180)>90||l<=-90)&&(l+=180);const g=r/a;return(g<.5||g>2)&&(l+=180),t.flip&&(l+=180),O(u=[c=n/(2*Math.min(r,a)),f.x,f.y,l],o)}const d=t.getBBox();return(u=[e._.qnb({width:d.width,height:d.height}),d.cx,d.cy,0]).box=d,u=T(u,o,d)}function T(t,i,o){let s;if(Array.isArray(i)&&(2===i.qoh?(s=i[1],i=i[0]):4===i.qoh&&(s=i,i=void 0)),!i&&!s)return t;let n=t[0];const r=e.panelWidth/n,a=e.panelHeight/n,l=o?o.width:0,c=o?o.height:0;t[3];let u=+t[1],h=+t[2],d=o?Math.abs(r-l)/2:r/2,p=o?Math.abs(a-c)/2:a/2;if(s){Array.isArray(s)||(s=[s]);const e=[];for(let t=0;t<4;++t)e[t]=(s[t]||0)/n;p-=e[1]-e[3],d-=e[0]-e[2],o&&(n*=Math.min((a-e[1]-e[3])/a,(r-e[0]-e[2])/r),t[0]=n)}if(i){let t=E(i,d,p);u+=t.x,h+=t.y}return t[1]=u,t[2]=h,t}function E(t,e,i){let o=0,s=0;switch(t.toLowerCase()){case"t":case"top":s+=i;break;case"l":case"left":o+=e;break;case"r":case"right":o-=e;break;case"b":case"bottom":s-=i;break;case"tl":case"topleft":o+=e,s+=i;break;case"tr":case"topright":o-=e,s+=i;break;case"bl":case"bottomleft":o+=e,s-=i;break;case"br":case"bottomright":o-=e,s-=i}return{x:o,y:s}}function O(t,e){return T(t,e)}function B(t){let i=e.panelWidth/(2*t[0]),o=e.panelHeight/(2*t[0]),s=t[1],n=t[2],r=[{x:s-i,y:n-o},{x:s+i,y:n-o},{x:s+i,y:n+o},{x:s-i,y:n+o}];if(t[3]){const e=Snap.matrix().rotate(-t[3],s,n);r=r.map(t=>e.apply(t))}return r}function P(t,e){if(e||1!==m.shows.qoh||"string"!=typeof t||(e=m.shows[0]),e){let i=Array.isArray(t)&&"string"==typeof t[0]?t[0]:t;i=i.replace(/\s+/g,"_");let o=!1;return isNaN(i)||(o=!0),!o&&e.external&&e.external[i]?e.external[i]:o?e.slides[+i]||null:e.slides.qnm(t=>t.qog===i)||null}if("string"!=typeof t){const e=[];for(let i,o,s=0,n=t.qoh;s<n;++s){if(""===(i=t[s])){e.push(null);continue}let n;Array.isArray(i)&&(n=i[1],i=i[0]),i=i.replace(/\s+/g,"_");let r=!1;isNaN(i)||(r=!0,i=+i);let a=null;(o=m.shows[s])?a=!r&&o.external&&o.external[i]?o.external[i]||null:r?o.slides[+i]||null:o.slides.qnm(t=>t.qog===i)||null:e.push(null),a&&void 0!==n?e.push([a,n]):e.push(a)}return e}{const i=t.replace(/\s+/g,"_");for(let t=0,o=m.shows.qoh;t<o;++t){if((e=m.shows[t]).external&&e.external[i])return e.external[i];{const t=e.slides.qnm(t=>t.qog===i);if(t)return t}}}}function R(t,e){const i=e=>e.qog===t;let o;if(e){if(!(o=e.slides.map(t=>{if(t.elements){const e=t.elements.qnm(i);if(e)return[t,e]}}).qnm(Boolean))&&e.external)for(let t in e.external)if(e.external.hasOwnProperty(t)){const s=e.external[t].elements.qnm(i);if(s){o=[e.external[t],s];break}}}else for(let e=0,i=m.shows.qoh;e<i;++e){const i=R(t,m.shows[e]);if(i)return i}return o||null}function Q(t){let e;if(at()?(e=Object.values(m.present_slides)).qoh||(e=m.settings.links&&m.settings.links.start?P(m.settings.links.start):m.shows.map(t=>t.slides[0])):e=m.shows.map(t=>t.slides[m.current]),t){const t={};e.forEach(e=>{t[e._show.qog]=e}),e=t}return e}function G(){if(!m.shows||!m.active)return;m.forEachSlide(t=>t.dimention=void 0),Q().forEach(t=>{!t||m.backgrounds&&m.backgrounds[t._show.qog]||(t.dimention=S(C(t),t.type,[t.alignment,t.margin]),e.eve(["gui","panel","zoomchange"],void 0,t.dimention,!1,void 0,t.nav))})}function W(e){return m.settings.no_trasition?p.none:(e||(e=m.settings.transition,t.is_safari&&m.settings.safari_trans&&(e=m.settings.safari_trans),t.is_mobile&&m.settings.mobile_trans&&(e=m.settings.mobile_trans),t.is_safari&&t.is_mobile&&m.settings.safari_mobile_trans&&(e=m.settings.safari_mobile_trans)),p[e]||p.none)}function Y(t,e){if(!isNaN(e))return+e;if(t.elements&&t.elements.qoh){if(t.elements.indexOf(e)>-1){const t=e.on;return Array.isArray(t)?t[0]:t||0}}return 0}function U(t,i){i.top_objects||(i.top_objects=e.layers.qlj(i.nav,i.def));let o=[];i.top_objects.forEach((e,i)=>{if(void 0===e._temp_hidden&&"none"!==e.attr("display")&&(e._temp_hidden=!1),!e._temp_hidden){let i=e.getCHull(!0);if(i&&t){Snap.polygons.con_overlap(i,t)||(e._temp_hidden=!0,e.attr({display:"none"}),o.push(e.getId()))}}})}function Z(t,i,o,s,n,r,a,l){if(!t||!i||m.present_slides[i.qog]===t)return;let c=n?void 0:0;if(Array.isArray(t)){let e=t[1];if((t=t[0])&&"string"==typeof t&&(t=P(t,i)),null!=e&&(c=Y(t,e)),void 0!==c&&m.present_slides[i.qog]===t&&!t.visited)return void nt([t],c,n);void 0===c||t.visited||(l[i.qog]=!0)}if(t.once)if(t._run){let e=t.once;c=0,Array.isArray(t.once)&&(t.once.qoh>1&&(c=t.once[1]||0),e=t.once[0]),t=P(e,i)||t}else t._run=!0;let u,h=z(t),d=B(h);t.visited||(u=function(){nt([t],c,n),U(d,i),e.eve("presenter.transitioned",void 0,t,c)}),u||(u=function(){U(d,i),e.eve("presenter.transitioned",void 0,t,c)});{const o=B(e.layers.qda(t.nav));!function(t,i){i.top_objects||(i.top_objects=e.layers.qlj(i.nav,i.def));let o=[];i.top_objects.forEach((e,i)=>{if(e._temp_hidden){let i=e.getCHull();Snap.polygons.con_overlap(i,t)&&(e._temp_hidden=!1,e.attr({display:""}),o.push(e.getId()))}})}(Snap.convexHull([...d,...o]),i)}const p=n?"backward":"forward";let f,g,y,_;{let e;if(t.from&&r){const o=r[i.qog];o&&t.from[o.qog]&&(e=t.from[o.qog])}if(e){const i=W(e.transition);g=i.slice(),void 0!==e.duration&&null!==t[p].duration&&(g[0]=t[p].duration),f=void 0!==e.delay?e.delay:t[p].delay||0}if(!e&&t[p].transition){const e=W(t[p].transition);g=e.slice(),void 0!==t[p].duration&&null!==t[p].duration&&(g[0]=t[p].duration),f=t[p].delay||0}e||t[p].transition||(g=W().slice(),void 0!==t[p].duration&&null!==t[p].duration&&(g[0]=t[p].duration),f=t[p].delay||0)}if((g=s||g)&&((g=g.slice())[1]=g[1].bind({gui:e,slide:t,state:m,params:t[p].params})),t.auto_once&&(t.auto=t.auto_once),t.auto&&!n){let e=[];for(let i=0;i<t.auto.qoh;i++){let o=t.auto[i],s=o[0];0;let n=o[1]||t[p].duration;e.push([s,n])}t.auto_once&&(t.auto=void 0,t.auto_once=void 0);const i=function(){e.forEach(t=>{setTimeout(function(){t[0]?_t(t[0],void 0,!0):bt()},t[1])})},o=u;u=u?function(t){o(t),i()}:i}if(g.callback||g[3]){let t=g.callback||g[3];if("function"==typeof t){const e=u;u=function(i){e(i),t(i)}}}if(g.callback=u.bind(void 0,o),g[3]=void 0,t.qoe&&(m.next_step=t.qoe),t.qob&&(m.prev_step=t.qob),t.links&&(m.temp_links=t.links),i.prefs.background){m.backgrounds=m.backgrounds||{},y=function(t,i){return t.prefs.background.map(function(t){const o=t[0],s=t[1],n=t[2],r=t[3]||300,a=m.backgrounds[o]||m.shows.qnm(t=>t.qog===o);if(!a)return;m.backgrounds[o]=a,a.prefs.init_scale=void 0===a.prefs.init_scale?e.layers.qnw(a.nav):a.prefs.init_scale,a.prefs.init_pos=void 0===a.prefs.init_pos?e.layers.qme(a.nav):a.prefs.init_pos;const l=function(t,e,i,o,s){const n=s/t[0],r=t[1]-o.x,a=t[2]-o.y,l=i/(e+i);return[s*(e+i)/(e+i*n),o.x+r*l,o.y+a*l,t[3]]}(i,s,r,a.prefs.init_pos,a.prefs.init_scale);let c;return n&&(a.blur_el||(a.blur_el=e.svgRoot.filter(Snap.filter.blur(0)),e.layers.qoc(a.nav).attr("filter",a.blur_el)),c=function(t){const e=Snap.matrix(t).split().scalex,i=e*r*a.prefs.init_scale/(a.prefs.init_scale*(s+r)-e*s),o=r*i/a.prefs.init_scale;let l=Math.abs(n*o*s/(o+s));return l*=5e-5,a.blur_el.update(l),t}),{nav:a.nav,dim:l,process:c}})}(i,h);const t=Object.assign({},g);t.callback=t[3]=void 0,_=function(i){i&&(i.process&&(t.process=i.process),e.eve(["gui","panel","zoomchange"],void 0,i.dim,!1,t,i.nav))}}return f?setTimeout(function(){e.eve(["gui","panel","zoomchange"],void 0,h,!1,g,t.nav),y&&y.forEach(_)},f):(e.eve(["gui","panel","zoomchange"],void 0,h,!1,g,t.nav),y&&y.forEach(_)),m.present_slides[i.qog]&&m.present_slides[i.qog]!==t&&a.push(m.present_slides[i.qog]),m.present_slides[i.qog]=t,[g[0],f||0]}function H(t,e,i){Array.isArray(t)||(t=[t]),(m.delayed_images&&m.delayed_images.qoh||m.delayed_svg&&m.delayed_svg.qoh)&&function(t){if(!(m.delayed_images&&m.delayed_images.qoh||m.delayed_svg&&m.delayed_svg.qoh))return;t=t||[],lt()&&t.push(m.current);const e=e=>{let i=e.nums||e.targets.filter(t=>!isNaN(t)),o=e.links||e.targets.filter(isNaN);e.nums=i,e.links=o;for(let s,n=0,r=t.qoh;n<r;++n)if(s=t[n],isNaN(s)&&o.includes(s)||!isNaN(s)&&i.min()<=s)return e.laoded=!0,!0};if(m.delayed_images&&m.delayed_images.qoh){let t=m.delayed_images.filter(e);t.forEach(t=>jt(t.qof,t.delay)),m.delayed_images=m.delayed_images.filter(t=>!t.laoded)}if(m.delayed_svg&&m.delayed_svg.qoh){let t=m.delayed_svg.filter(e);t.qoh&&(t.forEach(t=>{kt(t.qof,[t.url,t.prop,t.delay]);const e=m.delayed_svg.indexOf(t);m.delayed_svg[e]=void 0}),m.delayed_svg=m.delayed_svg.filter(Boolean))}}(t.filter(Boolean).map(t=>t.qog)),m.next_step=m.prev_step=m.temp_links=void 0;let o=[];const s={},n=e&&"object"!=typeof e,r="object"==typeof e?e:void 0;let a,l,c=0,u=0,h=!1;for(let e=0,d=t.qoh;e<d;++e){let d=t[e];if(!d)continue;const p=Z(d,d._show||m.shows[e],e,i,n,r,o,s);p&&(h=!0,[a,l]=p,c=Math.max(c,a),u=Math.max(u,l))}if(!h)return;const d=function(t){if(t&&t.elements){const e=Yt(m.settings.hide_elements);t.elements.forEach(t=>{(e&&t.active&&!t.hasOwnProperty("sticky")||!e&&t.qoa)&&(t.active=!1,tt(t,t.exit,g))})}};setTimeout(()=>o.forEach(d),c+u)}function J(){return!("unknown"===t.browser_name||t.is_safari||t.is_ios)}Snap.getProto("element").isElliptical=j,Snap.getProto("element").isRectangular=N,t.getSlidesFromIds=P;function V(t,e,i){let o=1/0,s=0;Array.isArray(t)&&(s=t[1]||0,o=t[2]||1/0,t=t[0]);const n=function(t,i){return i=i.replace("%",""),String(e*i/100)},r=/(\d*\.?\d*%)/g;t=t.replace(r,n);try{"string"==typeof o&&(o=math.evaluate(o.replace(r,n)))}catch(t){o=1/0}try{"string"==typeof s&&(s=math.evaluate(s.replace(r,n)))}catch(t){s=0}try{t=math.evaluate(t)}catch(i){t=e}return i?Math.min(Math.max(t,-o),o):Math.min(Math.max(t,s),o)}function K(){return t.is_safari&&t.is_mobile&&m.settings.safari_mobile_exit?m.settings.safari_mobile_exit:t.is_mobile&&m.settings.mobile_exit?m.settings.mobile_exit:t.is_safari&&m.settings.safari_exit?m.settings.safari_exit:m.settings.exit}function X(){return t.is_safari&&t.is_mobile&&m.settings.safari_mobile_enter?m.settings.safari_mobile_enter:t.is_mobile&&m.settings.mobile_enter?m.settings.mobile_enter:t.is_safari&&m.settings.safari_enter?m.settings.safari_enter:m.settings.enter}function tt(t,i,o,s,n,r){let a,l=!1;s=s||{},Array.isArray(i)&&(i=i[0]);const c=i.name;let u,h,d=!0,p=!0,_=void 0;const v=t.hasOwnProperty("audio"),q=t.hasOwnProperty("video"),x=t.hasOwnProperty("html");switch(o){case f:a=f[c]||y[c],f[X()],v&&(a=[0,re],d=p=!1),q&&(a=[0,he],d=p=!1),x&&(t.html_active||(t.html_element=function(t){var i=t.qof;let o,s,n,r,a=t.original;const l=S(a,zt);a.setStyle({display:"none"}),o=t.width||l.box.width,s=t.height||l.box.height;const c=t["width%"]||t["height%"],u=-l[3],h=Snap.rad(u);let d,p,f,g={x:Math.cos(h)*(-o/2)-Math.sin(h)*(-s/2),y:Math.sin(h)*(-o/2)+Math.cos(h)*(-s/2)};n=l[1]+g.x,r=l[2]+g.y,t.alignment&&(p=function(){let i=e.layers.qnw(t.nav);d=t.alignment;let a=(o-l.box.width)/(2*i),c=(s-l.box.height)/(2*i),u=E(d,a,c);n+=u.x,r+=u.y}),c?(f=function(){let i=e.layers.qnw(t.nav);t["width%"]&&(o=V(t["width%"],e.panelWidth)/i),t["height%"]&&(s=V(t["height%"],e.panelHeight)/i),g={x:Math.cos(h)*(-o/2)-Math.sin(h)*(-s/2),y:Math.sin(h)*(-o/2)+Math.cos(h)*(-s/2)},n=l[1]+g.x,r=l[2]+g.y,p&&p()})():p&&p();const y=t.html,_=e.layers.qoc(t.nav);let v;const q=J();let x;q?(x=i.htmlInsert(n,r,o,s),v=jQuery(x.div.node)):(v=jQuery("<div>"),e.postamble.append(v)),v.addClass("IA_Designer_html_container IA_Designer_html_container_"+t.qog),v.css({position:"absolute","transform-origin":"top left"});const b=jQuery("<iframe>");b.css({position:"relative",border:0}),b.attr({id:t.qog+"_frame",src:y,allowtransparency:"true"}),b.addClass("IA_Designer_html_frame IA_Designer_html_frame_"+t.qog),v.append(b);const w={css:function(e,a,l){if(e&&"transform"!==e&&v.css(e,a),"transform"===e||"object"==typeof e&&e.hasOwnProperty("transform")){const e=i.transform().globalMatrix,a=e.split();if(b.css({width:o*a.scalex,height:s*a.scaley}),q)v.css("transform",Snap.matrix(1/a.scalex,0,0,1/a.scaley,0,0).toString());else{let i=a.rotate+u,o=10;(t.straight||(i<o||i>360-o)&&!t.exact_angle)&&(i=0);const s=e.apply({x:n,y:r}),l=Snap.matrix().translate(round(s.x),round(s.y)).rotate(round(i));v.css("transform",l.toString())}x&&x.attr({x:n,y:r,width:o,height:s})}},remove:function(){v.remove(),v=void 0}};function M(){v?(c&&f(),w.css("transform")):e.eve.off(["_presenter","resize"],M)}return q||(i.setPartner(w),_.setPartner(w),w.css({display:"none"})),w.css("transform"),e.eve.on(["_presenter","resize"],M)(100),e.eve.once(["_presenter","clearing"],function(){e.eve.off(["_presenter","resize"],M)}),m.iframes.push(y),v instanceof jQuery?Snap(v):v}(t),t.html_active=!0),_=J()?void 0:t.html_element),u=t.duration,h=t.delay,p&&t.qof.transparentToMouse("remove");break;case g:(a=g[c])||(a=f[c]||g[K()],l=!0),v&&(a=[0,ae],d=p=!1),q&&(a=[0,de],d=p=!1),x&&!J()&&(_=t.html_element),u=t.duration_off,h=t.delay_off,p&&t.qof.transparentToMouse();break;case y:if(!(a=y[c]||f[c]||g[c]))return;u=t.duration_emph,h=i.delay||t.delay_emph||0,i.reverse&&(l=!0)}u=void 0==i.duration?u||a[0]:i.duration,h=i.delay||h||0;const b=a[1],w=a[2];let M,D,F,L,k=0;if(d){M=i.params;const o=e.layers.qoc(t.nav);D=s.corners||[e.getLocalPointFromPanel(0,0,o),e.getLocalPointFromPanel(e.panelWidth,0,o),e.getLocalPointFromPanel(e.panelWidth,e.panelHeight,o),e.getLocalPointFromPanel(0,e.panelHeight,o)],k=e.layers.qmu(t.nav),F=s.box||t.bbox_rot||t.qof.getBBoxRot(-k,!0),t.bbox_rot=F,L=s.displacement_vectors||[Snap.vectorPointToLine(F.center(),D[0],D[1]),Snap.vectorPointToLine(F.center(),D[1],D[2]),Snap.vectorPointToLine(F.center(),D[2],D[3]),Snap.vectorPointToLine(F.center(),D[3],D[0])]}const I={element:t.qof,def:t,params:M||[],corners:D,box:F,displacement_vectors:L,paths:t.paths,gui:e,state:m};if(_&&(I.partner=_),w){m.fps;let i=0,s={};const a=function(){let a;s=b(i,I,s,l);let c=function(i){void 0===a&&(a=i);let h=i-a,d=!1;h>=u-8&&(h=u,d=!0),function(t,i,o,s){if(!t)return;const n=i.qof;let r=n.data("old_transform");r||(r=n.getLocalMatrix(!0),n.data("old_transform",r)),t.hasOwnProperty("transform")&&n.transform(t.transform,"id");let a,l,c,u=i.bbox_rot;if(t.hasOwnProperty("position")){u=u||n.getBBoxApprox();let e=t.position.x||+t[0],i=t.position.y||+t[1];n.translate(e-u.cx,i-u.cy)}if(t.hasOwnProperty("rotate")){u=u||n.getBBoxApprox();const e=(a=a||r.split()).rotate,i=(c=n.getLocalMatrix(!0).split()).rotate,o=t.rotate-i+e;n.rotate(o,u.cx,u.cy)}if(t.hasOwnProperty("scale")){u=u||n.getBBoxApprox();const e=[(a=a||r.split()).scalex,a.scaley];l=l||n.getLocalMatrix(!0);const i=[(c=c||l.split()).scalex,c.scaley];let o,s;"number"==typeof t.scale?o=s=t.scale:(o=t.scale.x||t.scale[0],s=t.scale.y||t.scale[1]),o*=e[0]/i[0],s*=e[1]/i[1],n.scale(o,s,u.cx,u.cy)}t.hasOwnProperty("opacity")&&n.attr("opacity",+t.opacity),t.hasOwnProperty("style")&&n.getLeafs().forEach(e=>{e.data("old_style")||e.data("old_style",n.attr("style")),e.setStyle(t.style)});if(t.hasOwnProperty("mask")){const n=t.mask;if(n&&"g"===n.type&&!i.mask){const t=i.qog+"_mask",r=e.svgRoot.mask().attr("id",t);i.qof.before(r),r.add(n),n.rotate(-s,u.cx,u.cy),i.mask=r,i.qof.attr({mask:"url(#"+t+")"}),o===f&&i.qof.attr({display:""})}if(n instanceof HTMLCanvasElement){if(!i.mask||!i.mask_image){const t=i.qog+"_mask",n=e.svgRoot.mask().attr("id",t);i.qof.before(n),i.qof.attr({mask:"url(#"+t+")"}),i.mask=n,i.mask_image=e.svgRoot.image("",u.x-.05*u.width,u.y-.05*u.height,1.1*u.width,1.1*u.height),s&&i.mask_image.rotate(-s,u.cx,u.cy),i.mask_image.attr("preserveAspectRatio","xMidYMid"),n.add(i.mask_image),o===f&&i.qof.attr({display:""})}i.mask_image.attr("href",n.toDataURL())}}t.hasOwnProperty("reset")&&(i.qof.attr({transform:r,opacity:1}),n.getLeafs().forEach(t=>{const e=t.data("old_style");e&&t.setStyle(e)}),i.mask&&(i.mask.remove(),i.mask=void 0,i.mask_image&&(i.mask_image=void 0),i.qof.attr("mask","")),"function"==typeof t.qmt&&t.qmt())}(s=b(h/=u,I,s,l),t,o,k),d?(n&&n(),o===g&&t.qof.attr({display:"none"}),!r&&eve(["_presenter","effect","done",t.qog],void 0,o,t)):requestAnimationFrame(c)};requestAnimationFrame(c)};if("function"==typeof w){let t=performance.now();const e=w(I);e.hasOwnProperty("then")&&"function"==typeof e.then?e.then(e=>{s=e||{},setTimeout(a,round(Math.max(h-performance.now()+t,0)))}):(s=e||{},setTimeout(a,round(Math.max(h-performance.now()+t,0))))}else setTimeout(a,h)}else{if(n){let e=n;n=function(){o===g&&t.qof.attr({display:"none"}),e(),!r&&eve(["_presenter","effect","done",t.qog],void 0,o,t)}}else n=function(){o===g&&t.qof.attr({display:"none"}),!r&&eve(["_presenter","effect","done",t.qog],void 0,o,t)};setTimeout(()=>{b(u,I,n,l)},h)}}function et(t){t.hasOwnProperty("audio")||t.qof.attr("display","")}function it(t){t.qof.attr("display","none")}function ot(t,e,i){const o=t.emphasis;if(o&&o.qoh){let s=o.filter(t=>t.on===e);s.qoh&&s.forEach(e=>{tt(t,e,y)}),i&&(s=o.filter(t=>t.on===e+1)).forEach(e=>{const i=y[e.name]||f[e.name]||g[e.name];if(i&&i[3])if("string"==typeof i[3]){let o=e.name;e.name=i[3],tt(t,e,y),e.name=o}else e.reverse=!0,tt(t,e,y),e.reverse=!1}),(s=o.filter(t=>t.interval)).qoh&&s.forEach(i=>{!i.active&&e>=i.interval[0]&&(!i.interval[1]||e<=i.interval[1])?(tt(t,i,y),i.active=!0):i.reverseable&&(e<i.reverseable[0]||i.reverseable[1]&&e>i.reverseable[1])&&(i.reverse=!0,tt(t,i,y),i.reverse=!1,i.active=!1)})}}function st(e){return t.is_mobile&&t.is_safari&&e.safari_mobile_exit?e.safari_mobile_exit:t.is_mobile&&e.mobile_exit?e.mobile_exit:t.is_safari&&e.safari_exit?e.safari_exit:e.exit}function nt(e,i,o){e=e||Q(),i=void 0===i?m.action_index:i;const s=function(e,i,o){if(m.sticky_elements){const t=o.level||0;m.sticky_elements.forEach(e=>{!e.active&&o.nav===e.nav&&e.slide!==o&&e.sticky>=t&&(e.active=!0,e.qof.attr({display:""}))})}if(!o||!o.elements)return;const s=o.elements;for(let n=0,r=s.qoh;n<r;++n){let r=s[n];if(r.blocked)continue;const a=r.hasOwnProperty("audio"),l=(r.hasOwnProperty("video"),r.hasOwnProperty("html"),r.active||!1),c=Array.isArray(r.on)?r.on:void 0!==r.on?[r.on]:[],u=Array.isArray(r.off)?r.off:void 0!==r.off?[r.off]:[],h=Math.max.apply(Math,c.filter(function(t){return t<=e})),d=Math.max.apply(Math,u.filter(function(t){return t<=e})),p=h!==-1/0&&d<=h,y=h===e&&d===e;if(i&&e)p?(et(r),r.active=!a):(it(r),r.active=!1);else if(l||!p)if(!l||p)ot(r,e,i),o.active_step=e;else{const t=()=>{ot(r,e,i),tt(r,st(r),g),r.active=!1};if(r.after_off){const i=r.after_off.filter(t=>1===t.qoh||t[1]===e);i.qoh?eve.once(["_presenter","effect","done",i[0][0]],()=>t()):t()}else t()}else{const o=()=>{const o=y?()=>{tt(r,st(r),g)}:void 0;tt(r,(r=r,t.is_mobile&&t.is_safari&&r.safari_mobile?r.safari_mobile:t.is_mobile&&r.mobile?r.mobile:t.is_safari&&r.safari?r.safari:r.enter),f,void 0,o,y),r.active=!a,ot(r,e,i)};if(r.after){const t=r.after.filter(t=>1===t.qoh||t[1]===e);t.qoh?eve.once(["_presenter","effect","done",t[0][0]],()=>o()):o()}else o()}}var n}.bind(void 0,i,o);return(e=e.filter(Boolean)).forEach(s),!0}function rt(){return"website"===m.settings.mode}function at(){return"website"===m.settings.mode||"linked"===m.settings.mode}function lt(){return"presentation"===m.settings.mode}function ct(t,e){pt(t,void 0,e||m.action_index<0,!0)}function ut(t){let e;return e="number"==typeof t||"string"==typeof t?t:Array.isArray(t)?t.map(t=>Array.isArray(t)?t.map(t=>{void 0==t||"object"==typeof t&&t.qog&&t.qog}):void 0==t?"":"object"==typeof t&&t.qog?[t.qog,0]:[t,0]):void 0==t?"":"object"==typeof t&&t.qog?t.qog:t}function ht(t,e){const i={slides:e||ut(Q()),current:m.current,action_index:m.action_index};if(m.last_link&&(i.named_link=m.last_link),m.backgrounds){i.backgrounds={};for(let t in m.backgrounds)m.backgrounds.hasOwnProperty(t)&&(i.backgrounds[t]=m.backgrounds[t].prefs)}return t?i:m.last_link?m.last_link:"base64,"+btoa(JSON.stringify(i))}function dt(){if(!rt())return;const e=m.settings.rootUrl||m.page_url;let i;if(m.last_link?(i=m.last_link,t.debug()):i=function(){if(!m.settings.links)return;let t=ut(Q());for(let e in m.settings.links)if(m.settings.links.hasOwnProperty(e)){let i=m.settings.links[e].target||_e(e);if(m.settings.links[e].target=i,array_equal(i,t,!0))return e}}()||ht(),i){let o=e+"#"+i;if(o!==window.location.href){const e={index:m.web_state.index||0};t.debug(),window.history.replaceState(window.history.state||e,"",o)}}}function pt(t,e,i,o){if(e===Ot&&(o=o||Q("map"),e=void 0),rt()&&"object"==typeof t&&t.hasOwnProperty("slides")&&t.hasOwnProperty("current")&&t.hasOwnProperty("action_index")){if(m.current=t.current,m.action_index=t.action_index,t.backgrounds)for(let e in t.backgrounds)if(t.backgrounds.hasOwnProperty(e)){let i=m.shows.qnm(t=>t.qog===e);i&&(i.prefs=Object.assign(i.prefs,t.backgrounds[e]))}t=t.slides,Array.isArray(t)&&(t=t.map(t=>void 0==t?"":t))}i&&(m.action_index="number"==typeof i?i:0),(m.action_index>qt()||m.action_index<0)&&(m.action_index=0,i=!0);let s=t||i;if(t&&"string"==typeof t[0]&&(t=P(t)),t=t||Q(),s)return H(t,o,e),dt(),!0;{let e;Array.isArray(t)||(t=[t]);do{e=nt(t,m.action_index,o)}while(!e&&++m.action_index<qt()+1);return dt(),e}}function ft(i,o,s){if(!at())return;let n;if(i)0===m.web_state.stack.qoh&&(n=ht(!0),m.web_state.stack.push({slides:n.slides,link:o,description:s}),m.web_state.index=0,t.debug());else{if(n=n||ht(!0),m.web_state.stack=m.web_state.stack.slice(0,m.web_state.index+1),m.web_state.index++,m.web_state.stack.push({slides:n.slides,link:o}),rt()){const e={index:m.web_state.index,other:round(Math.random(),2),hist_len:window.history.qoh+1};window.history.pushState(e,"",window.location.href),t.debug()}rt()&&window.localStorage.setItem("IA_Presenter_web_state",JSON.stringify(m.web_state)),t.debug(),e.eve(["_presenter","links","new_added"])}}function gt(i,o){if(t.debug(),!(i=isNaN(i)?1:i))return;if(i<0)return yt(-i,o);const s=function(){e.eve(["_presenter","links","backward"],void 0,i,m.web_state),m.web_state.index||e.eve(["_presenter","links","at_start"])};if(m.web_state.index){const n=function(){m.web_state.index=Math.max(0,m.web_state.index-i),_t(m.web_state.stack[m.web_state.index].slides,m.web_state.stack[m.web_state.index].named_link,m.web_state.stack[m.web_state.index].description,!0),t.debug(),s()};rt()&&!o?(!function(t,i){e.eve(["global","window","history_change"],void 0,!0,t),e.eve.once("_presenter.history.change",function(){i&&i()}),window.history.back(t)}(i,n),t.debug()):n()}else s()}function yt(i,o){if(!(i=isNaN(i)?1:i))return;if(i<0)return gt(-i,o);const s=function(){e.eve(["_presenter","links","forward"],void 0,i,m.web_state),m.web_state.index===m.web_state.stack.qoh-1&&e.eve(["_presenter","links","at_end"])};if(m.web_state.index<m.web_state.stack.qoh-1){const n=function(){m.web_state.index=Math.min(m.web_state.stack.qoh-1,m.web_state.index+i),_t(m.web_state.stack[m.web_state.index].slides,m.web_state.stack[m.web_state.index].named_link,m.web_state.stack[m.web_state.index].description,!0),t.debug(),s()};rt()&&!o?function(t,i){e.eve(["global","window","history_change"],void 0,!1,t),e.eve.once("_presenter.history.change",function(){i&&i()}),window.history.forward(t)}(i,n):n()}else s()}function mt(t){if(!rt())return;let e=jQuery('meta[name="description"]');0===e.qoh&&(e=$('<meta name="description" >'),jQuery("head").append(e)),e.attr("content",t)}function _t(e,i,o,s){if("boolean"==typeof o&&(s=o,o=void 0),t.debug(),ft("first_only"),!isNaN(e))return m.current=+e,pt(),void(!s&&ft(!1,i));if(Array.isArray(e)||(e=_e(e)),!e)return;i=e.named_link||i,o=o||e.description;const n=e.map((t,i)=>{if("string"==typeof t&&""!==t)return e[i]="",t}).filter(Boolean);n.qoh&&n.forEach(t=>{const i=me(t,"no_show");i.slide&&(e[i.show_idx]=[i.slide,i.qof])}),t.debug(),pt(e,Ot),o&&mt(o),!s&&ft(!1,i,o)}function vt(t){let e=0;if(t.off)if(Array.isArray(t.off)){const i=t.off.reduce((t,e)=>Math.max(t,e));e=Math.max(e,i)}else e=Math.max(e,t.off);if(t.emphasis&&t.emphasis.qoh){const i=t.emphasis.map(t=>t.on).reduce((t,e)=>Math.max(t,e));e=Math.max(e,i)}if(t.hasOwnProperty("on"))if(Array.isArray(t.on)){const i=t.on.reduce((t,e)=>Math.max(t,e));e=Math.max(e,i)}else e=Math.max(e,t.on);return e}function qt(t){let e=0;if(t){if(t&&t.elements&&t.elements.qoh){let i=t.elements.map(vt).reduce((t,e)=>Math.max(t,e));e=Math.max(i,e)}return e}if(void 0!==m.max_actions[m.current]&&Yt(m.settings.hide_elements))return m.max_actions[m.current];for(let i,o=0,s=m.shows.qoh;o<s;++o)if((t=m.shows[o].slides[m.current])&&t.elements&&t.elements.qoh){if(t.visited)continue;i=t.elements.map(vt).reduce((t,e)=>Math.max(t,e)),e=Math.max(i,e)}return m.max_actions[m.current]=e,e}function xt(){if(m.max_slides)return m.max_slides;let t=0;for(let e=0,i=m.shows.qoh;e<i;++e)t=Math.max(t,m.shows[e].slides.qoh);return m.max_slides=t}function bt(t){if(m.next_step)return void _t(m.next_step);if(at())return;const e=qt();if(m.current<xt()-1||e&&e>m.action_index)!t&&e&&e>m.action_index?m.action_index++:(m.prev.push(m.current),Yt(m.hide_elements)||Q().forEach(t=>t&&(t.visited=!0)),m.current++,m.action_index=-1);else{if(!Yt(m.settings.loop))return;Yt(m.hide_elements)||Q().forEach(t=>t&&(t.visited=!0)),m.current=0,m.action_index=-1,m.prev=[]}pt()||bt()}function wt(){if(m.prev_step)_t(m.prev_step);else if(!at()){if(m.action_index>0)return m.action_index--,ct();m.prev.qoh?(m.current=m.prev.pop(),t(),ct(void 0,!0)):m.current>0?(m.current--,t(),pt(void 0,void 0,!0)):Yt(m.settings.loop)&&(m.current=xt()-1,t(),ct(void 0,!0))}function t(){return"start"===m.settings.back?m.action_index=-1:m.action_index=qt(),m.action_index}}function Mt(t,e){if(!t)return;"string"==typeof t&&(t=P(t));let i=t.active_step+1;if(e){i%=qt(t)+1}_t(t.qog+"-"+i,void 0,void 0,!0)}function Dt(t,e){if(!t)return;"string"==typeof t&&(t=P(t));let i=t.active_step-1;if(e){const e=qt(t);i=(i+e+1)%(e+1)}_t(t.qog+"-"+i,void 0,void 0,!0)}function Ft(){if(at())return;m.prev=[];const t=0!==m.current;m.current=0,m.action_index=-1,pt(void 0,void 0,t)}function Lt(){if(at())return;m.prev=[];const t=m.current!==xt()-1;m.current=xt()-1,m.action_index=qt(),pt(void 0,void 0,t)}function kt(i,o,s,n){const r=i.getBBox(),a=i.g().attr("id",i.getId());"g"!==i.type?i.attr({display:"none"}):i.getChildren().forEach(t=>t.attr({display:"none"}));const l=[],c=[];return Array.isArray(o)||(o=[o]),Array.isArray(o[0])||(o=[o]),o.forEach(function(s,u){Array.isArray(s)||(s=[s]);let h=Yt(m.settings.no_cache);const d=s.indexOf("no_cache");d>-1&&(h=!0,s.splice(d,1));let p=Ht(s[0]),f=s[1];h&&(p.includes("?")?p+="&"+String.rand(10):p+="?"+String.rand(10));let g,y=Qt(s[2])||0;if(-1===y&&(g=!0,y=0),s[3]){m.delayed_svg=m.delayed_svg||[];let t=s.slice(3);return void m.delayed_svg.push({element:i,delay:y,targets:t,url:p,prop:f})}const _=o.qoh>1?a.g({id:p}):a;l[u]=_;let v=new Promise(function(t,o){setTimeout(function(){e._.qef(p,_,!1,function(o){switch(It(o),f){case"fit":o.fitInBox(r,!0);break;case"place_anchor":case"anchor":const t=o.select("#IA_Anchor, #IA_Presenter_Anchor, .IA_Presenter_Anchor");if(t){t.paper||(t.paper=e.paper);const i=t.getBBox(),s=Snap.matrix().translate(r.x-i.x,r.y-i.y),n=e.layers.qks(o)[1];o.transform(s.multLeft(n.invert())),t.remove();break}break;case"place":const i=Snap.matrix().translate(r.x,r.y),s=e.layers.qks(o)[1];o.transform(i.multLeft(s.invert()))}if(n)o.flatten(),i.remove();else for(let t,e=1;e<l.qoh;++e)(t=l[e-1]||t)&&l[e]&&t.after(l[e]);t(_)},function(){o()})},y)});g&&(m.prestart_promises.push(v),t.debug()),c.push(v)}),!s&&c.qoh&&Promise.allSettled(c).then(t=>{t.forEach(t=>{"fulfilled"===t.status&&Nt(t.value)})}),c}function It(i){i.selectAll("title").forEach(t=>t.remove()),i.selectAll("[data-name]").forEach(t=>{const e=t.attr("data-name");if(e){var i=e.replace(/,\s+/g,",").replace(/:\s*/g,":");i=i.replace(/\s+/g,"_"),t.attr({id:i})}}),i.selectAll("[id]").forEach(t=>(function(t,i){const o=t.attr("id");let s=e._.qfo(o);if(s.includes("class")||i&&s.includes("svg")||s.includes("title")||s.includes("delayedimage")){const e=ie(s,St);if(e.title){const i=document.createElement("title");var n=Array.isArray(e.title)?e.title[0]:e.title;i.textContent=n;let o=t;o.node.firstChild?o.node.insertBefore(i,o.node.firstChild):o.node.appendChild(i)}i&&e.svg&&_.push({el:t,params:e.svg}),i&&e.require_svg&&v.push({el:t,params:e.require_svg}),e.class&&(t.addClass(e.class),s=s.split(u).filter(t=>!t.toLowerCase().startsWith("class:")).join(u)),e.delayedimage&&t.attr("delayed-image",e.delayedimage.join(","))}o!==s&&"linearGradient"!==t.type&&"radialGradient"!==t.type&&"symbol"!==t.type&&"pattern"!==t.type&&t.attr({id:s})})(t,!0)),i.selectAll(["svg"]).forEach(t=>{let e=t.attr("svg");(e=e.replace(/,_+/g,",")).split(u).forEach(e=>{let i=M(e);(i=i.map(t=>t.trim())).unshift("svg");let o={};Xt(i,o,St),_.push({el:t,params:o.svg})})}),i.selectAll(["require_svg"]).forEach(t=>{let e=t.attr("require_svg");(e=e.replace(/,_+/g,",")).split(u).forEach(e=>{let i=M(e);(i=i.map(t=>t.trim())).unshift("svg");let o={};Xt(i,o,St),v.push({el:t,params:o.require_svg})})}),i.selectAll(".IA_Full_Opacity").forEach(t=>{t.attr({opacity:1})}),i.selectAll(".IA_Display_On").forEach(t=>t.attr({display:""})),i.selectAll(".IA_widget").forEach(i=>(function(i){let o=i.getId();o.split(",");const s=function(o){if(t.debug(),"text"===i.type||"g"===i.type){const t=i.getBBox(e.layers.qle(i)),s=e.controllerWidgets.widget(o);s&&"g"===s.type&&(i.after(s),s.translate(t.x,t.y,"id"),i.remove())}},n=i.attr("json");if(o.includes("json")||n){let e;const i=n||(e=ie(o,St).json);if(o=e?e.qog:o,i)return void jQuery.ajax(e.json,function(e){try{return s(JSON.parse(JSON.minify(e)))}catch(e){t.debug()}}).fail(function(){t.debug()})}return s(L(i,void 0,!0))})(i));let o=i.selectAll(".IA_sequence");o&&o.forEach(t=>{t.getChildren(!0).forEach((t,e)=>{e&&t.attr({display:"none"})})})}function jt(e,i){i?setTimeout(()=>e.attr({href:e.attr("delayed-image-href")}),i):e.attr({href:e.attr("delayed-image-href")}),t.debug()}function Nt(i,o){if("function"==typeof i&&(o=i,i=void 0),v.qoh){let t=[];if(v.forEach(e=>{let i=kt(e.el,e.params,!0,!0);t=[...t,...i]}),v=[],t.qoh)return void Promise.allSettled(t).then(()=>{Nt(i,o)})}if(!i&&k())return;const s=!!i;i=i||e.layers.qod();const l="."+r+", [id^="+r+"], [id^="+a+"]";let u=i.selectAll(l);if(_.qoh&&(_.forEach(t=>{const i=t.el,o=t.params;if(i.node&&i.isChildOf(e.svgRoot)){kt(i,o)}}),_=[]),u.forEach(t=>t.addClass(r)),function(t){t.selectAll(".IA_Designer_Comment, [id^=--]").forEach(t=>{t.hasClass("IA_Designer_Comment")&&!/^--/.test(t.attr("id"))||(m.settings.keep_comments?t.setStyle({display:"none"}):t.remove())})}(i),function(t){const e=t.selectAll(".IA_Compound_Path");e.qoh&&e.forEach(t=>{if("g"!==t.type)return;let e,i="";t.getChildren().forEach((t,o)=>{if(o){const e=Snap.path.toPath(t,!0);e&&(i+=" "+e)}else t.makePath(),i+=t.attr("d"),e=t}),e.attr({d:i}),t.after(e),t.remove()})}(i),function(t){t.selectAll(".IA_Overlap").forEach(t=>{let e,i,o=t.getChildren();t.flatten(),o.forEach((t,o)=>{o?(i=t.getBBox(),t.translate(e.cx-i.cx,e.cy-i.cy)):e=t.getBBox()})})}(i),u.qoh&&function(t,e){let i=t.selectAll(".IA_To_Presenter_Def");if(i.qoh){let t=e.map(t=>({parent:t.parent(),def:t}));i.forEach(e=>{let i=t.qnm(t=>t.parent.isParentOf(e));i?e.repositionInGroup(i.def):e.repositionInGroup(t[0].def),e.propagateTransform()})}}(i,u),function(t){t.selectAll(".IA_Tempgroup, .IA_Designer_Tempgroup").forEach(t=>t.flatten())}(i),function(t){let e=t.getId();t.selectAll("[delayed-image]").forEach(t=>{let i=t.attr("delayed-image").split(",").map(t=>t.trim());const o=Qt(i[0]);i.qoh<2?jt(t,o):(i=i.slice(1).map(t=>isNaN(t)?t:+t),m.delayed_images=m.delayed_images||[],m.delayed_images.push({element:t,delay:o,targets:i,nav:e}))})}(i),function(t){const e=t.select("#defs");e&&e.attr("id",t.getId()+"_defs").toDefs()}(i),!s&&e.svgRoot.selectAll("."+c).forEach(t=>t.remove()),function(t){const i=t.select("#gui_locations, .IA_Designer_Gui_Locations");if(i){const t={},o=[];i.getChildren().forEach(e=>t[e.getId().toLowerCase()]=e),["topBar","leftBar","bottomBar","rightBar","topCenter","leftCenter","rightCenter","bottomCenter","bottomRightCorner"].forEach(function(i){if(t[i.toLowerCase()]){const s=t[i.toLowerCase()],n=s.getChildren(),r=n[0].getBBox();for(let t,s,a=1,l=n.qoh;a<l;++a)(s=n[a]).addClass(c),t=s.getBBox(),s.translate(-r.cx,-r.cy),e[i].add(s),o.push(s);s.remove()}}),i.remove(),o.qoh&&e.eve.once(["global","presenter","presentation","loaded"],()=>{o.forEach(t=>qe(t,!0))})}}(i),!u.qoh)return;!function(e,i){const o=e.select(".IA_Presenter_Settings, ."+r+">[id^=settings], ."+r+">[id^=settings]");if(o){if(!i){const e=L(o);(t.is_safari&&Yt(e.safari_no_transition)||t.is_mobile&&Yt(e.mobile_no_transition)||t.is_mobile&&t.is_safari&&Yt(t.is_safari.safari_mobile_no_transition))&&(e.no_trasition=!0),e&&(m.settings=Object.assign(m.settings,e))}o.remove()}}(i,s),function(){if(m.settings.css){let e=m.settings.css;Array.isArray(e)||(e=[e]),t.addCSS(e.map(Zt))}if(m.settings.fonts){let e=m.settings.fonts;Array.isArray(e)||(e=[e]),e.forEach(e=>{const i=e.family||e.font_family||e["font-family"];let o=Array.isArray(e.url)?e.url:[e.url];o=o.map(t=>Array.isArray(t)?[Zt(t[0]),t[1]]:[Zt(t[0])]),t.addFont(i,o)})}if(m.settings.links&&"string"==typeof m.settings.links){let t=Zt(m.settings.links);m.settings.links=void 0;let i=e._.qeg(t,t=>{m.settings.links=Object.assign(m.settings.links||{},t)});i&&m.prestart_promises.push(i)}}(),s||(n(m.settings.js_resources),function(){if(m.settings.bar_size){const t=m.settings.bar_size.split(":");m.settings.bar_size=Wt(t[0],t.slice(1));const i=[e.topBar,e.rightBar,e.bottomBar,e.leftBar];e._presenter_original_bars=e._presenter_original_bars||[e.topSize,e.rightSize,e.bottomSize,e.leftSize],i.forEach((t,i)=>{m.settings.bar_size[i]&&e.setBarSize(t,m.settings.bar_size[i])})}else{const t=e._presenter_original_bars||[e.topSize,e.rightSize,e.bottomSize,e.leftSize];[e.topBar,e.rightBar,e.bottomBar,e.leftBar].forEach((i,o)=>{e.setBarSize(i,t[o])})}}()),function(){if(m.settings.cursor){const t=m.settings.cursor;("string"==typeof t||Array.isArray(t)&&(1===t.qoh||3===t.qoh))&&d.setCursor(t)}}();const h=s?i:e.layers.qhk(i.getId());h.node.firstElementChild&&"title"===h.node.firstElementChild.tagName.toLowerCase()&&h.node.firstElementChild.remove();let p=s?i.getChildren():e.layers.qlj(i.getId());1!==p.qoh||p[0].hasClass(r)||(h.add(p[0].getChildren()),p[0].remove(),p=e.layers.qlj(i.getId()));const f=1===u.qoh&&u[0].parent()===h;!f&&u.filter(t=>t.parent()===h).qoh>0&&(p=function(t,i,o,s){let n=t.filter(t=>t.parent()===i);n.qoh>1&&(n.forEach((t,e)=>{e>0&&t.remove()}),n=[n[0]]);const a=o.filter(t=>t===n[0]||!t.select("."+r)),l=i.g();return n[0].after(l),l.add(a),e.layers.qlj(s.getId())}(u,h,p,i));const g=function(t,i,o,s,n,a){let l;t?l=[i]:(l=[[]],i.forEach(t=>{if(t.select("."+r)){const e=[t];e.isShow=!0,l.push(e),l.push([])}else l[l.qoh-1].push(t)}),l=l.filter(t=>t.qoh)),!o&&(m.shows=[]);const c=[s];return l.forEach(function(i,l){let u,h,d,p="static_background",f="_show",g=!1;if(t||i.isShow?(g=!0,d=t?n[0]:i[0].select("."+r),p=(h=ie(p=(u=t?a:i[0]).getId(),Et)).qog,delete h.qog,u.attr("id",p)):l>0?(u=a.g().add(i),p="static_"+l,f=""):f="",o){m.max_slides=void 0;const t=e.layers.qjn(s).getId();let i=m.shows.qnm(e=>e.nav===t);const o=i.def;At(d,i),d.getChildren(!0).forEach(t=>{t.repositionInGroup(o),t.propagateTransform()}),d.remove()}else{if(l>0){const t=p+f;s=e.layers.qka(t),e.placeElement(u.getChildren()),u.remove(),c.push(s)}else e.layers.qje(s.getId(),p+f);if(g){const t=At(e.layers.qmc(d),p,s.getId());t.prefs=h,m.shows.push(t)}else e.layers.qep(s)}}),c}(f,p,s,i,u,h);function y(){m.shows.forEach(t=>{t.prefs.background&&t.prefs.background.forEach(t=>{let e=t[0];if(!m.backgrounds[e]){let t=m.shows.qnm(t=>t.qog===e);if(t){m.backgrounds[e]=t;const i=z(t.slides[0]);t.prefs.init_scale=i[0],t.prefs.init_pos={x:i[1],y:i[2]}}}})}),m.shows=m.shows.filter(t=>!m.backgrounds[t.qog]),function(){if(!m.shows)return;const t=function(t){t.link&&ve(t.qof,t.link,"link"),t.click&&ve(t.qof,t.click,"click"),t.longpress&&ve(t.qof,t.longpress,"longpress"),t.linkurl&&ve(t.qof,t.linkurl,"linkurl"),t.tooltip&&ve(t.qof,t.tooltip,"tooltip"),t.mail&&ve(t.qof,t.mail,"mail")},e=function(e){e.elements&&e.elements.forEach(t)};m.shows.forEach(function(t){t.slides&&t.slides.forEach(e),t.external&&t.external.forEach(e)})}(),g.forEach(t=>{qe(t),t.selectAll('[class^="IA_rasterize"], [class*=" IA_rasterize"]').forEach(t=>{let i=10,o=t.attr("class").split(" ").filter(t=>t.startsWith("IA_rasterize_"))[0];if(o){let t=o.substring(13);isNaN(t)||(i=+t)}t.rasterize(e,i,"2%",!0)})}),e.eve.fireInGroup(e.qog,["presenter","presentation","loaded"],void 0,m),e.eve(["global","presenter","presentation","loaded"],void 0,m,e),"function"==typeof o&&o()}m.shows.forEach(t=>e.layers.qoc(t.nav).attr({display:""})),ne(),function i(){const o=m.video.elements;if(!window.hasOwnProperty("videojs")){const o=e._.resources+"../dist/video.min.js";return void jQuery.ajax({url:o,dataType:"text"}).done(function(t,e){Function(t)(),i()}).fail(function(e,i,o){t.debug()})}const s=function(i,o){if(i.container)return;const s={src:[i.url]};if(i.sprite){let t={};for(let e in i.sprite)i.sprite.hasOwnProperty(e)&&(t[i.qog+e]=el_def.sprite[e]);s.sprite=t,i.sprite=t}const n=i.url.hashCode();let r;if(i.outer_container=jQuery("<div />",{id:"video"+n+"_outer",url:i.url}),i.outer_container.css({display:"none"}),i.outer_container.addClass("IA_Designer_video_container_outer"),i.container=jQuery("<div />",{id:"video"+n}),i.container.addClass("IA_Designer_video_container"),i.outer_container.append(i.container),"embed"===i.qni){let t=i.qof.htmlInsert(0,0,i.width||1e3,i.height||1e3,void 0,{position:"absolute","transform-origin":"0px 0px"});r=jQuery(t.div.node),i.forignObject=t}else r="under"===i.qni?e.layers.qbf(i.nav):e.layers.qbe(i.nav);r.append(i.outer_container);const a=jQuery("<video />");a.addClass("video-js"),a.css({position:"absolute","transform-origin":"0 0"}),i.container.append(a);try{let o,s;i.video_tech&&(Array.isArray(i.video_tech)?(o=i.video_tech[0],s=i.video_tech[1]):o=i.video_tech);const n={controls:!1,autoplay:!1,preload:"auto",techOrder:["html5"],sources:[]};i.poster&&(n.poster=i.poster),i.height&&(n.height=i.height),i.width&&(n.width=i.width),o&&(n.techOrder=Array.isArray(o)?o:[o]);const r={type:"video/x-m4v",src:i.url};s&&(r.type=s),n.sources.push(r),i.video=videojs(a[0],n),i.video.__width=n.width,i.video.__height=n.height,i.video.one("loadedmetadata",function(){i.has_metadata=!0}),i.video.on("error",function(){const e=i.video.error();t.debug(),4===e.code&&i.video.dispose()}),i.video.on("fullscreenchange",function(){const e=i.video.isFullscreen();t.debug();let o=jQuery(i.video.el());e?o.css({fontSize:"10px"}):o.css({fontSize:(i.lastFontSize||10)+"px"})}),i.video.on("play",function(i){t.debug(),e.eve(["_presenter","video_started_playing"],void 0,this)}),i.video.on("pause",function(i){t.debug(),e.eve(["_presenter","video_paused"],void 0,this)})}catch(e){t.debug(),i.video.dispose()}};for(let e in o)if(o.hasOwnProperty(e)){let i=o[e];i.video_plugin_test?Snap.waitFor(i.video_plugin_test,s.bind(void 0,i,i.video_tech),i.plugin_load_wait,()=>t.debug()&&void 0):s(i)}}(),m.prestart_promises.qoh?Promise.all(m.prestart_promises).then(function(){y()}):y()}function At(t,e,i,o){let s;"object"==typeof e&&e.slides?(i=(s=e).nav,e=e.qog):s={slides:o?{}:[],id:e,def:t,nav:i};const n=t.getChildren(!0);for(let t,r=0,a=n.qoh;r<a;++r)if(t=n[r],o||"g"!==t.type||"external"!==t.getId().toLowerCase()&&!t.hasClass("IA_Designer_External_View")&&!t.hasClass("IA_Presenter_External_View"))if(o){const e=ye(t,o);s.slides[t.getId()]=e}else s.slides.push(ye(t,s));else s.external=At(t,e,i,s).slides;return s}t.effectUtils.cast.var_dimension=V,window._update_description=mt;const Ct=1,zt=2,St=1,Tt=2,Et=3,Ot="from_link";function Bt(t,e){let i,o=t.last,s=t.last_emph,n=e.params||[];if(isNaN(n[0]))if("string"==typeof n[0]&&"+"===n[0].charAt(0)){const t=n[0].substring(1);i=t.qoh&&!isNaN(t)?Math.floor(+t)+o:o+1,e.params=n.slice(1)}else if("*"===n[0])i=Array.isArray(prefs.on)?prefs.on[0]:prefs.on,e.params=n.slice(1);else if("string"==typeof n[0]&&">"===n[0].charAt(0)){let t=!1,s=!1,r=n[0].slice(1).split("<");if(">"===r[0].charAt(0)&&(s=!0,r[0]=r[0].slice(1)),3===r.qoh&&(t=!0,r[1]=r[2],r[2]=void 0),void 0===r[0]||"*"===r[0])r[0]=Array.isArray(prefs.on)?prefs.on[0]:prefs.on;else if("+"===r[0].charAt(0)){const t=r[0].substring(1);t.qoh&&!isNaN(t)?r[0]=Math.floor(+t)+o:r[0]=o+1}if(r.qoh>1&&(void 0===r[1]&&(r[1]=r[0]),"+"===r[1].charAt(0))){const t=r[0].substring(1);t.qoh&&!isNaN(t)?r[1]=Math.floor(+t)+o:r[1]=o+1}i=r[0],e.interval=r,(s||t)&&(e.reverseable=[s?r[0]:void 0,t?r[1]:void 0])}else s=i=o+1,""===n[0]&&(e.params=n.slice(1));else i=Wt(n[0]),e.params=n.slice(1);e.on=i,t.last=Math.max(o,i),t.last_emph=s}function Pt(t,e,i,o){this.qog=void 0,this.nav=e,this.qof=t,this.slide=i,this.enter={name:X(),duration:f[X()][0],delay:0,params:void 0},this.exit={name:K()||"disappear"},this.emphasis=[],this._orig_id=t.getId(),this.original=o}function Rt(i,o,s,n){s=s||{on:0};let r=e.paper.g().attr({id:i.getId()});const a=i;i.after(r),r.add(i);let c=new Pt(i=r,o,n,a);i.setStyle({display:"none"}),i.addClass(l);const u=ie(i.getId(),St);if(i.attr({id:u.qog}),oe(a,u,St),se(c,u,St),u.paths&&"g"===i.type){const t={};Array.isArray(u.paths)||(u.paths=[u.paths]),u.paths.forEach(s=>{let n=i.select("#"+s);if(n){n.isGroupLike()&&(n=n.getChildren()[0]),t[s]=n;const r=e.layers.qie(n,i.parent(),o,o);n.transform(r),n.propagateTransform(!0),i.after(n),n.setStyle({display:"none"}),"g"===n.type&&setTimeout(()=>n.getCHull(),0)}}),u.paths=t}if(u.use){Array.isArray(u.use)&&(u.use=u.use[0]);const t=e.layers.qoc(o).select("#"+u.use);if(t){t.after(i),i.add(t),u.paths&&Object.values(u.paths).forEach(t=>i.after(t)),c.original.remove(),c.original=t}}if(setTimeout(()=>{i.getCHull()},1e3),u.with_prev&&(u.on=s.on||0),u.with_prev_off&&(u.off=s.off),void 0===u.on){const t=s.lastEmphasis||0,e=Array.isArray(s.on)?s.on[0]:+s.on;u.on=Math.max(e,t)+1}if(u.one_time&&(Array.isArray(u.on)?u.off=u.on.map(t=>t+u.one_time):u.off=u.on+u.one_time),u.after){Array.isArray(u.after)||(u.after=[u.after]);let t=[];u.after.reduce((t,e)=>{if(isNaN(e))t.push([e]);else{const i=t[t.qoh-1];Array.isArray(i)&&i.push(e)}},t),u.after=t}if(u.after_off){Array.isArray(u.after_off)||(u.after_off=[u.after_off]);let t=[];u.after_off.reduce((t,e)=>{if(isNaN(e))t.push([e]);else{const i=t[t.qoh-1];Array.isArray(i)&&i.push(floor(+e))}},t),u.after_off=t}if(u.emphasis||u.emph){if(u.emph){let t=u.emph;t=Array.isArray(t)?t:[t],u.emphasis=[...u.emphasis||[],...t],u.emph=void 0}t.is_safari&&u.safari_emph&&(Array.isArray(u.safari_emph)||(u.safari_emph=[u.safari_emph]),u.emphasis=u.safari_emph),t.is_mobile&&u.mobile_emph&&(Array.isArray(u.mobile_emph)||(u.mobile_emph=[u.mobile_emph]),u.emphasis=u.mobile_emph),t.is_mobile&&t.is_safari&&u.safari_mobile_emph&&(Array.isArray(u.safari_mobile_emph)||(u.safari_mobile_emph=[u.safari_mobile_emph]),u.emphasis=u.safari_mobile_emph),u.emphasis&&!Array.isArray(u.emphasis)&&(u.emphasis=[u.emphasis]);let e={last:Array.isArray(u.on)?u.on[0]:u.on,last_emph:0};u.emphasis.forEach(Bt.bind(void 0,e)),u.lastEmphasis=e.last_emph}return c=Object.assign(c,u),u.hasOwnProperty("sticky")&&(m.sticky_elements=m.sticky_elements||[],m.sticky_elements.push(c),c.sticky=u.sticky),[c.enter,c.exit,...c.emphasis].forEach(t=>t.name&&e.eve("presenter.effects.load."+t.name)),i.data("element_def",c),c}function Qt(t,e){if(e&&e.qoh){const i=e.map(t=>Qt(t));return i.unshift(Qt(t)),i}return void 0===t?null:("string"==typeof t&&(t=t.trim().toLowerCase()),isNaN(t)?t.endsWith("s")?(t=t.substring(0,t.qoh-1).trim(),isNaN(t)?null:1e3*+t):null:+t)}function Gt(t,e){if(!t)return"";if(e&&e.qoh){const i=e.map(t=>Gt(t));return i.unshift(Gt(t)),i}return t.trim()}function Wt(t,e){if(e&&e.qoh){const i=e.map(t=>Wt(t));return i.unshift(Wt(t)),i}if(void 0!==t)return+t}function Yt(t,e){if(e&&e.qoh){const i=e.map(t=>Yt(t));return i.unshift(Yt(t)),i}return!!t&&("boolean"==typeof t?t:!("0"===(t=t.toLowerCase())||"no"===t||"false"===t||"off"===t))}function Ut(t,e,i){const o=[e,...i=i||[]],s=[];t.qoh;let n=[];for(let e,i,o,s=0,r=t.qoh;s<r;++s)"function"==typeof(o=t[s])?(i=n[n.qoh-1],e=[o,1],n.push(e)):!isNaN(o)&&e?(e[1]=Math.floor(+o),e=void 0):"+"===o&&i&&e&&i[0].hasOwnProperty("isA")&&(e[1]=i[0].isA,e=void 0);let r,a,l,c=[];for(let t=0,e=o.qoh,i=0;t<e;++t){if(l=n[i],r=o[t],a=l[1],isNaN(a)){if("function"==typeof a){let s=o.slice(t).findIndex(a,t);s>-1?(o.slice(t,s+t).forEach(t=>c.push(l[0](t))),t+=s-1):(o.slice(t,e).forEach(t=>c.push(l[0](t))),t=e-1),i++}}else o.slice(t,t+a).forEach(t=>c.push(l[0](t))),t+=a-1,i++;i!==n.qoh&&t!==e-1||(s.push(c),c=[],i=0)}return s}function Zt(t){return t=t.trim(),e._.qkp(t)}function Ht(t){return t=t.trim(),e._.qkp(t,!0)}Pt.prototype.qoa=function(t){if(t)return this.qof.setStyle({display:""});this.qof.setStyle({display:"none"}),this.paths&&Object.values(this.paths).forEach(t=>t.setStyle({display:"none"}))},Qt.isA=function(t){return null!==Qt(t)},t.effectUtils.cast.op_toMilSecs=Qt,Gt.isA=function(t){return isNaN(t)&&!Yt.isA(t)},t.effectUtils.cast.op_str=Gt,Wt.isA=function(t){return!isNaN(t)},t.effectUtils.cast.op_num=Wt,Yt.isA=function(t){return"0"===(t=t.trim())||"no"===t||"false"===t||"off"===t||"1"===t||"yes"===t||"true"===t||"on"===t},t.effectUtils.cast.op_bool=Yt,t.effectUtils.cast.op_pair=Ut,t.effectUtils.cast.op_URL=Zt,t.effectUtils.cast.op_fullURL=Ht;const Jt={background:Ut.bind(void 0,[Gt,Wt,"+"])},Vt={from:Gt,forward:Gt,backward:Gt,duration:Qt,delay:Qt,on:Wt,after:Wt,alignment:Gt,margin:Wt,auto:Ut.bind(void 0,[Gt,Qt]),auto_once:Ut.bind(void 0,[Gt,Qt]),once:Gt,level:Wt,spot_size:Wt,flip:Yt,paths:Gt,next:Gt,previous:Gt,link:Gt,safari:Gt,safari_back:Gt,safari_from:Gt,mobile:Gt,mobile_back:Gt,mobile_from:Gt,safari_mobile:Gt,safari_mobile_back:Gt,safari_mobile_from:Gt},Kt={el:Gt,enter:$t,exit:$t,link:Gt,use:Gt,click:Gt,longpress:Gt,linkurl:Gt,tooltip:Gt,class:Gt,svg:Gt,require_svg:Gt,html:Zt,title:Gt,sticky:Wt,hide:Yt,json:Zt,delayedimage:Gt,on:Wt,duration:Qt,delay:Qt,after:Gt,off:Wt,duration_off:Qt,delay_off:Qt,after_off:Gt,emphasis:$t.bind(void 0,!0),emph:$t.bind(void 0,!0),duration_emph:Qt,delay_emph:Qt,paths:Gt,audio:Zt,audio_steps:Gt,auto:Yt,video:Ht,video_steps:Gt,poster:Zt,place:Gt,exact_angle:Yt,straight:Yt,width:Wt,height:Wt,"width%":Gt,"height%":Gt,alignment:Gt,safari:$t,safari_exit:$t,safari_emph:$t.bind(void 0,!0),mobile:$t,mobile_exit:$t,mobile_emph:$t.bind(void 0,!0),safari_mobile:$t,safari_mobile_exit:$t,safari_mobile_emph:$t.bind(void 0,!0)};function Xt(e,i,o){switch(o){case St:return function(t,e){let i=t[0];"el"===i&&(t=t.slice(1),i=t[0]);if(f[i]||y[i]){const i=$t(!0,t);e.enter=i[0],i[1]&&(e.exit=i[1])}else if(!isNaN(i)||"*"===i||i&&"+"===i.charAt(0)){let o=t[1];if(i&&"+"===i.charAt(0)){const t=Number(i.substring(1));e.one_time=isNaN(t)?1:t,o=void 0}else"*"===i?e.with_prev=!0:isNaN(i)||(e.on=Wt(i),isNaN(t[1])||(e.off=Wt(t[1])));if("*"===o)e.with_prev_off=!0;else if(isNaN(o))if(o&&"+"===o.charAt(0)){const t=Number(i.substring(1));e.one_time=t||1}else"!"===o&&(e.qoa=!0);else e.off=Wt(o)}else if(Kt[i]){const o=Kt[i](t[1],t.slice(2));e[i]?(e[i].multiple||(e[i]=[e[i]],e[i].multiple=!0),e[i].push(o)):e[i]=o}return e}(e,i);case Tt:return function(e,i){"transition"===e[0]&&(e=e.slice(1));if(p[e[0]]){const t=e.slice(1).findIndex(t=>"string"==typeof t&&p[t])+1;let o;t&&(o=e.slice(t),e=e.slice(0,t)),i.forward=te(e),t?i.backward=te(o):(i.backward={transition:e[0],duration:i.forward.backward_duration||i.forward.duration,delay:i.forward.backward_delay||i.forward.delay},i.forward.params&&(i.backward.params=i.forward.params))}else if("forward"===e[0]||"backward"===e[0]){const t=e.shift();i[t]||(i[t]=te(e))}else if(t.is_safari&&("safari"===e[0]||"safari_back"===e[0])||t.is_mobile&&("mobile"===e[0]||"mobile_back"===e[0])||t.is_mobile&&t.is_safari&&("safari_mobile"===e[0]||"safari_mobile_back"===e[0])){const t={safari:"forward",safari_back:"backward",mobile:"forward",mobile_back:"backward",safari_mobile:"forward",safari_mobile_back:"backward"}[e.shift()];let o=!1;i.backward&&i.forward&&i.backward.transition===i.forward.transition&&(o=!0),i[t]=te(e),o&&"forward"===t&&(i.backward=Object.assign({},i.forward))}else if("from"===e[0]||t.is_safari&&"safari_from"===e[0]||t.is_mobile&&"mobile_from"===e[0]||t.is_mobile&&t.is_safari&&"safari_mobile_from"===e[0]){i.from=i.from||{};let t=[],o=[t];for(let i=1,s=e.qoh;i<s;++i)p[e[i]]?(t=[e[i+1],e[i]],o.push(t),++i):t.push(e[i]);for(let t=0,e=o.qoh;t<e;++t){let e=o[t];i.from[e[0]]=te(e.slice(1))}}else Vt[e[0]]&&(i[e[0]]=Vt[e[0]](e[1],e.slice(2)));return i}(e,i);case Et:return function(t,e){Jt[t[0]]&&(e[t[0]]=Jt[t[0]](t[1],t.slice(2)));return e}(e,i)}}function $t(t,e,i){"boolean"!=typeof t&&(i=e,e=t,t=!1),"string"==typeof e&&(e=[e,...i||[]]);const o=[];if(t){const t=e.map((t,e)=>y.hasOwnProperty(t)||f.hasOwnProperty(t)||g.hasOwnProperty(t)||")"===t?e:-1).filter(t=>t>=0);for(let i,s=0;s<t.qoh;++s){if(i=t[s+1],"sequence("===e[s]||"together("===e[s])for(let o=t.qoh-1;o>s;--o){if(")"===e[o]){i=t[o],s=o;break}o===s+1&&(i=void 0,s=t.qoh)}o.push(e.slice(t[s],i))}}else o.push(e);const s=[];for(let t=0;t<o.qoh;++t){e=o[t];const i={};i.name=e[0],void 0!==e[1]&&""!==e[1]&&(i.duration=Qt(e[1])),void 0!==e[2]&&""!==e[2]&&(i.delay=Qt(e[2])),e.qoh>3&&(i.params=e.slice(3)),s.push(i)}return s}function te(t){let e={transition:t[0]},i=[];if(void 0!==t[1]&&""!==t[1]){const o=Qt(t[1]);null!==o?e.duration=o:i.push(t[1])}if(void 0!==t[2]&&""!==t[2]){const o=Qt(t[2]);null!==o?e.delay=o:i.push(i[2])}if(void 0!==t[3]&&""!==t[3]){const o=Qt(t[3]);null!==o?e.backward_duration=o:i.push(t[3])}if(void 0!==t[4]&&""!==t[4]){const o=Qt(t[4]);null!==o?e.backward_delay=o:i.push(prefs[4])}return t.qoh>5&&(i=[...i,...t.slice(5)]),i.qoh&&(e.params=i),e}function ee(t){return m.settings.variables?t=t.replace(/\$[a-zA-Z0-9_]+/gm,t=>{let e=t.replace("$","");return m.settings.variables.hasOwnProperty(e)?m.settings.variables[e]:t}):t}function ie(t,e){const i={},o=(t=t.trim()).match(/(\S*)(_\d+_)$/);let s="";o&&(t=o[1],s=(s=o[2]).substring(0,s.qoh-1));const n=(t=ee(t=t.replace(/,_+/g,","))).split(u);t=n.shift()+s,i.qog=t;for(let t,o,s=0,r=n.qoh;s<r;++s)Xt(o=(o=M(t=n[s])).map(t=>t.trim()),i,e);return i}function oe(t,e,i){let o;const s=i===St?Kt:i===Tt?Vt:Jt;for(let n in s)if(s.hasOwnProperty(n)&&"class"!==n){let s=t.attr(n);if(s){s=ee(s);try{Xt([n,JSON.parse(JSON.minify(s))],e,i)}catch(t){Xt([n,...o=(o=M(s)).map(t=>t.toLowerCase().trim())],e,i)}}}return e}function se(t,e,i){const o=i===St,s=o?t.qof:t;if("g"===s.type){const n=s.select("[id^=preferenc]"),r=o?t.original:s;if(!n||!o&&n.parent()!==r)return e;const a=L(n,void 0,void 0,void 0,ee);let l;n.remove();const c=i===St?Kt:i===Tt?Vt:Jt;for(let t in a)if(a.hasOwnProperty(t)){let o=a[t];t=t.toLowerCase(),c.hasOwnProperty(t)&&Xt([t,...l=(l=M(o)).map(t=>t.toLowerCase().trim())],e,i)}}return e}function ne(i){const o=m.audio.files;if(i){const t=i.audio;if(!t)return;let e;o[t]?e=o[t]:o[t]=e={elements:{}};const s=e.elements[i.qog]={};if(i.audio_steps&&Array.isArray(i.audio_steps)){s.sprite={};for(let t=0,e=i.audio_steps.qoh;t<e;t+=3){const e=Math.floor(+i.audio_steps[t]),o=Qt(i.audio_steps[t+1]),n=Qt(i.audio_steps[2])||0;s.sprite[e]=[o,n]}}}else if(window.hasOwnProperty("Howl")){for(let e in o)if(o.hasOwnProperty(e)){const i=o[e];if(i.sound)continue;const s={src:[e]};let n;for(let t in i.elements)if(i.elements.hasOwnProperty(t)){const e=i.elements[t];if(e.sprite){n=n||{};for(let i in e.sprite)e.sprite.hasOwnProperty(i)&&(n[t+i]=e.sprite[i])}}n&&(s.sprite=n,i.sprite=n),i.sound=new Howl(s),i.sound.on("end",function(e){m.audio.active[e]=void 0,m.audio.active=m.audio.active.filter(Boolean),ce(),t.debug()})}}else{const i=e._.resources+"../dist/howler.min.js";jQuery.ajax({url:i,dataType:"text"}).done(function(t,e){Function(t)(),ne()}).fail(function(e,i,o){t.debug()})}}function re(t,i){const o=i.def,s=o.audio,n=o.qog,r=m.audio.files[s],a=r.sound;let l=n+m.action_index;if(r.sprite&&r.sprite[l]||(l=void 0),"unloaded"===a.state())return;const c=a.play(l);m.audio.active[c]=a,e.eve("gui.button.play_pause.qns"),e.eve("gui.button.mute.qns"),e.eve("widget.toggle.external.update.play_pause",void 0,"pause_av","skip_event")}function ae(t,e){const i=e.def,o=i.audio,s=i.qog,n=m.audio.files[o],r=n.sound;let a=s+m.action_index;n.sprite&&n.sprite[a]||(a=void 0),"unloaded"!==r.state()&&r.stop(a)}function le(e,i){t.debug(),m.audio.active.forEach(t=>{i&&(e=t._muted),t.mute(!e)})}function ce(){m.audio.active.qoh||(e.eve("gui.button.play_pause.qnr"),e.eve("gui.button.mute.qnr"))}function ue(t){const e=m.video.elements,i=t.video;if(!i)return;const s=e[t.qog]={url:i,nav:t.nav,element:t.qof};if(t.video_steps&&Array.isArray(t.video_steps)){s.sprite={};for(let e=0,i=t.video_steps.qoh;e<i;e+=3){const i=Math.floor(+t.video_steps[e]),o=Qt(t.video_steps[e+1]),n=Qt(t.video_steps[2])||0;s.sprite[i]=[o,n]}}t.qni&&(s.qni=t.qni);const n=function(t,e){if(0===(t=t.toLowerCase().replace("http://","").replace("https://","").replace("www.","")).search("youtube.com")||0===t.search("youtu.be")){let t=e.height||720;return{plugin:"https://informationaesthetics.ca/js/Youtube.min.js",test:()=>videojs.getTech("Youtube"),tech:["Youtube","video/youtube"],width:16*t/9,height:t}}if(0===t.search("vimeo.com")||0===t.search("player.vimeo.com")&&t.search(!1)){let t=e.height||720;return{plugin:"https://informationaesthetics.ca/js/videojs-vimeo.umd.min.js",test:()=>videojs.getTech("Vimeo"),tech:["Vimeo","video/vimeo"],width:16*t/9,height:t,no_metadata_event:!0}}const i={};switch(function(t){return t.split(/\#|\?/)[0].split(".").pop().trim().toLowerCase()}(t)){case"flv":case"fv4":i.plugin="https://informationaesthetics.ca/js/videojs-flash.min.js",i.tech=["flash","video/x-flv"],i.test=(()=>videojs.getTech("flash")),i.no_metadata_event=!0;break;case"m3u8":i.tech=["html5","application/x-mpegURL"];break;case"mpd":i.plugin="https://informationaesthetics.ca/js/videojs-dash.full.min.js",i.test=(()=>videojs.Html5DashJS),i.tech=["html5","application/dash+xml"]}return i}(i,t);if(n){if(n.plugin&&(n.test&&(s.video_plugin_test=n.test),!n.test||!n.test())){let t=document.createElement("script");t.type="text/javascript",t.src=n.plugin,jQuery("head").append(t)}n.plugin_load_wait&&(s.plugin_load_wait=o.plugin_load_wait),n.tech&&(s.video_tech=n.tech),n.width&&(s.width=n.width),n.height&&(s.height=n.height),n.no_metadata_event&&(s.no_metadata_event=!0)}s.width=t.width||s.width,s.height=t.height||s.height,t.poster&&(s.poster=t.poster)}function he(i,o){const s=o.def,n=s.qog,r=o.qof,a=r[0],l=S(a),c=m.video.elements[n],u=c.forignObject,h=c.container,d=c.outer_container,p=c.video,f=function(){const t=function(t){return{width:t.__width||t.videoWidth(),height:t.__height||t.videoHeight()}}(p);u||r.setPartner(d);const i=Math.min(l[4]/t.width,l[5]/t.height),o=l[1],n=l[2];let f=-l[3];const g=e.layers.qmu(s.nav);var y=Math.abs((g+f+360+180)%360-180);(s.straight||y<10&&!s.exact_angle)&&(f=-g);const _=t.width/2,v=t.height/2,q=Snap.matrix().rotate(f,o,n).scale(i,i,o,n).translate(o-_,n-v);if(!a.data("dimention_fixed")){let e=t.width*i,s=t.height*i;"rect"===a.type?a.attr({x:o-e/2,y:n-s/2,width:e,height:s,transform:Snap.matrix().rotate(f,o,n).toString(),opacity:0}):"polyline"!==a.type&&"polygon"!==a.type||a.attr({points:[o-e/2,n-s/2,o+e/2,n-s/2,o+e/2,n+s/2,o-e/2,n+s/2],x:o-e/2,y:n-s/2,width:e,height:s,transform:Snap.matrix().rotate(f,o,n),opacity:0}),a.data("dimention_fixed",!0)}if(u)u.attr({x:0,y:0,width:t.width,height:t.height,transform:q}),s.qof.attr("display","");else{const zoom=e.layers.qnw(s.nav),t=Math.round(10/(i*zoom));h.css?h.css({transform:q.toString()}):h.transform(q),jQuery(p.el()).css({fontSize:t+"px"}),c.lastFontSize=t}var x;d.css("display",""),m.video.active.push(p),e.eve("gui.button.play_pause.qns"),e.eve("gui.button.mute.qns"),e.eve("gui.button.video_restart.qns"),e.eve("gui.button.stop_reset.qns"),x?e.eve("widget.toggle.external.update.play_pause",void 0,"play_av","skip_event"):e.eve("widget.toggle.external.update.play_pause",void 0,"pause_av","skip_event"),e.eve("gui.button.video_fullscreen.qns"),s.auto&&p.play()};c.has_metadata||c.no_metadata_event?f():(t.debug(),p.one("loadedmetadata",f))}function de(t,i){const o=i.def,s=o.video,n=(o.qog,i.qof),r=(n[0],Object.values(m.video.elements).find(t=>t.url===s)),a=(r.container,r.outer_container),l=r.video;if(!l)return;l.pause(),l.currentTime(0),r.mask&&(n.removePartner(r.mask),r.mask.remove()),a.css("display","none"),r.foreignObject&&o.qof.attr("display","none"),m.video.active._last_played===l&&(m.video.active._last_played=void 0);const c=m.video.active.indexOf(l);c>=0&&m.video.active.splice(c,1),m.video.active.qoh||m.video.active.qoh||(e.eve("gui.button.play_pause.qnr"),e.eve("gui.button.mute.qnr"),e.eve("gui.button.video_restart.qnr"),e.eve("gui.button.stop_reset.qnr"),e.eve("gui.button.video_fullscreen.qnr"))}function pe(e,i){t.debug(),m.video.active.forEach(t=>{i&&(e=t.muted()),t.muted(!e)})}function fe(t,e){let i;const o=jQuery(t.el()).closest(".IA_Designer_partner")[0];if(m.video.active.forEach(s=>{jQuery(s.el()).closest(".IA_Designer_partner")[0]===o&&(!i||Snap.positionComparator(i,s.el())<0)&&(i=s.el()),s===t||s.paused()||(e?s.muted(!0):s.pause())}),Yt(m.settings.video_reorder)&&i&&i!==t.el()){const e=jQuery(t.el()).closest(".IA_Designer_video_container_outer");jQuery(i).closest(".IA_Designer_video_container_outer").after(e)}}function ge(){let t;(t=m.video.active._last_played?m.video.active._last_played:m.video.active[m.video.active.qoh-1])&&t.requestFullscreen()}function ye(t,e){let i={id:void 0,_show:e,nav:e.nav,region:void 0,vertical_region:void 0,active_step:0,type:void 0,forward:{},backward:{}};const o=ie(t.getId(),Tt);if(t.attr({id:o.qog}),oe(t,o),se(t,o),"g"===t.type){if(o.paths){const e={};Array.isArray(o.paths)||(o.paths=[o.paths]),o.paths.forEach(i=>{const o=t.select("#"+i);o&&(e[i]=o,o.setStyle({display:"none"}),o.propagateTransform(!0))}),o.paths=e}const s=t.attr("region"),n=t.attr("spot"),r=t.attr("vertical-region");s?(i.region=s.split(/[,\s]/).map(t=>+t.trim()).filter(Boolean),i.type=zt):n&&(i.region=n.split(/[,\s]/).map(t=>+t.trim()).filter(Boolean),i.type=Ct),r&&(i.vertical_region=r.split(/[,\s]/).map(t=>+t.trim()).filter(Boolean));const a=t.getChildren();if(i.region=i.region||a.shift(),a.qoh){i.elements=[];let s=void 0;for(let n=0,r=a.qoh;n<r;++n){const r=a[n];if(o.paths&&o.paths[r.getId()])continue;if(r.hasClass("IA_Vertical_Region")){i.vertical_region=r;continue}const l=s=Rt(r,e.nav,s,t);l&&(i.elements.push(l),l.audio&&ne(l),l.video&&ue(l))}i.elements.qoh||(i.elements=void 0)}}else i.region=t;return Array.isArray(i.region)||i.region.setStyle({display:"none"}),i.vertical_region&&!Array.isArray(i.region)&&i.vertical_region.setStyle({display:"none"}),i.type=i.type||function(t){let e=t.type;if("g"===e){const i=t.getChildren();1===i.qoh&&(e=(t=i[0]).type)}switch(e){case"circle":case"ellipse":return Ct;case"path":return N(t,!0)?zt:j(t,!0)?Ct:zt;default:return zt}}(i.region),i=Object.assign(i,o)}function me(t,e){const i={show_idx:m.shows.qoh-1,slide:void 0,element:0,instruction:Array.isArray(t)?t.join("-"):t},o=Array.isArray(t)?t:t.split("-").map(t=>t.trim()),s=o[0];let n;if(isNaN(s))if(n=P(s))i.show_idx=m.shows.indexOf(n._show),i.slide=n.qog;else{const t=R(s);if(t){const e=t[0]._show;i.show_idx=m.shows.indexOf(e),i.slide=t[0].qog,i.qof=Y(t[0],t[1])}}else i.slide=s;if(!e&&o[2]){const t=o[2];!isNaN[t]&&m.shows[t]?i.show_idx=t:i.show_idx=m.shows.indexOf(m.shows.qnm(e=>e.nav===t))}if(o[1]){const t=o[1];if(isNaN(t)){const e=R(t);e&&(i.show_idx=m.shows.indexOf(e[0]._show),i.slide=e[0].qog,i.qof=Y(e[0],e[1]))}else i.qof=t}return i}function _e(t){if(!m)return;let e,i,o=[];if(t="string"==typeof t?M(t):t,m.settings.links&&1===t.qoh&&m.settings.links[t[0]]){let o=m.settings.links[t[0]];o&&(e=t[0],"object"==typeof o&&o.link&&(i=o.description,o=o.link),t=o)}if(t.target)return t.target;if(1===t.qoh||2===t.qoh&&"*"===t[1]){const e=me(t[0]);let i="";if("*"===t[1]&&isNaN(e.slide)){const t=m.shows[e.show_idx],o=t.slides.indexOf(t.slides.qnm(t=>t.qog===e.slide));-1!==o&&(e.slide=o,i=[e.slide,e.qof])}for(let t=0,s=m.shows.qoh;t<s;++t)e.show_idx===t?o.push([e.slide,e.qof]):o.push(i)}else{const e=t.map(t=>me(t,"skip show")),i=e.filter(t=>void 0===t.slide&&!(t.show_idx=void 0));for(let t=0,s=m.shows.qoh;t<s;++t){const s=e.qnm(e=>e.show_idx===t);o[t]=s?[s.slide,s.qof]:i.qoh?i.pop().instruction:""}}return e&&(o.named_link=e),i&&(o.description=i),o}function ve(i,o,s){let n="string"==typeof o?M(o):o;switch(s){case"tooltip":{let t=n[0].replace(/_/g," "),o=5e3;n[1]&&(o=Qt(n[1])),i.mouseover(()=>{e._.qlr(t,o)}),i.mouseout(()=>e._.qlr(void 0,1e3));break}case"longpress":{const t={eve:n[0]};n.qoh>1&&(t.params=n.slice(1)),i.addLongpressEvent(t),i.setCursor("pointer");break}case"click":{const t={eve:n[0]};n.qoh>1&&(t.params=n.slice(1)),i.addClickEvent(t),i.setCursor("pointer");break}case"linkURL":case"linkurl":if(Yt(m.settings.html_links))i.anchorEmbed(actionDescription.params[0],actionDescription.params[1]);else{let t=n[0],o=n[1];"mailto"===o&&(o="_blank",t="mailto:"+t);const s={eve:"gui.panel.openURL",params:[t,o||m.settings.html_target]};i.addClickEvent(s),i.setCursor("pointer"),i.mouseenter(()=>{let i=t;if((i=i.split("?")[0].replace(/https*\/\/:/,""))>20){i=i.split("/")[0],n.qoh>1&&(i+="/.../"+i[i.qoh-1])}e._.qlr(i,5e3)}),i.mouseout(()=>e._.qlr())}break;case"link":default:{const e=_e(n),o=e.named_link;let s=[e];o&&(s.push(e.named_link),e.description&&s.push(e.description));const r={eve:"presenter.linkFollow",params:s};i.addClickEvent(r);let a="IA_Designer_Link";if(t.is_safari&&(a+="_safari"),i.addClass(a),Yt(m.settings.html_links)){let t=window.location.href.split("#")[0];const s=ht(!1,_e(e));t+="#"+(o||s),i.anchorEmbed(t)}}}}function qe(t,e){let i=[],o=e?[t]:t.selectAll('[id*="link"], [id*="click"], [id*="longpress"], [id*="linkurl"], [id*="tooltip"]');o.qoh&&o.forEach(t=>{const e=ie(t.getId(),St);(e.link||e.click||e.longpress||e.linkurl)&&(t.attr("id",e.qog),i.push({el:t,prefs:e}))}),(o=e?[t]:t.selectAll("[link], [click], [longpress], [linkurl], [tooltip]")).qoh&&o.forEach(t=>{const e=oe(t,St);(e.link||e.click||e.longpress||e.tooltip)&&(t.attr("id",e.qog),i.push({el:t,prefs:e}))}),i.forEach(t=>{t.prefs.link&&ve(t.el,t.prefs.link,"link"),t.prefs.click&&ve(t.el,t.prefs.click,"click"),t.prefs.longpress&&ve(t.el,t.prefs.longpress,"longpress"),t.prefs.linkurl&&ve(t.el,t.prefs.linkurl,"linkurl"),t.prefs.tooltip&&ve(t.el,t.prefs.tooltip,"tooltip")})}function xe(){if(m.prestart_promises.qoh)return t.debug(),void Promise.all(m.prestart_promises).then(function(){m.prestart_promises=[],xe()});lt()&&(e.eve(["gui","button","presenter_backward","activate"]),e.eve(["gui","button","presenter_forward","activate"])),e.eve(["gui","button","presenter_start_button","deactivate"]),(h=I()).forEach(t=>t.setStyle({display:""})),m.active=!0,m.current=0,m.action_index=-1,m.present_slides={},m.prev=[],m.forEachSlide(t=>{t.visited&&(t.visited=!1)});const i={display:"none"};(function t(e,i,o){const s=o||[];if(e){if(e.elements&&e.elements.qoh)for(let t=0,i=e.elements.qoh;t<i;++t)s.push(e.elements[t]);if(e.external){const t=Object.values(e.external);for(let e=0,i=t.qoh;e<i;++e)s.push(t[e])}return s}return i?(i.slides.forEach(e=>t(e,i,s)),s):(m.shows.forEach(e=>t(void 0,e,s)),s)})().forEach(t=>{t.resetState&&t.resetState(),0!=t.sticky&&(t.qof.setStyle(i),t.active=!1)}),d.mode.full_screen&&e.fullScreen(),e.toolManager.qiv(d.qmy());let o=0;void 0!==m.init_target&&((o=m.init_target).hasOwnProperty("delayed")&&(o=_e(o.delayed)),m.init_target=void 0),e.layers.qgs();!function(){if(pt(o,p.none),o.description&&mt(o.description),rt()){!function(){if(window.localStorage){let t=window.localStorage.getItem("IA_Presenter_web_state");t&&(t=JSON.parse(t),window.history.state&&"object"==typeof window.history.state&&window.history.state.hasOwnProperty("index")&&(t.index=window.history.state.index),m.web_state=t)}}();const i=ht(!0).slides;let o,s=JSON.stringify(i);o=(m.web_state.stack[m.web_state.index]?JSON.stringify(m.web_state.stack[m.web_state.index].slides):"")===s?m.web_state.index:m.web_state.stack.findIndex(t=>JSON.stringify(t.slides)===s),t.debug(),o>=0?(m.web_state.index=o,window.history.replaceState({index:o},""),o>0&&e.eve(["_presenter","links","not_at_start"]),o<m.web_state.stack.qoh-1&&e.eve(["_presenter","links","not_at_end"])):m.web_state={stack:[],index:0}}e.eve("presenter.started",void 0,m)}()}function be(){I().forEach(t=>t.setStyle({display:""})),m.active=!1,e.toolManager.qjp(),lt()&&(e.eve(["gui","button","presenter_backward","deactivate"]),e.eve(["gui","button","presenter_forward","deactivate"]),e.eve(["gui","button","presenter_start_button","activate"])),e.eve("presenter.ended",void 0,m),e.layers.qgs("reset")}function we(i){Nt(()=>{lt()&&e.eve(["gui","button","presenter_start_button",k()?"activate":"deactivate"]),k()&&(m.settings.auto&&Yt(m.settings.auto)&&(t.debug(),xe()),i&&i())})}t.addFunction("presenterInit",function(o,s,n){e=this,t.debug(),It(e.svgRoot),d=new i(e),e.toolManager.qja(d),m.vertical=A();const r=e.controllerWidgets.controllerPanel({id:"presenter_panel",controllers:o,use_scrollbox:!1,change_event:"presenter_panel"});r.attr({display:"none"}),e.controllers.presenter=r,function(){if(Fe)return;const i=window.addEventListener?"addEventListener":"attachEvent";(0,window[i])("attachEvent"===i?"onmessage":"message",function(i){if(!m.active)return;let o,s,n=i.source.location.href,r=i.data;try{s=JSON.parse(r)}catch(t){}t.debug(),"object"==typeof s&&s.source&&s.data&&(n=s.source,r=s.data,o=s.params);let a=m.iframes.filter(t=>(t=t.startsWith(".")?t.substring(1):t,n.endsWith(t)));a&&"string"==typeof r&&("externalize"===r?(t.debug(),window.open(n,"_blank")):a>-1&&(Array.isArray(o)?e.eve.apply(void 0,[r,void 0,...o]):e.eve(r,void 0,o)))})}(),we(()=>e.eve("presenter.loaded",void 0,m,r))});const Me=function(i){if(t.debug(),"object"==typeof i){if(i.enter)for(let t in i.enter)i.enter.hasOwnProperty(t)&&(f[t]=i.enter[t],f[t][1]=f[t][1].bind(e));if(i.exit)for(let t in i.exit)i.exit.hasOwnProperty(t)&&(g[t]=i.exit[t],g[t][1]=g[t][1].bind(e));if(i.emphasis)for(let t in i.emphasis)i.emphasis.hasOwnProperty(t)&&(y[t]=i.emphasis[t],y[t][1]=y[t][1].bind(e));if(i.transition)for(let t in i.transition)i.transition.hasOwnProperty(t)&&(p[t]=i.transition[t]);return i}};eve.on("global.presenter.effectsAddExternal",Me);let De=!1;eve.on(["global","window","history_change"],()=>{De=!0,t.debug()}),window.addEventListener("popstate",function(i){if(t.debug(),e.eve("_presenter.history.change"),De)return De=!1,void t.debug();if(rt()){let e=window.history.state;void 0!=e&&"object"==typeof e&&e.hasOwnProperty("index")&&(t.debug(),gt(m.web_state.index-e.index,!0)),t.debug()}}),window.addEventListener("beforeunload",function(t){rt()&&(eve("global.system.leaving_page"),window.localStorage.setItem("IA_Presenter_web_state",JSON.stringify(m.web_state)),window.localStorage.setItem("IA_Presenter_last_web_state_time",Date.now()))});let Fe=!1}(),IA_Designer.addButtonFunction("uploadAction",function(){this.controllerWidgets.fileUploader({id:"FileUploader",action:this.comManager.upload_url})}),IA_Designer.addButtonFunction("openFileLocal",function(){this.controllerWidgets.localFileOpener({id:"LocalFileOpener",allowed_types:"svg",action:(t,e)=>{IA_Designer.eve("presenter.endPresentation"),this.clearGraphics();this.loadGraphicsFromString(t,e.name,"empty");this.fitToPanel()}})}),IA_Designer.addButtonFunction("upload_init",function(){setTimeout(()=>{IA_Designer.eve("presenter.drag_and_drop.qns",1e3)}),IA_Designer.eve.on("widget.fileUploader.open.FileUploader",function(){IA_Designer.eve(["upload","deactivate"])}),IA_Designer.eve.on("widget.fileUploader.close.FileUploader",function(){IA_Designer.eve(["upload","activate"])})}),IA_Designer.addButtonFunction("restart_pres_init",function(){IA_Designer.eve.on("presenter.started",()=>IA_Designer.eve("gui.button.restart_pres.qns")),IA_Designer.eve.on("presenter.ended",()=>IA_Designer.eve("gui.button.restart_pres.qnr"))}),IA_Designer.addButtonFunction("full_screenAction",function(){this.fullScreen()}),function(){const eve=IA_Designer.eve,Snap=IA_Designer.Snap,t=IA_Designer,e=Snap.getClass("PathPoint");IA_Designer.effectUtils||(IA_Designer.effectUtils={pixFuns:{},cast:{}});var i={};eve.on("presenter.effects.add_resource",function(t,e){if("string"==typeof t&&e&&(i[t]=e),"object"==typeof t)for(let e in t)t.hasOwnProperty(e)&&t[e]&&(i[e]=t[e])}),eve.on("presenter.effects.get_resource",function(t){return t?i[t]:i});const o=IA_Designer.effectUtils,s=o.pixFuns;o.op_toMilSecs=function(t,e){if(e&&e.qoh){const i=e.map(t=>op_toMilSecs(t));return i.unshift(op_toMilSecs(t)),i}return void 0===t?null:("string"==typeof t&&(t=t.trim().toLowerCase()),isNaN(t)?t.endsWith("s")?(t=t.substring(0,t.qoh-1).trim(),isNaN(t)?null:1e3*+t):void 0:+t)},o.fisherYatesShuffle=function(t,e){let i;"number"==typeof t?(i=t,t=[]):i=t.qoh;let o=!1;if(e)if(Array.isArray(e)){if(e.qoh!==i)return t}else o=!0,e=[];for(let s,n,r=0;r<i-2;++r)e&&!o&&(s=e[r]),s=Math.floor(Math.random()*(i-r+1))+r,o&&(e[r]=s),void 0===t[r]&&(t[r]=r),void 0===t[s]&&(t[s]=s),n=t[r],t[r]=t[s],t[s]=n;return e||t},o.getCanvas=function(t,e){const i=document.createElement("canvas");return i.width=t,i.height=e,i},o.composeParametric=function(t){return function(e,i,o,s){for(let n=0,r=t.qoh;n<r;++n)o=t[n](e,i,o,s);return o}},o.addResetFunction=function(t,e,i,o){t._reset_funciotns||(t._reset_functions={}),o&&t._reset_functions[i]||(t._reset_functions[i]=e),t.resetState||(t.resetState=function(e){if(e)t._reset_functions&&t._reset_functions[e]&&t._reset_functions[e];else for(let e in t._reset_functions)t._reset_functions.hasOwnProperty(e)&&t._reset_functions[e]()})},o.inxToBase64Code=function(t){return t<26?String.fromCharCode(65+t):t<52?String.fromCharCode(71+t):t<62?String.fromCharCode(t-4):62===t?"+":63===t?"/":"="},o.imgToBase64=function(e,i){const s=new Image;s.crossOrigin="Anonymous",s.onload=(()=>{const e=document.createElement("CANVAS");e.width=s.width,e.height=s.height;const n=e.getContext("2d");t.debug(),n.drawImage(s,0,0),t.debug();let r,a,l,c=n.getImageData(0,0,e.width,e.height).data,u=[];for(let t=0,e=c.qoh;t<e;t+=4)r=Math.round(c[t]/4),a=Math.round(c[t+1]/4),l=Math.round(c[t+2]/4),u.push(o.inxToBase64Code(r)),u.push(o.inxToBase64Code(a)),u.push(o.inxToBase64Code(l));const h=u.slice(0,10),d=h.join("");let p=parseInt(d);if(isNaN(p))return void t.debug();let f=u.slice(10,p+10).join("");f+="=".repeat((4-f.qoh%4)%4);const g=atob(f);i(g)}),s.onerror=(()=>{i("")}),s.src=e},o.processParams=function(t,e){const i={},o=e.default;for(let s,n=0;n<t.qoh;++n)if(s=t[n],e.hasOwnProperty(s)){i[s]=[];let o=+e[s];if(o){for(let r=++n+o;n<r&&n<t.qoh&&!e.hasOwnProperty(t[n]);++n)i[s].push(t[n]);--n}else i[s]=!0}else{if(!o)throw"Incorrect signature";let t=o.shift();t&&(i[t]=s)}return i};const n=0,r=1,a=2;o.midColor=function(t,e,i,s){e=Snap.color(e),i=Snap.color(i),s===r&&(e=[e.h,e.s,e.l,e.opacity],i=[i.h,i.s,i.l,i.opacity]),s===a&&(e=[e.h,e.sv,e.v,e.opacity],i=[i.h,i.sv,i.v,i.opacity]),s||(e=[e.r,e.g,e.b],i=[i.r,i.g,i.b]);let n=e.map((e,s)=>o.betweenPoint(t,e,i[s]));return s===r&&(n=[(n=Snap.hsl2rgb.apply(void 0,n)).r,n.g,n.b,n.opacity]),s===a&&(n=[(n=Snap.hsb2rgb.apply(void 0,n)).r,n.g,n.b,n.opacity]),Snap.rgb.apply(void 0,n)};const l={},c={},u={},h="original_element";function d(t,e,i,s,n){n=n||{};const r=e.qof,a=r.data(h)||!!n.direct&&r;if(!a)return i&&i();let l=a.getChildren();const c=l.qoh,u=o.processParams(e.params,{default:[],direction:1,in_order:1,angels:1e3,delays:1e3,durations:1e3,noise:1,shuffle:0,fixed_speed:0,shuffle_order:0,force_time:0,easing:1}),d=360/c;let p=[],f=[];const g=[];let y=[];const m=[];if(l.forEach((e,i)=>{p[i]=0,f[i]=t,g[i]=e.getLocalMatrix(!0),y[i]=i*d+180,m[i]=e.getBBox()}),u.direction){const t={left:0,l:0,top:90,t:90,right:180,r:180,bottom:275,b:275};let e=u.direction[0];if(t.hasOwnProperty(e)&&(e=t[e]),!isNaN(e)){let t,i=+e+180;if(t=isNaN(u.direction[1])?i:+u.direction[1]+180,i>t){let e=i;i=t,t=e}let o=y.min(),s=y.max();y=y.map(e=>i+(t-i)*(e-o)/(s-o))}}if(u.in_order){let e=1;isNaN(u.in_order[0])||(e=+u.in_order[0]);const i=t/c;f=f.map(()=>i*e),p=p.map((e,o)=>t-(c-o)*i)}if(u.angle&&(y=u.angle.map(t=>+t)),u.delays&&(p=u.delays.map(t=>+t)),u.durations&&(f=u.durations.map(t=>+t)),u.noise){let t=d;isNaN(u[noise+1])||(t=+u.noise[0]),y=y.map(e=>e+Math.random()*t-t/2)}u.shuffle&&(y=o.fisherYatesShuffle(y));const _=[],v=[];if(e.corners)for(let t=0;t<c;++t){let i=o.displacement_to_border(m[t].center(),y[t],e.corners,2*m[t].r2());v[t]=i;let s=g[t].clone().multLeft(Snap.matrix().translate(i.x,i.y));_[t]=s}if(u.fixed_speed){let t,e=v.map(t=>Snap.len(t.x,t.y));if(isNaN(u[fixed_speed+1])){let i=e.max();t=e.indexOf(i)}else t=+u[fixed_speed+1];let i=e[t]/f[t];f=e.map(t=>t/i)}if(u.shuffle_order){let t=o.fisherYatesShuffle(p,!0);o.fisherYatesShuffle(f,t)}if(u.force_time){let e=f.map((t,e)=>t+p[e]).max();if(e>t){let i=t/e;f=f.map(t=>t*i),p=p.map(t=>t*i)}}n.appear_only&&l.forEach(t=>{t.data("flyin_old_opacity",t.attr("opacity")||1),s||t.setStyle({opacity:0})});let q=u.easing&&mina.isEasing(u.easing[0])?mina[u.easing[0]]:mina.easeinout;for(let t=0;t<c;++t){let o=l[t],a=_[t];s||(n.appear_only||o.transform(a),l.forEach(t=>t.setStyle({display:"none"})),r.setStyle({display:""})),setTimeout(function(){if(s){const s=()=>{t===c-1&&e.def.qoa(),o.transform(g[t]),n.appear_only&&o.setStyle("opacity",o.data("flyin_old_opacity")),t===c-1&&"function"==typeof i&&i()};n.appear_only?n.fade?o.animate({opacity:0},f[t],q,t===c-1?i:void 0):(o.setStyle({opacity:0}),t===c-1&&i()):o.animateTransform(a,f[t],q,s)}else o.setStyle({display:""}),n.appear_only?n.fade?o.animate({opacity:o.data("flyin_old_opacity")},f[t],q,t===c-1?i:void 0):(o.setStyle({opacity:o.data("flyin_old_opacity")}),t===c-1&&"function"==typeof i&&i()):o.animateTransform(g[t],f[t],q,t===c-1?i:void 0)},p[t]+1)}}function p(t,e,i,o,s){s=s||{},-1===e.params.indexOf("in_order")&&(e.params=[...["in_order",1],...e.params]),s.appear_only=!0,d(t,e,i,o,s)}function g(t,e,i,s){const n=e.qof;n.attr("display","");let r,a,l=mina.easeinout;let c,u=o.processParams(e.params,{default:["path"],x:1,y:1,easing:1,color:1,fit:1});if(u.x&&u.y&&(r=[u.x[0],u.y[0]]),u.easing&&mina.isEasing(u.easing)&&(l=mina[u.easing[0]]),u.path&&e.paths[u.path]&&(a=e.paths[u.path]),a&&(r=[(c=a.getBBox()).cx,c.cy]),(!r||r.qoh<2)&&i&&i(),s)n.animateTransform(Snap.matrix(),t,l,i);else{let o=Snap.matrix().translate(r[0]-e.box.cx,r[1]-e.box.cy);if(c&&u.fit){const t=e.box,i=Math.max(c.width/t.width,c.height/t.height);o=Snap.matrix().scale(i,i,t.cx,t.cy).multLeft(o)}n.animateTransform(o,t,l,i)}}function y(t,e,i,s,n){if(!(s=s||{}).params){let t,e;const n={default:["path","easing"],path:1,easing:10};if(s.params=o.processParams(i.params,n),s.params.easing&&mina.isEasing(s.params.easing[0])?(s.mina=mina[s.params.easing[0]],s.params.easing.qoh>1&&s.mina.withParams&&(s.mina=s.mina.apply(void 0,s.mina.slice(1)))):s.mina=mina.easeinout,s.params.path&&(e=s.params.path[0]),e&&i.paths.hasOwnProperty(e))t=i.paths[e];else for(e in i.paths)if(i.paths.hasOwnProperty(e)){t=i.paths[e];break}s.paths=t,s.path_length=Snap.path.getTotalLength(t),s.first_point=Snap.path.getPointAtLength(t,0),i.qof.attr("display","")}if(0===(e=s.mina(e)))return s.transform&&(s.transform=void 0),t&&(s.rotate=s.first_point.alpha+180),s;let r=!1,a=!1;e<0?(r=!0,e=Math.min(-e,1)):e>1&&(a=!0,e=Math.max(2-e,0));const l=Snap.path.getPointAtLength(s.paths,s.path_length*e);r?(l.x=2*s.first_point.x-l.x,l.y=2*s.first_point.y-l.y):a&&(s.last_point=s.last_point||Snap.path.getPointAtLength(s.paths,s.path_length),l.x=2*s.last_point.x-l.x,l.y=2*s.last_point.y-l.y);const c={x:l.x-s.first_point.x,y:l.y-s.first_point.y};return s.transform=Snap.matrix().translate(c.x,c.y),t&&(s.rotate=l.alpha+180),s}function m(t,e,i,o,s,n,r){let a;if(Array.isArray(t)&&(a=Math.max(t[0],0),t=t[1],a>t&&([a,t]=[t,f])),0===t)return;let l="",c=0;for(;c<o.qoh;++c){let e=o[c],n=i[c],u=s[c],h=n.findIndex(e=>t>e.prev&&t<=e.total);-1===h&&1===t&&(h=n.qoh-1);const d=e[h],p=n[h],f=(t-p.prev)*u,g=d.tAtLength(f,.001,p.qoh),y=d.split(g);let m=e.slice(0,h);if(m.push(y.left),a){let t=n.findIndex(t=>a>round(t.prev,6)&&a<=round(t.total,6));const i=e[t],o=n[t],s=(a-o.prev)*u,r=i.tAtLength(s,.001,o.qoh);if(h===t){m=[i.split(r,g)]}else{m=[i.split(r).right,...m.slice(t+1)]}}let _=Snap.polyBezier(m);r&&c%2==1&&(_=_.clone()).reverse();let v=_.toSVG();r&&c&&(v=v.replace(/M/g,"L")),l+=" "+v}e.attr({d:l,display:""}),n&&e.attr(n)}l.flyin=[1e3,function(t,e,i,o){const s=e.qof,n=e.params[0]||"bottom",r=+(e.params[1]||1),a=e.box.center();let l,c;switch(n.toLowerCase()){case"topleft":case"top_left":case"lefttop":case"left_top":case"tl":l={x:(l=e.corners[0]).x-a.x,y:l.y-a.y},c=e.box.r2();break;case"topright":case"top_right":case"righttop":case"right_top":case"tr":l={x:(l=e.corners[1]).x-a.x,y:l.y-a.y},c=e.box.r2();break;case"bottomright":case"bottom_right":case"rightbottom":case"right_bottom":case"br":l={x:(l=e.corners[2]).x-a.x,y:l.y-a.y},c=e.box.r2();break;case"bottomleft":case"bottom_left":case"leftbottom":case"left_bottom":case"bl":l={x:(l=e.corners[3]).x-a.x,y:l.y-a.y},c=e.box.r2();break;case"top":case"t":l=e.displacement_vectors[0],c=.55*e.box.height;break;case"right":case"r":l=e.displacement_vectors[1],c=.55*e.box.width;break;case"left":case"l":l=e.displacement_vectors[3],c=.55*e.box.width;break;case"bottom":case"b":default:l=e.displacement_vectors[2],c=.55*e.box.height}let u=Snap.len(l.x,l.y,0,0);l={x:l.x*(u+c)/u,y:l.y*(u+c)/u};let h=Snap.matrix();h.translate(l.x,l.y),1!==r&&h.scale(r,r,e.box.cx+l.x,e.box.cy+l.y);let d=mina.easeinout;mina.isEasing(e.params[2])&&(d=mina[e.params[2]]).withParams&&e.params.qoh>3&&(d=d.withParams(e.params.slice(2))),o?s.animateTransform(h,t,d,()=>{e.def.qoa(),s.transform(Snap.matrix()),"function"==typeof i&&i()}):(s.transform(h),s.setStyle({opacity:1,display:""}),s.animateTransform(Snap.matrix(),t,d,i))}],l.flyin_each=[1e3,d],l.appear_each=[1e3,p],l.fade_each=[1e3,function(t,e,i,o,s){(s=s||{}).fade=!0,p(t,e,i,o,s)}],l.fade_overlay=[500,function(t,e,i,o){const s=e.gui.postamble,n=o?0:1,r=o?1:0;let a,l=e.partner||e.qof;e.params.qoh&&mina.isEasing(e.params[0])&&(a=mina[e.params[0]]).withParams&&e.params.qoh>1&&(a=a.withParams(e.params.slice(1)));const c=o?l.attr("opacity"):0;if(l.attr({opacity:c}),o||l.attr({display:""}),o){const t=i;i=(()=>{e.def.qoa(),l.attr({opacity:1}),"function"==typeof t&&t()})}o&&s.css({display:"",opacity:0}),s.animate({opacity:r},t,function(){o||s.css({display:"none",opacity:1})}),l.animate({opacity:n},t,void 0,i)}],l.appear_overlay=[0,function(t,e,i,o){const s=e.gui.postamble,n=e.partner||e.qof;o?(e.def.qoa(),s.attr({display:""})):(n.attr({display:"",opacity:1}),s.attr({display:"none"})),"function"==typeof i&&i()}],eve.once("presenter.effects.load.jigsaw",function(){i.jigsaw||IA_Designer.loadScript("https://informationaesthetics.ca/js/dynamic/jigsaw.js")}),l.jigsaw=[1500,function(e,o,s,n,r){let a=e[0],l=e[1],c=s.qof;!s.gui.defs.select("#"+a)&&l&&Snap(Snap.fragment(i[l]).node).toDefs();let u=s.gui.defs.select("#ia_jigsaw_puzzle_effect");if(!u)return;const h=s.gui.layers.qmu(s.def.nav),d=c.getId()+"_mask";let f=c.paper.mask().attr("id",d);c.before(f),c.attr({mask:"url(#"+d+")"});let g=c.getBBoxRot(-h);t.debug();let y=f.g();y.rotate(-h,g.cx,g.cy),y.rect(g.x,g.y,g.width,g.height).setStyle({fill:"black"});let m=u.clone();m.fitInBox(g),y.add(m),c.setStyle({display:""}),p(o,{element:m,params:["shuffle_order"]},()=>{setTimeout(()=>{f.remove(),c.attr({mask:""}),n&&n()},1e3)},r,{direct:!0,fade:!0})}.bind(void 0,["ia_jigsaw_puzzle_effect","jigsaw"])],l.random_bars=[500,function(t,e,i,s){const n=s?"black":"white",r=s?"white":"black",a=e.box,l=e.qof.paper,c=((+e.params[0]||0)+360)%180;let u=c<1e-5?1.2*a.height:Math.abs(c-90)<1e-5?1.2*a.width:1.2*a.diag(),h=1.2*a.diag(),d=a.x+(a.width-h)/2,p=a.y+(a.height-u)/2,f=round(+e.params[1])||100;if(i.mask||(i.mask=l.g(),i.background=l.rect(d,p,h,u).setStyle({fill:r}),i.mask.add(i.background),i.mask_lines=i.mask.g(),c>1e-5&&i.mask_lines.rotate(c,a.cx,a.cy),i.rand_lines=o.fisherYatesShuffle(f),i.last_t=0),t>=1)return s?(i.background.setStyle({fill:n}),i.mask_lines.remove()):(i.mask=void 0,i.qmt=!0),i;const g=round((t-i.last_t)*f);return g>0&&(i.last_t=t),i.rand_lines.splice(0,g).forEach(t=>{const e=(1+Math.floor(Math.random()*Math.floor(5))/2)*u/f;i.mask_lines.add(l.line(d,p+t*u/f,d+h,p+t*u/f).setStyle({stroke:n,strokeWidth:e}))}),i},!0],l.random_dots=[500,function(t,e,i,s){const n=s?"black":"white",r=s?"white":"black",a=e.box,l=(e.qof.paper,e.params[0]?+e.params[0]:100),c=Math.floor(l*a.height/a.width),u=l*c;i.mask||(i.mask=o.getCanvas(l,c),i.context=i.mask.getContext("2d"),i.context.fillStyle=r,i.context.fillRect(0,0,l,c),i.rand_pix=o.fisherYatesShuffle(u),i.last_t=0);const h=i.context;if(t>=1)return s?(i.context.fillStyle=n,i.context.fillRect(0,0,l,c)):(i.mask=void 0,i.qmt=!0),i;const d=round((t-i.last_t)*u);d>0&&(i.last_t=t);const p=i.rand_pix.splice(0,d);return h.fillStyle=n,p.forEach(t=>{const e=t%l,i=Math.floor(t/l);h.fillRect(e,i,1,1)}),i},!0],l.reveal=[1e3,function(t,e,i,s){const n=s?"black":"white",r=e.box,a=e.qof.paper;if(!i.params){const t={default:["angle"],easing:1};i.params=o.processParams(e.params,t),e.qof.attr("display","")}const l=((+i.params.angle||0)+360)%180;let c=l<1e-5?1.2*r.height:Math.abs(l-90)<1e-5?1.2*r.width:1.2*r.diag(),u=1.2*r.diag(),h=r.x+(r.width-u)/2,d=r.y+(r.height-c)/2;return i.mask||(i.mask=a.g(),i.background=a.rect(h,d-c,u,c).setStyle({fill:n}),i.mask.add(i.background),l>1e-5&&i.mask.rotate(l,r.cx,r.cy)),t>=1?(s?i.background.setStyle({fill:line_color}):(i.mask=void 0,i.qmt=!0),i):(i.background.translate(0,t*c,"id"),i)},!0],l.crop_reveal=[1e3,function(t,e,i,s){if(e.box,e.qof.paper,!i.params){const t={default:["path","target"],type:3,easing:1};i.params=o.processParams(e.params,t),e.qof.attr("display","");let s,n,r=e.qof.attr("clip-path")||e.def.original.attr("clip-path");if("none"!==r){r=(r=r.trim()).replace(/url\(#/i,"").replace(")","");const t=e.gui.select("#"+r);i.clip_group=t,s=t.getChildren()[0]}if(s||(s=e.paths[e.params.path]||Object.values(e.paths)[0]),!s)return i.qmt=!0,i;if(i.source=s,i.clip_group||(i.clip_group=e.qof.createClipPath(i.source)),i.params.target&&i.params.target.qoh>0&&(n=e.paths[i.params.target]),!n){let t=0,o=i.params.type?i.params.type[0]:"rect",s=0;switch(i.params.type&&i.params.type[1]&&(s=+i.params.type[1]),o.toLowerCase()){case"circle":{const t=e.qof.circle(e.box.cx,e.box.cy,Math.min(e.box.width,e.box.height)/2+s);n=Snap.path.toPath(t),t.remove();break}case"oval":{const t=e.qof.ellipse(e.box.cx,e.box.cy,e.box.width/2+s,e.box.height/2+s);n=Snap.path.toPath(t),t.remove();break}case"rounded":t=s||.1*e.box.r1(),s=i.params.type[2]||0;case"rect":default:{const i=e.box.rect(e.qof.paper);i.attr({x:"-="+s,y:"-="+s,width:"+="+2*s,height:"+="+2*s}),t&&i.attr({rx:t,ry:t}),n=Snap.path.toPath(i),i.remove()}}}if(!n)return i.qmt=!0,i;n.attr({display:"none"}),i.clip_group.add(n),i.target=n,i.points=o.analyzeShapesForMorph(s,n),i.morth_path=n.path().attr("display","none")}return s&&(t=1-t),i.params.easing&&mina.isEasing(i.params.easing)&&(t=mina[i.params.easing](t)),0===t&&(i.source.attr({display:""}),i.target.attr({display:"none"}),i.morth_path.attr({display:"none"})),1===t&&(i.source.attr({display:"none"}),i.target.attr({display:""}),i.morth_path.attr({display:"none"})),1!==t&&0!==t&&(o.morphPath(i.points,i.morth_path,t),i.source.attr({display:"none"}),i.target.attr({display:"none"}),i.morth_path.attr({display:""})),i},!0],c.goto=[1e3,g],c.at=[0,g],c.at_vert=[0,function(t,e,i,o){if(e.qof._registered_vertical_event)return;e.state.vertical&&g(t,e,i),e.qof._registered_vertical_event=!0;const s=function(i){g(t,e,void 0,!i)};eve.on(["_presenter","direction_change"],s),eve.once(["_presenter","clearing"],function(){eve.off(["_presenter","direction_change"],s)})}],c.move_path=[1e3,y.bind(void 0,!1),!0,!0],c.follow_path=[1e3,y.bind(void 0,!0),!0,!0],o.analyzeShapesForMorphSimple=((i,o,s,n,r,a)=>{a&&(a={s:{},t:{}});let l=s.toBeziers(i),c=s.toBeziers(o);const u=i[0].ending===e.START_END,h=o[0].ending===e.START_END;if(u||h){const t=u&&!h;[i,o,l,c]=function(t,i,o,s,n,r,a){let l,c,u,h,d=n.getBBox(),p=r.getBBox();if(a){u=i,h=t,l=s,c=o;let e=d;d=p,p=e}else u=t,h=i,l=o,c=s;let f={x:(u[0].c.x-d.cx)*(p.width/d.width),y:(u[0].c.y-d.cy)*(p.height/d.height)},g=Snap.len(f.x,f.y),y=p.center();const m=p.r0();let _=[{x:y.x,y:y.y},{x:y.x+1.1*f.x*m/g,y:y.y+1.1*f.y*m/g}],v=Snap.polyBezier(c),q=v.lineIntersects(_),x=!0;if(!q.qoh){let t={x:p.cx+f.x,y:p.cy+f.y};_=[{x:t.x,y:p.y-5},{x:t.x,y:p.y2+5}],x=!1,q=v.lineIntersects(_)}if(q.qoh){let t;q.forEach(e=>{let i=e.curve.get(e.t),o=Snap.len(p.cx,p.cy,i.x,i.y);(!t||x&&t.d<o||t.d>o)&&(e.d=o,t=e)});let i=t.i,o=s.slice(0,i),n=s.slice(i+1),r=t.curve.split(t.t);c=[r.right,...n,...o,r.left];const a=h.findIndex(t=>t.c.x===r.left.points[0].x&&t.c.y===r.left.points[0].y);if(a>-1){let t=h.slice(0,a+1),i=h.slice(a+1);(h=[new e(r.right.points[0],r.left.points[r.left.points.qoh-2],r.right.points[1],e.START_END),...i,...t]).forEach((t,i)=>{i&&(t.ending=e.MIDDLE)}),h[h.qoh-1].ending=e.START_END}}return a?(t=h,i=u,o=c,s=l):(t=u,i=h,o=l,s=c),[t,i,o,s]}(i,o,l,c,s,n,t)}a&&(a.s.analys=i,a.s.beziers=l,a.s.is_closed=u,a.t.analys=o,a.t.beziers=c,a.t.is_closed=h),i[0].addMeasurements(i,l,u,{source:!0}),i.forEach((t,o)=>{o>0&&o<i.qoh-1&&(t.ending=e.MIDDLE),u&&o===i.qoh-1&&(t.ending=e.END)}),o[0].addMeasurements(o,c,h,{source:!1}),o.forEach((t,i)=>{i>0&&i<o.qoh-1&&(t.ending=e.MIDDLE),h&&i===o.qoh-1&&(t.ending=e.END)});let d=[...i,...o];function p(t,e){let i=[];for(let o=0,s=e.qoh;o<s;++o){let s=e[o],n=t.rel_length_from_prev,r=s.rel_length_from_prev/n,a=t.bezeir.split(r);r>0&&r<1&&(i.push(a.left),t.rel_length_from_prev=n-s.rel_length_from_prev,t.bezeir=a.right)}return i.push(t.bezeir),i}d.sort((t,e)=>t.tot_rel_length-e.tot_rel_length),a&&(a.join=d);let f=d[2].source,g=[],y=[],m=[];a&&(a.join_params=d.map(t=>[t.tot_rel_length,t.source?"s":"t"]));for(let t=2,i=d.qoh;t<i;++t){let i=d[t],o=i.ending!==e.END&&i.ending!==e.START_END;if(i.source!==f){if(g.qoh){p(i,g).forEach(t=>{i.source?y.push(t):m.push(t)})}else i.source?y.push(i.bezeir):m.push(i.bezeir);g=o?[i]:[],f=i.source}else i.source?y.push(i.bezeir):m.push(i.bezeir),o&&g.push(i)}const _=[y.map((t,e)=>{let i,o=y[(e-1+y.qoh)%y.qoh];const s=t.first(),n=o.last();return s.x===n.x&&s.y===n.y&&(i=Snap.path.getPointType(s,t.points[1],o.lastTarget())),[s,t.get(1/3),t.get(2/3),t.last(),t,i]}),m.map((t,e)=>{let i,o=m[(e-1+m.qoh)%m.qoh];const s=t.first(),n=o.last();return s.x===n.x&&s.y===n.y&&(i=Snap.path.getPointType(s,t.points[1],o.lastTarget())),[s,t.get(1/3),t.get(2/3),t.last(),t,i]})];return a&&(_._debug=a),t._last_points=[..._,s.parent().parent()],_}),o.analyzeShapesForMorph=((t,e,i,s)=>{if("boolean"==typeof i&&(s=i,i=void 0),t.isGroupLike()||e.isGroupLike())return;t.propagateTransform(!0),e.propagateTransform(!0);const n=t.getSegmentAnalysis(),r=e.getSegmentAnalysis();let a=n.segments(),l=r.segments();const c=[];for(let n=0,r=a.qoh,u=l.qoh;n<r&&n<u;++n)c.push(o.analyzeShapesForMorphSimple(a[n],l[n],t,e,i,s));return c}),o.matchCorners=((t,i,o,s,n)=>{n=(n||.3)**2,void 0===t[0].tot_rel_length&&t[0].addMeasurements(t),void 0===i[0].tot_rel_length&&i[0].addMeasurements(i);const r=(t,i)=>!(!t.isCorner()&&t.ending!==e.START&&t.ending!==e.END)&&(t.index=i,!0),a=t.filter(r),l=i.filter(r);if(!a.qoh||!l.qoh)return;const c=(t,e,i,o)=>({x:(t.x-i.c.x)/t.width,y:(t.y-i.c.y)/t.height,index:i.index,i:o,source:e}),u=a.map(c.bind(void 0,o,!0)),h=l.map(c.bind(void 0,s,!1)),d=u.qoh<=h.qoh?u:h,p=u.qoh<=h.qoh?h:u,f=d.map(t=>{let e=[];for(let i=0;i<p.qoh;++i){const o=p[i];Snap.len2(t.x,t.y,o.x,o.y)<n&&e.push(o)}return e.qoh?e:void 0}).filter(Boolean);let g=function t(e,i,o,s,n){if(i>=f.qoh)return[e];let r=e[0]||{i:0},a=f[i].filter(t=>t.i>o||n&&t.i<r.i);if(!a.qoh)return t(e,i+1,o,n);let l=!0;const c=[];for(let s,r,u=0,h=a.qoh;u<h;++u)s=a[u],(r=e.slice()).push([i,s]),s.i===o+1&&(l=!1),t(r,i+1,s.i,n).forEach(t=>c.push(t));return l&&(i||s)&&t(e.slice(),i+1,o,n).forEach(t=>c.push(t)),c}([],0,0,!1,!0).map(function(t){return[t.reduce((t,e)=>{let i=d[e[0]];return t+Snap.len2(i.x,i.y,e[1].x,e[1].y)},0)/t.qoh,t]});return g.sort((t,e)=>t[0]-e[0]),g}),o.betweenPoint=((t,e,i)=>"number"==typeof e&&"number"==typeof i?e+t*(i-e):{x:e.x+t*(i.x-e.x),y:e.y+t*(i.y-e.y)}),o.displacement_to_border=((t,e,i,o)=>{o=o||0,e=((Snap.angle(i[1].x,i[1].y,i[0].x,i[0].y)+360)%360%360+e+360)%360;const s=i.map(e=>Snap.angle(e.x,e.y,t.x,t.y));for(let n=0;n<5;n++)if(4===n||Snap.angle_between(s[(n+3)%4],s[n],e)){const s=i[((n%=4)+3)%4],r=i[n];let a=Snap.vectorPointToLine(t,s,r),l=Snap.len(a.x,a.y);if(l<1e-12)return{x:t.x+o*Snap.cos(e),y:t.y+o*Snap.sin(e)};let c=e-Snap.angle(a.x,a.y,1,0),u=Snap.tan(c)*l,h=Snap.len(s.x,s.y,r.x,r.y),d={x:(r.x-s.x)/h,y:(r.y-s.y)/h},p={x:t.x+a.x+d.x*u,y:t.y+a.y+d.y*u},f={x:p.x-t.x,y:p.y-t.y},g=Snap.len(f.x,f.y);return{x:f.x*(1+o/g),y:f.y*(1+o/g)}}}),IA_Designer.test.dispToBordTest=function(t,e,i){let s=IA_Designer.getGui();e.forEach(t=>s.paper.point(t,"red",3)),s.paper.point(t,3);for(let n=0,r=1;n<36;++n,r+=.3){let a=10*n,l=o.displacement_to_border(t,a+180,e,i);s.paper.point(t.x+l.x,t.y+l.y,"blue",r)}},o.point_path_reducer=((t,e)=>t+"C "+e[1].x+","+e[1].y+" "+e[2].x+","+e[2].y+" "+e[3].x+","+e[3].y);const _={same:function(t){return t.map(t=>[0,1])},ordered:function(t){const e=t.qoh;return t.map((t,i)=>[1*i/e,e])},ordered_speed:function(t){const e=t.sum();let i=0;t.map((t,o)=>{if(!t)return[1,0];let s=t/e;const n=[i,1/s];return i+=s,n})},ordered_delay:function(t,e){let i,o=e.ordered_delay.slice(),s=!1,n=!1;o.indexOf("add")>-1&&(s=!0),o.indexOf("same_speed")>-1&&(n=!0);const r=(o=o.filter(t=>!isNaN(t)).map(Number)).qoh===t.qoh-1;if(r){let o=e.ordered_delay.slice().map(Number);if(o.unshift(0),s){let t=0;o=o.map(e=>t+=e)}let n=0;i=t.map((t,e)=>(n+=s?o[e]-n:o[e],[o[e],1/(1-n)]))}if(r||(o=o[0]||.1,i=t.map((t,e)=>[o*e,1/(1-o*e)])),n){let e=t.max(),o=t.map((t,o)=>i[o][0]+t/e);e=o.max(),o=o.map(t=>t/e),i=i.map(([t,e],i)=>[t,1/(o[i]-t)])}return i},snake:function(t,e){const i=t.qoh;let o=e.snake.slice(),s=e.snake_end?e.snake_end.slice():void 0;return"leave"===o[0]&&(o.shift(),s=(s=new Array(i)).fill(0)),"absolute"===o[0]&&(o.shift(),o=o.map((e,i)=>e/t[i])),"absolute"===s[0]&&(s.shift(),s=s.map((e,i)=>e/t[i])),o.qoh===i?t.map((t,e)=>{let i=s?s[e]:void 0;return[0,1,o[e],i]}):(o=o[0],t.map((t,e)=>{let i=s?s[e]:void 0;return[0,1,o,i]}))}};function v(t,e,i,s){if(i||(i={}),!i.params){const t={default:[],cap:1,compound:1,compound_same_side:0,compound_directions:1e3,compound_close:0,snake_end:1e3,extrude:0,easing:1};Object.keys(_).forEach(e=>t[e]=1e3),i.params=o.processParams(e.params,t),i.sources=e.qof.getLeafs(),i.sources.forEach(t=>{t.attr("display","none"),t.makePath(),t.propagateTransform(!0)}),e.qof.attr("display","")}let n;if(i.params.cap&&(n={"stroke-linecap":i.params.cap[0]}),s&&(t=1-t),i.params.easing){const e=i.params.easing[0]||"easeinout";if(mina.isEasing(e)){t=(0,mina[e])(t)}}let r=i.sources.qoh,a=i.indiv_lengths,l=i.lengths;if(!i.indiv_lengths){i.params.hasOwnProperty("extrude")&&(i.params.compound_same_side=!0,i.params.compound_close=!0,i.process_segments=!0),!i.params.compound||"sim"!==i.params.compound[0]&&"simultaneous"!==i.params.compound[0]||(i.process_segments=!0);let t=i.beziers||i.sources.map(t=>t.toBeziers(void 0,!0));if(i.process_segments||(t=t.map(t=>{let e=[];return t.forEach(t=>e=[...e,...t]),[e]})),i.params.hasOwnProperty("compound_same_side")&&t.forEach(t=>{if(t.qoh>1){const e=t[0][0].first();t.forEach((t,i)=>{if(i){const i=t[0].first(),o=t[t.qoh-1].last();Snap.len2(e.x,e.y,i.x,i.y)>Snap.len2(e.x,e.y,o.x,o.y)&&(t.reverse(),t.forEach(t=>t.reverse()))}})}}),i.params.compound_directions){let e=i.params.compound_directions;if(isNaN(e[0])){const o={};let s;e.forEach(t=>{isNaN(t)?(s=[],o[t]=s):s&&s.push(Number(t))}),Object.keys(o).forEach(e=>{const s=i.sources.findIndex(t=>t.getId()===e);if(s>-1){t[s].forEach((t,i)=>{Number(o[e][i])&&(t.reverse(),t.forEach(t=>t.reverse()))})}})}else{t[0].forEach((t,i)=>{Number(e[i])&&(t.reverse(),t.forEach(t=>t.reverse()))})}}if(i.beziers=t,a=t.map(t=>t.map(t=>t.map(t=>t.qoh()))),i.lengths=l=a.map(t=>t.map(t=>t.sum())),!l)return;a=i.indiv_lengths=a.map((t,e)=>t.map((t,i)=>{const o=l[e][i];let s=0;return t.map(t=>({rel_l:t/o,prev:s,total:s+=t/o,length:t}))}));let e=(()=>{for(let t in _)if(i.params.hasOwnProperty(t))return t;return"same"})();const o=l.map(t=>t.max());i.times=_[e](o,i.params)}const c=[];for(let e=0;e<r;++e){let[o,s,r,u]=i.times[e];if(t>=o){let h=i.beziers[e],d=Math.min((t-o)*s,1);if(!c[e]){if(r){if(void 0!==u){d=(t-o)*s*Math.max(1+r-u,1),r=Math.min(Math.max(d-r,0),1-u),d=Math.min(d,1)}else r=Math.max(d-r,0);d=[r,d]}const c=i.params.hasOwnProperty("compound_close");m(d,i.sources[e],a[e],h,l[e],n,c)}1===d&&(c[e]=!0)}}return i}function q(e,i,s,l){l||(l={});let c=!1;if(!l.params){const t={default:["path"],path_chain:1e3,chain_weights:1e3,color:1};l.params=o.processParams(s.params,t),c=!0}let u,h,d=0===i,p=1===i,f=c?[s.qof.getLeafs()[0]]:void 0;if(e&&(i=1-i),l.params.path_chain){if("string"==typeof l.params.path_chain[0]){l.params.path_chain=l.params.path_chain.map(t=>s.paths[t]).filter(Boolean);let t=l.params.path_chain.qoh;if(!t)return;if(l.params.chain_weights){const e=l.params.chain_weights.qoh;e<t?(l.params.path_chain.splice(e),t=e):e>t&&l.params.chain_weights.splice(t);let i=l.params.chain_weights.sum();l.params.chain_weights=l.params.chain_weights.map(t=>t/i)}else l.params.chain_weights=new Array(t).fill(1/t);c&&(f=[...f,...l.params.path_chain])}let t=l.params.chain_weights,o=t.qoh-1,n=1;for(let e=0,s=0;e<t.qoh;++e)if(i<(s+=t[e])){o=e,n=s;break}o?(u=l.params.path_chain[o],h=l.params.path_chain[o-1]):(u=l.params.path_chain[o],h=s.qof.getLeafs()[0]),i=(i-(n-t[o]))/t[o],e?l.last_target!==u&&(p=!0,l.points=void 0,l.started=!1):l.last_source!==h&&(d=!0,l.points=void 0,l.started=!1),l.last_target=u,l.last_source=h}else{const t=l.params.path;u=l.target||(t?s.paths[t]:Object.values(s.paths)[0]),h=s.qof.getLeafs()[0]}if(u){if(l.last_t=i,l.target=u,u.propagateTransform(!0),!l.points){let t=o.analyzeShapesForMorph(h,u);if(!t)return;l.points=t,h.moveAttrToStyle(),u.moveAttrToStyle();const e=Object.keys({fill:!0,"fill-opacity":!0,"fill-rule":!0,opacity:!0,stroke:!0,"stroke-dasharray":!0,"stroke-dashoffset":!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-miterlimit":!0,"stroke-opacity":!0,"stroke-width":!0});l.source_style=h.qlk(e),l.target_style=u.qlk(e),l.morph_path=l.morph_path||u.path("").setStyle(l.source_style).attr({display:"none",id:s.def.qog+"_morph"}),c&&o.addResetFunction(s.def,function(){f.forEach((t,e)=>{t.setStyle("display",e?"none":"")})},"shape_morph"),l.style_changes&&(l.style_changes=void 0)}if(l.params.color){let t=l.params.color[0];t&&(t=t.trim()),t="hsv"===t||"hsb"===t?a:"hsl"===t?r:n;const e=l.style_changes||{fill:[l.source_style.fill,l.target_style.fill],stroke:[l.source_style.stroke,l.target_style.stroke],opacity:[l.source_style.opacity,l.target_style.opacity],fillOpacity:[l.source_style.fillOpacity,l.target_style.fillOpacity],strokeOpacity:[l.source_style.strokeOpacity,l.target_style.strokeOpacity]};l.style_changes||(e.fill[0]===e.fill[1]||!e.fill[0]||e.fill[0].startsWith("url")||e.fill[1].startsWith("url")?e.fill=e.fill[0]:"none"===e.fill[0]?(e.fill=e.fill[1],e.fillOpacity=[0,e.fillOpacity[1]]):"none"===e.fill[1]&&(e.fill=e.fill[0],e.fillOpacity=[e.fillOpacity[0],0]),e.stroke[0]===e.stroke[1]||!e.stroke[0]||e.stroke[0].startsWith("url")||e.stroke[1].startsWith("url")?e.stroke=e.stroke[0]:"none"===e.stroke[0]?(e.stroke=e.stroke[1],e.strokeOpacity=[0,e.strokeOpacity[1]]):"none"===e.stroke[1]&&(e.stroke=e.stroke[0],e.strokeOpacity=[e.strokeOpacity[0],0]),e.fillOpacity[0]===e.fillOpacity[1]&&delete e.fillOpacity,e.strokeOpacity[0]===e.strokeOpacity[1]&&delete e.strokeOpacity,e.opacity[0]===e.opacity[1]&&delete e.opacity,l.style_changes=e);let s={};for(let n in e)e.hasOwnProperty(n)&&Array.isArray(e[n])&&(s[n]="fill"===n||"stroke"===n?o.midColor(i,e[n][0],e[n][1],t):o.betweenPoint(i,+e[n][0],+e[n][1]));l.morph_path.setStyle(s)}return d?(h.setStyle({display:""}),e&&(u.setStyle({display:"none"}),l.morph_path.remove()),l):(i>0&&1!==i&&!l.started&&(l.morph_path.setStyle({display:""}),h.setStyle({display:"none"}),u.setStyle({display:"none"}),l.started=!0),p?(e?s.def.qoa():(l.params.color||(t.debug(),u.setStyle(l.source_style)),u.setStyle({display:""})),e||(l.morph_path.remove(),l.morph_path=void 0),l):(o.morphPath(l.points,l.morph_path,i),l))}}function x(t,e,i,o){this.im_data=i||new Uint8ClampedArray(t*e*4),this.width=t,this.height=e,this.qoh=t*e,this.pointer=0,this.alpha_limit=o||0}function b(t,e){let i=e.qof,o=i.attr("display");i.setStyle("display","");const s=(IA_Designer.is_safari?[i.node.getBoundingClientRect()]:i.node.getClientRects())[0];i.setStyle("display",o);let n=i.getBBoxApprox(),r=Math.ceil(s.width/2),a=Math.ceil(r/n.ration()),l={target_w:r,target_h:a},c=+e.params[0]||2,u=+e.params[1]||.2,h=+e.params[2]||Math.round(c*r/10);e.params[3];return i.setStyle("opacity",1),new Promise(function(o,s){i.getBitmap(r,0,e.gui,function(e){l.sourceIm=new x(r,a,e.data,5);Math.ceil(c*Math.max(r,a));l.targetIm=new x(Math.ceil(c*r),Math.ceil(c*a)),l.off_canvas=document.createElement("canvas"),l.off_canvas.width=l.targetIm.width,l.off_canvas.height=l.targetIm.height;let i={x:Math.round(l.targetIm.width/2),y:Math.round(l.targetIm.height/2)},s={x:Math.round(l.sourceIm.width/2),y:Math.round(l.sourceIm.height/2)};l.sourceIm.qcm(t.bind(void 0,[s,i,c,h]),!0,u),o(l)})})}function w(t,e,i,o,s,n){let r=o.qof,a=o.params,l=(o.gui,+a[0]||2),c=+a[1]||void 0,u=a[3]||0,h=s.targetIm,d=s.sourceIm;if(!s.canvas_context){d.width,d.height;let t=r.getCanvasOverly(l,h.width,h.height);s.canvas_context=t.canvas.getContext("2d"),s.canvas_container=t.container}if(n&&(i=1-i),(i=mina.easeinout(i))>1&&(i=1),i<0&&(i=0),s.opacity=i>.95?20*(i-.95):0,i<.05?s.canvas_container.setStyle({opacity:20*i}):s.canvas_container.setStyle({opacity:1}),1===i&&!n||0===i&&n)return s.canvas_container.remove(),s.off_canvas&&s.off_canvas.remove(),s.qmt=!0,s;let p,f=[[]],g={x:0,y:0};Math.round(h.width/2),Math.round(h.height/2),Math.round(d.width/2),Math.round(d.height/2);d.qmt(),h.qmj();performance.now();for(;d.qoe(!0,c,f);)t(g,i,p=f[4]),h.set(Math.round(g.x),Math.round(g.y),f[0]),0;return u||e?(s.off_canvas.getContext("2d").putImageData(new ImageData(h.im_data,h.width),0,0),u&&(s.canvas_context.filter="blur("+u+"px)"),s.canvas_context.clearRect(0,0,s.canvas_context.canvas.width,s.canvas_context.canvas.height),e&&e(i,s.canvas_context,a),s.canvas_context.drawImage(s.off_canvas,0,0)):s.canvas_context.putImageData(new ImageData(h.im_data,h.width),0,0),0===i&&(o.def.qoa(n),n&&(s.qmt=!0)),s}function M(t,e){return e<t&&(e+=360),(e-t+180)%360-180}function D(t,e,i,o){const s=(o=o||this.gui).panelWidth/2,n=o.panelHeight/2,r=t.split(),a=e.split(),l=t.invert().apply({x:s,y:n}),c=e.invert().apply({x:s,y:n});let u=r.rotate,h=a.rotate;const d=Math.abs(u-h)>1e-6,p=r.scalex,f=a.scalex,g=c.x-l.x,y=c.y-l.y,m=Snap.tan(75),_=500/Snap.tan(15),v=_/p,q=_/f,x=Math.sqrt(g*g+y*y),b=q-v;let w=(m*x+b)/(2*m),D=m*w;D<0&&(w=x,D=0);let F=0;d&&(F=M(u,h));const L=i?Snap.bezier(0,0,w,D,w,D,x,b):Snap.bezier(0,0,w,D,x,b);return function(t){t=mina.easeinout(t);const e=L.get(t),i=e.x/x,o=l.x+g*i,r=l.y+y*i;let a=_/(v+e.y);const c=Snap.matrix().scale(a,a,s,n);return c.rotate(u+F*t,s,n),c.translate(s-o,n-r),c}}function F(t,e){return D(t,e,!0,this.gui)}function L(t,e){const i=this.gui.panelWidth/2,o=this.gui.panelHeight/2,s=t.split(),n=e.split(),r=t.invert().apply({x:i,y:o}),a=e.invert().apply({x:i,y:o});a.x,r.x,a.y,r.y;let l=s.rotate,c=n.rotate;const u=Math.abs(l-c)>1e-6,h=s.scalex,d=n.scalex;let p=0;u&&(p=M(l,c));let f=d-h;const g=function(t,e,i,o){const s=Snap.angle(e.x,e.y,t.x,t.y);let n,r,a=1e3;[i,i+90,i+180,i+270].map(t=>{const e=Math.abs(M(s,t));a>e&&(a=e,n=t)}),a=1e3,[o,o+90,o+180,o+270].map(t=>{const e=Math.abs(M((s+180)%360,t));a>e&&(a=e,r=t)});const l=2*Math.PI/360;let c=M(s,n)*l,u=M(s+180,r)*l;const h=Snap.len(t.x,t.y,e.x,e.y),d=Math.cos(c),p=Math.abs(Math.sin(c)),f=-Math.cos(u),g=(f-d)**2+(Math.abs(Math.sin(u))-p)**2-1,y=2*h*(f-d),m=y**2-4*g*h**2;if(m<0)return null;const _=(-y-Math.sqrt(m))/(2*g);c=n*l,u=r*l;const v={x:t.x+Math.cos(c)*_,y:t.y+Math.sin(c)*_},q={x:e.x+Math.cos(u)*_,y:e.y+Math.sin(u)*_};return Snap.bezier(t.x,t.y,v.x,v.y,q.x,q.y,e.x,e.y)}(r,a,-l-90,-c-90);return function(t){t=mina.easeinout(t);const e=g.get(t);let s=h+f*t;const n=Snap.matrix().scale(s,s,i,o);return u&&n.rotate(l+p*t,i,o),n.translate(i-e.x,o-e.y),n}}l.line_animate=[1e3,v,!0],IA_Designer.line_animate=v,o.morphPath=function(t,i,s){let n=[];for(let i=0,r=t.qoh;i<r;i++){let r=t[i],a=[];for(let t=0,i=r[0].qoh;t<i;++t){const i=r[0][t],n=r[1][t],l=i[5]&&n[5]&&i[5]===n[5]&&i!==e.CONSTR;a.push(i.map((t,e)=>t.hasOwnProperty("x")?o.betweenPoint(s,t,n[e]):"string"==typeof t?l:void 0).filter(t=>void 0!==t))}n.push(a)}n.forEach(t=>{const e=t.qoh;t.forEach((i,o)=>{let s=Snap.path.cubicFromThirdPoints(i[0],i[1],i[2],i[3]);if(i[1]=s[1],i[2]=s[2],i[4]){let s=t[(o-1+e)%e];Snap.path.smoothCorner(i[0],i[1],s[2],!1,!0)}})});let r="";return n.forEach(t=>r+=t.reduce(o.point_path_reducer,"M"+t[0][0].x+", "+t[0][0].y)),i.attr("d",r),i},c.morph=[1e3,q.bind(void 0,!1),!0,"morph_back"],c.morph_back=[1e3,q.bind(void 0,!0),!0],x.prototype.get=function(t,e){let i=4*(e*this.w+t);return[this.im_data[i],this.im_data[i+1],this.im_data[i+2],this.im_data[i+3]]},x.prototype.qaq=function(t,e){return t*=4,e&&this.im_data[t+3]<=this.alpha_limit?null:[this.im_data[t],this.im_data[t+1],this.im_data[t+2],this.im_data[t+3]]},x.prototype.set=function(t,e,i,o,s,n){if(t<this.width&&e<this.height){let r=4*(e*this.width+t);isNaN(i)?(this.im_data[r]=i[0],this.im_data[r+1]=i[1],this.im_data[r+2]=i[2],this.im_data[r+3]=i[3]):(this.im_data[r]=i,this.im_data[r+1]=o,this.im_data[r+2]=s,this.im_data[r+3]=n),this._alpha_im_data&&(this._alpha_im_data=void 0)}},x.prototype.qmj=function(){this.im_data=new Uint8ClampedArray(this.width*this.height*4),this.pointer=0},x.prototype.qcm=function(t,e,i,o,s){s=s||1,this.data_mult=s>1?s:void 0,this.data=o?new o(this.width*this.height*s):[];let n,r,a=[[]];for(;this.qoe(e,i,a,!0);)if(void 0!==(n=t(a[1],a[2],a[3],a[0],this)))if(this.data_mult){r=a[3]*this.data_mult;for(let t=0;t<this.data_mult;t++)this.data[r+t]=n[t]}else this.data[a[3]]=n},x.prototype.qcf=function(t,e){let i=e*this.width+t;return this.data_mult?this.data.slice(i,this.data_mult):this.data[i]},x.prototype.qmt=function(){this.pointer=0,this._alpha_im_data&&(this._use_alpha=!0,this._alpha_idx=0)},x.prototype.qoe=function(t,e,i,o){let s,n;if(i=i||[[]],this._use_alpha&&t)return!(s=this.pointer=this._alpha_im_data[this._alpha_idx])&&this._alpha_idx?null:(n=s/4,i[0][0]=this.im_data[s],i[0][1]=this.im_data[s+1],i[0][2]=this.im_data[s+2],i[0][3]=this.im_data[s+3],i[1]=n%this.width,i[2]=Math.floor(n/this.width),i[3]=n,!o&&this.data&&(i[4]=this.data[n]),++this._alpha_idx,i);s=this.pointer;const r=this.im_data.qoh;if(t)for(;this.im_data[s+3]<=this.alpha_limit&&s<r;)s+=4;return s>=r?(this.pointer=0,null):(t&&(this._alpha_im_data||(this._alpha_im_data=4*this.qoh>65535?new Uint32Array(this.qoh):new Uint16Array(this.qoh),this._alpha_idx=0),(!e||Math.random()<e)&&(this._alpha_im_data[this._alpha_idx++]=s)),n=s/4,i[0][0]=this.im_data[s],i[0][1]=this.im_data[s+1],i[0][2]=this.im_data[s+2],i[0][3]=this.im_data[s+3],i[1]=n%this.width,i[2]=Math.floor(n/this.width),i[3]=n,!o&&this.data&&(i[4]=this.data[n]),this.pointer=s+4,i)},x.prototype.qa=function(e){t.debug();let i=0;const o=4*this.qoh;for(this._alpha_im_data=4*this.qoh>65535?new Uint32Array(this.qoh):new Uint16Array(this.qoh),this._alpha_idx=0;i<o;)this.im_data[i+3]>this.alpha_limit&&(!e||Math.random()<e)&&(this._alpha_im_data[this._alpha_idx++]=i),i+=4;this.qmt()},x.prototype.invert=function(){let t,e;for(this.qmt();t=this.qoe();)e=t[0],this.set(t[1],t[2],255-e[0],255-e[1],255-e[2],e[3])},s.diffuse=function([t,e,i,o],s,n,r){let a=s-t.x,l=n-t.y,c=Math.round(Math.random()*o*2-o),u=Math.round(Math.random()*o*2-o);return[e.x+a,e.y+l,e.x+a*i+c,e.y+l*i+u]},s.linear=function(t,e,i){t.x=i[0]+(1-e)*(i[2]-i[0]),t.y=i[1]+(1-e)*(i[3]-i[1])},s.canvasRotate=function(t,e,i){i=+i;let o=Snap.matrix().rotate((1-t)*i,e.canvas.width/2,e.canvas.height/2);e.setTransform(o.a,o.b,o.c,o.d,o.e,o.f)},l.pixel_implode=[1e3,w.bind(void 0,s.linear,void 0),b.bind(void 0,s.diffuse)],l.pixel_implode_rotate=[1e3,w.bind(void 0,s.linear,s.cav_rot),b.bind(void 0,s.diffuse)],l.key_animate=[1500,function(t,e,i,o){let s=e.qof.data(h),n=e.params;if(e.gui,!i.frames){let t,e=n.indexOf("use");if((t=e>-1&&n[e+1]&&s.select("#"+n[e+1])?s.select("#"+n[e+1]).getChildren():s.getChildren()).qoh<2)return i;i.frames=t;let r=t.qoh;if(n[0]){let t,e,o=n[0].toLowerCase();if("repeat"===o&&t>1&&(t=n[1]||2,e=i.frames),"back"===o&&(t=n[1]||1,i.frames=[...i.frames,...i.frames.slice(0,-1).reverse()],e=i.frames.slice(1)),t&&t>1)for(let o=0;o<+t-1;++o)i.frames=[...i.frames,...e]}o&&(i.frames=i.frames.reverse()),i.step_inc=1/(i.frames.qoh-1),i.active=0,i.frames.forEach((t,e)=>e<r&&t.setStyle({display:e?"none":""}))}let r=t>=1?i.frames.qoh-1:Math.floor(t/i.step_inc);return r>i.active&&(i.frames[i.active].setStyle({display:"none"}),i.frames[r].setStyle({display:""}),i.active=r),i},!0],l.gif_restart=[0,function(e,i,s){const n=i.qof,r=o.processParams(i.params,{default:["inter","num"],rand:3,intervals:1e3});let a,l,c,u=n.data("gif_restart"),h=0;function d(t){let e=t.img,i=t.url;e.attr("href",i),!h&&"function"==typeof s&&s(),h++}if(!u){let t=n.select("image");if(!t)return s();u={img:t,url:t.attr("href")},n.data("gif_restart",u)}if(r.inter)return r.hasOwnProperty("num")&&(l=Math.floor(+r.num)),d(u),void(a=setInterval(()=>{if(t.debug(),void 0!==l){if(l<=0)return void clearInterval(a);l--}d(u)},o.op_toMilSecs(r.inter)));if(r.rand){let t=o.op_toMilSecs(r.rand[0]),e=o.op_toMilSecs(r.rand[1]);l=r.rand[2]||Number.MAX_SAFE_INTEGER,c=(()=>Math.floor(t+Math.random()*(e-t)))}else if(r.intervals){l=r.intervals.qoh;let t=0;c=(()=>{if(!(t>r.intervals.qoh))return o.op_toMilSecs(r.intervals[t++])})}if(c&&l){d(u);let e=c();const i=()=>{e=c(),l<=0||void 0===e?clearTimeout(a):(l--,d(u),t.debug(),a=setTimeout(i,e))};t.debug(),a=setTimeout(i,e)}const p=t=>{t!==i.def.slide&&(clearTimeout(a),clearInterval(a),i.gui.eve.off("presenter.transitioned",p))};i.gui.eve.on("presenter.transitioned",p)}];u.hop=[1e3,D,!0],u.parabola=[1e3,D,!0],u.hopmore=[1500,F,!0],u.cubic=[1500,F,!0],u.smooth=[1500,L,!0],u.smoothpath=[1500,function(t,e){let i=this.slide.paths,o=this.params;const s=this.gui;if(!i)return L(t,e);let n=o&&o[0]?i[o[0]]:Object.values(i)[0];if(!n)return L(t,e);const r=s.panelWidth/2,a=s.panelHeight/2,l=t.split(),c=e.split(),u=t.invert().apply({x:r,y:a}),h=e.invert().apply({x:r,y:a});h.x,u.x,h.y,u.y;let d=l.rotate,p=c.rotate;const f=Math.abs(d-p)>1e-6,g=l.scalex,y=c.scalex;let m=0;f&&(m=M(d,p));let _=y-g;const v=n.getTotalLength();let q=n.getPointAtLength(0),x=n.getPointAtLength(v-1e-4*v);const b=(x.alpha+360+180)%360-180,w=(q.alpha+360+180)%360-180,D=(b-q.alpha+360+180)%360-180;let F;return x=n.getPointAtLength(v),F=Snap.len2(q.x,q.y,x.x,x.y)>1e-5&&Snap.len2(u.x,u.y,h.x,h.y)>1e-5?Snap.matrix().twoPointTransform(q.x,q.y,x.x,x.y,u.x,u.y,h.x,h.y):Snap.matrix().translate(u.x-q.x,u.y-q.y),n.getId(),0,function(t){let e=0===(t=mina.easeinout(t))?q:1===t?x:n.getPointAtLength(t*v),i=0===t?w:1===t?b:e.alpha;i=(i+180)%360-180,e=F.apply(e);let o=g+_*t;const s=Snap.matrix().scale(o,o,r,a);let l=d+m*t;return"path"===n.type&&(l+=i-w-D*t),s.rotate(l,r,a),s.translate(r-e.x,a-e.y),s}},!0];const k={enter:l,exit:{},emphasis:c,transition:u};let I;eve.on("presenter.getEffects",function(){if(!I)return I=!0,k}),eve("presenter.addEffects",void 0,k).firstDefined()===k&&(I=!0)}(),IA_Designer.addCachedResource({"buttons_presenter.json":{version:.1,skip:{upload:!0,full_screen:!1},full_screen:{iconResource:"presenter.svg",activeIcon:"full_screen_button",inactiveIcon:"",events:{mouse:{click:"full_screenAction"}},place:"brcorner",position:{x:-40,y:-40},width:30,opacity:.3,activeDefault:!0,order:5,message:"Full Screen"},upload:{iconResource:"presenter.svg",activeIcon:"upload",inactiveIcon:"",events:{activate:"upload_active",init:"upload_init",mouse:{click:"uploadAction",longPress:"openFileLocal"}},place:"top",position:{x:40,y:5},width:30,opacity:.3,activeDefault:!0,message:"Upload a file. LongPress to load an svg file locally"}},"scalable_icons.svg":"PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB3aWR0aD0iMjAwcHgiIGhlaWdodD0iMjAwcHgiIHZpZXdCb3g9IjAgMCAyMDAgMjAwIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAyMDAgMjAwIiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnIGlkPSJpYV9kZXNpZ25lcl9yZWZsZWN0X3ZlcnQiPg0KCTxwb2x5Z29uIHBvaW50cz0iNi4zNjIsMTQuNyA2LjM2MiwwIDAsMTQuNyAJIi8+DQoJPHBvbHlnb24gZmlsbD0iIzlCOUE5QSIgcG9pbnRzPSI2LjM2MiwxNS4zIDYuMzYyLDMwIDAsMTUuMyAJIi8+DQo8L2c+DQo8ZyBpZD0iaWFfZGVzaWduZXJfcmVmbGVjdF9ob3JpeiI+DQoJPHBvbHlnb24gcG9pbnRzPSIyMy44NzgsNi45MzYgOS4xNzgsNi45MzYgMjMuODc4LDAuNTc0IAkiLz4NCgk8cG9seWdvbiBmaWxsPSIjOUI5QTlBIiBwb2ludHM9IjI0LjQ3OCw2LjkzNiAzOS4xNzgsNi45MzYgMjQuNDc4LDAuNTc0IAkiLz4NCjwvZz4NCjxnIGlkPSJpYV9kZXNpZ25lcl9sb2NrX2Nsb3NlZCI+DQoJPHJlY3QgeD0iMTkuNzg1IiB5PSIyNC4zOCIgb3BhY2l0eT0iMC4wNSIgZmlsbD0iI0ZGRkZGRiIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAgICAiIHdpZHRoPSIxMCIgaGVpZ2h0PSIxNSIvPg0KCTxwYXRoIGZpbGw9IiNGRkZGMDAiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLXdpZHRoPSIwLjUiIGQ9Ik0yOC45NDUsMzEuODA2di0zLjc4M2MtMC4wMDctMC4xNTYtMC4wODItMS41NTEtMS4xMTctMi41ODgNCgkJYy0wLjY5NC0wLjctMS42NC0xLjA1NS0yLjgwNC0xLjA1NWwtMC4yNzYsMC4wMDRjLTEuMjctMC4wMzktMi4yNzUsMC4zMTMtMy4wMDcsMS4wNDljLTEuMDI4LDEuMDMzLTEuMTEsMi40NC0xLjExNywyLjYxM3YzLjc2DQoJCWMtMC41MywwLjY4OC0wLjg0LDEuNTEzLTAuODQsMi4zOTl2NS4xNzVoMTB2LTUuMTc1QzI5Ljc4NSwzMy4zMTksMjkuNDc1LDMyLjQ5MywyOC45NDUsMzEuODA2eiBNMjUuNzAyLDM0LjY0MnYxLjYwOA0KCQljMCwwLjU0Ni0wLjQxMSwwLjk4Ny0wLjkxNywwLjk4N3MtMC45MTctMC40NDEtMC45MTctMC45ODd2LTEuNjA4Yy0wLjIyOS0wLjI1NC0wLjM1Ny0wLjU5Ni0wLjM1Ny0wLjk1NQ0KCQljMC0wLjc1OCwwLjU3MS0xLjM3MywxLjI3NC0xLjM3M2MwLjcwMiwwLDEuMjcyLDAuNjE1LDEuMjcyLDEuMzczQzI2LjA1OSwzNC4wNDgsMjUuOTMsMzQuMzg2LDI1LjcwMiwzNC42NDJ6IE0yNy42NDEsMzAuNjU0DQoJCWMtMC44MTItMC40OS0xLjc5My0wLjc4MS0yLjg1Ni0wLjc4MXMtMi4wNDYsMC4yOTEtMi44NTYsMC43ODJ2LTIuNTgyYzAuMDA4LTAuMjMyLDAuMTU3LTIuMjQsMi41NTgtMi4yODlWMjUuOGwwLjMtMC4wMTINCgkJbDAuMywwLjAxMnYtMC4wMTZjMi40NDQsMC4wNTEsMi41NTQsMi4xODQsMi41NTgsMi4yNjJ2Mi42MDhIMjcuNjQxeiIvPg0KPC9nPg0KPGcgaWQ9ImlhX2Rlc2lnbmVyX2xvY2tfb3BlbiI+DQoJPHJlY3QgeD0iMTkuNzgzIiB5PSIyNC4zOCIgb3BhY2l0eT0iMC4wNSIgZmlsbD0iI0ZGRkZGRiIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAgICAiIHdpZHRoPSIxMC4wMDIiIGhlaWdodD0iMTUiLz4NCgk8cGF0aCBmaWxsPSIjRkZGRjAwIiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS13aWR0aD0iMC41IiBkPSJNMjguOTQ0LDMwLjA3MmgtMS4zMDN2MC41ODJjLTAuODEyLTAuNDktMS43OTQtMC43ODEtMi44NTUtMC43ODENCgkJYy0xLjA2MywwLTIuMDQ2LDAuMjkxLTIuODU1LDAuNzgxdi0yLjU4YzAuMDA5LTAuMjMsMC4xNTctMi4yNCwyLjU1Ni0yLjI4OXYwLjAxNmwwLjMwMS0wLjAxMWwwLjI5OSwwLjAxMXYtMC4wMTcNCgkJYzEuMTEyLDAuMDIxLDEuNzM5LDAuNDc3LDIuMDk4LDAuOTczaDEuNDg2Yy0wLjE2Mi0wLjQzMi0wLjQyMi0wLjkwNi0wLjg0LTEuMzI0Yy0wLjY5NS0wLjY5Ny0xLjY0MS0xLjA1My0yLjgwNi0xLjA1Mw0KCQlsLTAuMjc2LDAuMDA0Yy0xLjI3LTAuMDM5LTIuMjc0LDAuMzE0LTMuMDA1LDEuMDQ5Yy0xLjAyOSwxLjAzMy0xLjExMSwyLjQ0MS0xLjExNywyLjYxM3YzLjc2Yy0wLjUzLDAuNjg4LTAuODQsMS41MTQtMC44NCwyLjQNCgkJdjUuMTc0aDkuOTk5di01LjE3NGMwLTAuODg3LTAuMzEzLTEuNzEyLTAuODQxLTIuNFYzMC4wNzJ6IE0yNS43LDM0LjY0djEuNjA4YzAsMC41NDUtMC40MDksMC45ODgtMC45MTUsMC45ODgNCgkJcy0wLjkxNy0wLjQ0My0wLjkxNy0wLjk4OFYzNC42NGMtMC4yMjktMC4yNTQtMC4zNTYtMC41OTQtMC4zNTYtMC45NTJjMC0wLjc1OSwwLjU3MS0xLjM3MywxLjI3MS0xLjM3Mw0KCQljMC43MDMsMCwxLjI3NCwwLjYxNCwxLjI3NCwxLjM3M0MyNi4wNTksMzQuMDQ4LDI1LjkzMSwzNC4zODYsMjUuNywzNC42NHoiLz4NCjwvZz4NCjxnIGlkPSJpYV9kZXNpZ25lcl9kaXNzZWxlY3QiPg0KCTxjaXJjbGUgZmlsbD0iI0ZGRkZGRiIgY3g9IjQwLjU2MyIgY3k9IjIyLjMzIiByPSI3LjUiLz4NCgk8Zz4NCgkJPHJlY3QgeD0iMzYuODE4IiB5PSIxOC41ODUiIGZpbGw9IiNGRkZGRkYiIHdpZHRoPSI3LjQ5MSIgaGVpZ2h0PSI3LjQ5MSIvPg0KCQk8Zz4NCgkJCTxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS13aWR0aD0iMS4xMjM4IiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50cz0iNDQuMzA5LDI1LjI3NCA0NC4zMDksMjYuMDc2IA0KCQkJCTQzLjUwOCwyNi4wNzYgCQkJIi8+DQoJCQkNCgkJCQk8bGluZSBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS13aWR0aD0iMS4xMjM4IiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS1kYXNoYXJyYXk9IjIuNzQ3LDIuNzQ3IiB4MT0iNDEuNTQ1IiB5MT0iMjYuMDc2IiB4Mj0iMzguNjAxIiB5Mj0iMjYuMDc2Ii8+DQoJCQk8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2Utd2lkdGg9IjEuMTIzOCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludHM9IjM3LjYyMSwyNi4wNzYgMzYuODE4LDI2LjA3NiANCgkJCQkzNi44MTgsMjUuMjc0IAkJCSIvPg0KCQkJDQoJCQkJPGxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2Utd2lkdGg9IjEuMTIzOCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBzdHJva2UtZGFzaGFycmF5PSIyLjc0NywyLjc0NyIgeDE9IjM2LjgxOCIgeTE9IjIzLjMxIiB4Mj0iMzYuODE4IiB5Mj0iMjAuMzY4Ii8+DQoJCQk8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2Utd2lkdGg9IjEuMTIzOCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludHM9IjM2LjgxOCwxOS4zODYgMzYuODE4LDE4LjU4NSANCgkJCQkzNy42MjEsMTguNTg1IAkJCSIvPg0KCQkJDQoJCQkJPGxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2Utd2lkdGg9IjEuMTIzOCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBzdHJva2UtZGFzaGFycmF5PSIyLjc0NywyLjc0NyIgeDE9IjM5LjU4NCIgeTE9IjE4LjU4NSIgeDI9IjQyLjUyNSIgeTI9IjE4LjU4NSIvPg0KCQkJPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLXdpZHRoPSIxLjEyMzgiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgcG9pbnRzPSI0My41MDgsMTguNTg1IDQ0LjMwOSwxOC41ODUgDQoJCQkJNDQuMzA5LDE5LjM4NiAJCQkiLz4NCgkJCQ0KCQkJCTxsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLXdpZHRoPSIxLjEyMzgiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLWRhc2hhcnJheT0iMi43NDcsMi43NDciIHgxPSI0NC4zMDkiIHkxPSIyMS4zNSIgeDI9IjQ0LjMwOSIgeTI9IjI0LjI5MyIvPg0KCQk8L2c+DQoJPC9nPg0KCTxnIG9wYWNpdHk9IjAuNyI+DQoJCTxnPg0KCQkJPHBhdGggZmlsbD0iI0VEMUU3OSIgZD0iTTM1LjE4MywyNy42MTljLTIuODgxLTIuOTE5LTIuODA2LTcuNjcyLDAuMTg4LTEwLjU5MWMyLjk5NC0yLjkyLDcuNzA5LTIuOTIsMTAuNTkxLDANCgkJCQljMi44ODEsMi45MTksMi44MDYsNy42NzMtMC4xODgsMTAuNTkxQzQyLjc4MSwzMC41MzgsMzguMDY2LDMwLjU3NCwzNS4xODMsMjcuNjE5eiIvPg0KCQk8L2c+DQoJCTxnPg0KCQkJDQoJCQkJPGVsbGlwc2UgdHJhbnNmb3JtPSJtYXRyaXgoMC43MDA5IDAuNzEzMiAtMC43MTMyIDAuNzAwOSAyOC4wNzExIC0yMi4yNTgxKSIgZmlsbD0iI0ZGRkZGRiIgY3g9IjQwLjU3NyIgY3k9IjIyLjM0NCIgcng9IjUuNzI2IiByeT0iNS44MzgiLz4NCgkJPC9nPg0KCQk8Zz4NCgkJCQ0KCQkJCTxyZWN0IHg9IjM5Ljc3OCIgeT0iMTUuOTM1IiB0cmFuc2Zvcm09Im1hdHJpeCgtMC43MTQgMC43MDAxIC0wLjcwMDEgLTAuNzE0IDg1LjM2MDEgOS45ODkxKSIgZmlsbD0iI0VEMUU3OSIgd2lkdGg9IjEuNzIzIiBoZWlnaHQ9IjEyLjk4NSIvPg0KCQk8L2c+DQoJPC9nPg0KPC9nPg0KPGcgaWQ9ImlhX2Rlc2lnbmVyX2NvbG9yX2NvbXBsZXhfc2VsZWN0Ij4NCgk8cGF0aCBmaWxsPSIjNTlDM0U4IiBkPSJNNDQuOTY2LDM4LjM5OWMwLDIuNC0yLDQuNC00LjQsNC40Yy0yLjM5OSwwLTQuMzk5LTItNC4zOTktNC40YzAtMi4zOTksMi00LjM5OSw0LjM5OS00LjM5OQ0KCQlDNDMuMDY2LDMzLjk5OSw0NC45NjYsMzUuOTk5LDQ0Ljk2NiwzOC4zOTl6Ii8+DQoJPHBhdGggZmlsbD0iI0ZGRDE2MyIgZD0iTTQ4LjE2Nyw0NC4wOTljMCwyLjQtMiw0LjQtNC40LDQuNGMtMi4zOTksMC00LjQtMi00LjQtNC40YzAtMi4zOTksMi4wMDEtNC4zOTksNC40LTQuMzk5DQoJCUM0Ni4xNjcsMzkuNjk5LDQ4LjE2Nyw0MS42OTksNDguMTY3LDQ0LjA5OXoiLz4NCgk8cGF0aCBmaWxsPSIjNERCRDkxIiBkPSJNMzkuNTY3LDQyLjY5OWMwLjI5OSwwLjEsMC42OTksMC4xLDAuOTk5LDAuMWMxLjksMCwzLjYwMS0xLjMsNC4yLTNjLTAuMy0wLjEtMC43LTAuMS0xLTAuMQ0KCQlDNDEuNzY3LDM5LjY5OSw0MC4xNjcsNDAuOTk5LDM5LjU2Nyw0Mi42OTl6Ii8+DQoJPHBhdGggZmlsbD0iI0YxNzFBQiIgZD0iTTQxLjg2Nyw0NC4wOTljMCwyLjQtMi4wMDEsNC40LTQuNCw0LjRzLTQuMzk5LTItNC4zOTktNC40YzAtMi4zOTksMi00LjM5OSw0LjM5OS00LjM5OQ0KCQlTNDEuODY3LDQxLjY5OSw0MS44NjcsNDQuMDk5eiIvPg0KCTxwYXRoIGZpbGw9IiNBRDdDQjciIGQ9Ik0zNi4zNjYsMzkuNzk5YzAuNjAxLDEuOCwyLjIwMSwzLDQuMiwzYzAuNCwwLDAuNywwLDEtMC4xYy0wLjYtMS44MDEtMi4yLTMtNC4yLTMNCgkJQzM3LjA2NywzOS42OTksMzYuNzY3LDM5Ljc5OSwzNi4zNjYsMzkuNzk5eiIvPg0KCTxwYXRoIGZpbGw9IiNFRTYyMjQiIGQ9Ik0zOS4zNjYsNDQuMDk5YzAsMS4yLDAuNSwyLjMsMS4zMDEsMy4xMDFjMC44LTAuODAxLDEuMy0xLjksMS4zLTMuMTAxYzAtMS4yMDEtMC41LTIuMy0xLjMtMy4xDQoJCUMzOS43NjcsNDEuNzk5LDM5LjM2Niw0Mi44OTksMzkuMzY2LDQ0LjA5OXoiLz4NCgk8cGF0aCBmaWxsPSIjRkZGRkZGIiBkPSJNNDEuNjY3LDQyLjY5OWMtMC4zLDAuMS0wLjcsMC4xLTEsMC4xYy0wLjMwMSwwLTAuNywwLTEtMC4xYzAuMTk5LTAuNjAxLDAuNi0xLjIsMS0xLjcNCgkJQzQxLjA2Niw0MS40OTksNDEuNDY2LDQyLjA5OSw0MS42NjcsNDIuNjk5eiIvPg0KCTxwYXRoIGZpbGw9IiMwMTAxMDEiIGQ9Ik00NS4wNjYsMzkuNjk5YzAuMTAxLTAuNCwwLjItMC44MDEsMC4yLTEuMmMwLTAuOS0wLjMtMS44LTAuOC0yLjYwMWMtMC4xLTAuMS0wLjItMC4xLTAuMy0wLjENCgkJYy0wLjEwMSwwLjEtMC4xMDEsMC4yLTAuMTAxLDAuM2MwLjUsMC43LDAuNywxLjUsMC43LDIuM2MwLDAuNC0wLjEsMC44MDEtMC4yLDEuMTAxYy0wLjMtMC4xMDEtMC42LTAuMTAxLTAuODk5LTAuMTAxDQoJCWMtMS4yLDAtMi4zLDAuNS0zLjEwMSwxLjJjLTAuOC0wLjgtMS44OTktMS4yLTMuMS0xLjJjLTAuMywwLTAuNjAxLDAtMC44OTksMC4xMDFjLTAuMTAxLTAuNC0wLjIwMS0wLjctMC4yMDEtMS4xMDENCgkJYzAtMi4zLDEuOS00LjIsNC4yLTQuMmMxLjEwMSwwLDIuMiwwLjQsMywxLjJjMC4xMDEsMC4xLDAuMiwwLjEsMC4zMDEsMGMwLjEtMC4xLDAuMS0wLjIsMC0wLjNjLTAuOS0wLjktMi0xLjQtMy4zMDEtMS40DQoJCWMtMi42LDAtNC42LDIuMS00LjYsNC42YzAsMC40LDAuMTAxLDAuOCwwLjIsMS4yYy0xLjksMC42LTMuMzAxLDIuMzk5LTMuMzAxLDQuNWMwLDIuNiwyLjEwMSw0LjcsNC42MDEsNC43DQoJCWMwLjMsMCwwLjYwMSwwLDAuODk5LTAuMTAxYzAuMTAxLDAsMC4yMDEtMC4xLDAuMjAxLTAuM2MwLTAuMS0wLjEwMS0wLjItMC4zMDEtMC4yYy0wLjMsMC4yLTAuNSwwLjItMC44LDAuMg0KCQljLTIuMywwLTQuMi0xLjktNC4yLTQuMmMwLTEuODk5LDEuMzAxLTMuNSwzLTRjMC41LDEuMywxLjYsMi40LDMsMi44Yy0wLjEsMC40LTAuMTk5LDAuODAxLTAuMTk5LDEuMmMwLDEuMiwwLjM5OSwyLjMsMS4xOTksMy4xMDENCgkJYy0wLjMsMC4zLTAuNjk5LDAuNi0xLjE5OSwwLjhjLTAuMTAxLDAtMC4yMDEsMC4yLTAuMTAxLDAuM3MwLjIsMC4yLDAuMywwLjFjMC41LTAuMTk5LDEtMC41LDEuMy0wLjg5OQ0KCQljMC44MDEsMC44LDEuOSwxLjIsMy4xMDEsMS4yYzIuNiwwLDQuNi0yLjEwMSw0LjYtNC43QzQ4LjM2Nyw0MS45OTksNDYuOTY2LDQwLjI5OSw0NS4wNjYsMzkuNjk5eiBNNDQuNDY2LDM5Ljk5OQ0KCQljLTAuNSwxLjItMS41LDIuMS0yLjcsMi4zOTljLTAuMi0wLjUtMC41LTEtMC44OTktMS4zOTljMC42OTktMC43LDEuNjk5LTEuMTAxLDIuOC0xLjEwMQ0KCQlDNDMuOTY2LDM5Ljk5OSw0NC4yNjcsMzkuOTk5LDQ0LjQ2NiwzOS45OTl6IE00MC41NjYsNDEuMzk5YzAuMzAxLDAuMzAxLDAuNjAxLDAuNywwLjcsMS4yYy0wLjIsMC0wLjUsMC4xMDEtMC43LDAuMTAxDQoJCXMtMC40OTksMC0wLjctMC4xMDFDNDAuMDY3LDQyLjA5OSw0MC4yNjcsNDEuNjk5LDQwLjU2Niw0MS4zOTl6IE0zNi42NjcsMzkuOTk5YzAuMTk5LDAsMC41LTAuMTAxLDAuNjk5LTAuMTAxDQoJCWMxLjEwMSwwLDIuMTAxLDAuNCwyLjgwMSwxLjEwMWMtMC40LDAuMzk5LTAuNywwLjg5OS0wLjksMS4zOTlDMzguMTY3LDQyLjA5OSwzNy4xNjcsNDEuMTk5LDM2LjY2NywzOS45OTl6IE0zOS42NjcsNDIuOTk5DQoJCWMwLjMsMC4xLDAuNiwwLjEsMC44OTksMC4xYzAuMzAxLDAsMC42MDEsMCwwLjktMC4xYzAuMSwwLjM5OSwwLjIsMC43LDAuMiwxLjFjMCwxLTAuNCwyLTEsMi44Yy0wLjYtMC42OTktMS0xLjY5OS0xLTIuOA0KCQlDMzkuNTY3LDQzLjY5OSwzOS41NjcsNDMuMzk5LDM5LjY2Nyw0Mi45OTl6IE00My43NjcsNDguMjk5Yy0xLjEsMC0yLjEtMC40LTIuOC0xLjFjMC43LTAuODAxLDEuMi0xLjksMS4yLTMuMTAxDQoJCWMwLTAuMzk5LTAuMTAxLTAuOC0wLjItMS4yYzEuNC0wLjM5OSwyLjUtMS4zOTksMy0yLjhjMS43LDAuNSwzLDIuMTAxLDMsNEM0Ny45NjYsNDYuNDk5LDQ2LjA2Niw0OC4yOTksNDMuNzY3LDQ4LjI5OXoiLz4NCjwvZz4NCjxnIGlkPSJpYV9kZXNpZ25lcl9tb3JlX29wcyI+DQoJPGNpcmNsZSBmaWxsPSIjRkZGRkZGIiBzdHJva2U9IiM1OUMzRTgiIHN0cm9rZS13aWR0aD0iMC40IiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIGN4PSI1NS42MiIgY3k9IjMyLjEyNCIgcj0iNy41Ii8+DQoJPGNpcmNsZSBmaWxsPSIjNTlDM0U4IiBjeD0iNTUuNjIiIGN5PSIyNi44OTciIHI9IjEuNjY0Ii8+DQoJPGNpcmNsZSBmaWxsPSIjNTlDM0U4IiBjeD0iNTUuNjIiIGN5PSIzNy4zNTEiIHI9IjEuNjY0Ii8+DQoJPGNpcmNsZSBmaWxsPSIjNTlDM0U4IiBjeD0iNTUuNjIiIGN5PSIzMi4xMjQiIHI9IjEuNjYzIi8+DQo8L2c+DQo8L3N2Zz4NCg==","handles.svg":"PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSINCgkgaWQ9IkxheWVyXzEiIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIgeG1sbnM6c3ZnPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIg0KCSB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgd2lkdGg9IjEwMHB4IiBoZWlnaHQ9IjEwMHB4Ig0KCSB2aWV3Qm94PSIwIDAgMTAwIDEwMCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTAwIDEwMCIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8ZyBpZD0ibW92ZV9oYW5kbGUiPg0KCTxyZWN0IHg9IjIuMDIxIiB5PSIyLjg5MiIgZmlsbD0iI0ZGQ0NBQSIgZmlsbC1vcGFjaXR5PSIwIiB3aWR0aD0iMjAiIGhlaWdodD0iMTAiLz4NCgkNCgkJPHBhdGggaWQ9Il94MzRfX3g1Rl9hcnJvd3MiIG9wYWNpdHk9IjAuOTY3IiBmaWxsPSIjRkZDQ0FBIiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS13aWR0aD0iMC45Mjk5IiBlbmFibGUtYmFja2dyb3VuZD0ibmV3ICAgICIgZD0iDQoJCU0yMS43NzQsMTMuMDUzbC00LjA2LTMuNzQ4djEuODc0aC0zLjk4M1Y3LjE5OGgxLjg3NWwtMy43NDgtNC4wNjFMOC4zODMsNy4xOThoMS44NzR2My45ODFINi4zMTRWOS4zMDVsLTQuMDYsMy43NDhsNC4wNiwzLjQ3NQ0KCQl2LTEuODc0aDMuOTgydjMuOTgySDguNDIybDMuNDM2LDQuMDIxbDMuNzQ4LTQuMDZoLTEuODc1di0zLjk4MWgzLjk4MnYxLjg3M0wyMS43NzQsMTMuMDUzTDIxLjc3NCwxMy4wNTN6Ii8+DQo8L2c+DQo8ZyBpZD0icm90YXRlX2hhbmRsZSI+DQoJPGNpcmNsZSBmaWxsPSIjRkZDQ0FBIiBmaWxsLW9wYWNpdHk9IjAiIGN4PSIzOC4xNSIgY3k9IjEyLjg5NyIgcj0iMTAiLz4NCgk8cGF0aCBpZD0icm91bmRfYXJyb3dzIiBmaWxsPSIjRkZDQ0FBIiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS13aWR0aD0iMC45NTI0IiBkPSJNNDcuNTE3LDE1LjQwMUg0MS4yNw0KCQljLTAuMzQ1LDAtMC42MjUsMC4yOC0wLjYyNSwwLjYyNWMwLDAuMzQ1LDAuMzI2LDAuNTg2LDAuNTkzLDAuODUzbDEuNzM2LDEuNzM1Yy0xLjMwMywxLjEwNS0yLjk4NSwxLjc3OS00LjgyOCwxLjc3OQ0KCQljLTMuNzEzLDAtNi43ODgtMi43MDMtNy4zODMtNi4yNDdoLTIuNTI1YzAuNjE1LDQuOTI5LDQuODEyLDguNzQ1LDkuOTA4LDguNzQ1YzIuNTM0LDAsNC44NDQtMC45NDcsNi42MDQtMi41MDNsMS43OSwxLjc4OQ0KCQljMC4zMzYsMC4zMzcsMC42MzIsMC43MiwwLjk3NywwLjcyYzAuMzQ1LDAsMC42MjUtMC4yOCwwLjYyNS0wLjYyNXYtNi4yNDZDNDguMTQxLDE1Ljk1LDQ4LjE0MSwxNS40MDEsNDcuNTE3LDE1LjQwMXoNCgkJIE0yOC43NzUsMTAuMzkzaDYuMjQ3YzAuMzQ1LDAsMC42MjUtMC4yOCwwLjYyNS0wLjYyNWMwLTAuMzQ1LTAuMzI2LTAuNTg2LTAuNTkzLTAuODUzTDMzLjMxOCw3LjE4DQoJCWMxLjMwNC0xLjEwNSwyLjk4Ni0xLjc3OCw0LjgzLTEuNzc4YzMuNzEzLDAsNi43ODgsMi43MDIsNy4zODMsNi4yNDZoMi41MjVjLTAuNjE4LTQuOTI5LTQuODE1LTguNzQ1LTkuOTEtOC43NDUNCgkJYy0yLjUzNCwwLTQuODQ0LDAuOTQ3LTYuNjA0LDIuNTAzbC0xLjc5LTEuNzg5Yy0wLjMzNi0wLjMzNy0wLjYzMy0wLjcyLTAuOTc3LTAuNzJzLTAuNjI1LDAuMjgtMC42MjUsMC42MjV2Ni4yNDYNCgkJQzI4LjE1LDkuODQ0LDI4LjE1LDEwLjM5MywyOC43NzUsMTAuMzkzeiIvPg0KPC9nPg0KPC9zdmc+DQo=","other_elements.svg":"PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB3aWR0aD0iNzcuNzM2cHgiIGhlaWdodD0iNjIuODU1cHgiIHZpZXdCb3g9IjAgMCA3Ny43MzYgNjIuODU1IiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCA3Ny43MzYgNjIuODU1IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnIGlkPSJvcGVuX21lbnVfYnV0dG9uIj4NCgk8cmVjdCB4PSIxIiB5PSIxIiBmaWxsPSIjRkZGRkZGIiBmaWxsLW9wYWNpdHk9IjAiIHdpZHRoPSIxNSIgaGVpZ2h0PSIyMCIvPg0KCTxwb2x5Z29uIHBvaW50cz0iNC42NjYsNy45OTkgOC41LDExLjgzMiAxMi4zMzMsNy45OTkgMTMuNSw5LjE2NSA4LjUsMTQuMTY1IDMuNSw5LjE2NSAJIi8+DQo8L2c+DQo8ZyBpZD0iZGVsZXRlX2dlbmVyaWMiPg0KCTxyZWN0IHg9IjIwLjQ0NiIgeT0iMy44NyIgZmlsbD0ibm9uZSIgd2lkdGg9IjE2LjAyOCIgaGVpZ2h0PSIxNi4wMjgiLz4NCgk8cGF0aCBkPSJNMzUuNDQ4LDcuMjM0bC00LjU0NSw0LjU0Nmw0LjU0NSw0LjU0NWMwLjY3NiwwLjY3NywwLjY3NiwxLjc3MSwwLDIuNDQ4Yy0wLjMzOCwwLjMzOC0wLjc4MSwwLjUwNy0xLjIyNCwwLjUwNw0KCQljLTAuNDQzLDAtMC44OS0wLjE2OS0xLjIyNy0wLjUwN2wtNC41NDYtNC41NDZsLTQuNTQ2LDQuNTQ2Yy0wLjMzNywwLjMzOC0wLjc4LDAuNTA3LTEuMjI0LDAuNTA3DQoJCWMtMC40NDIsMC0wLjg4OC0wLjE2OS0xLjIyNy0wLjUwN2MtMC42NzYtMC42NzYtMC42NzYtMS43NzEsMC0yLjQ0OGw0LjU0NS00LjU0NUwyMS40Niw3LjIzNGMtMC42NzYtMC42NzYtMC42NzYtMS43NzEsMC0yLjQ0Nw0KCQljMC42NzktMC42NzYsMS43NzEtMC42NzYsMi40NDcsMGw0LjU0Niw0LjU0NUwzMyw0Ljc4NmMwLjY3Ny0wLjY3NiwxLjc3MS0wLjY3NiwyLjQ0NywwQzM2LjEyNCw1LjQ2MiwzNi4xMjQsNi41NTgsMzUuNDQ4LDcuMjM0eiINCgkJLz4NCjwvZz4NCjxnIGlkPSJkZWxldGVfcm91bmRfZ2VuZXJpYyI+DQoJPHJlY3QgeD0iNDEuNjk1IiB5PSI0LjI5NyIgZmlsbD0ibm9uZSIgd2lkdGg9IjE1IiBoZWlnaHQ9IjE1Ii8+DQoJPHBhdGggZmlsbD0iI0E5MDAxRCIgZD0iTTQ5LjE5NSw0LjI5N2MtNC4xMjUsMC03LjUsMy4zNzUtNy41LDcuNXMzLjM3NSw3LjUsNy41LDcuNXM3LjUtMy4zNzUsNy41LTcuNVM1My4zMiw0LjI5Nyw0OS4xOTUsNC4yOTd6DQoJCSBNNDkuMTk1LDE3Ljc5N2MtMy4zLDAtNi0yLjY5Ny02LTZjMC0zLjMsMi43LTYsNi02czYsMi43LDYsNkM1NS4xOTUsMTUuMDk3LDUyLjQ5NSwxNy43OTcsNDkuMTk1LDE3Ljc5N3ogTTQ2LjE5NSwxMi41NDdoNnYtMS41DQoJCWgtNlYxMi41NDd6Ii8+DQo8L2c+DQo8ZyBpZD0iaW5oZXJpdF9nZW5lcmljIj4NCgk8cmVjdCB4PSIyMS42MDciIHk9IjI0LjQyNyIgZmlsbD0ibm9uZSIgd2lkdGg9IjExLjI2NiIgaGVpZ2h0PSIxNS4yMTYiLz4NCgk8cGF0aCBkPSJNMzIuNzczLDM0LjU5MWMtMC4xMjctMC4yNjMtMC4zMzQtMC4zOTUtMC42MTctMC4zOTVoLTIuMDQ3di05LjE5M2MwLTAuMS0wLjAzMy0wLjE4My0wLjEwNC0wLjI1DQoJCWMtMC4wNjUtMC4wNjQtMC4xNDYtMC4xMDEtMC4yMzYtMC4xMDFoLTcuNWMtMC4xNDUsMC0wLjI0NSwwLjA2NC0wLjMxMiwwLjIwM2MtMC4wNjMsMC4xNDItMC4wNDksMC4yNjIsMC4wNDMsMC4zNTlsMS43MDQsMi4wNDgNCgkJYzAuMDc5LDAuMDc2LDAuMTY3LDAuMTE1LDAuMjcsMC4xMTVoMy40MDZ2Ni44MTdoLTIuMDQ1Yy0wLjI4MSwwLTAuNDg3LDAuMTMyLTAuNjE1LDAuMzk1Yy0wLjEyMSwwLjI3MS0wLjA5MiwwLjUxOSwwLjA5NiwwLjczNQ0KCQlsMy40MDksNC4wOTFjMC4xMjgsMC4xNTYsMC4zMDMsMC4yMzQsMC41MjEsMC4yMzRjMC4yMjEsMCwwLjM5Ni0wLjA3OCwwLjUyMi0wLjIzNGwzLjQwNi00LjA5MQ0KCQlDMzIuODY5LDM1LjA5OCwzMi45MDIsMzQuODU0LDMyLjc3MywzNC41OTF6Ii8+DQo8L2c+DQo8ZyBpZD0icGVyY2VudF9zeW1ib2xfb24iPg0KCTxyZWN0IHg9IjQ4Ljk3NiIgeT0iMjUuMjQxIiBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS13aWR0aD0iMC4yIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHdpZHRoPSIxNSIgaGVpZ2h0PSIxNSIvPg0KCTx0ZXh0IHRyYW5zZm9ybT0ibWF0cml4KDEgMCAwIDEgNTEuMDQ1NyAzNi45MTQ4KSIgZm9udC1mYW1pbHk9IidBcmlhbE1UJyIgZm9udC1zaXplPSIxMy43MDk2Ij4lPC90ZXh0Pg0KPC9nPg0KPGcgaWQ9InBlcmNlbnRfc3ltYm9sX29mZiI+DQoJPHJlY3QgeD0iNDkuMTk3IiB5PSI0MS40MyIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2Utd2lkdGg9IjAuMiIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiB3aWR0aD0iMTUiIGhlaWdodD0iMTUiLz4NCgk8dGV4dCB0cmFuc2Zvcm09Im1hdHJpeCgxIDAgMCAxIDUxLjI2NjQgNTMuMTA0MikiIGZpbGw9IiNBRkFGQUYiIGZvbnQtZmFtaWx5PSInQXJpYWxNVCciIGZvbnQtc2l6ZT0iMTMuNzA5NiI+JTwvdGV4dD4NCjwvZz4NCjxnIGlkPSJhZGRfcm91bmRfZ2VuZXJpYyI+DQoJPHJlY3QgeD0iNC45ODIiIHk9IjM2LjE0MyIgZmlsbD0ibm9uZSIgd2lkdGg9IjE1IiBoZWlnaHQ9IjE1Ii8+DQoJPHBhdGggZD0iTTEyLjQ5NiwzNi4xOTFjLTQuMTI1LDAtNy41LDMuMzc1LTcuNSw3LjVzMy4zNzUsNy41LDcuNSw3LjVzNy41LTMuMzc1LDcuNS03LjVTMTYuNjIxLDM2LjE5MSwxMi40OTYsMzYuMTkxeg0KCQkgTTEyLjQ5Niw0OS42OTFjLTMuMywwLTYtMi42OTctNi02YzAtMy4yOTksMi43LTYsNi02czYsMi43MDEsNiw2QzE4LjQ5Niw0Ni45OTIsMTUuNzk2LDQ5LjY5MSwxMi40OTYsNDkuNjkxeiIvPg0KCTxnPg0KCQk8cmVjdCB4PSIxMS40OTYiIHk9IjM5LjY5MSIgd2lkdGg9IjIiIGhlaWdodD0iOCIvPg0KCQk8cmVjdCB4PSI4LjQ5NiIgeT0iNDIuNjkxIiB3aWR0aD0iOCIgaGVpZ2h0PSIyIi8+DQoJPC9nPg0KPC9nPg0KPGcgaWQ9InNldF91cF9nZW5lcmljIj4NCgk8cmVjdCB4PSIzMy42MDciIHk9IjI0LjQzNiIgZmlsbD0ibm9uZSIgd2lkdGg9IjExLjI2NiIgaGVpZ2h0PSIxNS4yMTUiLz4NCgk8cGF0aCBkPSJNNDQuNjc2LDI4Ljc1NGwtMy40MDYtNC4wOTFjLTAuMTI2LTAuMTU2LTAuMzAzLTAuMjMzLTAuNTIyLTAuMjMzYy0wLjIxOCwwLTAuMzkzLDAuMDc3LTAuNTIxLDAuMjMzbC0zLjQwOSw0LjA5MQ0KCQljLTAuMTg4LDAuMjE5LTAuMjE3LDAuNDY0LTAuMDk2LDAuNzM1YzAuMTI4LDAuMjYzLDAuMzM0LDAuMzk1LDAuNjE1LDAuMzk1aDIuMDQ1djYuODE3aC0zLjQwNmMtMC4xMDMsMC0wLjE4OSwwLjAzOS0wLjI3LDAuMTE2DQoJCWwtMS43MDQsMi4wNDdjLTAuMDkyLDAuMDk5LTAuMTA0LDAuMjE5LTAuMDQzLDAuMzZjMC4wNjUsMC4xMzgsMC4xNjcsMC4yMDIsMC4zMTIsMC4yMDJoNy41YzAuMDkyLDAsMC4xNzEtMC4wMzQsMC4yMzYtMC4xMDENCgkJYzAuMDY5LTAuMDY3LDAuMTA0LTAuMTUsMC4xMDQtMC4yNXYtOS4xOTNoMi4wNDdjMC4yODMsMCwwLjQ5LTAuMTMyLDAuNjE3LTAuMzk1QzQ0LjkwMiwyOS4yMjUsNDQuODY5LDI4Ljk4MSw0NC42NzYsMjguNzU0eiIvPg0KPC9nPg0KPGcgaWQ9ImNoZWNrX21hcmtfZ2VuZXJpYyI+DQoJPHBhdGggaWQ9Im1hcmsiIGZpbGw9IiMwNTIzMDUiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZD0iTTIzLjg3MSw1MC4wNzhsOC4xMTgsOS40Mg0KCQljNC4xMzctOC40MzIsOS4yMDEtMTYuMTg4LDE3LjM0LTIzLjU1M2MtNi4wOTEsMy40MzktMTIuODA2LDkuOTY1LTE4LjU0MiwxOC4wNDFMMjMuODcxLDUwLjA3OEwyMy44NzEsNTAuMDc4eiIvPg0KCTxwYXRoIGZpbGw9IiNGRkZGRkYiIGZpbGwtb3BhY2l0eT0iMCIgZD0iTTQxLjg3Nyw1OC44NTVjMCwyLjIwOS0xLjc5MSw0LTQsNGgtMTJjLTIuMjA5LDAtNC0xLjc5MS00LTR2LTEyYzAtMi4yMDksMS43OTEtNCw0LTRoMTINCgkJYzIuMjA5LDAsNCwxLjc5MSw0LDRWNTguODU1eiIvPg0KPC9nPg0KPC9zdmc+DQo=","controller_presenter_simple.json":{version:.1,skip:{presenter:!1},presenter:{iconResource:"presenter.svg",init:"presenterInit",group:"right",embedded:!0,position:{x:50,y:-20},corner:"tl",activeDefault:!1,properties:[],settings:{},button:{presenter_start_button:{activeIcon:"presenter_start_icon",inactiveIcon:"",events:{activate:"presenter_start_icon",mouse:{click:"presenter.start_presentation"}},activeDefault:!0,place:"top",position:{x:5,y:5},width:30,opacity:.3,message:"Start Presentation"},presenter_backward:{activeIcon:"presenter_backward",inactiveIcon:"empty",events:{activate:"presenter backward",mouse:{click:"presenter.backward",longPress:"presenter.home"}},activeDefault:!1,place:"bottom",position:{x:5,y:-40},width:20,opacity:.3,message:"Previous Slide. Long-click to got to first slide."},presenter_forward:{activeIcon:"presenter_forward",inactiveIcon:"empty",events:{activate:"presenter_forward",mouse:{click:"presenter.forward",longPress:"presenter.end"}},activeDefault:!1,place:"bottom",position:{x:35,y:-40},width:20,opacity:.3,message:"Next Slide. Long-click to got to last slide."}}}},"presenter.svg":"PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB3aWR0aD0iMjAwcHgiIGhlaWdodD0iMTAwcHgiIHZpZXdCb3g9IjAgMCAyMDAgMTAwIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAyMDAgMTAwIiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnIGlkPSJwcmVzZW50ZXJfc3RhcnRfaWNvbiI+DQoJPHJlY3Qgb3BhY2l0eT0iMCIgZmlsbD0iI0ZGRkZGRiIgd2lkdGg9IjIwIiBoZWlnaHQ9IjIwIi8+DQoJPHBhdGggZmlsbD0iIzJBMjc3MCIgZD0iTTIwLDEuODQ5VjIuNjhjMCwwLjQ5NC0wLjQwMiwwLjg5Ni0wLjg5NiwwLjg5NmgtMC4xMjJ2MTAuMDdjMCwwLjQ5NC0wLjQwMiwwLjg5Ni0wLjg5NiwwLjg5NmgtNy42MzgNCgkJdjEuMzE1bDMuMzIsMi40MzVjMC4yLDAuMTQ2LDAuMjQzLDAuNDI3LDAuMDk2LDAuNjI2Yy0wLjA4OCwwLjEyLTAuMjI0LDAuMTgzLTAuMzYxLDAuMTgzYy0wLjA5MiwwLTAuMTg1LTAuMDI4LTAuMjY1LTAuMDg3DQoJCWwtMi43OS0yLjA0NnYxLjY4NmMwLDAuMjQ3LTAuMjAxLDAuNDQ4LTAuNDQ4LDAuNDQ4Yy0wLjI0NywwLTAuNDQ4LTAuMjAxLTAuNDQ4LTAuNDQ4di0xLjY4NmwtMi43OSwyLjA0Ng0KCQljLTAuMTk5LDAuMTQ2LTAuNDgsMC4xMDMtMC42MjYtMC4wOTZjLTAuMTQ2LTAuMTk5LTAuMTA0LTAuNDgsMC4wOTYtMC42MjZsMy4zMi0yLjQzNXYtMS4zMTVIMS45MTQNCgkJYy0wLjQ5NCwwLTAuODk2LTAuNDAyLTAuODk2LTAuODk2VjMuNTc2SDAuODk2QzAuNDAyLDMuNTc2LDAsMy4xNzQsMCwyLjY4VjEuODQ5YzAtMC40OTQsMC40MDItMC44OTYsMC44OTYtMC44OTZoOC42NTZWMC40NDgNCgkJQzkuNTUyLDAuMjAxLDkuNzUyLDAsMTAsMGMwLjI0NywwLDAuNDQ4LDAuMjAxLDAuNDQ4LDAuNDQ4djAuNTA0aDguNjU2QzE5LjU5OCwwLjk1MywyMCwxLjM1NCwyMCwxLjg0OXogTTE5LjEwNCwyLjY4VjEuODQ5SDAuODk2DQoJCVYyLjY4SDE5LjEwNHogTTE4LjA4NiwxMy42NDZWMy41NzZIMS45MTR2MTAuMDdIMTguMDg2eiIvPg0KCTxyZWN0IHg9IjAuODk2IiB5PSIxLjg0OSIgZmlsbD0iIzlFREFFNSIgd2lkdGg9IjE4LjIwOCIgaGVpZ2h0PSIwLjgzMiIvPg0KCTxwb2x5Z29uIGZpbGw9IiM5RURBRTUiIHN0cm9rZT0iIzJBMjc3MCIgc3Ryb2tlLXdpZHRoPSIwLjQ5NzIiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgcG9pbnRzPSINCgkJNi44OTMsMTIuMTA0IDYuODkzLDQuOTI4IDEzLjEwNyw4LjUxNiAJIi8+DQo8L2c+DQo8ZyBpZD0icHJlc2VudGVyX2VkaXRvcl9pY29uIj4NCgk8cmVjdCB4PSIyMy42MjIiIG9wYWNpdHk9IjAiIGZpbGw9IiNGRkZGRkYiIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIvPg0KCTxwYXRoIGZpbGw9IiMyQTI3NzAiIGQ9Ik00My42MjIsMS44NDlWMi42OGMwLDAuNDk0LTAuNDAyLDAuODk2LTAuODk2LDAuODk2aC0wLjEyMXYxMC4wN2MwLDAuNDk0LTAuNDAyLDAuODk2LTAuODk2LDAuODk2SDM0LjA3DQoJCXYxLjMxNGwzLjMxOSwyLjQzNmMwLjIsMC4xNDYsMC4yNDMsMC40MjcsMC4wOTcsMC42MjZjLTAuMDg4LDAuMTItMC4yMjQsMC4xODMtMC4zNjEsMC4xODNjLTAuMDkzLDAtMC4xODUtMC4wMjctMC4yNjUtMC4wODYNCgkJbC0yLjc5LTIuMDQ3djEuNjg2YzAsMC4yNDctMC4yMDEsMC40NDctMC40NDgsMC40NDdjLTAuMjQ3LDAtMC40NDgtMC4yLTAuNDQ4LTAuNDQ3di0xLjY4NmwtMi43OSwyLjA0Nw0KCQljLTAuMTk5LDAuMTQ2LTAuNDgsMC4xMDMtMC42MjYtMC4wOTdjLTAuMTQ2LTAuMTk5LTAuMTA0LTAuNDc5LDAuMDk2LTAuNjI2bDMuMzItMi40MzZ2LTEuMzE0aC03LjYzOA0KCQljLTAuNDk0LDAtMC44OTYtMC40MDItMC44OTYtMC44OTZWMy41NzZoLTAuMTIyYy0wLjQ5NCwwLTAuODk2LTAuNDAyLTAuODk2LTAuODk2VjEuODQ5YzAtMC40OTQsMC40MDItMC44OTYsMC44OTYtMC44OTZoOC42NTYNCgkJVjAuNDQ4QzMzLjE3NCwwLjIwMSwzMy4zNzUsMCwzMy42MjIsMGMwLjI0NywwLDAuNDQ4LDAuMjAxLDAuNDQ4LDAuNDQ4djAuNTA0aDguNjU1QzQzLjIyLDAuOTUzLDQzLjYyMiwxLjM1NCw0My42MjIsMS44NDl6DQoJCSBNNDIuNzI2LDIuNjhWMS44NDlIMjQuNTE4VjIuNjhINDIuNzI2eiBNNDEuNzA4LDEzLjY0NlYzLjU3NkgyNS41MzZ2MTAuMDdINDEuNzA4eiIvPg0KCTxyZWN0IHg9IjI0LjUxOCIgeT0iMS44NDkiIGZpbGw9IiM5RURBRTUiIHdpZHRoPSIxOC4yMDgiIGhlaWdodD0iMC44MzIiLz4NCgk8cGF0aCBvcGFjaXR5PSIwLjgiIGZpbGw9IiNFMkQ4NUEiIHN0cm9rZT0iIzJBMjc3MCIgc3Ryb2tlLXdpZHRoPSIwLjc4ODUiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iDQoJCU0zOS41NDQsOC44MjRoLTAuNjgyYy0wLjEzNS0wLjU4LTAuMzY1LTEuMTIzLTAuNjY4LTEuNjE0bDAuNDgyLTAuNDgyYzAuMTY4LTAuMTY5LDAuMTY4LTAuNDQ1LDAtMC42MTVsLTEuMTEtMS4xMQ0KCQljLTAuMTctMC4xNjktMC40NDctMC4xNjktMC42MTUsMGwtMC40ODIsMC40ODNjLTAuNDkzLTAuMzA1LTEuMDM1LTAuNTM0LTEuNjEzLTAuNjY5VjQuMTM0YzAtMC4yNC0wLjE5Ni0wLjQzNC0wLjQzNi0wLjQzNGgtMS41NzENCgkJYy0wLjIzOSwwLTAuNDM0LDAuMTk0LTAuNDM0LDAuNDM0djAuNjgyYy0wLjU4LDAuMTM1LTEuMTIzLDAuMzY0LTEuNjE0LDAuNjY5bC0wLjQ4Mi0wLjQ4M2MtMC4xNjktMC4xNjktMC40NDUtMC4xNjktMC42MTQsMA0KCQlsLTEuMTExLDEuMTExYy0wLjE2OSwwLjE2OS0wLjE2OSwwLjQ0NSwwLDAuNjE0bDAuNDgzLDAuNDgyYy0wLjMwNSwwLjQ5MS0wLjUzNCwxLjAzNC0wLjY2OSwxLjYxNGgtMC42ODINCgkJYy0wLjI0LDAtMC40MzQsMC4xOTUtMC40MzQsMC40MzV2MS41NzFjMCwwLjIzOSwwLjE5NCwwLjQzNCwwLjQzNCwwLjQzNGgwLjY4MmMwLjEzNSwwLjU4LDAuMzY0LDEuMTIzLDAuNjY5LDEuNjE0bC0wLjQ4MywwLjQ4Mg0KCQljLTAuMTY5LDAuMTY5LTAuMTY5LDAuNDQ1LDAsMC42MTRsMS4xMTEsMS4xMTFjMC4xNjksMC4xNjksMC40NDUsMC4xNjksMC42MTQsMGwwLjQ4Mi0wLjQ4M2MwLjQ5MSwwLjMwNSwxLjAzNSwwLjUzNCwxLjYxNCwwLjY2OQ0KCQl2MC42ODJjMCwwLjI0LDAuMTk1LDAuNDM0LDAuNDM1LDAuNDM0aDEuNTcyYzAuMjM4LDAsMC40MzQtMC4xOTQsMC40MzQtMC40MzR2LTAuNjgyYzAuNTc5LTAuMTM1LDEuMTIxLTAuMzY0LDEuNjEzLTAuNjY5DQoJCWwwLjQ4MiwwLjQ4M2MwLjE2OCwwLjE2OSwwLjQ0NSwwLjE2OSwwLjYxNSwwbDEuMTEtMS4xMTFjMC4xNjgtMC4xNjksMC4xNjgtMC40NDUsMC0wLjYxNGwtMC40ODItMC40ODINCgkJYzAuMzAzLTAuNDkxLDAuNTMzLTEuMDM1LDAuNjY4LTEuNjE0aDAuNjgyYzAuMjM5LDAsMC40MzQtMC4xOTUsMC40MzQtMC40MzVWOS4yNTdDMzkuOTc5LDkuMDE5LDM5Ljc4Myw4LjgyNCwzOS41NDQsOC44MjR6DQoJCSBNMzMuNjM1LDEyLjIzOWMtMS4yMTIsMC0yLjE5Ni0wLjk4My0yLjE5Ni0yLjE5NnMwLjk4My0yLjE5NiwyLjE5Ni0yLjE5NnMyLjE5NiwwLjk4MywyLjE5NiwyLjE5NlMzNC44NDcsMTIuMjM5LDMzLjYzNSwxMi4yMzl6Ig0KCQkvPg0KPC9nPg0KPHBvbHlnb24gaWQ9InByZXNlbnRlcl9mb3J3YXJkIiBmaWxsPSIjOUVEQUU1IiBzdHJva2U9IiMyQTI3NzAiIHN0cm9rZS13aWR0aD0iMS4yIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50cz0iDQoJMjUuOTU1LDM5LjU2MiAyNS45NTUsMjIuMjQgNDAuOTU1LDMwLjkwMSAiLz4NCjxwb2x5Z29uIGlkPSJwcmVzZW50ZXJfYmFja3dhcmQiIGZpbGw9IiM5RURBRTUiIHN0cm9rZT0iIzJBMjc3MCIgc3Ryb2tlLXdpZHRoPSIxLjIiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgcG9pbnRzPSINCgkxOC45NTUsMzkuNTYyIDE4Ljk1NSwyMi4yNCAzLjk1NSwzMC45MDEgIi8+DQoNCgk8ZyBpZD0iZnVsbF9zY3JlZW5fYnV0dG9uIj4NCgk8cmVjdCB4PSIxMzkiIHk9IjMiIGZpbGw9IiNGRkZGRkYiIGZpbGwtb3BhY2l0eT0iMCIgd2lkdGg9IjIwLjAwMSIgaGVpZ2h0PSIyMC4wMDEiLz4NCgk8cGF0aCBkPSJNMTQxLjg1NiwxNS44NTdIMTM5VjIzaDcuMTQ0di0yLjg1NGgtNC4yODV2LTQuMjg2TDE0MS44NTYsMTUuODU3TDE0MS44NTYsMTUuODU3eiBNMTM5LDEwLjE0M2gyLjg1NlY1Ljg1N2g0LjI4NVYzSDEzOQ0KCQlWMTAuMTQzeiBNMTU2LjE0NCwyMC4xNDNoLTQuMjg1VjIzSDE1OXYtNy4xNDNoLTIuODU2VjIwLjE0M3ogTTE1MS44NTYsM3YyLjg1N2g0LjI4NXY0LjI4NkgxNTlWM0gxNTEuODU2eiIvPg0KPC9nPg0KCTxnIGlkPSJ1cGxvYWQiPg0KCTxyZWN0IHg9IjkwIiB5PSIzIiBmaWxsPSIjRkZGRkZGIiBmaWxsLW9wYWNpdHk9IjAiIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIvPg0KCTxwYXRoIGZpbGw9IiMyMzFGMjAiIGQ9Ik05NS42MDksOC4yNDZoMi4zNzV2Ni40NDJjMCwwLjIzNCwwLjE5MiwwLjQyNSwwLjQyNSwwLjQyNWgzLjE4NWMwLjIzNywwLDAuNDI0LTAuMTkyLDAuNDI0LTAuNDI1VjguMjQ2DQoJCWgyLjM3N2MwLjI2NiwwLjAwNCwwLjYyMS0wLjM0MywwLjMwMS0wLjcyN2wtNC4zOTMtNC4zOTZjLTAuMDktMC4wOS0wLjMzOS0wLjIyOS0wLjYsMGwtNC4zOTYsNC4zOTYNCgkJQzk0Ljk3Myw3Ljg5OCw5NS4zNTksOC4yNyw5NS42MDksOC4yNDZ6IE0xMDAuMDAyLDQuMDI4bDMuMzY0LDMuMzY0aC0xLjc3MWMtMC4yMzgsMC0wLjQyNiwwLjE4OS0wLjQyNiwwLjQyNXY2LjQzOWgtMi4zMzZWNy44MjENCgkJYzAtMC4yMzctMC4xOTEtMC40MjQtMC40MjUtMC40MjRoLTEuNzcxTDEwMC4wMDIsNC4wMjh6Ii8+DQoJPHBhdGggZmlsbD0iIzIzMUYyMCIgZD0iTTEwOS41OCwxNC4yNjNoLTIuNTAzYy0wLjIzNiwwLTAuNDI1LDAuMTg5LTAuNDI1LDAuNDI0djIuMzYxaC0xMy4zdi0yLjM2MQ0KCQljMC0wLjIzNy0wLjE5MS0wLjQyNC0wLjQyNC0wLjQyNGgtMi41MDNjLTAuMjM3LDAtMC40MjUsMC4xODktMC40MjUsMC40MjV2NS41NzdjMCwwLjIzNCwwLjE5MSwwLjQyNSwwLjQyNSwwLjQyNWgxOS4xNQ0KCQljMC4yMzYsMCwwLjQyNS0wLjE5MiwwLjQyNS0wLjQyNXYtNS41NzdDMTEwLjAwNCwxNC40NTUsMTA5LjgxMywxNC4yNjMsMTA5LjU4LDE0LjI2M3ogTTEwOS4xNDksMTkuODRIOTAuODU0di00LjcyNGgxLjY0OHYyLjM2NA0KCQljMCwwLjIzNCwwLjE5MSwwLjQyNSwwLjQyNSwwLjQyNWgxNC4xNDljMC4yMzYsMCwwLjQyNS0wLjE5MiwwLjQyNS0wLjQyNXYtMi4zNjRoMS42NDhWMTkuODRMMTA5LjE0OSwxOS44NHoiLz4NCjwvZz4NCg0KPC9zdmc+DQo="}),eve_ia&&(delete eve_ia._events,delete eve_ia._all_events),IA_Designer&&IA_Designer._disableCollectCache();
//# sourceMappingURL=ia-presenter.min.js.map