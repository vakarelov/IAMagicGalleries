/*
 * Copyright Â© 2023 Information Aesthetics. All rights reserved.
 * This work is licensed under the GPL2, V2 license.
 */

/*! ia-designer 06-11-2023
Copyright: Information Aesthetics, License:  GPL2, V2/*/

window.addEventListener("load",function(){let e;const t=wp.i18n.__;let i=window.location.href,s=i.includes("post-new.php"),n=document.getElementById("save-post"),l=document.getElementsByName("publish")[0];s&&(l&&(l.disabled=!0),n&&(n.disabled=!0));const o=()=>{eve_ia.on(["ia","gui","created"],function(t){let i=document.getElementsByClassName("iamg-loading-gif")[0];i&&i.remove(),this.eve.once(["presenter","loaded"],function(t){let i=iamg_settings.gallery_properties;if(e=iamg_settings.id,!i.type)return;const s=i.type;let n=i.images||[];const l=i.requested_images||[],o=i.resource;let a,r;for(let e in i)i.hasOwnProperty(e)&&e.startsWith(s)&&((a=a||{})[e]=i[e]);r=function(e,t){const i=[];let s=t.length;for(let n,l=0;l<e.length;l++){n=e[l].title;for(let o=0;o<s;o++){let a=t[(l+o)%s];if(n===a.title){i.push({id:n+"_"+a.id,url:e[l].thumbnail.url,title:n});break}}}return i}(n,l),t.eve(["iamg","load_gallery_setup"],void 0,s,r,a,o)}.bind(void 0,this))(100)}),eve_ia.on(["global","iamg","gallery","save"],function(e){const o=this;let a=document.getElementsByName("post_title")[0].value;if(!a)return void o.eve("gui.alert",t("Please, enter gallery title")+".",[200,100],[t("OK")]);const r={command:"save",locator:e,title:a,post_id:iamg_settings.post_id,is_gallery_post:!0};o.comManager.wpCommand(r,function(e){o.eve("gui.alert",t("Gallery is saved successfully")+".",[200,100],[t("OK")],[function(){s&&(i=i.replace(/post-new\.php.*/,"post.php?post="+iamg_settings.post_id+"&action=edit"),n&&(n.disabled=!1),n.click())}]),l&&(l.disabled=!1)},function(e){})})};window.IA_Presenter_loader&&IA_Presenter_loader(iamg_settings.settings,void 0,iamg_settings.resources,{after_callback:o})});
//# sourceMappingURL=boot_iamg_post_admin.min.js.map